

<!DOCTYPE html>
<html class="writer-html4" lang="zh-cn" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Python从小白变成大师教程（共十五万字） &mdash; PythonBook 1.0 文档</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript" src="_static/translations.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜索" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> PythonBook
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Python从小白变成大师教程（共十五万字）</a></li>
<li><a class="reference internal" href="#id1">前言、Python的前世和发展</a><ul>
<li><a class="reference internal" href="#id2">Python的前世</a></li>
<li><a class="reference internal" href="#id3">Python的特性</a></li>
<li><a class="reference internal" href="#id4">Python发展</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id5">1、 搭建Python的基础环境</a><ul>
<li><a class="reference internal" href="#id6">安装python的基础环境</a></li>
<li><a class="reference internal" href="#pycharm">安装Pycharm</a></li>
</ul>
</li>
<li><a class="reference internal" href="#jupyter-notebook">2、搭建Jupyter Notebook环境</a><ul>
<li><a class="reference internal" href="#id7">1、Jupyter notebook历史</a></li>
<li><a class="reference internal" href="#id8">2 、环境搭建</a></li>
<li><a class="reference internal" href="#conda">3、conda常见命令</a></li>
<li><a class="reference internal" href="#id9">4、虚拟环境搭建</a></li>
<li><a class="reference internal" href="#id10">5、修改jupyter notebook的打开路径</a></li>
<li><a class="reference internal" href="#pip-conda">6、pip 和conda的区别</a></li>
<li><a class="reference internal" href="#id11">1、官方文档</a></li>
<li><a class="reference internal" href="#jupter-notebook">2、创建一个jupter notebook</a></li>
<li><a class="reference internal" href="#notebook">3、Notebook使用</a></li>
<li><a class="reference internal" href="#id12">4、 编辑模式</a></li>
<li><a class="reference internal" href="#id13">5、命令模式</a></li>
<li><a class="reference internal" href="#markdown">6、Markdown语法</a></li>
<li><a class="reference internal" href="#latex">6、Latex数学公式</a></li>
<li><a class="reference internal" href="#id14">7、Notebook小技巧</a></li>
<li><a class="reference internal" href="#id15">8、保存文件</a></li>
<li><a class="reference internal" href="#id16">9、误删了怎么恢复</a></li>
<li><a class="reference internal" href="#id17">10、大招</a></li>
</ul>
</li>
<li><a class="reference internal" href="#git">4、学编程语言前，不了解Git，怎么入坑</a><ul>
<li><a class="reference internal" href="#id18">1、了解Git</a></li>
<li><a class="reference internal" href="#id19">2、 版本控制</a></li>
<li><a class="reference internal" href="#id20">3、Git安装</a></li>
<li><a class="reference internal" href="#id21">4、创建本地仓库</a></li>
<li><a class="reference internal" href="#id22">5、配置个人信息</a></li>
<li><a class="reference internal" href="#id23">6、 添加文件</a></li>
<li><a class="reference internal" href="#id24">7、修改文件</a></li>
<li><a class="reference internal" href="#id25">8、错误提交</a></li>
<li><a class="reference internal" href="#id26">9、 版本回退</a></li>
<li><a class="reference internal" href="#id27">10、回到原来版本</a></li>
<li><a class="reference internal" href="#id28">11、正确方法</a></li>
<li><a class="reference internal" href="#id29">12、 总结</a></li>
</ul>
</li>
<li><a class="reference internal" href="#github">5、开始Github和码云之旅，新手如何上路</a><ul>
<li><a class="reference internal" href="#id30">1、了解Github</a></li>
<li><a class="reference internal" href="#id31">2、注册Github</a></li>
<li><a class="reference internal" href="#id32">3、访问不了Github怎么办</a></li>
<li><a class="reference internal" href="#id33">4、了解一些项目页面</a></li>
<li><a class="reference internal" href="#id34">5、 在码云平台创建项目</a></li>
<li><a class="reference internal" href="#id35">6、Git创建项目</a></li>
<li><a class="reference internal" href="#id36">7、推送到远程仓库</a></li>
<li><a class="reference internal" href="#id37">8、更新到本地仓库</a></li>
<li><a class="reference internal" href="#id38">9、仓库成员管理</a></li>
<li><a class="reference internal" href="#id39">10、部署公钥管理</a></li>
<li><a class="reference internal" href="#id40">11、如何白嫖别人的资料</a></li>
<li><a class="reference internal" href="#id41">12、文章推荐</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id42">6、乘胜追击，将剩下的Git知识点搞定</a><ul>
<li><a class="reference internal" href="#id43">1、对比文件</a></li>
<li><a class="reference internal" href="#id44">2、文件删除</a></li>
<li><a class="reference internal" href="#id45">3、创建分支</a></li>
<li><a class="reference internal" href="#id46">4、合并分支</a></li>
<li><a class="reference internal" href="#id47">5、删除分支</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pycharm-python">7、连Pycharm都不知道怎么用，学什么Python</a><ul>
<li><a class="reference internal" href="#id48">1、设置Python 解释器</a><ul>
<li><a class="reference internal" href="#id49">1.1 远程配置</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id50">2、调整字体及其大小</a><ul>
<li><a class="reference internal" href="#id51">2.1 调整编辑器字体及其大小</a></li>
<li><a class="reference internal" href="#id52">2.2 调整控制台的字体及其大小</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id53">3、设置编码</a></li>
<li><a class="reference internal" href="#id54">4、修改文件背景颜色</a></li>
<li><a class="reference internal" href="#git-github">5、设置Git 和Github</a><ul>
<li><a class="reference internal" href="#id55">5.1 配置git</a></li>
<li><a class="reference internal" href="#id56">5.2 配置github</a></li>
<li><a class="reference internal" href="#id57">5.3  下载仓库内容</a></li>
</ul>
</li>
<li><a class="reference internal" href="#py">6 、新建.py文件时默认添加信息</a></li>
<li><a class="reference internal" href="#id58">7、恢复代码</a></li>
<li><a class="reference internal" href="#id59">8、代码换行</a></li>
<li><a class="reference internal" href="#reformat-code">9、Reformat Code</a></li>
<li><a class="reference internal" href="#id60">10、连接数据库</a></li>
<li><a class="reference internal" href="#debug">11、Debug</a></li>
<li><a class="reference internal" href="#id61">12、PyCharm 常用快捷键</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id62">8、第一篇、小白看的 Python 基础教程，详细得很</a><ul>
<li><a class="reference internal" href="#id63">1、基本概念</a><ul>
<li><a class="reference internal" href="#id64">1.1 四种类型</a></li>
<li><a class="reference internal" href="#id65">1.2 字符串</a></li>
<li><a class="reference internal" href="#id66">1.3 标识符的命名</a></li>
<li><a class="reference internal" href="#id67">1.4 对象</a></li>
<li><a class="reference internal" href="#id68">1.5 逻辑行和物理行</a></li>
<li><a class="reference internal" href="#id69">1.6 缩进</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id70">2、运算符与表达式</a><ul>
<li><a class="reference internal" href="#id71">2.1 运算符与其用法</a></li>
<li><a class="reference internal" href="#id72">2.2 运算符优先级</a></li>
<li><a class="reference internal" href="#id73">2.3 输出</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id74">3、控制流</a><ul>
<li><a class="reference internal" href="#if">3.1 if 语句</a></li>
<li><a class="reference internal" href="#while">3.2 while语句</a></li>
<li><a class="reference internal" href="#break">3.3 break语句</a></li>
<li><a class="reference internal" href="#continue">3.4 continue语句</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id75">4、函数</a><ul>
<li><a class="reference internal" href="#id76">4.1  函数形参</a></li>
<li><a class="reference internal" href="#id77">4.2 局部变量</a></li>
<li><a class="reference internal" href="#id78">4.3 默认参数</a></li>
<li><a class="reference internal" href="#id79">4.4 关键参数</a></li>
<li><a class="reference internal" href="#return">4.5 return 语句</a></li>
<li><a class="reference internal" href="#id80">4.6  文档字符串</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id81">5、模块</a><ul>
<li><a class="reference internal" href="#pyc">5.1 字节编译的.pyc文件</a></li>
<li><a class="reference internal" href="#from-import">5.2  from .. import</a></li>
<li><a class="reference internal" href="#name">5.3 模块的__name__</a></li>
<li><a class="reference internal" href="#dir">5.4 dir()函数</a></li>
<li><a class="reference internal" href="#del">5.5 del</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id82">6、数据结构</a><ul>
<li><a class="reference internal" href="#id83">6.1 列表</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id84">9、第二篇、小白看的 Python 基础教程，详细得很</a><ul>
<li><a class="reference internal" href="#id85">6.2 元组</a></li>
<li><a class="reference internal" href="#id86">6.3 字典</a></li>
<li><a class="reference internal" href="#id87">6.4 序列</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id88">10、第三篇、小白看的 Python 基础教程，详细得很</a><ul>
<li><a class="reference internal" href="#id89">7、面向对象编程</a></li>
<li><a class="reference internal" href="#id90">8、继承</a><ul>
<li><a class="reference internal" href="#id91">8.1 直接调用父类属性方法；</a></li>
<li><a class="reference internal" href="#id92">8.2 强制调用父类私有属性方法；</a></li>
<li><a class="reference internal" href="#id93">8.3 重写父类属性方法；</a></li>
<li><a class="reference internal" href="#init">8.4 调用父类的__init__方法</a></li>
<li><a class="reference internal" href="#id94">8.5 继承父类初始化过程中的参数</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id95">9、输入/输出</a></li>
<li><a class="reference internal" href="#id96">10、文件输入/输出</a></li>
<li><a class="reference internal" href="#id97">11、存储器</a></li>
<li><a class="reference internal" href="#id98">12、异常</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id99">11、最后一篇，小白看的Python基础教程，详细得很</a><ul>
<li><a class="reference internal" href="#id100">13、Python标准库</a><ul>
<li><a class="reference internal" href="#sys">13.1 sys模块</a></li>
<li><a class="reference internal" href="#os">13.2 os模块</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id101">14、类中的特别方法</a></li>
<li><a class="reference internal" href="#id102">15、列表推导式</a></li>
<li><a class="reference internal" href="#args">16、 *和**args区别</a></li>
<li><a class="reference internal" href="#lambda">17、lambda函数</a></li>
<li><a class="reference internal" href="#exec-eval">18、exec/eval</a></li>
<li><a class="reference internal" href="#assert">19、assert</a></li>
<li><a class="reference internal" href="#repr">20、repr</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id103">12、深入Python列表和元组</a><ul>
<li><a class="reference internal" href="#id104">什么是列表和元组</a></li>
<li><a class="reference internal" href="#id105">列表和元组常见的内置函数</a></li>
<li><a class="reference internal" href="#id106">列表和元组存储方式</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id107">13、深入Python字典和集合</a><ul>
<li><a class="reference internal" href="#id108">字典和集合</a></li>
<li><a class="reference internal" href="#id109">增删查找</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id110">14、深入Python条件和循坏</a><ul>
<li><a class="reference internal" href="#id111">条件控制</a></li>
<li><a class="reference internal" href="#id112">条件语句</a></li>
<li><a class="reference internal" href="#id113">循环语句</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id114">15、深入Python输入和输出</a><ul>
<li><a class="reference internal" href="#input">input</a></li>
<li><a class="reference internal" href="#id115">文件输入和输出</a></li>
<li><a class="reference internal" href="#json">json文件读取</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id116">16、深入Python字符串</a><ul>
<li><a class="reference internal" href="#id117">什么字符串</a></li>
<li><a class="reference internal" href="#id118">转义字符</a></li>
<li><a class="reference internal" href="#id119">常用操作</a></li>
<li><a class="reference internal" href="#id120">拼接字符串</a></li>
<li><a class="reference internal" href="#split">split分割</a></li>
<li><a class="reference internal" href="#id121">格式化</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id122">17、深入Python异常处理</a><ul>
<li><a class="reference internal" href="#id123">异常处理</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id124">18、深入Python函数</a><ul>
<li><a class="reference internal" href="#id125">函数</a></li>
<li><a class="reference internal" href="#id126">多态</a></li>
<li><a class="reference internal" href="#id127">函数嵌套</a></li>
<li><a class="reference internal" href="#id128">函数变量作用域</a></li>
<li><a class="reference internal" href="#id129">闭包</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id130">19、深入Python匿名函数</a><ul>
<li><a class="reference internal" href="#id131">1、匿名函数</a><ul>
<li><a class="reference internal" href="#id132">1.1 lambda 函数</a></li>
<li><a class="reference internal" href="#id133">1.2 函数式编程</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id134">2、其他函数</a><ul>
<li><a class="reference internal" href="#map">2.1 map</a></li>
<li><a class="reference internal" href="#filter">2.2 filter</a></li>
<li><a class="reference internal" href="#reduce">2.3 reduce</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id135">3、思考题</a><ul>
<li><a class="reference internal" href="#id136">3.1 如何根据值来排序</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id137">20、深入Python迭代器和生成器</a><ul>
<li><a class="reference internal" href="#id138">1、 迭代器</a><ul>
<li><a class="reference internal" href="#id139">1.1 容器</a></li>
<li><a class="reference internal" href="#id140">1.2 取值</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id141">2、生成器</a></li>
<li><a class="reference internal" href="#id142">3、 练习</a><ul>
<li><a class="reference internal" href="#id143">3.1 给定一个列表和一个数字，求这个数字的位置</a></li>
<li><a class="reference internal" href="#id144">3.2 判断第一个子列是不是第二个的子序列</a></li>
<li><a class="reference internal" href="#n-3-1-2-3-n-2">3.3 验证$1^3+2^3+3^3+……+n^3=(1+2+3+……+n)^2？$</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id145">21、深入Python强大的装饰器</a><ul>
<li><a class="reference internal" href="#id146">1、装饰器</a><ul>
<li><a class="reference internal" href="#id147">1.1 装饰器入门</a></li>
<li><a class="reference internal" href="#id148">1.2 带参数的装饰器</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id149">2、装饰器进阶</a><ul>
<li><a class="reference internal" href="#id150">2.1  类装饰器</a></li>
<li><a class="reference internal" href="#id151">2.2 装饰器的嵌套</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id152">3、装饰器用法实例</a><ul>
<li><a class="reference internal" href="#id153">3.1 身份认证</a></li>
<li><a class="reference internal" href="#id154">3.2 日志记录</a></li>
<li><a class="reference internal" href="#id155">3.3 输入合理性</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id156">22、上篇 | Python的进程和线程</a><ul>
<li><a class="reference internal" href="#id157">进程和线程</a></li>
<li><a class="reference internal" href="#id158">python线程和进程的使用</a></li>
<li><a class="reference internal" href="#id159">练习</a></li>
<li><a class="reference internal" href="#id160">线程间变量的共享</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id161">23、下篇 | Python线程和进程</a><ul>
<li><a class="reference internal" href="#id162">队列</a></li>
<li><a class="reference internal" href="#id163">线程池</a></li>
<li><a class="reference internal" href="#id164">多线程典型例子</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id165">24、深入Python多线程和多进程</a><ul>
<li><a class="reference internal" href="#id166">多进程和多线程</a></li>
<li><a class="reference internal" href="#id167">进程、线程、协程</a></li>
<li><a class="reference internal" href="#id168">多进程</a></li>
<li><a class="reference internal" href="#id169">进程间通信</a></li>
<li><a class="reference internal" href="#pipe">Pipe</a></li>
<li><a class="reference internal" href="#threading">多线程（threading）</a></li>
<li><a class="reference internal" href="#lock">线程同步—lock</a></li>
<li><a class="reference internal" href="#coroutine">协程 (coroutine )</a></li>
<li><a class="reference internal" href="#id170">分布式进程</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id171">25、深入Python中的协程</a><ul>
<li><a class="reference internal" href="#id172">协程是实现并发编程的一种方式</a></li>
<li><a class="reference internal" href="#id173">可等待对象</a></li>
<li><a class="reference internal" href="#id174">典型的例子</a></li>
<li><a class="reference internal" href="#id175">真实的爬虫</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pythontimeos">26、Python中的Time和os模块</a><ul>
<li><a class="reference internal" href="#datetime-time">日期与时间管理的库datetime 与time</a></li>
<li><a class="reference internal" href="#id176">os 操作模块</a><ul>
<li><a class="reference internal" href="#id177">OS模块重要函数和变量:</a></li>
<li><a class="reference internal" href="#id178">OS模块函数作用详解</a></li>
<li><a class="reference internal" href="#os-path">os.path模块</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#pythonpickle">27、Python序列化pickle标准库﻿</a><ul>
<li><a class="reference internal" href="#id179">序列化</a></li>
<li><a class="reference internal" href="#pickle">存储和读取 pickle 文件</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pythonlogging">28、Python中的日志处理logging模块</a><ul>
<li><a class="reference internal" href="#logging">日志logging</a></li>
<li><a class="reference internal" href="#id180">模块化组件使用</a></li>
</ul>
</li>
<li><a class="reference internal" href="#python-collections">29、Python标准库 collections</a><ul>
<li><a class="reference internal" href="#collections">collections</a></li>
<li><a class="reference internal" href="#ordereddict">有序字典（orderedDict)</a></li>
<li><a class="reference internal" href="#defaultdict">默认字典（defaultdict）</a></li>
<li><a class="reference internal" href="#namedtuple">可命名元组（namedtuple)</a></li>
<li><a class="reference internal" href="#deque">双向队列（deque)</a></li>
<li><a class="reference internal" href="#fifo">单向队列（先进先出 FIFO ）</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pythonjson">30、Python中的Json解析模块</a><ul>
<li><a class="reference internal" href="#id181">什么是json</a></li>
<li><a class="reference internal" href="#js">JS对象</a></li>
<li><a class="reference internal" href="#id182">JSON字符串</a></li>
<li><a class="reference internal" href="#id183">Python字典</a></li>
<li><a class="reference internal" href="#jsonapi">Json模块API</a></li>
<li><a class="reference internal" href="#id184">Json模块使用</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pythondocx">31、Python读写docx文件</a><ul>
<li><a class="reference internal" href="#id185">Python读写docx文件</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id186">32、教你Python制作简单的二维码</a><ul>
<li><a class="reference internal" href="#myqr">安装MyQR</a></li>
<li><a class="reference internal" href="#id187">动图</a></li>
<li><a class="reference internal" href="#id188">搜索范冰冰</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pythonpil">33、自从我会了Python中的PIL，发现了其实超级简单</a><ul>
<li><a class="reference internal" href="#pil">了解PIL</a></li>
<li><a class="reference internal" href="#id189">概念了解</a><ul>
<li><a class="reference internal" href="#id190">通道</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id191">图片尺寸</a><ul>
<li><a class="reference internal" href="#id192">坐标系统</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id193">Filter类</a></li>
<li><a class="reference internal" href="#id194">PIL所有操作</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pytesser3-pillow">34、使用pytesser3 和pillow完成图形验证码的识别</a><ul>
<li><a class="reference internal" href="#id195">灰度化</a></li>
<li><a class="reference internal" href="#id196">二值化</a></li>
<li><a class="reference internal" href="#id197">降噪</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pythonwindowpyinstaller">35、Python在window平台打包工具pyinstaller</a><ul>
<li><a class="reference internal" href="#pyinstaller">pyinstaller</a></li>
<li><a class="reference internal" href="#id198">计算机小助手例子</a></li>
<li><a class="reference internal" href="#id199">注意点：</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tkinter">36、上篇 | 教你玩转tkinter窗口</a><ul>
<li><a class="reference internal" href="#id200">窗口主体框架</a></li>
<li><a class="reference internal" href="#id201">窗口内容</a></li>
<li><a class="reference internal" href="#id202">控件</a></li>
<li><a class="reference internal" href="#id203">tkinter绑定事件</a></li>
<li><a class="reference internal" href="#id204">布局显示</a></li>
<li><a class="reference internal" href="#id205">制作一个日历</a></li>
<li><a class="reference internal" href="#id206">丰富我们的日历</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id207">37、下篇 | tkinter实现一个翻译软件</a></li>
<li><a class="reference internal" href="#id208">38、练习、Python<strong>判断一个信用卡号是否合理</strong></a><ul>
<li><a class="reference internal" href="#id209">代码</a></li>
<li><a class="reference internal" href="#id210">补充</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id211">39、Python对象的深浅拷贝，练习冒泡排序</a><ul>
<li><a class="reference internal" href="#id212">对象的深浅拷贝</a></li>
<li><a class="reference internal" href="#id213">冒泡排序</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id214">40、练习、Python的八皇后</a><ul>
<li><a class="reference internal" href="#id215">什么是八皇后</a></li>
<li><a class="reference internal" href="#id216">回溯法</a></li>
<li><a class="reference internal" href="#id217">代码</a></li>
<li><a class="reference internal" href="#id218">完整代码</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pythonstatistics">41、Python统计模块statistics</a><ul>
<li><a class="reference internal" href="#id219">Python统计模块statistics</a></li>
<li><a class="reference internal" href="#median">median－中位数</a></li>
<li><a class="reference internal" href="#id220">方差</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mooc-pythonscipy">42、MOOC课程 _ Python中的Scipy模块</a><ul>
<li><a class="reference internal" href="#scipy">SciPy的介绍</a></li>
<li><a class="reference internal" href="#id221">SciPy的常数</a></li>
<li><a class="reference internal" href="#optimize">optimize模块</a></li>
<li><a class="reference internal" href="#interpolate">插值-interpolate</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id222"></a></li>
<li><a class="reference internal" href="#pandas">43、去年pandas的笔记</a></li>
<li><a class="reference internal" href="#id223"></a><ul>
<li><a class="reference internal" href="#id224">1、pandas数据结构的介绍</a></li>
<li><a class="reference internal" href="#series">2、Series的操作</a><ul>
<li><a class="reference internal" href="#id225">2.1 对象创建</a></li>
<li><a class="reference internal" href="#id226">2.2 查看数据</a></li>
<li><a class="reference internal" href="#id227">2.3 Series的算术操作</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dataframe">3、dataframe的操作</a><ul>
<li><a class="reference internal" href="#id228">3.1 对象创建</a></li>
<li><a class="reference internal" href="#id229">3.2 选择数据</a></li>
<li><a class="reference internal" href="#id230">3.3 函数应用</a></li>
<li><a class="reference internal" href="#id231">3.4 统计概述和计算</a></li>
<li><a class="reference internal" href="#id232">3.5 数据读取</a></li>
</ul>
</li>
<li><a class="reference internal" href="#time-series">4、Time- Series的操作</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pythonstatsmodels">44、Python中的statsmodels模块</a><ul>
<li><a class="reference internal" href="#statsmodels">statsmodels入门</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id233">45、和我一起看看，国外的Python考试到底是怎么样（上篇）</a><ul>
<li><a class="reference internal" href="#id234">前言</a></li>
<li><a class="reference internal" href="#id235">第一题</a></li>
<li><a class="reference internal" href="#id236">第二题</a></li>
<li><a class="reference internal" href="#id237">第三题</a></li>
<li><a class="reference internal" href="#id238">第四题</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id239">46、和我一起看看，国外的Python考试到底是怎么样（下篇）</a><ul>
<li><a class="reference internal" href="#id240">第五题</a></li>
<li><a class="reference internal" href="#id241">第六题</a></li>
<li><a class="reference internal" href="#id242">第七题</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id243">47、第二份国外的Python考试（上篇）</a><ul>
<li><a class="reference internal" href="#id244">第一题</a></li>
<li><a class="reference internal" href="#id245">第二题</a></li>
<li><a class="reference internal" href="#id246">第三题</a></li>
<li><a class="reference internal" href="#id247">第四题</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id248">48、第二份国外的Python考试（下篇）</a><ul>
<li><a class="reference internal" href="#id249">第五题</a></li>
<li><a class="reference internal" href="#id250">最后一题</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mysqlpymysql">49、Mysql的命令总结和PyMysql</a><ul>
<li><a class="reference internal" href="#mysql">了解MySQL</a></li>
<li><a class="reference internal" href="#id251">MySql安装</a><ul>
<li><a class="reference internal" href="#id252">安装和配置</a></li>
<li><a class="reference internal" href="#id253">启动MySQL服务</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mysqll">MySQLl命令</a></li>
<li><a class="reference internal" href="#pythonmysql">Python连接Mysql</a></li>
</ul>
</li>
<li><a class="reference internal" href="#redis">50、Redis数据库学习</a><ul>
<li><a class="reference internal" href="#id254">Redis</a></li>
<li><a class="reference internal" href="#id255">redis安装</a></li>
<li><a class="reference internal" href="#id256">Redis数据模型</a></li>
<li><a class="reference internal" href="#id257">Redis基本使用</a><ul>
<li><a class="reference internal" href="#key">全局key操作</a></li>
<li><a class="reference internal" href="#string">String类型</a></li>
<li><a class="reference internal" href="#list">List类型</a></li>
<li><a class="reference internal" href="#hash">Hash类型</a></li>
<li><a class="reference internal" href="#set">Set类型</a></li>
<li><a class="reference internal" href="#sorted-set">Sorted Set类型</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#mongodb">51、学会MongoDB数据库</a><ul>
<li><a class="reference internal" href="#id258">MongoDB简介</a></li>
<li><a class="reference internal" href="#id259">MongoDB数据模型</a><ul>
<li><a class="reference internal" href="#id260">库级操作语句</a></li>
<li><a class="reference internal" href="#id261">集合操作语句</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id262">文档操作</a><ul>
<li><a class="reference internal" href="#id263">添加文档（数据）</a></li>
<li><a class="reference internal" href="#id264">查询文档（数据）</a></li>
<li><a class="reference internal" href="#id265">条件</a></li>
<li><a class="reference internal" href="#id266">修改文档（数据）</a></li>
<li><a class="reference internal" href="#id267">删除文档（数据）</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pythonmongodb">在Python程序中操作MongoDB</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vim">52、ViM的使用</a><ul>
<li><a class="reference internal" href="#linux">linux介绍</a></li>
<li><a class="reference internal" href="#id268">Linux系统发行版本</a></li>
<li><a class="reference internal" href="#id269">Linux常用命令</a></li>
<li><a class="reference internal" href="#vimpy">Vim编辑py文件</a></li>
<li><a class="reference internal" href="#id270">退出</a></li>
<li><a class="reference internal" href="#id271">移动光标</a></li>
<li><a class="reference internal" href="#id272">输入模式</a></li>
<li><a class="reference internal" href="#id273">删除</a></li>
<li><a class="reference internal" href="#id274">块操作</a></li>
<li><a class="reference internal" href="#id275">查找</a></li>
<li><a class="reference internal" href="#id276">替换 末行模式</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id277">53、Linux基础命令，用户管理和文件系统总结（上篇）</a><ul>
<li><a class="reference internal" href="#id278">基础命令</a></li>
<li><a class="reference internal" href="#id279">获取登录信息</a></li>
<li><a class="reference internal" href="#shell">查看自己使用的Shell</a></li>
<li><a class="reference internal" href="#id280">查看命令的说明和位置</a></li>
<li><a class="reference internal" href="#id281">清除屏幕上显示的内容</a></li>
<li><a class="reference internal" href="#id282">查看帮助文档</a></li>
<li><a class="reference internal" href="#id283">查看系统和主机名</a></li>
<li><a class="reference internal" href="#id284">时间和日期</a></li>
<li><a class="reference internal" href="#id285">重启和关机</a></li>
<li><a class="reference internal" href="#id286">退出登录</a></li>
<li><a class="reference internal" href="#id287">查看历史命令</a></li>
<li><a class="reference internal" href="#id288">文件和文件夹操作</a><ul>
<li><a class="reference internal" href="#id289">创建/删除空目录</a></li>
<li><a class="reference internal" href="#id290">创建/删除文件</a></li>
<li><a class="reference internal" href="#id291">切换和查看当前工作目录</a></li>
<li><a class="reference internal" href="#id292">查看目录内容</a></li>
<li><a class="reference internal" href="#id293">查看文件内容</a></li>
<li><a class="reference internal" href="#id294">拷贝/移动文件</a></li>
<li><a class="reference internal" href="#id295">文件重命名</a></li>
<li><a class="reference internal" href="#id296">查找文件和查找内容</a></li>
<li><a class="reference internal" href="#id297">创建链接和查看链接</a></li>
<li><a class="reference internal" href="#id298">压缩/解压缩和归档/解归档</a></li>
<li><a class="reference internal" href="#id299">归档和解归档</a></li>
<li><a class="reference internal" href="#id300">将标准输入转成命令行参数</a></li>
<li><a class="reference internal" href="#id301">显示文件或目录</a></li>
<li><a class="reference internal" href="#id302">其他相关工具</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id303">管道和重定向</a><ul>
<li><a class="reference internal" href="#id304">管道的使用</a></li>
<li><a class="reference internal" href="#id305">输出重定向</a></li>
<li><a class="reference internal" href="#id306">输入重定向</a></li>
<li><a class="reference internal" href="#id307">多重定向</a></li>
<li><a class="reference internal" href="#id308">别名</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id309">文本处理</a><ul>
<li><a class="reference internal" href="#id310">字符流编辑器</a></li>
<li><a class="reference internal" href="#id311">模式匹配和处理语言</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id312">用户管理</a></li>
<li><a class="reference internal" href="#id313">创建和删除用户</a></li>
<li><a class="reference internal" href="#id314">创建和删除用户组</a></li>
<li><a class="reference internal" href="#id315">修改密码</a></li>
<li><a class="reference internal" href="#id316">查看和修改密码有效期</a></li>
<li><a class="reference internal" href="#id317">以管理员身份执行命令</a></li>
<li><a class="reference internal" href="#sudoers">编辑sudoers文件</a></li>
<li><a class="reference internal" href="#id318">显示用户与用户组的信息</a></li>
<li><a class="reference internal" href="#id319">给其他用户发消息</a></li>
<li><a class="reference internal" href="#id320">文件系统</a></li>
<li><a class="reference internal" href="#id321">文件和路径</a></li>
<li><a class="reference internal" href="#id322">目录结构</a></li>
<li><a class="reference internal" href="#id323">访问权限</a><ul>
<li><a class="reference internal" href="#id324">改变文件模式</a></li>
<li><a class="reference internal" href="#id325">改变文件所有者</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id326">54、Linux网络管理，软件安装，进程管理总结（中篇）</a><ul>
<li><a class="reference internal" href="#id327">1、⽹络管理</a><ul>
<li><a class="reference internal" href="#id328">1.1 网络状态查看</a></li>
<li><a class="reference internal" href="#id329">1.2 网络配置文件</a></li>
<li><a class="reference internal" href="#id330">1.3 ⽹络故障排除命令</a></li>
<li><a class="reference internal" href="#id331">1.4 ⽹络服务管理</a></li>
<li><a class="reference internal" href="#ip">1.5 设置静态ip</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id332">2. 软件安装</a><ul>
<li><a class="reference internal" href="#rpm">2.1 rpm安装</a></li>
<li><a class="reference internal" href="#yum">2.2 yum 包管理器</a></li>
<li><a class="reference internal" href="#apt">2.3 apt安装</a></li>
<li><a class="reference internal" href="#make-install">2.4 make install编译源码安装</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id333">3. 进程管理</a><ul>
<li><a class="reference internal" href="#id334">3.1 杀进程</a></li>
<li><a class="reference internal" href="#id335">3.2 守护进程</a></li>
<li><a class="reference internal" href="#id336">3.3 查看进程</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#linuxshell">55、Linux磁盘管理和Shell编程（下篇）</a><ul>
<li><a class="reference internal" href="#id337">磁盘管理</a><ul>
<li><a class="reference internal" href="#id338">列出文件系统的磁盘使用状况</a></li>
<li><a class="reference internal" href="#id339">磁盘分区表操作</a></li>
<li><a class="reference internal" href="#id340">磁盘分区工具</a></li>
<li><a class="reference internal" href="#id341">格式化文件系统</a></li>
<li><a class="reference internal" href="#id342">文件系统检查</a></li>
<li><a class="reference internal" href="#id343">转换或拷贝文件</a></li>
<li><a class="reference internal" href="#id344">挂载/卸载</a></li>
<li><a class="reference internal" href="#id345">创建/激活/关闭交换分区</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id346">Shell</a><ul>
<li><a class="reference internal" href="#id347">新建Shell脚本</a></li>
<li><a class="reference internal" href="#id348">变量</a></li>
<li><a class="reference internal" href="#id349">预定义变量</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id350">语句</a><ul>
<li><a class="reference internal" href="#id351">if</a></li>
<li><a class="reference internal" href="#for">for 循环</a></li>
<li><a class="reference internal" href="#id352">打印</a></li>
<li><a class="reference internal" href="#test">test</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id353">Shell 函数</a></li>
<li><a class="reference internal" href="#id354">shell实例</a><ul>
<li><a class="reference internal" href="#id355">求和</a></li>
<li><a class="reference internal" href="#id356">创建文件夹和文件</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#pythonturtle">56、教用Python中的turtle海龟画图（上篇）</a><ul>
<li><a class="reference internal" href="#id357">画一条线</a></li>
<li><a class="reference internal" href="#id358">画一个正方形</a></li>
<li><a class="reference internal" href="#id359">画一个三角形</a></li>
<li><a class="reference internal" href="#id360">画一个圆</a></li>
<li><a class="reference internal" href="#id361">绘制梯形</a></li>
<li><a class="reference internal" href="#id362">画一个星星</a></li>
<li><a class="reference internal" href="#id363">画一个五角星</a></li>
<li><a class="reference internal" href="#id364">画一个图案</a></li>
<li><a class="reference internal" href="#id365">方法总结</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id366">57、教用Python中的turtle海龟画图（下篇）</a><ul>
<li><a class="reference internal" href="#id367">画一个朵花</a></li>
<li><a class="reference internal" href="#id368">酷炫的图形</a></li>
<li><a class="reference internal" href="#id369">画时钟</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id370">58、Python中的正则表达式</a><ul>
<li><a class="reference internal" href="#id371">正则表达式</a></li>
<li><a class="reference internal" href="#id372">元字符</a></li>
<li><a class="reference internal" href="#id373">反义代码</a></li>
<li><a class="reference internal" href="#id374">限定符</a></li>
<li><a class="reference internal" href="#id375">匹配ip地址</a></li>
<li><a class="reference internal" href="#id376">组匹配</a></li>
<li><a class="reference internal" href="#id377">贪婪与非贪婪</a></li>
<li><a class="reference internal" href="#id378">手机号码验证</a></li>
<li><a class="reference internal" href="#id379">匹配邮箱合法性</a></li>
<li><a class="reference internal" href="#id380">正则表达式测试工具</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pythonsocket">59、Python中的网络通信Socket</a><ul>
<li><a class="reference internal" href="#tcp">TCP</a></li>
<li><a class="reference internal" href="#id381">七层</a></li>
<li><a class="reference internal" href="#id382">三次握手，四次挥手</a></li>
<li><a class="reference internal" href="#socket">Socket</a></li>
<li><a class="reference internal" href="#id383">实现简单的通讯程序</a></li>
<li><a class="reference internal" href="#id384">多线程通信</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id385">60、网络通信Socket模块实现文件传输</a><ul>
<li><a class="reference internal" href="#id386">服务端</a></li>
<li><a class="reference internal" href="#id387">客户端</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pythonsmtplibemail">61、Python中的smtplib和email实现邮件发送</a><ul>
<li><a class="reference internal" href="#demo">测试Demo</a></li>
<li><a class="reference internal" href="#id388">标准发邮件的格式</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pythongil">62、多线程真的比单线程快？那是因为你不知道Python中的全局解释器锁GIL</a><ul>
<li><a class="reference internal" href="#id389">多线程比单线程快？</a></li>
<li><a class="reference internal" href="#gilpython">GIL并不是Python的特性</a></li>
<li><a class="reference internal" href="#gil">GIL本质就是一把互斥锁</a></li>
<li><a class="reference internal" href="#id390">计算密集型</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id391">63、面试最常见的问题：Python的垃圾回收机制到底是怎么样的？</a><ul>
<li><a class="reference internal" href="#id392">引用计数</a></li>
<li><a class="reference internal" href="#id393">内存空间</a></li>
<li><a class="reference internal" href="#id394">计数增加和减少</a></li>
<li><a class="reference internal" href="#id395">释放内存</a></li>
</ul>
</li>
<li><a class="reference internal" href="#leetcode-python">64、开始刷Leetcode之旅（Python版本）</a><ul>
<li><a class="reference internal" href="#leetcode">注册Leetcode账号</a></li>
<li><a class="reference internal" href="#pycharmleetcode">Pycharm装Leetcode插件</a></li>
<li><a class="reference internal" href="#id396">怎么刷Leetcode</a><ul>
<li><a class="reference internal" href="#id397">以前菜鸡的我做法</a></li>
<li><a class="reference internal" href="#id398">分类归纳/总结</a></li>
<li><a class="reference internal" href="#id399">三分学七分练</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id400">两数相加</a></li>
<li><a class="reference internal" href="#id401">关于学习课程</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id402">65、Leetcode数组系列（上篇）</a><ul>
<li><a class="reference internal" href="#array">数组 Array</a></li>
<li><a class="reference internal" href="#id403">三数之和</a></li>
<li><a class="reference internal" href="#id404">求众数</a></li>
<li><a class="reference internal" href="#id405">求缺失的第一个正数</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id406">66、Leetcode数组系列（中篇）</a><ul>
<li><a class="reference internal" href="#offer-03">剑指 Offer 系列 面试题03.：数组中重复的数字</a></li>
<li><a class="reference internal" href="#leetcode-5">LeetCode 第 5 题：最长回文子串</a></li>
<li><a class="reference internal" href="#leetcode-53">LeetCode 第 53 题：最大子序和</a></li>
<li><a class="reference internal" href="#leetcode-88">LeetCode 第88题 :合并两个有序数组</a></li>
<li><a class="reference internal" href="#leetcode-118">LeetCode 第118题 :杨辉三角</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id407">67、Leetcode数组系列（下篇）</a><ul>
<li><a class="reference internal" href="#offer-11">剑指 Offer 系列 面试题11 - 旋转数组的最小数字</a></li>
<li><a class="reference internal" href="#ii-0-n-1">面试题53 - II. 0～n-1中缺失的数字</a></li>
<li><a class="reference internal" href="#leetcode-66">LeetCode 第 66题：加一</a></li>
<li><a class="reference internal" href="#i-i">面试题53 - I. 在排序数组中查找数字的次数 I</a></li>
<li><a class="reference internal" href="#leetcode977">leetcode977：有序数组的平方</a></li>
</ul>
</li>
<li><a class="reference internal" href="#python-leetcode">68、Python | Leetcode链表系列（上篇）</a><ul>
<li><a class="reference internal" href="#linked-list">链表 Linked List</a></li>
<li><a class="reference internal" href="#id408">节点结构</a></li>
<li><a class="reference internal" href="#doubly-linked-list">双链表 Doubly Linked List</a></li>
<li><a class="reference internal" href="#id409">代码实现</a></li>
<li><a class="reference internal" href="#id410">链表的实现</a></li>
<li><a class="reference internal" href="#leetcode-2">LeetCode 第 2题：两数相加</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id411">69、Python | Leetcode链表系列（中篇）</a><ul>
<li><a class="reference internal" href="#leetcode-21">LeetCode  第21题：合并两个有序链表</a></li>
<li><a class="reference internal" href="#leetcode-23-k">LeetCode 第 23 题：合并 k 个排序链表</a></li>
<li><a class="reference internal" href="#leetcode-141">LeetCode 第 141 题：判断链表中是否有环</a></li>
<li><a class="reference internal" href="#leetcode-206">LeetCode 第 206 题：反转链表</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id412">70、Python | Leetcode链表系列（下篇）</a><ul>
<li><a class="reference internal" href="#leetcode-24">LeetCode  第24题：两两交换链表的节点</a></li>
<li><a class="reference internal" href="#leetcode-83">LeetCode  第83题：删除排序链表中的重复元素</a></li>
<li><a class="reference internal" href="#leetcode-148">LeetCode 第148题： 排序链表（重要）</a></li>
<li><a class="reference internal" href="#leetcode-876">LeetCode 第 876题： 链表的中间结点（重要）</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id413">71、Python | Leetcode字符串系列（上篇）</a><ul>
<li><a class="reference internal" href="#id414">字符串</a></li>
<li><a class="reference internal" href="#leetcode-3">LeetCode 第3题：无重复字符的最长子串</a></li>
<li><a class="reference internal" href="#leetcode-8-atoi">LeetCode 第8题：字符串转换整数 (atoi)</a></li>
<li><a class="reference internal" href="#leetcode-17">LeetCode 第17题：电话号码的字母组合</a></li>
<li><a class="reference internal" href="#leetcode-20">LeetCode 第20题：有效的括号</a></li>
<li><a class="reference internal" href="#leetcode-125">LeetCode 第125题：验证回文串</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id415">72、Python | Leetcode字符串系列（下篇）</a><ul>
<li><a class="reference internal" href="#leetcode-14">LeetCode 第14题：最长公共前缀</a></li>
<li><a class="reference internal" href="#leetcode-28-strstr">LeetCode 第28题：实现 strStr()</a></li>
<li><a class="reference internal" href="#leetcode-67">LeetCode 第67题： 二进制求和</a></li>
<li><a class="reference internal" href="#leetcode-344">LeetCode 第344题： 反转字符串</a></li>
<li><a class="reference internal" href="#leetcode-557-iii">LeetCode 第557题：  反转字符串中的单词 III</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id416">73、Python | Leetcode数字系列（上篇）</a><ul>
<li><a class="reference internal" href="#leetcode-9">LeetCode 第9题： 回文数</a></li>
<li><a class="reference internal" href="#leetcode-12">LeetCode 第12题：整数转罗马数字</a></li>
<li><a class="reference internal" href="#leetcode-13">LeetCode 第13题：整数转罗马数字</a></li>
<li><a class="reference internal" href="#leetcode-29">LeetCode 第29题： 两数相除</a></li>
<li><a class="reference internal" href="#leetcode-50-pow-x-n">LeetCode 第50题： Pow(x, n)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id417">74、Python | Leetcode数字系列（下篇）</a><ul>
<li><a class="reference internal" href="#leetcode-69-x">LeetCode 第 69题：x 的平方根</a></li>
<li><a class="reference internal" href="#leetcode-169">LeetCode 第 169题：多数元素</a></li>
<li><a class="reference internal" href="#leetcode-171-excel">LeetCode 第 171题：Excel表列序号</a></li>
<li><a class="reference internal" href="#leetcode-231-2">LeetCode 第 231题： 2的幂</a></li>
<li><a class="reference internal" href="#leetcode-279">LeetCode 第 279题： 完全平方数</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id418">75、Python | Leetcode哈希表系列</a><ul>
<li><a class="reference internal" href="#id419">哈希表</a></li>
<li><a class="reference internal" href="#leetcode-136">LeetCode 第 136题：只出现一次的数字</a></li>
<li><a class="reference internal" href="#leetcode-217">LeetCode 第 217题：存在重复元素</a></li>
<li><a class="reference internal" href="#offer-50">剑指 Offer 50. 第一个只出现一次的字符</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id420">76、Python | Leetcode二分查找和分治算法系列</a><ul>
<li><a class="reference internal" href="#id421">分治算法</a></li>
<li><a class="reference internal" href="#id422">分治算法例子</a></li>
<li><a class="reference internal" href="#id423">二分法查找</a></li>
<li><a class="reference internal" href="#id424">二分查找的变形问题</a></li>
<li><a class="reference internal" href="#leetcode-704">LeetCode 第 704题：标准的二分查找</a></li>
<li><a class="reference internal" href="#leetcode-34">LeetCode 第 34题：在排序数组中查找元素的第一个和最后一个位置</a></li>
<li><a class="reference internal" href="#id425">查找排序数组中，第一个大于等于目标值的下标（数组中可能不存在目标值）</a></li>
<li><a class="reference internal" href="#id426">查找排序数组中，最后一个小于等于目标值的下标（数组中可能不存在目标值）</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id427">77、Python | Leetcode栈和队列系列</a><ul>
<li><a class="reference internal" href="#id428">栈</a></li>
<li><a class="reference internal" href="#id429">队列</a></li>
<li><a class="reference internal" href="#leetcode-155">LeetCode 第 155题：最小栈</a></li>
<li><a class="reference internal" href="#leetcode-225">LeetCode 第 225题：用队列实现栈</a></li>
<li><a class="reference internal" href="#leetcode-232">LeetCode 第232题：用栈实现队列</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id430">78、Python | Leetcode位运算系列</a><ul>
<li><a class="reference internal" href="#id431">按位“与”运算</a></li>
<li><a class="reference internal" href="#id432">按位“或”运算</a></li>
<li><a class="reference internal" href="#id433">按位“异或”运算</a></li>
<li><a class="reference internal" href="#id434">按位取反运算</a></li>
<li><a class="reference internal" href="#id435">左移运算符</a></li>
<li><a class="reference internal" href="#id436">右移运算符</a></li>
<li><a class="reference internal" href="#id437">判断奇数还是偶数</a></li>
<li><a class="reference internal" href="#id438">左移一位相当于乘以2，右移一位相当于除以2</a></li>
<li><a class="reference internal" href="#id439">数值交换</a></li>
<li><a class="reference internal" href="#leetcode-78">LeetCode 第 78题：子集</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id440">79、Python | Leetcode 二叉树系列（上篇）</a><ul>
<li><a class="reference internal" href="#id441">树</a></li>
<li><a class="reference internal" href="#binary-tree">二叉树（binary Tree）</a></li>
<li><a class="reference internal" href="#id442">二叉树的遍历</a></li>
<li><a class="reference internal" href="#id443">实现二叉树</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id444">80、Python _ Leetcode 二叉树系列（中篇）</a><ul>
<li><a class="reference internal" href="#leetcode-102">LeetCode 第 102题：二叉树的层次遍历</a></li>
<li><a class="reference internal" href="#leetcode-104">LeetCode 第 104题：二叉树的最大深度</a></li>
<li><a class="reference internal" href="#leetcode-107-ii">LeetCode 第 107题：二叉树的层次遍历 II</a></li>
<li><a class="reference internal" href="#leetcode-110">LeetCode 第 110题：平衡二叉树</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id445">81、Python | Leetcode 二叉树系列（下篇）</a><ul>
<li><a class="reference internal" href="#leetcode-94">LeetCode 第 94题：二叉树的中序遍历</a></li>
<li><a class="reference internal" href="#leetcode-98">LeetCode 第 98题：验证二叉搜索树</a></li>
<li><a class="reference internal" href="#leetcode-105">LeetCode 第 105题：从前序与中序遍历序列构造二叉树</a></li>
<li><a class="reference internal" href="#leetcode-106">LeetCode 第 106题：从中序与后序遍历序列构造二叉树</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id446">82、Python |  Leetcode贪心算法系列</a><ul>
<li><a class="reference internal" href="#id447">贪心算法</a></li>
<li><a class="reference internal" href="#id448">最大和的连续子数组</a></li>
<li><a class="reference internal" href="#leetcode-55">LeetCode 第 55题：跳跃游戏</a></li>
<li><a class="reference internal" href="#leetcode-122-ii">LeetCode 第 122题： 买卖股票的最佳时机 II</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id449">83、Python _ Leetcode双指针系列</a><ul>
<li><a class="reference internal" href="#id450">双指针</a></li>
<li><a class="reference internal" href="#leetcode-15">LeetCode 第 15题：三数之和</a></li>
<li><a class="reference internal" href="#leetcode-16">LeetCode 第 16题：三数最近相加</a></li>
<li><a class="reference internal" href="#leetcode-27">LeetCode 第 27题：移除元素</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id451">84、Python | Leetcode回溯算法系列</a><ul>
<li><a class="reference internal" href="#id452">回溯算法</a></li>
<li><a class="reference internal" href="#leetcode51-08-12">Leetcode第51题，面试题 08.12：八皇后</a></li>
<li><a class="reference internal" href="#leetcode46">Leetcode第46题，全排列</a></li>
<li><a class="reference internal" href="#leetcode39">Leetcode第39题，组合总和</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id453">85、Python | Leetcode数据结构之图和动态规划算法系列</a><ul>
<li><a class="reference internal" href="#id454">图</a></li>
<li><a class="reference internal" href="#id455">度</a></li>
<li><a class="reference internal" href="#id456">邻接矩阵</a></li>
<li><a class="reference internal" href="#id457">邻接表</a></li>
<li><a class="reference internal" href="#dynamic-programming">动态规划算法Dynamic Programming</a></li>
<li><a class="reference internal" href="#leetcode64">Leetcode第64题：最小路径和</a></li>
<li><a class="reference internal" href="#leetcode70">Leetcode第70题：爬楼梯</a></li>
<li><a class="reference internal" href="#leetcode322">Leetcode第322题： 零钱兑换</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id458">86、Python | Leetcode深度和广度优先搜索算法系列</a><ul>
<li><a class="reference internal" href="#dfs">深度优先算法（DFS）</a></li>
<li><a class="reference internal" href="#bfs">广度优先算法（BFS）</a></li>
<li><a class="reference internal" href="#leetcode111">Leetcode第111题： 二叉树的最小深度</a></li>
<li><a class="reference internal" href="#leetcode112">Leetcode第112题： 路径总和</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id459">87、Python | 十大排序算法系列（上篇）</a><ul>
<li><a class="reference internal" href="#id460">冒泡排序</a></li>
<li><a class="reference internal" href="#id461">选择排序</a></li>
<li><a class="reference internal" href="#id462">插入排序</a></li>
<li><a class="reference internal" href="#id463">希尔排序</a></li>
<li><a class="reference internal" href="#id464">归并排序</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id465">88、Python | 十大排序算法系列（下篇）</a><ul>
<li><a class="reference internal" href="#id466">快速排序</a></li>
<li><a class="reference internal" href="#id467">堆排序</a></li>
<li><a class="reference internal" href="#id468">计数排序</a></li>
<li><a class="reference internal" href="#id469">桶排序</a></li>
<li><a class="reference internal" href="#id470">基数排序</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pythongui-pyqt5-gui">89、Python的GUI系列 _ 使用PyQt5 快速构建一个GUI 应用</a><ul>
<li><a class="reference internal" href="#pyqt5">Pyqt5的安装</a></li>
<li><a class="reference internal" href="#id471">添加外部设置工具</a></li>
<li><a class="reference internal" href="#qtdesigner">配置QtDesigner</a></li>
<li><a class="reference internal" href="#pyuic">配置PyUIC</a></li>
<li><a class="reference internal" href="#pyrcc">配置pyrcc</a></li>
<li><a class="reference internal" href="#qtdesignerqt">QtDesigner设计第一个QT应用</a></li>
<li><a class="reference internal" href="#ui-py">将一个.ui 文件生成一个.py文件</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pythongui-qtdesigner">90、Python的GUI系列 _ QtDesigner进行界面设计</a><ul>
<li><a class="reference internal" href="#ui">ui设计</a></li>
<li><a class="reference internal" href="#id472">布局</a><ul>
<li><a class="reference internal" href="#id473">绝对布局</a></li>
<li><a class="reference internal" href="#id474">水平盒布局</a></li>
<li><a class="reference internal" href="#id475">垂直盒布局</a></li>
<li><a class="reference internal" href="#id476">栅格布局</a></li>
<li><a class="reference internal" href="#id477">表单布局</a></li>
<li><a class="reference internal" href="#menu">菜单栏 Menu</a></li>
<li><a class="reference internal" href="#id478">工具栏</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#pythongui-qt">91、Python的GUI系列 _ QT组件篇</a><ul>
<li><a class="reference internal" href="#id479">主窗口</a></li>
<li><a class="reference internal" href="#id480">文本控件</a></li>
<li><a class="reference internal" href="#id481">文本输入框</a></li>
<li><a class="reference internal" href="#id482">按钮控件</a></li>
<li><a class="reference internal" href="#id483">完成计算器Demo</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id484">92、Python爬取深圳租房信息小案例</a><ul>
<li><a class="reference internal" href="#id485">1、前言</a></li>
<li><a class="reference internal" href="#id486">2、明确爬取的信息</a></li>
<li><a class="reference internal" href="#requests">3、 Requests访问链接</a></li>
<li><a class="reference internal" href="#xpath">4、 xpath解析内容</a></li>
<li><a class="reference internal" href="#id487">5、保存数据</a></li>
<li><a class="reference internal" href="#id488">6、全部代码</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pythonapi">93、Python使用百度云接口API实现截图，文字识别和语音合成</a><ul>
<li><a class="reference internal" href="#restful-api">接口RESTful API</a></li>
<li><a class="reference internal" href="#keyboard">安装keyboard</a></li>
<li><a class="reference internal" href="#id489">文字识别</a></li>
<li><a class="reference internal" href="#id490">语言合成</a></li>
</ul>
</li>
<li><a class="reference internal" href="#flask">94、一文带你玩转简单的flask</a><ul>
<li><a class="reference internal" href="#id491">Flask介绍</a></li>
<li><a class="reference internal" href="#id492">Flask安装</a><ul>
<li><a class="reference internal" href="#url">url参数快递</a></li>
<li><a class="reference internal" href="#id493">两种请求映射同一函数</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cookiesession">使用cookie和session</a><ul>
<li><a class="reference internal" href="#cookie">使用cookie</a></li>
<li><a class="reference internal" href="#session">使用session</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id494">渲染模板</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pythonexcel">95、轻松搞定Python中的Excel办公自动化系列</a><ul>
<li><a class="reference internal" href="#openpyxl">openpyxl</a></li>
<li><a class="reference internal" href="#xlrd-xlwt-xlutils">xlrd&amp;xlwt&amp;xlutils</a></li>
<li><a class="reference internal" href="#excel">合并文件夹中的多个Excel文件</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pythonppt">96、轻松搞定Python中的PPT办公自动化系列</a><ul>
<li><a class="reference internal" href="#python-pptx">安装python-pptx</a></li>
<li><a class="reference internal" href="#ppt">将一个PPT文件中的所有文字批量导出</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pythonpdf">97、轻松搞定Python中的PDF办公自动化系列</a><ul>
<li><a class="reference internal" href="#pdfminer3k">pdfminer3k</a></li>
<li><a class="reference internal" href="#pdf">读取PDF</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pythonmarkdown">98、轻松搞定Python中的Markdown系列</a><ul>
<li><a class="reference internal" href="#tomd">tomd</a></li>
<li><a class="reference internal" href="#mddocx">将md批量转为docx</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id495">99、Python所学经验分享</a><ul>
<li><a class="reference internal" href="#id496">关于我</a></li>
<li><a class="reference internal" href="#id497">书籍推荐</a></li>
<li><a class="reference internal" href="#id498">经验一：有个小目标</a></li>
<li><a class="reference internal" href="#id499">经验二：一个教程多看几遍，多看几个教程</a></li>
<li><a class="reference internal" href="#id500">经验三：学Python就是导包侠</a></li>
<li><a class="reference internal" href="#id501">经验四：持续写博客记录</a></li>
<li><a class="reference internal" href="#it-python">经验五：混IT，只会Python未来没戏</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id502">100、完结篇</a></li>
</ul>
</div>
            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PythonBook</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Python从小白变成大师教程（共十五万字）</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/PythonBook-Runsen.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="python">
<h1>Python从小白变成大师教程（共十五万字）<a class="headerlink" href="#python" title="永久链接至标题">¶</a></h1>
<p>人生最重要的不是所站的位置，而是内心所朝的方向。只要我在每篇博文中写得自己体会，修炼身心；在每天的不断重复学习中，耐住寂寞，练就真功，不畏艰难，奋勇前行，不忘初心，砥砺前行，人生定会有所收获，不留遗憾 （作者：Runsen</p>
<p>&#64;Author：Runsen</p>
<p>&#64;微信：RunsenLiu</p>
<p>&#64;公众号：Python之王</p>
<p><img alt="https://img-blog.csdnimg.cn/20200716234914987.jpg" src="https://img-blog.csdnimg.cn/20200716234914987.jpg" /></p>
</div>
<div class="section" id="id1">
<h1>前言、Python的前世和发展<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h1>
<div class="section" id="id2">
<h2>Python的前世<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h2>
<p>1989年圣诞节前夕，山雨欲来风满楼，计算机程序设计语言界隐隐有大事要发生，果然不出所料。江湖人称龟叔(Guido von Rossum)，就是这位祖籍荷兰的大牛，在圣诞节百无聊赖的期间，发明了Python。</p>
<p><img alt="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS9kZDA0ZDIyMS04Y2JjLTQ2M2QtODczNS1hMGUzZTQwODFjMzgucG5n?x-oss-process=image/format,png" src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS9kZDA0ZDIyMS04Y2JjLTQ2M2QtODczNS1hMGUzZTQwODFjMzgucG5n?x-oss-process=image/format,png" /></p>
<p>之所以选中Python作为程序的名字，是因为龟叔是BBC电视剧——蒙提·派森的飞行马戏团（Monty Python’s Flying Circus）的爱好者。ABC是由参加设计的一种教学语言。就龟叔本人看来，ABC这种语言非常优美和强大，是专门为非专业程序员设计的。</p>
<p>但是由于ABC语言并没有成功，究其原因，龟叔认为是非开放造成的。龟叔决心在Python中避免这一错误，并获取了非常好的效果，完美结合了C和其他一些语言。</p>
<p>就这样，Python在龟叔手中诞生了。那时，龟叔还在荷兰的CWI（Centrum voor Wiskunde en Informatica，国家数学和计算机科学研究院）。龟叔给Python的定位是“优雅”、“明确”、“简单”</p>
<p>1991年，第一个Python编译器诞生。它是用C语言实现的，并能够调用C语言的库文件。从一出生，Python已经具有了 ：类，函数，异常处理，包含表和词典在内的核心数据类型，以及模块为基础的拓展系统。</p>
<p>实际上，Python第一个实现是在 Mac 计算机上。可以说，Python是从ABC发展起来，主要受到了 Modula-3（另一种相当优美且强大的语言，为小型团体所设计的）的影响，并且结合了Unix shell 和C的习惯。</p>
<p>1991年初，Python发布了第一个公开发行版。</p>
<p>2000年10月16日，Python 2.0版本发布，增加了实现完整的垃圾回收，并且支持Unicode。同时，整个开发过程更加透明，社群对开发进度的影响逐渐扩大。</p>
<p>2008年12月3日，Python 3.0版本发布，此版不完全兼容之前的Python源代码。不过，很多新特性后来也被移植到旧的Python 2.6，2.7版本</p>
</div>
<div class="section" id="id3">
<h2>Python的特性<a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h2>
<p><img alt="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS8wNjFmZDlmNS0zNjJlLTQxMzMtOWE4OS05ZjI1ZmZjMGI4M2QucG5n?x-oss-process=image/format,png" src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS8wNjFmZDlmNS0zNjJlLTQxMzMtOWE4OS05ZjI1ZmZjMGI4M2QucG5n?x-oss-process=image/format,png" /></p>
<p>（1）简单易学：Python极其容易上手，因为Python有极其简单的说明文档。</p>
<p>（2）免费、开源：Python是FLOSS（自由/开放源码软件）之一。使用者可以自由地发布这个软件的拷贝、阅读它的源代码、对它做改动、把它的一部分用于新的自由软件中。</p>
<p>（3）高层语言：用Python语言编写程序的时候无需考虑诸如如何管理你的程序使用的内存一类的底层细节。</p>
<p>（4）可移植性：由于它的开源本质，Python已经被移植在许多平台上（经过改动使它能够工作在不同平台 上）。这些平台包括Linux、Windows、FreeBSD、Macintosh、Solaris、OS/2、Amiga、AROS、AS/400、 BeOS、OS/390、z/OS、Palm OS、QNX、VMS、Psion、Acom RISC OS、VxWorks、PlayStation、Sharp Zaurus、Windows CE、PocketPC、Symbian以及Google基于linux开发的android平台。</p>
<p>（5）丰富的库：Python标准库确实很庞大。它可以帮助处理各种工作，包括正则表达式、文档生成、单元测试、线程、数据库、网页浏览器、CGI、FTP、电子邮件、XML、XML-RPC、HTML、WAV文件、密码系统、GUI（图形用户界面）</p>
<p>上面介绍了Python的优点，其实python的也有缺点</p>
<p>（1）运行较慢：相较于c， c++  ，Java编译型语言，python、javascript解释型语言不是编译成机器码，而是编译成中间码。Python在解释器而不是编译器的帮助下执行，这将导致它变慢，因为编译和执行有助于它正常工作。</p>
<p>因为Python在定义变量或函数时不会声明类型，即使在编译为pyc字节码后变量的类型以及函数返回类型都是未知的，通过上下文推算出实际的类型，是需要占用内存消耗的。比如a + b 先要通过复杂的上下文推荐得出a和b的实际类型，进而再转换为对应的机器指令，不像其他强类型语言，比如java，所有数据类型在编译为class文件时都已经确定了，不需要额外耗时去做类型推算。</p>
<p>（2）性能差：Python的开箱即用的性能速度依然落后于其他语言，比如说具有同样简单语法的Nim和Julia，却可以被编译为机器代码，具有更高的性能优势。</p>
<p>比如，著名的知乎推荐系统用Go替代Python，随着业务发展，发现 Python 作为动态解释型语言，较低的运行效率和较高的后期维护成本带来的问题逐渐暴露出来：</p>
<ul class="simple">
<li>运行效率较低。知乎目前机房机柜空间已经不足，按照目前的用户和流量增长速度，可预见将在短期内服务器资源告急（针对这一点，知乎正在由单机房架构升级为异地多活架构）；</li>
<li>Python 过于灵活的语言特性，导致多人协作和项目维护成本较高</li>
</ul>
<p>毕竟Python是通用型，高级的动态编程语言。强调的是 code readability，它的句法使得程序员能够比在C++或者java的静态编程语言相比，编写更少的代码行数。</p>
<p>下面介绍一些的 Python常用高级特性</p>
<p>（1）lambda</p>
<p>lambda函数可以使用任意数量的参数，但必须始终只有一个表达式，我们这样做是因为lambda函数的目的是执行某种简单的表达式或操作，而无需完全使用def定义函数。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="n">x</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="p">:</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">x</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="mi">6</span>
</pre></div>
</div>
<p>我们执行了一些基本的数学运算，而无需定义完整的函数。这是Python的众多功能之一，使其成为一种简洁易用的编程语言。</p>
<p>（2）Map</p>
<p>Map函数是一个内置的Python函数，用于将函数应用于像列表或字典这样的元素序列。这是执行此类操作的非常干净且最重要的可读方式。map不改变原list，而是返回一个新list</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="p">,(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)))</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
</pre></div>
</div>
<p>（3）列表循环</p>
<p>列表解析式（List comprehension）或者称为列表推导式，是 Python 中非常强大和优雅的方法。它可以基于现有的列表做一些操作，从而快速创建新列表。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">a</span><span class="p">,</span><span class="o">*</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">d</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="n">a</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="mi">0</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">6</span><span class="p">]:</span> <span class="n">b</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">6</span><span class="p">]:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">7</span><span class="p">]:</span> <span class="n">c</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">7</span><span class="p">]:</span> <span class="mi">8</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">8</span><span class="p">]:</span> <span class="n">d</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">8</span><span class="p">]:</span> <span class="mi">9</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">9</span><span class="p">]:</span> <span class="p">[</span><span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="o">!=</span><span class="mi">0</span><span class="p">]</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">9</span><span class="p">]:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
</pre></div>
</div>
<p>（4）生成器</p>
<p>通过列表⽣成式，我们可以直接创建⼀个列表。但是，受到内存限制，列表容量肯定是有限的。</p>
<p>在Python中，这种⼀边循环⼀边计算的机制，称为⽣成器：generator。这样就不必创建完整的list，从⽽节省⼤量的空间。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">10</span><span class="p">]:</span> <span class="n">a</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">11</span><span class="p">]:</span> <span class="n">a</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">12</span><span class="p">]:</span> <span class="o">&lt;</span><span class="n">generator</span> <span class="nb">object</span> <span class="o">&lt;</span><span class="n">genexpr</span><span class="o">&gt;</span> <span class="n">at</span> <span class="mh">0x0000023269845750</span><span class="o">&gt;</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">13</span><span class="p">]:</span> <span class="nb">next</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">13</span><span class="p">]:</span> <span class="mi">0</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">14</span><span class="p">]:</span> <span class="nb">next</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">14</span><span class="p">]:</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
<div class="section" id="id4">
<h2>Python发展<a class="headerlink" href="#id4" title="永久链接至标题">¶</a></h2>
<p>进入2020年3月，新的编程语言排行榜新鲜出炉，TIOBE 最新发布了 3 月编程语言排行榜。</p>
<p><img alt="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS8xYzMxN2I1MS0yMTZjLTQyYzAtYjc3NS0yNWZmZWRmZWFhNWUucG5n?x-oss-process=image/format,png" src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS8xYzMxN2I1MS0yMTZjLTQyYzAtYjc3NS0yNWZmZWRmZWFhNWUucG5n?x-oss-process=image/format,png" /></p>
<p>从榜单中我们可以看到，前三名分别为Java、C、Python。相较于上个月，Python继续以1.85% 上升至 10.11%，以10.11%  的份额稳居第三。</p>
<p>Python可以应用于众多领域，如：数据分析、组件集成、网络服务、图像处理、数值计算和科学计算等众多领域。目前业内几乎所有大中型互联网企业都在使用Python，如：Youtube、Dropbox、BT、Quora（中国知乎）、豆瓣、知乎、Google、Yahoo!、Facebook、NASA、百度、腾讯、汽车之家、美团等。互联网公司广泛使用Python来做的事一般有：自动化运维、自动化测试、大数据分析、爬虫、Web 等。</p>
<p>不可否认，Python 确实是这个时代最流行、也必须要掌握的编程语言。Python 可以运用在数据处理、Web 开发、人工智能等多个领域，它的语言简洁、开发效率高、可移植性强，并且可以和其他编程语言（比如 C++）轻松无缝衔接。现如今，不少学校的文科生甚至中学生也开设了此课程，可见其重要程度。</p>
<p>Python职业发展方向</p>
<p>（1）网络爬虫</p>
<p>Python较为常用的情况就是网络爬虫，最早使用Python进行网络爬虫的是Google，而Python也因此被带动发展起来。</p>
<p>Python在这个方面有许多工具上的积累，例如，用于模拟HTTP请求的Requests、用于HTML DOM解析的PyQuery/BeautifulSoup、用于自动化分布式爬取任务的Scrapy，都使得Python成为数据爬取的首选语言之一。Python同时特别擅于分析与计算爬取后的数据。</p>
<p>（2）Linux运维</p>
<p>用python实现的测试工具及过程，包含服务器端、客户端、web、andriod、client端的自动化测试，自动化性能测试的执行、监控和分析，常用selenium appium等框架。</p>
<p>（3）Python Web网站工程师</p>
<p>我们都知道Web一直都是不可忽视的存在，我们离不开网络，离不开Web，利用Python的框架，Django，flask可以做网站，而且都是一些精美的前端界面，还有我们需要掌握一些数据的应用。</p>
<p>（4）Python自动化测试</p>
<p>大家都知道，就是Python语言对测试的帮助是非常大的，自动化测试中Python语言的用途很广，可以说Python太强大，掌握和熟悉自动化的流程，方法和我们总使用的各个模板，到现在为止，我了解的Python使用最多的应该是自动化测试。</p>
<p>（5）数据分析</p>
<p>我们都知道现在来临了大数据的时代，数据可以说明一切问题的原因，现在很多做数据分析的不是原来那么简单，Python语言成为了做数据分析师的第一首选，它同时可以给工作带来很大的效率。</p>
<p>（6）人工智能</p>
<p>人工智能是现在大火的一个方向，这让Python语言的未来充满了无限的潜力。机器学习，特别是当前热门的深度学习中的大部分工具框架都提供了Python接口，因为Python的简洁清晰的语法是深受开发者喜爱的。</p>
<p>&#64;Author ： By Runsen</p>
</div>
</div>
<div class="section" id="id5">
<h1>1、 搭建Python的基础环境<a class="headerlink" href="#id5" title="永久链接至标题">¶</a></h1>
<div class="section" id="id6">
<h2>安装python的基础环境<a class="headerlink" href="#id6" title="永久链接至标题">¶</a></h2>
<p>首先，我们需要访问Python官网：https://www.python.org/。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510185558709.png" src="https://img-blog.csdnimg.cn/20200510185558709.png" /></p>
<p>目前Python更新到3.8.2版本，这里我不建议大家安装Python3.8.2版本，而是选择安装Python3.6或者3.7稳定版。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510185650725.png" src="https://img-blog.csdnimg.cn/20200510185650725.png" /></p>
<p>下载后，双击下载包exe，进入 Python 安装向导，安装非常简单，你只需要使用默认的设置一直点击”下一步”直到安装完成即可，但是要记住在安装的过程需要选择“ADD Python3.6 to PATH”，这样是为了添加Python到环境变量。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510185704207.png" src="https://img-blog.csdnimg.cn/20200510185704207.png" /></p>
<p>如果你选择的是默认安装而不是自定义安装，可以忽略以下步骤，如下图这页默认全选，点击Next</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510185725205.png" src="https://img-blog.csdnimg.cn/20200510185725205.png" /></p>
<p>如下图，打对勾的保持默认即可，下面红框是选择安装路径，其实我选择自定义安装的目的就是不想把程序安装在c盘，点击Install 等待安装完成</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510185750708.png" src="https://img-blog.csdnimg.cn/20200510185750708.png" />
下面这个就是安装成功了，安装成功，我们就点击关闭就可以了close</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510185806525.png" src="https://img-blog.csdnimg.cn/20200510185806525.png" /></p>
<p>那截止到这这个环境是安装好了是吧，那接下来我们是不是Python环境验证一下。我们用win+R打开命令窗口， 输入cmd点击确定。</p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/20200510185819568.png" /></p>
<p>查看python版本，如下图可以看到是我们上面所安装的python 3.6.7</p>
<p><img alt="https://img-blog.csdnimg.cn/2020051018584552.png" src="https://img-blog.csdnimg.cn/2020051018584552.png" />
python3.6之后版本都是有pip的，pip是Python安装包的管理工具，如下图可以看到安装python3.6.7之后就有了pip，如果是 command not found 那说明没有安装。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510185900328.png" src="https://img-blog.csdnimg.cn/20200510185900328.png" /></p>
<p>下面，我们在命令窗口中，输入python，打开python最原始的交互环境，打印一个hello python，也就是print(“hello python)</p>
<p><img alt="在这里插入图片描" src="https://img-blog.csdnimg.cn/20200510185913497.png" /></p>
<p>在这里输完之后直接点击回车，点击回车之后，然后Python执行我们的语句。打印这个hello python
在这里，window系统Python安装完毕。</p>
</div>
<div class="section" id="pycharm">
<h2>安装Pycharm<a class="headerlink" href="#pycharm" title="永久链接至标题">¶</a></h2>
<p><img alt="https://img-blog.csdnimg.cn/20200510190124221.png" src="https://img-blog.csdnimg.cn/20200510190124221.png" /></p>
<p>选择下载window版本的Pycharm。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510190145246.png" src="https://img-blog.csdnimg.cn/20200510190145246.png" /></p>
<p>下载完成后，我们点击exe文件进行安装，安装会弹出下面界面，我们直接选择Next</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510190158960.png" src="https://img-blog.csdnimg.cn/20200510190158960.png" /></p>
<p>下面界面就是选择安装目录。我们尽量不要默认安装，默认安装它是装C盘里了，你自己安装路径。但是注意注意有一点：安装路径千万不要中文。如果有中文的话可能会出问题。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510190219685.png" src="https://img-blog.csdnimg.cn/20200510190219685.png" /></p>
<p>然后点击下一步选择安装路径之后，点击下一步。
下一步完之后，它告诉你什么，创建一个桌面程序，它是64位的还是32位的，其实这里面不用多选
基本都是64位的操作系统。</p>
<p><img alt="在这里插入图片描" src="https://img-blog.csdnimg.cn/20200510190300112.png" />
点击下一步，我们不需要修改名字，直接点击install安装。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510190316166.png" src="https://img-blog.csdnimg.cn/20200510190316166.png" /></p>
<p>下面就是等待安装完成这个过程，不用管就等就行了，然后这就是安装完成了。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510190333204.png" src="https://img-blog.csdnimg.cn/20200510190333204.png" />
然后双击我们第一次使用PyCharm双击它，完之后弹出来一个小框，这个小框当中它是做什么的，就告诉我们是不是导入一些基本设置。我们第一次用之前也没有设置，那么就不导入了，直接就是do not，选择这个，然后OK。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510190352416.png" src="https://img-blog.csdnimg.cn/20200510190352416.png" /></p>
<p>OK完，这里边必须要让你同意服务条款，这边是什么都不用管了。把右侧的这个滚动条滑到最底部
点击accept同意这个按钮。</p>
<p><img alt="https://img-blog.csdnimg.cn/2020051019041190.png" src="https://img-blog.csdnimg.cn/2020051019041190.png" /></p>
<p>下面，写一个Hello Python程序。</p>
<p>我们点击create new project，这个是创建一个新的项目</p>
<p><img alt="https://img-blog.csdnimg.cn/2020051019043439.png" src="https://img-blog.csdnimg.cn/2020051019043439.png" /></p>
<p>创建新的项目之后，这里面就要输入我们项目的存储路径以及项目名称了。那么我这里边直接把最后一个字段去改掉。其实这个就是我们自己的一个名称了。这个项目路径和项目名称添加完之后，你自己起名字就可以，然后我就在这里边点击create了，就开始创建了</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510190501557.png" src="https://img-blog.csdnimg.cn/20200510190501557.png" /></p>
<p>我们接下来，和上一次一样的操作。第一步在我们自己的项目名称，项目名称的那里面，点击右键这是第一步，第二步，把鼠标指针挪到new上，选择new。第三步，然后点击python file，创建一个python文件</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510190525196.png" src="https://img-blog.csdnimg.cn/20200510190525196.png" /></p>
<p>我们的代码就要写到这个文件里，然后输入hello，这hello其实是这个文件名字</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510190542698.png" src="https://img-blog.csdnimg.cn/20200510190542698.png" />
然后点击OK，点击完OK之后呈现到大家面前是这么样的页面，它分两个区域，一个是python文件列表区域</p>
<p>这个其实是我们项目的所有的文件列表，现在我们只创建了一个文件叫hello.py。然后还有就是代码编写区域
，我们所有代码都要在代码编写区域当中来进行写。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510190607666.png" src="https://img-blog.csdnimg.cn/20200510190607666.png" /></p>
<p>那么这里我们要做什么，输入跟我们之前输的那个东西是一样的，也是那行代码print(“hello Python”)。输入完之后右键在空白区域，空白区域右键就可以了，它会弹出来这么一个框是吧。在这个框我们点击 RunHello，跑一下这个代码，在你的IDE的最下面就会出现hello Python</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510190625398.png" src="https://img-blog.csdnimg.cn/20200510190625398.png" /></p>
<p>﻿&#64;Author ： By Runsen</p>
</div>
</div>
<div class="section" id="jupyter-notebook">
<h1>2、搭建Jupyter Notebook环境<a class="headerlink" href="#jupyter-notebook" title="永久链接至标题">¶</a></h1>
<div class="section" id="id7">
<h2>1、Jupyter notebook历史<a class="headerlink" href="#id7" title="永久链接至标题">¶</a></h2>
<p>Jupyter 创始人 Fernando Pérez 的说法，他最初的梦想是做一个综合 Ju （Julia）、Py （Python）和 R 三种科学运算语言的计算工具平台，所以将其命名为 Ju-Py-te-R。发展到现在，Jupyter 已经成为一个几乎支持所有语言，能够把软件代码、计算输出、解释文档、多媒体资源整合在一起的多功能科学运算平台。</p>
<p>在Pycham中只能运行一共py文件，而在Jupyter notebook可以运行一行代码就可以了。</p>
</div>
<div class="section" id="id8">
<h2>2 、环境搭建<a class="headerlink" href="#id8" title="永久链接至标题">¶</a></h2>
<p>你可以直接是通过 pip 命令安装。</p>
<div class="highlight-clike notranslate"><div class="highlight"><pre><span></span>pip install jupyter
</pre></div>
</div>
<p>你也可以下载anaconda</p>
<p>Anaconda官网下载链接：https://www.anaconda.com/distribution/#download-section，选择Python3版本的安装包下载即可</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510224126168.png" src="https://img-blog.csdnimg.cn/20200510224126168.png" /></p>
<p>如果下载速度过慢，可以选择安装Anaconda的清华镜像，网址https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive</p>
<p>下载完成之后，直接双击安装包安装即可。安装后添加清华镜像源解决conda install 下载速度慢的问题，打开Anaconda Prompt命令行，依次添加命令</p>
<div class="highlight-clike notranslate"><div class="highlight"><pre><span></span> conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
 conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/
 conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/msys2/
 conda config --set show_channel_urls yes
</pre></div>
</div>
<p>之前说清华源，不适应了，现在OK，可以使用清华源</p>
</div>
<div class="section" id="conda">
<h2>3、conda常见命令<a class="headerlink" href="#conda" title="永久链接至标题">¶</a></h2>
<p>conda不仅可以方便安装，更新，卸载工具包，而且安装时能自动安装相应的依赖包。conda命令多数时候是在配置虚拟环境时使用，下面是conda常见命令</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>conda list              //查看当前的包
conda search request    //查找request库
conda install request   //安装request库
conda uninstall request //删除request库
conda update request    //更新request库
</pre></div>
</div>
<p>很多时候不同的库依赖不同的依赖包，需要创建虚拟环境，下面是conda创建虚拟环境的常用命令</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">info</span> <span class="o">--</span><span class="n">envs</span>       <span class="o">//</span><span class="n">查看安装好的环境</span>
<span class="c1"># deeplearn代指克隆得到的新环境的名称，base代指被克隆的环境的名称</span>
<span class="n">conda</span> <span class="n">create</span> <span class="o">--</span><span class="n">name</span> <span class="n">deeplearn</span> <span class="o">--</span><span class="n">clone</span> <span class="n">base</span>
<span class="c1"># 激活虚拟环境</span>
<span class="n">activate</span> <span class="n">envname</span> <span class="o">//</span><span class="k">for</span> <span class="n">windows</span>
<span class="n">source</span> <span class="n">activate</span> <span class="n">envname</span> <span class="o">//</span><span class="k">for</span> <span class="n">liunx</span> <span class="ow">and</span> <span class="n">mac</span>
<span class="c1"># 退出虚拟坏境</span>
<span class="n">deactivate</span>
<span class="c1">#查看当前的包</span>
<span class="n">conda</span> <span class="nb">list</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200510225507691.png" src="https://img-blog.csdnimg.cn/20200510225507691.png" /></p>
<div class="highlight-clik notranslate"><div class="highlight"><pre><span></span>#查看安装好的环境
conda info --envs  
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200510225537392.png" src="https://img-blog.csdnimg.cn/20200510225537392.png" /></p>
</div>
<div class="section" id="id9">
<h2>4、虚拟环境搭建<a class="headerlink" href="#id9" title="永久链接至标题">¶</a></h2>
<p>在创建的虚拟环境上运行jupyter notebook,但发现在notebook中的python其实并没有运行在指定的虚拟环境引擎上，只需要安装nb_conda_kernels插件即可解决，注意是在base环境下安装，而不是虚拟环境</p>
<div class="highlight-clike notranslate"><div class="highlight"><pre><span></span>(base) conda install nb_conda_kernels
</pre></div>
</div>
<p>安装成功后，在kernel -&gt; change kernel中即可切换到指定的虚拟环境</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510224404138.png" src="https://img-blog.csdnimg.cn/20200510224404138.png" />
你可以可以新建Notebook的时候设置kernel</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510224300139.png" src="https://img-blog.csdnimg.cn/20200510224300139.png" /></p>
</div>
<div class="section" id="id10">
<h2>5、修改jupyter notebook的打开路径<a class="headerlink" href="#id10" title="永久链接至标题">¶</a></h2>
<p>安装好jupyter notebook 后打开的是默认文档位置，需要来修改存放文件的路径。</p>
<p>下面教大家修改jupyter notebook的打开路径</p>
<p>打开jupyter notebook 文件所在的位置</p>
<p><img alt="https://img-blog.csdnimg.cn/20190217140534777.png" src="https://img-blog.csdnimg.cn/20190217140534777.png" />
右键， 打开属性
<img alt="https://img-blog.csdnimg.cn/2019021714085440.png" src="https://img-blog.csdnimg.cn/2019021714085440.png" /></p>
<p>按照下图配置参数
<img alt="https://img-blog.csdnimg.cn/2019021714135627.png" src="https://img-blog.csdnimg.cn/2019021714135627.png" />
这样打开jupyter notebook就不是默认文档位置了。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510224701876.png" src="https://img-blog.csdnimg.cn/20200510224701876.png" /></p>
</div>
<div class="section" id="pip-conda">
<h2>6、pip 和conda的区别<a class="headerlink" href="#pip-conda" title="永久链接至标题">¶</a></h2>
<p>conda可以让你同时管理安装处理有关的python任务和跟python无关任务，即pip可以允许在任何环境中安装 python包，conda允许你在conda环境中安装任何语言包（包括C语言或者python）。</p>
<p>conda使用一个新的包格式，你不能交替使用conda和pip，</p>
<p>因为pip不能安装和解析conda的包格式。可以使用这两个工具，但是它们是不能交互的。</p>
<p>conda安装库是在一个地方，而且需要根据Python的环境和依赖库而定，比如numpy的版本有的过高，导致安装这个库使用的时候报错。</p>
<p>pip安装就是根据Python的版本而定，有的时候conda安装不了，可以采用pip安装。</p>
<p>﻿# 3、新手Jupyter不会用，我十招教你盘她</p>
<p>上次教大家搭建好了Jupyter，并学习了一些conda命令。</p>
<p>如果你是新手，Jupyter不会用，那么我教你盘她</p>
</div>
<div class="section" id="id11">
<h2>1、官方文档<a class="headerlink" href="#id11" title="永久链接至标题">¶</a></h2>
<p>安装好了anaconda只好，大家应该见到这些玩意，还有一个spider我删除了，有Pycharm就可以不要spider了。我这里的jupyter是设置了deeplearn为默认环境，所以有jupyter后面多了deeplearn。
<img alt="https://img-blog.csdnimg.cn/20200510230541144.png" src="https://img-blog.csdnimg.cn/20200510230541144.png" /></p>
<p>我们点击那个Navigator，等一下就可以下面的图片了。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510230905927.png" src="https://img-blog.csdnimg.cn/20200510230905927.png" />
我们选择learning，点击jupyter就可以看文档了。大家学习都是要这样，先去官方文档。</p>
<p><img alt="https://img-blog.csdnimg.cn/2020051023101055.png" src="https://img-blog.csdnimg.cn/2020051023101055.png" /></p>
<p>浏览器就来到了：https://jupyter.org/documentation.html</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510231149252.png" src="https://img-blog.csdnimg.cn/20200510231149252.png" /></p>
<p>然后，我们点击jupyter notebook</p>
<p>来到官方文档：https://jupyter-notebook.readthedocs.io/en/stable/</p>
<p>读英文不行啊，建议大家安装Chrome，直接翻译中文简体。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510231403855.png" src="https://img-blog.csdnimg.cn/20200510231403855.png" />
这里建议停留十分钟，大家把jupyter的官方文档看一遍，再继续看下面。</p>
</div>
<div class="section" id="jupter-notebook">
<h2>2、创建一个jupter notebook<a class="headerlink" href="#jupter-notebook" title="永久链接至标题">¶</a></h2>
<p>下面，我们就真正开始学习Jupyter ，我不想抄官方文档，就把自己的经验那出来算了。</p>
<p>该页面是启动之后默认打开的页面。我们可以看到当前目录下已有的文件，可以查看已有的jupyter 文件(灰色表示未在运行，绿色表示正在运行)，可以点击查看子目录下的内容，jupyter 默认访问的是8888端口</p>
<p><img alt="https://img-blog.csdnimg.cn/2020051023215453.png" src="https://img-blog.csdnimg.cn/2020051023215453.png" /></p>
<p>创建一个jupter notebook非常的简单，点击右侧的New，选择Python3会在新的页面中建立一个未命名的notebook文件，选择Text File会新的页面中建立一个未命名的txt文件，选择Folder会在当前页面中建立一个未命名文件夹，选择Terminal会在新的页面中建立Terminal。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510232402410.png" src="https://img-blog.csdnimg.cn/20200510232402410.png" /></p>
<p>下面就是新建的内容
<img alt="https://img-blog.csdnimg.cn/20200510232421600.png" src="https://img-blog.csdnimg.cn/20200510232421600.png" /></p>
<p>重命名直接点击文件名就可以了。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510232528566.png" src="https://img-blog.csdnimg.cn/20200510232528566.png" /></p>
<p>可以在左侧进行勾选，对文件夹进行重命名，移动或删除，对文件进行复制，重命名，移动，编辑和删除。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510232642912.png" src="https://img-blog.csdnimg.cn/20200510232642912.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20200510232757852.png" src="https://img-blog.csdnimg.cn/20200510232757852.png" />
如果这个后台删除了，那么你就访问不了你的jupyter了。</p>
</div>
<div class="section" id="notebook">
<h2>3、Notebook使用<a class="headerlink" href="#notebook" title="永久链接至标题">¶</a></h2>
<p>下面，教大家学习一下Notebook使用
、<img alt="https://img-blog.csdnimg.cn/20200510233001843.png" src="https://img-blog.csdnimg.cn/20200510233001843.png" /></p>
<p>现在我们在help中点击Notebook help，来到了官方的教程，建议你还是看一看。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510233259224.png" src="https://img-blog.csdnimg.cn/20200510233259224.png" /></p>
<p>官方的教程的网页
<img alt="https://img-blog.csdnimg.cn/20200510233449759.png" src="https://img-blog.csdnimg.cn/20200510233449759.png" /></p>
</div>
<div class="section" id="id12">
<h2>4、 编辑模式<a class="headerlink" href="#id12" title="永久链接至标题">¶</a></h2>
<p>每一个cell有两种模式：命令模式和编辑模式。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510234214589.png" src="https://img-blog.csdnimg.cn/20200510234214589.png" /></p>
<p>如下图所示：最左侧是蓝色的条是命令模式，是绿色的条表示编辑模式(此时cell中有光标，可以进行代码编写)。在命令模式下，按下enter或者鼠标单击代码框可以进入编辑模式。在编辑模式下，按下esc或者鼠标单击代码框左侧区域即可进入命令模式。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510234332838.png" src="https://img-blog.csdnimg.cn/20200510234332838.png" /></p>
<p>在编辑模式下，按住SHIFT+ENTER就可以运行代码了。</p>
</div>
<div class="section" id="id13">
<h2>5、命令模式<a class="headerlink" href="#id13" title="永久链接至标题">¶</a></h2>
<p>命令模式就是使用Markdown。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510234800502.png" src="https://img-blog.csdnimg.cn/20200510234800502.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20200510235339934.png" src="https://img-blog.csdnimg.cn/20200510235339934.png" /></p>
<p>在命令模式下，可以按住下面的键，实现下面的效果。</p>
<ul class="simple">
<li>按下A：向上增加空白的cell</li>
<li>按下B：向下增加空白的cell</li>
<li>按下D两次（DD）：删除该cell</li>
<li>按下X：剪贴该cell</li>
<li>按下V：粘贴该cell</li>
<li>按下L：打开、关闭行号</li>
<li>按下M：进入Markdown模式</li>
<li>按下Y：退出Markdown模式，回到代码编辑模式</li>
</ul>
<p>当进入Markdown模式的时候，cell左边的 In【】会消失掉</p>
</div>
<div class="section" id="markdown">
<h2>6、Markdown语法<a class="headerlink" href="#markdown" title="永久链接至标题">¶</a></h2>
<p>我直接把CSDN上的Markdown给你搬过来。</p>
<p>下面是常见的快捷键</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510235521475.png" src="https://img-blog.csdnimg.cn/20200510235521475.png" /></p>
<p>目录，标题和文本样式</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510235912274.png" src="https://img-blog.csdnimg.cn/20200510235912274.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20200511000002261.png" src="https://img-blog.csdnimg.cn/20200511000002261.png" /></p>
<p>我觉得你还是写博客直接看CSDN的帮助文档算了。</p>
</div>
<div class="section" id="latex">
<h2>6、Latex数学公式<a class="headerlink" href="#latex" title="永久链接至标题">¶</a></h2>
<p>Latex我不想写了，直接看我之前的文章</p>
<p><a class="reference external" href="https://maoli.blog.csdn.net/article/details/105377233">手把手教你插入数学公式，妈妈再也不用担心我写不了论文了</a></p>
</div>
<div class="section" id="id14">
<h2>7、Notebook小技巧<a class="headerlink" href="#id14" title="永久链接至标题">¶</a></h2>
<p>这篇文写得不错，总结了Notebook的27个小技巧，文章链接：http://liuchengxu.org/pelican-blog/jupyter-notebook-tips.html。这是原创，大家不要看那些转载的。</p>
</div>
<div class="section" id="id15">
<h2>8、保存文件<a class="headerlink" href="#id15" title="永久链接至标题">¶</a></h2>
<p>我们新建的名字叫ipynb，为什么我喜欢用Jupyter，就是因为可以保存很多类型的文件，比如pdf，html，markdowm，latex。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200510233632667.png" src="https://img-blog.csdnimg.cn/20200510233632667.png" /></p>
</div>
<div class="section" id="id16">
<h2>9、误删了怎么恢复<a class="headerlink" href="#id16" title="永久链接至标题">¶</a></h2>
<p>直接在一个单元格中输入：history （如图）
就会展示出历史代码（前提是你运行过的，否则不会打印出来）</p>
<p><img alt="https://img-blog.csdnimg.cn/20200511000624937.png" src="https://img-blog.csdnimg.cn/20200511000624937.png" /></p>
</div>
<div class="section" id="id17">
<h2>10、大招<a class="headerlink" href="#id17" title="永久链接至标题">¶</a></h2>
<p>我把大招留在最后，就是你遇到不会的模块怎么办？遇到代码不会怎么办？</p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/20200511001045804.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20200511001207980.png" src="https://img-blog.csdnimg.cn/20200511001207980.png" /></p>
</div>
</div>
<div class="section" id="git">
<h1>4、学编程语言前，不了解Git，怎么入坑<a class="headerlink" href="#git" title="永久链接至标题">¶</a></h1>
<p>上次教大家搭建好Python的两个IDE，分别是Pycharm和Jupyter</p>
<p>是不是我们正式开始写Python代码呢？</p>
<p><img alt="https://img-blog.csdnimg.cn/20200511102801436.png" src="https://img-blog.csdnimg.cn/20200511102801436.png" /></p>
<p>我的回答是<strong>NO</strong></p>
<p>怎么了，环境安装好了不是就开始写吗？</p>
<p>这是不对的，学任何编程语言都要看下Git和Github</p>
<div class="section" id="id18">
<h2>1、了解Git<a class="headerlink" href="#id18" title="永久链接至标题">¶</a></h2>
<p>说到Git，Runsen要说下LInux 的大神，是由伟大的Linux创始人Linus创作</p>
<p>就是这个大神，看不惯微软的window系统，就直接搞Linux。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200511103241263.png" src="https://img-blog.csdnimg.cn/20200511103241263.png" />
我们回到Git。Git是一个分布式版本控制软件，在Git之前有一个SVN的东西，Linus在写LInux内核的时候，使用的是SVN进行代码提交。</p>
<p>Linus用SVN觉得不爽，就是因为SVN不能够分布式版本控制，这也是Git和最核心的区别</p>
<p>我先把git的官方网站的链接给你扔出来：https://git-scm.com/。</p>
<p>走，我们去Git的官方网站学习。</p>
</div>
<div class="section" id="id19">
<h2>2、 版本控制<a class="headerlink" href="#id19" title="永久链接至标题">¶</a></h2>
<p>无论Git还是SVM都是用来版本控制，所谓的版本控制是一种记录一个或若干文件内容变化，以便将来查阅特定版本修订情况的系统。 除了项目源代码，你可以对任何类型的文件进行版本控制。</p>
<p><img alt="https://img-blog.csdnimg.cn/20190801172329866.jpg" src="https://img-blog.csdnimg.cn/20190801172329866.jpg" />
比如，在我们写毕业论文时可能会遇到，多次修改之后的论文命名方式：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>论文_改.doc、论文_改改.doc、论文_改改改.doc、论文_改改改改.doc、论文_改改改改再改.doc、
论文_改改改改再改TM不改了.doc
</pre></div>
</div>
<p>我还是大三，还不用写论文。</p>
<p>重命名也太OUT了，SVN就出来，你可以提交多个版本，然后托管到代码仓库，进行管理，如果需要就回退。这方便了许多，但是如果这个写代码的跑路，要换Runsen来维护，那是不是没辙。因为这是托管到写代码的跑路人的仓库，我没得用啊。</p>
<p>接下来人们又遇到一个问题，如何让在不同系统上的开发者协同工作？ 于是，大神Linus发现。其实是LInus写Linux内核的时候，被逼无奈，花了2个星期用c写出了git。</p>
<p>Git是目前世界上最先进的分布式版本控制系统，解决了在不同系统上的开发者协同工作的问题。</p>
</div>
<div class="section" id="id20">
<h2>3、Git安装<a class="headerlink" href="#id20" title="永久链接至标题">¶</a></h2>
<p>听我吹了这么久，是不是要安装Git开始学习了。再说了，我怎么会一直吹逼。</p>
<p>ubuntu下安装就是一行命令</p>
<div class="highlight-clike notranslate"><div class="highlight"><pre><span></span>sudo apt-get install git
</pre></div>
</div>
<p>centos下安装也是一行代码</p>
<div class="highlight-clike notranslate"><div class="highlight"><pre><span></span>sudo yum install git 
</pre></div>
</div>
<p>麻烦的就是Windows了，去git官网下，链接：https://git-scm.com/downloads</p>
<p><img alt="https://img-blog.csdnimg.cn/20200511110116465.png" src="https://img-blog.csdnimg.cn/20200511110116465.png" /></p>
<p>选择Window，然后下载安装包，选择路径，下面就是傻逼操作，</p>
<p>安装好了Git，你就可以看见Git GUI和GIT Bash。
<img alt="https://img-blog.csdnimg.cn/20200511110358860.png" src="https://img-blog.csdnimg.cn/20200511110358860.png" /></p>
<p>出现这两个东西，基本安装成功了。</p>
<p>你在CMD窗口，执行Git，如果有反应就是OK 了。
、
<img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/20200511110645861.png" /></p>
<p>没有就赶紧去path配置环境变量</p>
<p><img alt="https://img-blog.csdnimg.cn/20200511110622869.png" src="https://img-blog.csdnimg.cn/20200511110622869.png" /></p>
</div>
<div class="section" id="id21">
<h2>4、创建本地仓库<a class="headerlink" href="#id21" title="永久链接至标题">¶</a></h2>
<p>下面，我教你创建一个文件夹用于存放项目文件，新建一个myporject的文件夹</p>
<div class="highlight-clike notranslate"><div class="highlight"><pre><span></span>cd ~/myproject/
</pre></div>
</div>
<p>初始化myporject的文件夹</p>
<div class="highlight-clike notranslate"><div class="highlight"><pre><span></span>git init
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200511111454107.png" src="https://img-blog.csdnimg.cn/20200511111454107.png" /></p>
<p>会创建一个.git的隐藏文件，关于版本控制的文件都存放在这里，绝对不要改动</p>
<p><img alt="https://img-blog.csdnimg.cn/20200511111521736.png?" src="https://img-blog.csdnimg.cn/20200511111521736.png?" /></p>
<p>没有这东西，你的Git就不能用了。</p>
</div>
<div class="section" id="id22">
<h2>5、配置个人信息<a class="headerlink" href="#id22" title="永久链接至标题">¶</a></h2>
<p>你可以配置全局信息或者本项目个人信息</p>
<p>配置全局信息直接<code class="docutils literal notranslate"><span class="pre">--global</span> </code></p>
<div class="highlight-clike notranslate"><div class="highlight"><pre><span></span>git config --global user.name &#39;MaoliRunsen&#39;
git config --global user.email &#39;2953510364@qq.com&#39;
</pre></div>
</div>
<p>配置信息会保存在家目录下，名字和Email跟注册Github的一致。</p>
<div class="highlight-clike notranslate"><div class="highlight"><pre><span></span>cat ~/.gitconfig
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200511111821813.png" src="https://img-blog.csdnimg.cn/20200511111821813.png" /></p>
<p>配置本项目个人信息</p>
<div class="highlight-clike notranslate"><div class="highlight"><pre><span></span>git config user.name &#39;MaoliRunsen&#39;
git config user.email &#39;2953510364@qq.com&#39;
</pre></div>
</div>
<p>配置信息存储在当前目录下的.git/config下</p>
<div class="highlight-clike notranslate"><div class="highlight"><pre><span></span>cat .git/config
</pre></div>
</div>
<p>‘<img alt="https://img-blog.csdnimg.cn/20200511112131423.png" src="https://img-blog.csdnimg.cn/20200511112131423.png" /></p>
</div>
<div class="section" id="id23">
<h2>6、 添加文件<a class="headerlink" href="#id23" title="永久链接至标题">¶</a></h2>
<p>创建好了本地仓库，就准备开始开发了。</p>
<p>在项目文件加下创建readme.txt文件，输入以下内容。</p>
<div class="highlight-clike notranslate"><div class="highlight"><pre><span></span>我是Runsen，一个化工的专业的码农
这是一个git学习的项目。
将所有的博客进行汇总整理
</pre></div>
</div>
<p>先添加到暂存区</p>
<div class="highlight-clike notranslate"><div class="highlight"><pre><span></span>git add readme.txt

</pre></div>
</div>
<p>提交到仓库</p>
<div class="highlight-clike notranslate"><div class="highlight"><pre><span></span>git commit -m &#39;第一次提交文件&#39;
</pre></div>
</div>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/20200511112510924.png" /></p>
<p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code>命令的，-m参数后输入的内容是提交说明。命令执行成功后显示几个文件被改动，加了多少行。每提交一次就会生成一个版本。</p>
<p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span> <span class="pre">.</span> </code>可以一次性把当前目录中所有有改动的文件都添加到暂存区。</p>
</div>
<div class="section" id="id24">
<h2>7、修改文件<a class="headerlink" href="#id24" title="永久链接至标题">¶</a></h2>
<p>按照这个操作流程，修改readme.txt内容如下</p>
<div class="highlight-clike notranslate"><div class="highlight"><pre><span></span>我是Runsen，一个化工的专业的码农
这是一个git学习的项目。
将所有的博客进行汇总整理
然后删除之前Git的博客。
</pre></div>
</div>
<p>然后再次提交，Git add 和Git commit</p>
</div>
<div class="section" id="id25">
<h2>8、错误提交<a class="headerlink" href="#id25" title="永久链接至标题">¶</a></h2>
<p>结果我在提交的时候，发现了commit错误了，这不是第一次提交，而是第二次，其实我是故意的。</p>
<p>辛勤的工作一段时候，我提交了2次了，有2个的版本，怎么查看这些提交记录呢？</p>
<p>git log是 查看历史版本</p>
<p><img alt="https://img-blog.csdnimg.cn/20200511113628514.png" src="https://img-blog.csdnimg.cn/20200511113628514.png" /></p>
<p>从上图中看到，我们需要删除第二次的Commit，如何删除呢，答案就是版本回退</p>
</div>
<div class="section" id="id26">
<h2>9、 版本回退<a class="headerlink" href="#id26" title="永久链接至标题">¶</a></h2>
<p>这是就reset就可以了，</p>
<div class="highlight-clike notranslate"><div class="highlight"><pre><span></span>git reset --hard HEAD^
</pre></div>
</div>
<p>重要点终于来了：</p>
<ul class="simple">
<li>HEAD表示当前最新版本</li>
<li>HEAD^表示当前最新版本的前一个版本</li>
<li>HEAD^^表示当前最新版本的前两个版本，以此类推</li>
<li>HEAD~1表示当前最新版本的前一个版本</li>
<li>HEAD~8表示当前最新版本的前8个版本，以此类推</li>
</ul>
<p>这是我们查看Git lo 就发现只有第一次的提交，可以看日期时间区别。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200511114411272.png" src="https://img-blog.csdnimg.cn/20200511114411272.png" /></p>
<p>git reset –hard 版本号</p>
<p>当版本非常多时选择这种方法。版本号就是每次commit生成的hash值，只用取前几位数。</p>
<p>这是查看readdme.txt</p>
<p><img alt="https://img-blog.csdnimg.cn/20200511115705382.png" src="https://img-blog.csdnimg.cn/20200511115705382.png" /></p>
<p>没有了<code class="docutils literal notranslate"><span class="pre">然后删除之前Git的博客。</span></code></p>
<p>这样就会产生一个问题，如果你提交错误和选择回退，这样你辛苦写的代码会消失。</p>
<p>因此，如果Commit错误了，回退是错误的办法。</p>
</div>
<div class="section" id="id27">
<h2>10、回到原来版本<a class="headerlink" href="#id27" title="永久链接至标题">¶</a></h2>
<p>既然回退是错误，那么就需要回到原来最新版本，不然你写的代码全没了</p>
<p>只要上面的命令行窗口还没有被关掉，你就可以顺着往上找到上面最新的commit id是 af316a589238fffca87806ceed36a96992cf66b9，于是就可以指定回到未来的某个版本，只要前八个：af316a58</p>
<p><img alt="https://img-blog.csdnimg.cn/20200511121036962.png" src="https://img-blog.csdnimg.cn/20200511121036962.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20200511121355806.png" src="https://img-blog.csdnimg.cn/20200511121355806.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20200511121411904.png" src="https://img-blog.csdnimg.cn/20200511121411904.png" /></p>
<p>readdme就回到第二次的状态。</p>
<p>假如你是一个大傻逼，不小心关闭了窗口，就后悔了，想恢复到新版本怎么办？找不到新版本的commit id怎么办？</p>
<p>Git提供了一个命令git reflog用来记录你的每一次命令，然后你可以根据对应的commit id回到你想要的版本：</p>
<p><img alt="https://img-blog.csdnimg.cn/20200511121612698.png" src="https://img-blog.csdnimg.cn/20200511121612698.png" /></p>
<p>af316a58同样可以找的到。如果你删除了git的隐藏文件，那你真的凉凉了，回家睡觉去吧。</p>
</div>
<div class="section" id="id28">
<h2>11、正确方法<a class="headerlink" href="#id28" title="永久链接至标题">¶</a></h2>
<p>上面都是演示一些git的常见错误，我们现在是回到了错误提交的commit上，所以还没有解决。</p>
<p>直接用git commit –amend 就可以了，修改本地最近一次已提交的注释</p>
<p><img alt="https://img-blog.csdnimg.cn/2020051112274258.png" src="https://img-blog.csdnimg.cn/2020051112274258.png" /></p>
<p>下面把第一次改为第二次，这是Vim的用法。</p>
<p><img alt="在这里插入图片描" src="https://img-blog.csdnimg.cn/20200511122658437.png" /></p>
<p>你再看看Git log，OK 解决。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200511122830348.png" src="https://img-blog.csdnimg.cn/20200511122830348.png" /></p>
<p>每次在做一些大动作（rebasing）之前，建议备份整个版本库，以防万一。</p>
<p>git的历史记录是不可修改的，也就是说你不能更改任何已经发生的事情。你做的任何操作都只是在原来的操作上修改。也就是说，即使你删除了一个分支，修改了一个提交，或者强制重置，你仍然可以回滚这些操作。</p>
</div>
<div class="section" id="id29">
<h2>12、 总结<a class="headerlink" href="#id29" title="永久链接至标题">¶</a></h2>
<p>今天简单了入了Git的坑，还没完，下面还是要继续把Git搞定，才能开始学习编程语言。</p>
<p>下篇的内容跟下图几张图有关。</p>
<p><img alt="https://img-blog.csdnimg.cn/20190801172352872.png" src="https://img-blog.csdnimg.cn/20190801172352872.png" />
<img alt="https://img-blog.csdnimg.cn/20190801172403911.png" src="https://img-blog.csdnimg.cn/20190801172403911.png" /></p>
</div>
</div>
<div class="section" id="github">
<h1>5、开始Github和码云之旅，新手如何上路<a class="headerlink" href="#github" title="永久链接至标题">¶</a></h1>
<p>上次大家一些Git的小知识，下面我们先开始Github之旅，再继续学习Git。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200511154104470.png" src="https://img-blog.csdnimg.cn/20200511154104470.png" /></p>
<div class="section" id="id30">
<h2>1、了解Github<a class="headerlink" href="#id30" title="永久链接至标题">¶</a></h2>
<p>我梦想这有女朋友问我：Git或GitHub到底是什么，它们之间有什么区别？</p>
<p>别睡了，孩子！没钱没身高没样子，简直就是又穷又丑又矮的典型，天天做白日梦？</p>
<p>梦想的女朋友：Git或GitHub到底是什么？</p>
<p>我：Git是一个跟踪代码更改的版本控制系统，而GitHub是一个基于Web的Git版本控制存储库托管服务。它提供了Git的所有分布式版本控制和源代码管理（SCM）功能，并提供了一些自己的特性。对于开发人员而言，这是他们可以在其中存储项目并与志趣相投的人建立联系的地方。您可以将其视为“代码云”。（百度百科）</p>
<p><img alt="https://img-blog.csdnimg.cn/20200511154654782.png" src="https://img-blog.csdnimg.cn/20200511154654782.png" /></p>
<p>其实，Github就是放代码的地方，通过Git来上传提交代码。</p>
</div>
<div class="section" id="id31">
<h2>2、注册Github<a class="headerlink" href="#id31" title="永久链接至标题">¶</a></h2>
<p>百度搜索GitHub或者直接点击https://github.com/进入官网</p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/2020051115501360.png" /></p>
<p>注意每一个人都有自己的UserName，所以你创建Github的名字一定要亮，看起来很牛逼。</p>
<p>Email你可以使用国内的邮箱都是可以的，要用常用的，注册一个账号就是一个简单的事，</p>
<p>登录就可以看得自己的仓库和名字。
<img alt="https://img-blog.csdnimg.cn/20200511155805204.png" src="https://img-blog.csdnimg.cn/20200511155805204.png" /></p>
</div>
<div class="section" id="id32">
<h2>3、访问不了Github怎么办<a class="headerlink" href="#id32" title="永久链接至标题">¶</a></h2>
<p>访问Github突然上不去了，出现了网页无法正常运行？</p>
<p><img alt="https://img-blog.csdnimg.cn/20200511160126677.png" src="https://img-blog.csdnimg.cn/20200511160126677.png" /></p>
<p>你应该知道Github在外国，当然访问慢了。只要修改hosts，80%可以解决。</p>
<p>打开Dns检测|Dns查询 ，这里推荐站长工具</p>
<p>http://tool.chinaz.com/dns?type=1&amp;host=github.com&amp;ip=</p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/20200511160714439.png" /></p>
<p>.把检测列表里的TTL值最小的IP输入到hosts里，并对应写上github官网域名</p>
<p>下面是不同系统的hosts</p>
<div class="highlight-clike notranslate"><div class="highlight"><pre><span></span>Windows 系统位于 C:\Windows\System32\drivers\etc\
Android（安卓）系统hosts位于 /etc/
Mac（苹果电脑）系统hosts位于 /etc/
iPhone（iOS）系统hosts位于 /etc/
Linux系统hosts位于 /etc/
</pre></div>
</div>
<p>我这里使用Notepad++打开的，填写的是以前的hosts</p>
<p><img alt="https://img-blog.csdnimg.cn/20200511160405188.png" src="https://img-blog.csdnimg.cn/20200511160405188.png" /></p>
<p>如果你的Github真的访问不了，那用码云吧，码云是我国开发者为了打破Github垄断，仿照Github诞生的，网址：https://gitee.com/</p>
</div>
<div class="section" id="id33">
<h2>4、了解一些项目页面<a class="headerlink" href="#id33" title="永久链接至标题">¶</a></h2>
<p>现在我找到一个Java项目，找到一个很多人点赞的Java项目，写的应该是教程，</p>
<p><img alt="https://img-blog.csdnimg.cn/20200511162353692.png" src="https://img-blog.csdnimg.cn/20200511162353692.png" /></p>
<p>如果你能够修复bug或自己添加功能 ，请发一个pull request吧！如果你提交了一个pull request，维护者就会将你的分支与已有的分支作比较来决定是否要合并。</p>
<p>不要想得不可能，我记得的有一个6岁的孩子pull request通过了，就是因为在注释中写了一个*号，可以显得更加严谨好看。</p>
</div>
<div class="section" id="id34">
<h2>5、 在码云平台创建项目<a class="headerlink" href="#id34" title="永久链接至标题">¶</a></h2>
<p>虽然主要使用github最主流，但是国内访问速度慢，而且托管私有项目收费，国内一般使用码云gitee，国内访问速度快，-而且托管私有项目免费，- 小公司中使用gitlab或者码云来搭建。大厂有自己的项目托管仓库。</p>
<p>在码云和Github创建项目都是一样的，不管是是使用github还是使用码云，步骤是差不多的，区别是github是全英文的慢一点。这里我以码云为例。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200511164043356.png" src="https://img-blog.csdnimg.cn/20200511164043356.png" /></p>
<p>然后由上往下输入你项目的名字、项目的描述，选择这个项目是不是公开(Public)或是作为私人项目(Private)。</p>
<p><img alt="https://img-blog.csdnimg.cn/2020051116441760.png" src="https://img-blog.csdnimg.cn/2020051116441760.png" /></p>
<p>创建成功后，之后会出现以下界面的信息。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200511165134582.png" src="https://img-blog.csdnimg.cn/20200511165134582.png" /></p>
<p>创建好仓库后，你的仓库会有两个地址，一个是https，一个是ssh。因为使用https需要输入用户名和密码，推荐使用ssh的方式。要使用ssh你需要设置你账户的ssh公钥。
‘</p>
<p>下一步点击下载SSH，复制下来，也就是git&#64;gitee.com:MaoliRUNsen/python_from_novice_to_master.git</p>
<p>远程仓库里已经存在项目文件，你买了台新电脑，需要将项目从远程仓库clone到本地进行工作。</p>
<p>在新电脑新建一个文件夹，再使用git clone git&#64;gitee.com:MaoliRUNsen/python_from_novice_to_master.git克隆下来。
<img alt="https://img-blog.csdnimg.cn/20200511165326630.png" src="https://img-blog.csdnimg.cn/20200511165326630.png" /></p>
<p>只要你克隆远程仓库，这样你就可以同步到码云。</p>
</div>
<div class="section" id="id35">
<h2>6、Git创建项目<a class="headerlink" href="#id35" title="永久链接至标题">¶</a></h2>
<p>要把本地仓库和远程仓库联系起来有两种方式， 上面是第一种，另一种是通过Git创建项目</p>
<p>和第一种方式的区别在于先创建仓库，</p>
<div class="highlight-linux notranslate"><div class="highlight"><pre><span></span> git init	# 创建仓库
 git remote add origin git@gitee.com:MaoliRUNsen/python_from_novice_to_master.git
</pre></div>
</div>
</div>
<div class="section" id="id36">
<h2>7、推送到远程仓库<a class="headerlink" href="#id36" title="永久链接至标题">¶</a></h2>
<p>当本地工作完成，需要将代码推送到远程仓库，使用<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span></code>命令</p>
<div class="highlight-linux notranslate"><div class="highlight"><pre><span></span>git push origin master
</pre></div>
</div>
<p>push前需要add和commit</p>
</div>
<div class="section" id="id37">
<h2>8、更新到本地仓库<a class="headerlink" href="#id37" title="永久链接至标题">¶</a></h2>
<p>你的同事和你协同开发，他工作的那部分内容完成了，并且已经推送到远程仓库，你接下来的工作需要依赖他的那部分代码，那么你需要将远程仓库代码拉取到本地仓库，使用<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span></code>命令</p>
<div class="highlight-linux notranslate"><div class="highlight"><pre><span></span>git pull origin master
</pre></div>
</div>
</div>
<div class="section" id="id38">
<h2>9、仓库成员管理<a class="headerlink" href="#id38" title="永久链接至标题">¶</a></h2>
<p>终于到了重点的时候，我们在新建项目的时候，只是写了基本设置</p>
<p><img alt="https://img-blog.csdnimg.cn/202005111719161.png" src="https://img-blog.csdnimg.cn/202005111719161.png" /></p>
<p>仓库是需要管理，其实这也叫做项目管理。我们主要看仓库成员管理和部署公钥管理</p>
<p>| 成员角色         | 权限                     |
| —————- | ————————- |
| 访客（登录用户） | 对于公有仓库：创建 Issue、评论、Clone 和 Pull 仓库、打包下载代码、Fork 仓库、 Fork 仓库提交 Pull Request、下载附件 |
| 报告者           | 继承访客的权限。 私有仓库：不能查看代码、不能下载代码、不能 Push 、不能 Fork 、 不能提交 Pull Request、可下载附件，不能上传附件，不能删除附件 |
| 观察者           | 继承报告者权限 私有仓库：创建 Wiki、可以 Clone 下载代码、可以 Pull、不能 Fork |
| 开发者           | 创建 Issue、评论、Clone 和 Pull 仓库、Fork 仓库、打包下载代码、创建 Pull Request、 创建分支、推送分支、删除分支、创建标签（里程碑）、 创建 Wiki、可上传附件，可删除自己上传的附件，不能删除他人上传的附件、 |
| 管理员           | 创建 Issue、评论、Clone 和 Pull 仓库、打包下载代码、创建 Pull Request、 创建分支、推送分支、删除分支、创建标签（里程碑）、创建 Wiki、 添加仓库成员、强制推送分支、编辑仓库属性、可上传附件，可删除自己或他人上传的附件、 不能转移/清空/删除仓库 |</p>
<p>这里你直接可以邀请用户，注意这个和Fork是不一样的，Fork就是提交修改的请求，需要成员的同意。新建成员就可以同意提交修改的请求。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200511172334850.png" src="https://img-blog.csdnimg.cn/20200511172334850.png" /></p>
</div>
<div class="section" id="id39">
<h2>10、部署公钥管理<a class="headerlink" href="#id39" title="永久链接至标题">¶</a></h2>
<p>公钥是什么，就是管理这个项目的钥匙，一般都是项目成员有的。</p>
<p>SSH协议的Git服务，在使用SSH协议访问仓库仓库之前，需要先配置好账户/仓库的SSH公钥。</p>
<p>你需要用Git的SSH 创建Key，然后把这个key放在这个仓库中，一般针对是仓库不是你托管的，在别人平台，你也是项目的成员。</p>
<div class="highlight-clike notranslate"><div class="highlight"><pre><span></span>YIUYE@DESKTOP-5EEO47M MINGW64 ~
$ ssh-keygen -t rsa -C &quot;2953510364@qq.com&quot;
Generating public/private rsa key pair.
Enter file in which to save the key (/c/Users/YIUYE/.ssh/id_rsa):
/c/Users/YIUYE/.ssh/id_rsa already exists.
Overwrite (y/n)?

YIUYE@DESKTOP-5EEO47M MINGW64 ~
$ pwd
/c/Users/YIUYE

YIUYE@DESKTOP-5EEO47M MINGW64 ~
$ cd .ssh

YIUYE@DESKTOP-5EEO47M MINGW64 ~/.ssh
$ ls
id_rsa  id_rsa.pub  known_hosts

YIUYE@DESKTOP-5EEO47M MINGW64 ~/.ssh
$ cat id_rsa.pub
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC/bZaaJ9lO2a9AAuMWVpdsZfIVr4wqBA2vNAsButaNIMAx0OkYrfTloLl138+khQqteZ5b9lZdmiYEuAIS8UlBEdHmNo4LiJrLi4DdqOajpsbbdTmjCc4rlEraKOH2qVOTNEj6E+0oeYnnbQlGcA/nKdVbN8bfcsMWiN82Bjn19dP3LXC4oubRP2jWR/X3KyYcX58z1oltCbaIHtgRs1kFp6srFcU067CSmMulxmFXTalWkRSPq1d/gNWUYpii14YBIFUvwLmJlrUtXBcGZGqZhqu50FjpRcCY0TRV3DqZAR2/KnsRN7VeyuYCDmeXKc+UyNeS3zPFgKS7oyFi60CB 2953510364@qq.com
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200511173541967.png" src="https://img-blog.csdnimg.cn/20200511173541967.png" /></p>
<p>复制生成后的 ssh key，通过仓库主页 「管理」-&gt;「部署公钥管理」-&gt;「添加部署公钥」 ，添加生成的 public key 添加到仓库中。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200511173830397.png" src="https://img-blog.csdnimg.cn/20200511173830397.png" /></p>
<p>添加后，在终端（Terminal）中输入</p>
<div class="highlight-clike notranslate"><div class="highlight"><pre><span></span>ssh -T git@gitee.com
</pre></div>
</div>
<p>首次使用需要确认并添加主机到本机SSH可信列表。若返回 Hi XXX! You’ve successfully authenticated, but Gitee.com does not provide shell access. 内容，则证明添加成功</p>
<p><img alt="https://img-blog.csdnimg.cn/20200511173932897.png" src="https://img-blog.csdnimg.cn/20200511173932897.png" /></p>
<p>部署公钥管理是针对不是你的项目而已，由于项目是我，做这个是没有任何意义的。</p>
</div>
<div class="section" id="id40">
<h2>11、如何白嫖别人的资料<a class="headerlink" href="#id40" title="永久链接至标题">¶</a></h2>
<p>Github上有很多开源免费的资料，很多人为了Star就开源了很多学习资料，在我国都是分享学习资料比较多，比如我搜索Python</p>
<p><img alt="https://img-blog.csdnimg.cn/20200511174245742.png" src="https://img-blog.csdnimg.cn/20200511174245742.png" /></p>
<p>下面就有几千个学习资料，所以学东西最好在Github，然后你就下载下来，学习别人是怎么写代码。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200511174408224.png" src="https://img-blog.csdnimg.cn/20200511174408224.png" /></p>
<p>还有很多人是为了找项目，在原始项目进行二次开发。白嫖的时候，请你注意版权。</p>
</div>
<div class="section" id="id41">
<h2>12、文章推荐<a class="headerlink" href="#id41" title="永久链接至标题">¶</a></h2>
<p>我主要推荐的Github的help官方文档</p>
<p>https://help.github.com/en</p>
<p><img alt="https://img-blog.csdnimg.cn/20200511174803457.png" src="https://img-blog.csdnimg.cn/20200511174803457.png" /></p>
<p>Github就主要看企业的文档和Github的桌面版</p>
<p><img alt="https://img-blog.csdnimg.cn/20200511174951617.png" src="https://img-blog.csdnimg.cn/20200511174951617.png" /></p>
<p>Github的桌面版以后接着写，还有码云的help官方文档：https://gitee.com/help/</p>
<p><img alt="https://img-blog.csdnimg.cn/20200511175058983.png" src="https://img-blog.csdnimg.cn/20200511175058983.png" />
看不懂英文的，翻译也不对，那直接看码云的文档，和Github是基本一样的。</p>
</div>
</div>
<div class="section" id="id42">
<h1>6、乘胜追击，将剩下的Git知识点搞定<a class="headerlink" href="#id42" title="永久链接至标题">¶</a></h1>
<p>&#64;Author ： By Runsen
&#64;Date： 2020/5/15</p>
<p>先上图回顾回顾
<img alt="https://img-blog.csdnimg.cn/20190801172352872.png" src="https://img-blog.csdnimg.cn/20190801172352872.png" />
<img alt="https://img-blog.csdnimg.cn/20190801172403911.png" src="https://img-blog.csdnimg.cn/20190801172403911.png" /></p>
<div class="section" id="id43">
<h2>1、对比文件<a class="headerlink" href="#id43" title="永久链接至标题">¶</a></h2>
<p><img alt="https://img-blog.csdnimg.cn/2020051519080911.png" src="https://img-blog.csdnimg.cn/2020051519080911.png" /></p>
<p>我先通过git log 查看以前的信息。对比文件的命名很简单</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">git</span> <span class="nt">diff</span> <span class="nt">HEAD</span> <span class="nt">HEAD</span><span class="o">^</span> <span class="nt">--</span> <span class="nt">文件名</span>
</pre></div>
</div>
<p>HEAD表示当前的版本，HEAD^ 表示上一个版本。
<img alt="https://img-blog.csdnimg.cn/20200515190922878.png" src="https://img-blog.csdnimg.cn/20200515190922878.png" /></p>
</div>
<div class="section" id="id44">
<h2>2、文件删除<a class="headerlink" href="#id44" title="永久链接至标题">¶</a></h2>
<p>删除没有添加进版本库中的工作区中的文件，那直接删除不用做任何操作。</p>
<p>如果已添加进工作区但没有提交的文件，先要先撤回工作区</p>
<p>比如，现在我写了一个<code class="docutils literal notranslate"><span class="pre">文件添加到版本库.txt</span></code>。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200515191245233.png" src="https://img-blog.csdnimg.cn/20200515191245233.png" /></p>
<p>先提交下，git status 查看状态，绿色就是在版本库。</p>
<p><img alt="https://img-blog.csdnimg.cn/2020051519143026.png" src="https://img-blog.csdnimg.cn/2020051519143026.png" />
现在就是使用</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">git</span> <span class="nt">reset</span> <span class="nt">HEAD</span>
</pre></div>
</div>
<p>就可以撤销了，不行git status 查看状态，红色就是在工作区。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200515191748504.png" src="https://img-blog.csdnimg.cn/20200515191748504.png" /></p>
<p>如果我已提交到版本库，突然间我发现写错了代码，老板看了，肯定扣我工资 ，不行，我赶紧要回来。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200515192532376.png?" src="https://img-blog.csdnimg.cn/20200515192532376.png?" /></p>
<p>去码云看看，发现存在了。现在怎么把这个文件撤回呢？</p>
<p><img alt="https://img-blog.csdnimg.cn/20200515192615841.png" src="https://img-blog.csdnimg.cn/20200515192615841.png" /></p>
<p>有人说，我直接去Github码云上删除，恩，是一种办法，而且是一个猪办法</p>
<p><img alt="https://img-blog.csdnimg.cn/20200515193131734.png" src="https://img-blog.csdnimg.cn/20200515193131734.png" />
如果项目不是在你的账号创建的，就没资格用客户端删东西。</p>
<p>答案就是回滚，再提交，只需要执行：</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">git</span> <span class="nt">revert</span> <span class="nt">HEAD</span>
<span class="nt">git</span> <span class="nt">push</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200515193748656.png" src="https://img-blog.csdnimg.cn/20200515193748656.png" /></p>
<p>这时候就没有了
<img alt="https://img-blog.csdnimg.cn/20200515193809887.png" src="https://img-blog.csdnimg.cn/20200515193809887.png" /></p>
</div>
<div class="section" id="id45">
<h2>3、创建分支<a class="headerlink" href="#id45" title="永久链接至标题">¶</a></h2>
<p>正常的开发项目中都是多人协作，每个人的任务一般不会一天就完成，如果把没有完成的代码提交到远程仓库会影响被人工作。git提供了分支的功能就不用担心了，可以创建一个自己的分支，在上面干活，想提交就提交，等到工作完成再一次性合并到原来的分支。</p>
<p>新建git仓库时会默认创建一个分支master，它叫主分支。一般情况我们不会直接在主分支上干活，它主要用来发布版本。</p>
<p>我创建一个开发分支develop</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">git</span> <span class="nt">branch</span> <span class="nt">develop</span>
</pre></div>
</div>
<p>再切换到develop分支</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">git</span> <span class="nt">checkout</span> <span class="nt">develop</span>
</pre></div>
</div>
<p>‘
<img alt="https://img-blog.csdnimg.cn/20200515194148130.png" src="https://img-blog.csdnimg.cn/20200515194148130.png" /></p>
<p>使用git branch命令查看当前分支。-b参数表示创建并切换。</p>
<p>如果想创建的时候，直接切换，直接-b参数</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">git</span> <span class="nt">checkout-b</span>  <span class="nt">develop</span> 
</pre></div>
</div>
</div>
<div class="section" id="id46">
<h2>4、合并分支<a class="headerlink" href="#id46" title="永久链接至标题">¶</a></h2>
<p>创建好develop分支，菜比的我，24小时之后开发完毕，提交：</p>
<p><img alt="https://img-blog.csdnimg.cn/20200515194525171.png" src="https://img-blog.csdnimg.cn/20200515194525171.png" /></p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="o">$</span> <span class="nt">git</span> <span class="nt">add</span> <span class="o">.</span>
<span class="o">$</span> <span class="nt">git</span> <span class="nt">commit</span> <span class="nt">-m</span> <span class="s1">&#39;24小时之后开发完毕&#39;</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200515194625617.png" src="https://img-blog.csdnimg.cn/20200515194625617.png" /></p>
<p>现在切换到master</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="o">$</span> <span class="nt">git</span> <span class="nt">checkout</span> <span class="nt">master</span>
<span class="nt">Switched</span> <span class="nt">to</span> <span class="nt">branch</span> <span class="s1">&#39;master&#39;</span>
</pre></div>
</div>
<p>查看工作区，你会发现刚才写的文件没有了，不要惊慌，因为那个提交是在develop分支上，现在Runsne把develop分支的工作合并到master分支上：</p>
<p><img alt="https://img-blog.csdnimg.cn/20200515194803519.png" src="https://img-blog.csdnimg.cn/20200515194803519.png" /></p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">git</span> <span class="nt">merge</span> <span class="nt">develop</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200515194857226.png" src="https://img-blog.csdnimg.cn/20200515194857226.png" /></p>
<p>这个时候就出现了
<img alt="https://img-blog.csdnimg.cn/20200515194917844.png" src="https://img-blog.csdnimg.cn/20200515194917844.png" /></p>
</div>
<div class="section" id="id47">
<h2>5、删除分支<a class="headerlink" href="#id47" title="永久链接至标题">¶</a></h2>
<p>合并完之后你也可以删除掉develop分支：</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="o">$</span> <span class="nt">git</span> <span class="nt">branch</span> <span class="nt">-d</span> <span class="nt">develop</span>
<span class="nt">Deleted</span> <span class="nt">branch</span> <span class="nt">develop</span> <span class="o">(</span><span class="nt">was</span> <span class="nt">25942c9</span><span class="o">)).</span>
<span class="o">$</span> <span class="nt">git</span> <span class="nt">branch</span>
<span class="o">*</span> <span class="nt">master</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200515195109608.png" src="https://img-blog.csdnimg.cn/20200515195109608.png" /></p>
<p>OK搞定，把之前的Git文章全部删除</p>
<p><img alt="https://img-blog.csdnimg.cn/20200515195234117.png" src="https://img-blog.csdnimg.cn/20200515195234117.png" /></p>
</div>
</div>
<div class="section" id="pycharm-python">
<h1>7、连Pycharm都不知道怎么用，学什么Python<a class="headerlink" href="#pycharm-python" title="永久链接至标题">¶</a></h1>
<p>&#64;Date： 2020/5/16</p>
<p>作者介绍：Runsen目前大三下学期，专业化学工程与工艺，大学沉迷日语，Python， Java和一系列数据分析软件。导致翘课严重，专业排名中下。.在大学60%的时间，都在CSDN。</p>
<p>工欲善其事必先利其器，Pycharm 是最受欢迎的Python开发工具，它提供的功能非常强大，我尽量把自己用的都写写吧</p>
<div class="section" id="id48">
<h2>1、设置Python 解释器<a class="headerlink" href="#id48" title="永久链接至标题">¶</a></h2>
<p>在任何项目，第一步就是设置Python 解释器，就是那个Python.exe</p>
<p>在File-&gt;Setting-&gt;Projec: xxx 下找到 Project Interpreter。然后修改为你需要的 Python 解释器。注意这个地方一定要注意的是：在选择 Python 解释器的时候，一定要选择到 python.exe 这个文件，而不是 python 的安装文件夹。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200516114228617.png" src="https://img-blog.csdnimg.cn/20200516114228617.png" /></p>
<p>咋RunsenPycharm中设置了有anacodna的 python.exe ，有远程的python.exe，有直接下载的python.exe</p>
<p><img alt="https://img-blog.csdnimg.cn/20200516114610502.png" src="https://img-blog.csdnimg.cn/20200516114610502.png" /></p>
<p>本地和anaconda不说了，太他妈简单了，就说如何远程虚拟机吧，连接Docker，可能小白都不知道什么是Docker，以后在说吧</p>
<div class="section" id="id49">
<h3>1.1 远程配置<a class="headerlink" href="#id49" title="永久链接至标题">¶</a></h3>
<p>Pycharm设置远程应该是使用Django项目的时候，</p>
<p><img alt="https://img-blog.csdnimg.cn/20200516115034682.png" src="https://img-blog.csdnimg.cn/20200516115034682.png" />
其实很简单，我就拿我的Centos7 ip是192.168.9290</p>
<p><img alt="https://img-blog.csdnimg.cn/20200516120014224.png" src="https://img-blog.csdnimg.cn/20200516120014224.png" /></p>
<p>用户名的密码
<img alt="https://img-blog.csdnimg.cn/20200516120120693.png" src="https://img-blog.csdnimg.cn/20200516120120693.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20200516120415173.png" src="https://img-blog.csdnimg.cn/20200516120415173.png" /></p>
<p>然后就是配置中两个东西</p>
<p><img alt="https://img-blog.csdnimg.cn/20200516120520908.png" src="https://img-blog.csdnimg.cn/20200516120520908.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20200516120755569.png" src="https://img-blog.csdnimg.cn/20200516120755569.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20200516120818428.png" src="https://img-blog.csdnimg.cn/20200516120818428.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20200516120842918.png" src="https://img-blog.csdnimg.cn/20200516120842918.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20200516120936271.png" src="https://img-blog.csdnimg.cn/20200516120936271.png" /></p>
<p>出现了Deployment就说明OK了。</p>
<p><img alt="https://img-blog.csdnimg.cn/202005161210276.png" src="https://img-blog.csdnimg.cn/202005161210276.png" /></p>
</div>
</div>
<div class="section" id="id50">
<h2>2、调整字体及其大小<a class="headerlink" href="#id50" title="永久链接至标题">¶</a></h2>
<div class="section" id="id51">
<h3>2.1 调整编辑器字体及其大小<a class="headerlink" href="#id51" title="永久链接至标题">¶</a></h3>
<p>所有的位置都是在Settings中，具体哪里看图</p>
<p><img alt="https://img-blog.csdnimg.cn/20200516121509710.png" src="https://img-blog.csdnimg.cn/20200516121509710.png" /></p>
</div>
<div class="section" id="id52">
<h3>2.2 调整控制台的字体及其大小<a class="headerlink" href="#id52" title="永久链接至标题">¶</a></h3>
<p><img alt="https://img-blog.csdnimg.cn/20200516121815501.png" src="https://img-blog.csdnimg.cn/20200516121815501.png" /></p>
</div>
</div>
<div class="section" id="id53">
<h2>3、设置编码<a class="headerlink" href="#id53" title="永久链接至标题">¶</a></h2>
<p><img alt="https://img-blog.csdnimg.cn/20200516121954173.png" src="https://img-blog.csdnimg.cn/20200516121954173.png" /></p>
</div>
<div class="section" id="id54">
<h2>4、修改文件背景颜色<a class="headerlink" href="#id54" title="永久链接至标题">¶</a></h2>
<p><img alt="https://img-blog.csdnimg.cn/20200516122149105.png" src="https://img-blog.csdnimg.cn/20200516122149105.png" /></p>
</div>
<div class="section" id="git-github">
<h2>5、设置Git 和Github<a class="headerlink" href="#git-github" title="永久链接至标题">¶</a></h2>
<div class="section" id="id55">
<h3>5.1 配置git<a class="headerlink" href="#id55" title="永久链接至标题">¶</a></h3>
<p>Git的位置
<img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/20190510203756991.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDUxMDYxNQ==,size_16,color_FFFFFF,t_70" /></p>
</div>
<div class="section" id="id56">
<h3>5.2 配置github<a class="headerlink" href="#id56" title="永久链接至标题">¶</a></h3>
<p><img alt="https://img-blog.csdnimg.cn/20190510203845319.png" src="https://img-blog.csdnimg.cn/20190510203845319.png" />
现在就可以上传代码到github
<img alt="这里插入图片描述" src="https://img-blog.csdnimg.cn/20190510204021554.png" /></p>
<p>上次代码到Github的Commit</p>
<p><img alt="https://img-blog.csdnimg.cn/20190510204131560.png" src="https://img-blog.csdnimg.cn/20190510204131560.png" /></p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/20190510204224523.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/2019051020425614.png" src="https://img-blog.csdnimg.cn/2019051020425614.png" /></p>
</div>
<div class="section" id="id57">
<h3>5.3  下载仓库内容<a class="headerlink" href="#id57" title="永久链接至标题">¶</a></h3>
<p><img alt="https://img-blog.csdnimg.cn/20190510204438422.png" src="https://img-blog.csdnimg.cn/20190510204438422.png" />
<img alt="https://img-blog.csdnimg.cn/20190510204645314.png" src="https://img-blog.csdnimg.cn/20190510204645314.png" /></p>
</div>
</div>
<div class="section" id="py">
<h2>6 、新建.py文件时默认添加信息<a class="headerlink" href="#py" title="永久链接至标题">¶</a></h2>
<p>这是去年的博客</p>
<p>对于pycharm我们每次新建Python文件时需要加的注释信息和作者时间等信息可以使用模板的方式，这样每次新建文件之后就默认添加比较方便。
1、点击pycharm的右上角的file出现如下图点击settings：</p>
<p><img alt="https://img-blog.csdnimg.cn/20200330141119187.png" src="https://img-blog.csdnimg.cn/20200330141119187.png" /></p>
<p>2、接着就是找到如下图的地方：</p>
<p><img alt="https://img-blog.csdnimg.cn/20200330141752131.png" src="https://img-blog.csdnimg.cn/20200330141752131.png" /></p>
<p>3、在里面加上想要创建文件之后就默认添加的内容，下面是编辑内容的具体格式：
预定义的变量要扩展为格式为$ {&lt;variable_name&gt;}的相应值。</p>
<p>可用的预定义文件模板变量为：</p>
<p>$ {PROJECT_NAME} - 当前项目的名称。</p>
<p>$ {NAME} - 在文件创建过程中在“新建文件”对话框中指定的新文件的名称。</p>
<p>$ {USER} - 当前用户的登录名。</p>
<p>$ {DATE} - 当前的系统日期。</p>
<p>$ {TIME} - 当前系统时间。</p>
<p>$ {YEAR} - 今年。</p>
<p>$ {MONTH} - 当月。</p>
<p>$ {DAY} - 当月的当天。</p>
<p>$ {HOUR} - 目前的小时。</p>
<p>$ {MINUTE} - 当前分钟。</p>
<p>$ {PRODUCT_NAME} - 将在其中创建文件的IDE的名称。</p>
<p>$ {MONTH_NAME_SHORT} - 月份名称的前3个字母。 示例：1月，2月等</p>
<p>$ {MONTH_NAME_FULL} - 一个月的全名。 示例：1月，2月等</p>
<p><img alt="https://img-blog.csdnimg.cn/2020033014180732.png" src="https://img-blog.csdnimg.cn/2020033014180732.png" /></p>
</div>
<div class="section" id="id58">
<h2>7、恢复代码<a class="headerlink" href="#id58" title="永久链接至标题">¶</a></h2>
<p>如果误删了代码，不要怕</p>
<p><img alt="https://img-blog.csdnimg.cn/20200516123222114.png" src="https://img-blog.csdnimg.cn/20200516123222114.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/202005161232476.png" src="https://img-blog.csdnimg.cn/202005161232476.png" /></p>
</div>
<div class="section" id="id59">
<h2>8、代码换行<a class="headerlink" href="#id59" title="永久链接至标题">¶</a></h2>
<p>写的代码多了，可以Soft–Wrap自动换行</p>
<p><img alt="https://img-blog.csdnimg.cn/20200516123356794.png" src="https://img-blog.csdnimg.cn/20200516123356794.png" /></p>
</div>
<div class="section" id="reformat-code">
<h2>9、Reformat Code<a class="headerlink" href="#reformat-code" title="永久链接至标题">¶</a></h2>
<p>写的代码不够好看，直接Reformat</p>
<p><img alt="https://img-blog.csdnimg.cn/20200516123514734.png" src="https://img-blog.csdnimg.cn/20200516123514734.png" /></p>
</div>
<div class="section" id="id60">
<h2>10、连接数据库<a class="headerlink" href="#id60" title="永久链接至标题">¶</a></h2>
<p><img alt="https://img-blog.csdnimg.cn/20200516123703954.png" src="https://img-blog.csdnimg.cn/20200516123703954.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20190514212208760.png" src="https://img-blog.csdnimg.cn/20190514212208760.png" /></p>
<p>Host: 远程ip 若是连接本地MySQL 直接写localhost即可
Database: 填写数据库名称,不写默认连接之后,可以查看当前用户权限下的所有数据库
User: MySQL用户名
Password: MySQL密码</p>
<p>注意: 首次连接需要下载驱动,点击左下角的Download下载</p>
<p>下载完毕后,点击test connection ,测试连接 成功显示Successful Details</p>
<p><img alt="https://img-blog.csdnimg.cn/20190514212313839.png" src="https://img-blog.csdnimg.cn/20190514212313839.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20190514212339278.png" src="https://img-blog.csdnimg.cn/20190514212339278.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20190514212417852.png" src="https://img-blog.csdnimg.cn/20190514212417852.png" /></p>
</div>
<div class="section" id="debug">
<h2>11、Debug<a class="headerlink" href="#debug" title="永久链接至标题">¶</a></h2>
<p><img alt="https://img-blog.csdnimg.cn/20200516124041537.png" src="https://img-blog.csdnimg.cn/20200516124041537.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20200516124106239.png" src="https://img-blog.csdnimg.cn/20200516124106239.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20200516124202661.png" src="https://img-blog.csdnimg.cn/20200516124202661.png" /></p>
<p>前面的信息就可以显示出来</p>
</div>
<div class="section" id="id61">
<h2>12、PyCharm 常用快捷键<a class="headerlink" href="#id61" title="永久链接至标题">¶</a></h2>
<p>熟悉每个编辑器的快捷键，能大大提高你的工作效率。</p>
<p><img alt="https://img-blog.csdnimg.cn/2020051612295584.png" src="https://img-blog.csdnimg.cn/2020051612295584.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/202005161230082.png" src="https://img-blog.csdnimg.cn/202005161230082.png" /></p>
<p>这里介绍了Pycharm的日常使用，关键就是不断地练习。</p>
</div>
</div>
<div class="section" id="id62">
<h1>8、第一篇、小白看的 Python 基础教程，详细得很<a class="headerlink" href="#id62" title="永久链接至标题">¶</a></h1>
<p>本文是第一篇，一共四篇打下Python基础</p>
<p>&#64;Author：Runsen</p>
<p>&#64;Date：Writern By 2019/04/15 and supplied By 2020/3/31</p>
<p>&#64;公众号：Python之王</p>
<p>一共四篇，声明下：Python的入门难度为0，比Java，C++根本不能比，你会英语基本没问题。</p>
<p>本文是第一篇</p>
<div class="section" id="id63">
<h2>1、基本概念<a class="headerlink" href="#id63" title="永久链接至标题">¶</a></h2>
<div class="section" id="id64">
<h3>1.1 四种类型<a class="headerlink" href="#id64" title="永久链接至标题">¶</a></h3>
<p>python中数有四种类型：整数、长整数、浮点数和复数。</p>
<ul class="simple">
<li>整数， 如 1</li>
<li>长整数 是比较大的整数</li>
<li>浮点数 如 1.23、3E-2</li>
<li>复数 如 1 + 2j、 1.1 + 2.2j</li>
</ul>
</div>
<div class="section" id="id65">
<h3>1.2 字符串<a class="headerlink" href="#id65" title="永久链接至标题">¶</a></h3>
<p>字符串（字符的序列）</p>
<ul class="simple">
<li>python中单引号和双引号使用完全相同。</li>
<li>使用三引号(‘’’或”””)可以指定一个多行字符串。</li>
<li>转义符 <code class="docutils literal notranslate"><span class="pre">'\'</span></code></li>
<li>自然字符串， 通过在字符串前加r或R。 如<code class="docutils literal notranslate"> <span class="pre">r&quot;this</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">line</span> <span class="pre">with</span> <span class="pre">\n&quot;</span></code> 则<code class="docutils literal notranslate"><span class="pre">\n</span></code>会显示，并不是换行。</li>
<li>python允许处理<code class="docutils literal notranslate"><span class="pre">unicode</span></code>字符串，加前缀u或U， 如 <code class="docutils literal notranslate"><span class="pre">u&quot;this</span> <span class="pre">is</span> <span class="pre">an</span> <span class="pre">unicode</span> <span class="pre">string&quot;</span></code>。</li>
<li>字符串是不可变的。</li>
<li>按字面意义级联字符串，如”this “ “is “ “string”会被自动转换为this is string。</li>
</ul>
</div>
<div class="section" id="id66">
<h3>1.3 标识符的命名<a class="headerlink" href="#id66" title="永久链接至标题">¶</a></h3>
<p>标识符的命名</p>
<ul class="simple">
<li>第一个字符必须是字母表中字母或下划线’_’。</li>
<li>标识符的其他的部分有字母、数字和下划线组成。</li>
<li>标识符对大小写敏感。</li>
</ul>
</div>
<div class="section" id="id67">
<h3>1.4 对象<a class="headerlink" href="#id67" title="永久链接至标题">¶</a></h3>
<p>python程序中用到的任何“东西”都成为“对象”。</p>
</div>
<div class="section" id="id68">
<h3>1.5 逻辑行和物理行<a class="headerlink" href="#id68" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li>物理行：就是程序员所写代码的所在行。</li>
<li>逻辑行：是指源代码经过预编译后，代码所在的那一行。</li>
</ul>
<p>Python假定每个物理行都对应着一个逻辑行。例如：print( “Hello World” ) 就是一个物理行，Python希望每行只有一个语句，因为这样看起来更加易读。</p>
<p>如果你想要在一个物理行中使用多于一个逻辑行，那么你需要使用分号（; ）来特别地标明这种用法。分号表示一个逻辑行/语句的结束。</p>
<p>例如：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">count</span> <span class="o">=</span> <span class="mi">5</span>
<span class="k">print</span> <span class="p">(</span> <span class="s2">&quot;count&quot;</span> <span class="p">)</span>
</pre></div>
</div>
<p>与下面的语句等同：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>count = 5；
print ( &quot;count&quot; );
</pre></div>
</div>
<p>当然也可以写成下面这种：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">count</span> <span class="o">=</span> <span class="mi">5</span> <span class="p">;</span> <span class="k">print</span> <span class="p">(</span> <span class="s2">&quot;count&quot;</span> <span class="p">);</span>
</pre></div>
</div>
<p>甚至可以写成这样：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">count</span> <span class="o">=</span> <span class="mi">5</span> <span class="p">;</span> <span class="k">print</span> <span class="p">(</span> <span class="s2">&quot;count&quot;</span> <span class="p">)</span>
</pre></div>
</div>
<p>我们使用<code class="docutils literal notranslate"><span class="pre">\</span></code>的换行</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">print</span> \
<span class="p">(</span><span class="s2">&quot;Runsen&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id69">
<h3>1.6 缩进<a class="headerlink" href="#id69" title="永久链接至标题">¶</a></h3>
<p>空白在python是非常重要的，行首的空白是最重要的，又称为缩进。行首的空白（空格和制表符）用来决定逻辑行的缩进层次，从而决定语句。</p>
</div>
</div>
<div class="section" id="id70">
<h2>2、运算符与表达式<a class="headerlink" href="#id70" title="永久链接至标题">¶</a></h2>
<div class="section" id="id71">
<h3>2.1 运算符与其用法<a class="headerlink" href="#id71" title="永久链接至标题">¶</a></h3>
<p>| 运算符 | 名称                                                        | 例子                                                         |
| —— | ———————————————————– | ———————————————————— |
| +      | 两个对象相加                                                | 加法，如3 + 5得到8,字符也可以相加’a’ + ‘b’得到’ab’           |
| -      | 一个数减去另一个数                                          | 5 - 2得到3                                                   |
| *      | 乘	两个数相乘或是返回一个被重复若干次的字符串            | 2 * 3得到6,’a’ * 3得到’aaa’                                  |
| **   | 幂	返回x的y次幂                                          | 3 ** 4得到81（即3 * 3 * 3 * 3）                              |
| /      | 除	x除以y                                                | 4/3得到1（整数的除法得到整数结果）。4.0/3或4/3.0得到1.3333   |
| //     | 取整除	返回商的整数部分                                  | 4 // 3.0得到1.                                               |
| %      | 取模	返回除法的余数                                      | 8%3得到2。-25.5%2.25得到1.5                                  |
| &lt;&lt;     | 左移，把一个数的二进制左移一定数目，也就是在右边补多少个0， | 如	2 &lt;&lt; 2得到8，二进制10变成1000                          |
| &gt;&gt;     | 右移	把一个数的比特向右移一定数目,也就是在右边删除位数   | 10&gt;&gt;2得到2，二进制1010变成10，直接删除后面2位                |
| &amp;      | 按位与                                                      | 数的按位与	9 &amp; 13得到9，二进制1001&amp;1101，变成1001，两个值相应的位置都为1，那么该结果就是1，不然就是0 |
| |     | 按位或                                                      | 数的按位或	5 | 3得到7。二进制101&amp;11，变成111，如果两个值相应的位置有一个是1,那么该结果就是1，也就是如果都是0，该结果就是0，101和11没有都是0，所以111 |
| ^      | 按位异或                                                    | 数的按位异或	5 ^ 3得到6，二进制101&amp;11，变成110，两个值相应的位置相同,那么该结果就是0，也就是如果都是0或者都是1，该结果就是0，101和11，第一个都是1，所以110 |
| ~      | 按位翻转                                                    | x的按位翻转是-(x+1)	~5得到6                               |
| &lt;      | 小于	返回x是否小于y。                                    | 所有比较运算符返回1表示真，返回0表示假。	5 &lt; 3返回0（即False）而3 &lt; 5返回1（即True）。还可以被任意连接：3 &lt; 5 &lt; 7返回True。 |
| &gt;      | 大于	返回x是否大于y                                      | 5 &gt; 3返回True。如果两个操作数需要都是数字                    |
| &lt;=     | 小于等于	返回x是否小于等于y                              | x = 3; y = 6; x &lt;= y返回True                                 |
| &gt;=     | 大于等于	返回x是否大于等于y                              | x = 4; y = 3; x &gt;= y返回True                                 |
| ==     | 等于	比较对象是否相等                                    | x = 2; y = 2; x == y返回True                                 |
| !=     | 不等于	比较两个对象是否不相等                            | x = 2; y = 3; x != y返回True。                               |
| not    | 布尔“非”	如果x为True，返回False                          | x = True; not y返回False。                                   |
| or     | 布尔“或”	如果x是True，它返回True，否则它返回y的计算值。  | x = True; y = False; x or y返回True                          |</p>
</div>
<div class="section" id="id72">
<h3>2.2 运算符优先级<a class="headerlink" href="#id72" title="永久链接至标题">¶</a></h3>
<p>运算符优先级（从低到高）</p>
<p>| 运算符               | 描述             |
| ——————– | —————- |
| lambda               | Lambda表达式     |
| or                   | 布尔“或”         |
| and                  | 布尔“与”         |
| not x                | 布尔“非”         |
| in，not in           | 成员测试         |
| is，is not           | 同一性测试       |
| &lt;，&lt;=，&gt;，&gt;=，!=，== | 比较             |
| <code class="docutils literal notranslate"><span class="pre">|</span> </code>                 | 按位或           |
| ^                    | 按位异或         |
| <code class="docutils literal notranslate"><span class="pre">|</span> </code>                 | 按位或           |
| &amp;                    | 按位与           |
| &lt;&lt;，&gt;&gt;               | 移位             |
| +，-                 | 加法与减法       |
| *，/，%              | 乘法、除法与取余 |
| +x，-x               | 正负号           |
| ~x                   | 按位翻转         |
| **                   | 指数             |
| ~x                   | 按位翻转         |
| x.attribute          | 属性参考         |
| x[index]             | 下标             |
| x[index:index]       | 寻址段           |
| f(arguments…)      | 函数调用         |
| (experession,…)    | 绑定或元组显示   |
| [expression,…]     | 列表显示         |
| {key:datum,…}      | 字典显示         |
| ‘expression,…’     | 字符串           |</p>
</div>
<div class="section" id="id73">
<h3>2.3 输出<a class="headerlink" href="#id73" title="永久链接至标题">¶</a></h3>
<p>python 控制台输出 使用print</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">print</span> <span class="p">(</span><span class="s2">&quot;abc&quot;</span>  <span class="p">)</span>　　<span class="c1">#打印abc并换行</span>
<span class="k">print</span> <span class="p">(</span><span class="s2">&quot;abc</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="s2">&quot;d&quot;</span>  <span class="p">)</span>　　<span class="c1">#打印abcd</span>
<span class="k">print</span> <span class="p">(</span><span class="s2">&quot;abc</span><span class="si">%s</span><span class="s2">ef</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;g&quot;</span><span class="p">)</span>  <span class="p">)</span>　　<span class="c1">#打印abcdefg</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id74">
<h2>3、控制流<a class="headerlink" href="#id74" title="永久链接至标题">¶</a></h2>
<div class="section" id="if">
<h3>3.1 if 语句<a class="headerlink" href="#if" title="永久链接至标题">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">i</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;enter a number:&quot;</span><span class="p">))</span>

<span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="n">i</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span> <span class="s2">&quot;equal&quot;</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span> <span class="s2">&quot;lower&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span> <span class="p">(</span><span class="s2">&quot;higher&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="while">
<h3>3.2 while语句<a class="headerlink" href="#while" title="永久链接至标题">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="k">pass</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">pass</span>
<span class="c1">#else语句可选，当while为False时，else语句被执行。 pass是空语句。</span>
</pre></div>
</div>
<p>for 循环 for..in</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">):</span>
    <span class="k">print</span> <span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">pass</span>
<span class="c1"># 打印0到4</span>
</pre></div>
</div>
<p>注：当for循环结束后执行else语句；
<code class="docutils literal notranslate"><span class="pre">range(a,</span> <span class="pre">b)返回一个序列，从a开始到b为止，但不包括b，range默认步长为1，可以指定步长，range(0,10,2)；</span></code></p>
</div>
<div class="section" id="break">
<h3>3.3 break语句<a class="headerlink" href="#break" title="永久链接至标题">¶</a></h3>
<p>终止循环语句，如果从for或while中终止，任何对应循环的else将不执行。</p>
</div>
<div class="section" id="continue">
<h3>3.4 continue语句<a class="headerlink" href="#continue" title="永久链接至标题">¶</a></h3>
<p>continue语句用来调过当前循环的剩余语句，然后继续下一轮循环。</p>
<p>下面就是 break 和 continue 主要的 区别：</p>
<ul class="simple">
<li>break：跳出整个循环</li>
<li>continue：跳出本次循环，继续执行下一次循环
希望大家牢记。</li>
</ul>
</div>
</div>
<div class="section" id="id75">
<h2>4、函数<a class="headerlink" href="#id75" title="永久链接至标题">¶</a></h2>
<p>函数通过def定义。def关键字后跟函数的标识符名称，然后跟一对圆括号，括号之内可以包含一些变量名，该行以冒号结尾；接下来是一块语句，即函数体。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">sumOf</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
</pre></div>
</div>
<div class="section" id="id76">
<h3>4.1  函数形参<a class="headerlink" href="#id76" title="永久链接至标题">¶</a></h3>
<p>函数中的参数名称为‘形参’，调用函数时传递的值为‘实参’</p>
</div>
<div class="section" id="id77">
<h3>4.2 局部变量<a class="headerlink" href="#id77" title="永久链接至标题">¶</a></h3>
<p>在函数内定义的变量与函数外具有相同名称的其他变量没有任何关系，即变量名称对于函数来说是局部的。这称为变量的作用域。</p>
<p><code class="docutils literal notranslate"><span class="pre">global语句，</span> <span class="pre">为定义在函数外的变量赋值时使用global语句。</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">x</span>
    <span class="k">print</span><span class="p">(</span> <span class="s2">&quot;x is &quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">x</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">func</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1">#3</span>
<span class="c1">#1 </span>
</pre></div>
</div>
</div>
<div class="section" id="id78">
<h3>4.3 默认参数<a class="headerlink" href="#id78" title="永久链接至标题">¶</a></h3>
<p>通过使用默认参数可以使函数的一些参数是‘可选的’。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">say</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">times</span> <span class="o">=</span>  <span class="mi">1</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">msg</span> <span class="o">*</span> <span class="n">times</span><span class="p">)</span>

<span class="n">say</span><span class="p">(</span><span class="s2">&quot;Runsen&quot;</span><span class="p">)</span>
<span class="n">say</span><span class="p">(</span><span class="s2">&quot;Runsen&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>注意：只有在形参表末尾的那些参数可以有默认参数值，即不能在声明函数形参的时候，先声明有默认值的形参而后声明没有默认值的形参，只是因为赋给形参的值是根据位置而赋值的。</p>
</div>
<div class="section" id="id79">
<h3>4.4 关键参数<a class="headerlink" href="#id79" title="永久链接至标题">¶</a></h3>
<p>如果某个函数有很多参数，而现在只想指定其中的部分，那么可以通过命名为这些参数赋值（称为‘关键参数’）。
优点：不必担心参数的顺序，使函数变的更加简单；假设其他参数都有默认值，可以只给我们想要的那些参数赋值。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
    <span class="k">print</span> <span class="p">(</span><span class="s2">&quot;a is </span><span class="si">%s</span><span class="s2">, b is </span><span class="si">%s</span><span class="s2">, c is </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>

<span class="n">func</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1">#a is 1, b is 2, c is 3</span>
<span class="n">func</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="c1">#a is 1, b is 5, c is 3</span>
<span class="n">func</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span> <span class="c1">#a is 1, b is 2, c is 10</span>
<span class="n">func</span><span class="p">(</span><span class="n">c</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">30</span><span class="p">)</span> <span class="c1">#a is 30, b is 2, c is 20</span>
</pre></div>
</div>
</div>
<div class="section" id="return">
<h3>4.5 return 语句<a class="headerlink" href="#return" title="永久链接至标题">¶</a></h3>
<p>return语句用来从一个函数返回，即跳出函数。可从函数返回一个值。
　没有返回值的return语句等价于return None。None表示没有任何东西的特殊类型。</p>
</div>
<div class="section" id="id80">
<h3>4.6  文档字符串<a class="headerlink" href="#id80" title="永久链接至标题">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">__doc__</span></code>   (文档字符串)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="sd">&#39;&#39;&#39;This is self-defined function</span>
<span class="sd">	Do nothing</span>
<span class="sd">	&#39;&#39;&#39;</span>
    <span class="k">pass</span>

<span class="k">print</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>

<span class="c1">#This is self-defined function</span>
<span class="c1">#</span>
<span class="c1">#Do nothing</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id81">
<h2>5、模块<a class="headerlink" href="#id81" title="永久链接至标题">¶</a></h2>
<p>模块就是一个包含了所有你定义的函数和变量的文件，模块必须以.py为扩展名。模块可以从其他程序中‘输入’<code class="docutils literal notranslate"><span class="pre">(import)</span></code>以便利用它的功能。</p>
<p>在python程序中导入其他模块使用’import’, 所导入的模块必须在sys.path所列的目录中，因为sys.path第一个字符串是空串’’即当前目录，所以程序中可导入当前目录的模块。</p>
<div class="section" id="pyc">
<h3>5.1 字节编译的.pyc文件<a class="headerlink" href="#pyc" title="永久链接至标题">¶</a></h3>
<p>导入模块比较费时，python做了优化，以便导入模块更快些。一种方法是创建字节编译的文件，这些文件以.pyc为扩展名。</p>
<p>pyc是一种二进制文件，是py文件经编译后产生的一种byte code，而且是跨平台的（平台无关）字节码，是有python虚拟机执行的，类似于</p>
<p>java或.net虚拟机的概念。pyc的内容，是跟python的版本相关的，不同版本编译后的pyc文件是不同的。</p>
</div>
<div class="section" id="from-import">
<h3>5.2  from .. import<a class="headerlink" href="#from-import" title="永久链接至标题">¶</a></h3>
<p>如果想直接使用其他模块的变量或其他，而不加’模块名+.’前缀，可以使用from .. import。</p>
<p>例如想直接使用sys的argv，from sys import argv 或 from sys import *</p>
</div>
<div class="section" id="name">
<h3>5.3 模块的__name__<a class="headerlink" href="#name" title="永久链接至标题">¶</a></h3>
<p>每个模块都有一个名称，py文件对应模块名默认为py文件名，也可在py文件中为__name__赋值；如果是__name__，说明这个模块被用户</p>
</div>
<div class="section" id="dir">
<h3>5.4 dir()函数<a class="headerlink" href="#dir" title="永久链接至标题">¶</a></h3>
<p>dir(sys)返回sys模块的名称列表；如果不提供参数，即dir()，则返回当前模块中定义名称列表。</p>
</div>
<div class="section" id="del">
<h3>5.5 del<a class="headerlink" href="#del" title="永久链接至标题">¶</a></h3>
<p>del -&gt; 删除一个变量/名称，del之后，该变量就不能再使用。</p>
</div>
</div>
<div class="section" id="id82">
<h2>6、数据结构<a class="headerlink" href="#id82" title="永久链接至标题">¶</a></h2>
<p>python有三种内建的数据结构：列表、元组和字典。</p>
<div class="section" id="id83">
<h3>6.1 列表<a class="headerlink" href="#id83" title="永久链接至标题">¶</a></h3>
<p>list是处理一组有序项目的数据结构，列表是可变的数据结构。列表的项目包含在方括号[]中，</p>
<p>eg: [1, 2, 3]， 空列表[]。判断列表中是否包含某项可以使用in，</p>
<p>比如 l = [1, 2, 3]; print 1 in l; #True；</p>
<p>支持索引和切片操作；索引时若超出范围，则IndexError；</p>
<p>使用函数len()查看长度；使用del可以删除列表中的项，eg: del l[0] # 如果超出范围，则IndexError
　　　　
list函数如下：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>append（value）　　---向列表尾添加项value
l = [1, 2, 2]
l.append(3) #[1, 2, 2, 3]

count(value)　　---返回列表中值为value的项的个数
l = [1, 2, 2]
print( l.count(2)) # 2

extend(list2)　　---向列表尾添加列表list2
l = [1, 2, 2]
l1 = [10, 20]
l.extend(l1)
print (l )  #[1, 2, 2, 10, 20]

index(value, [start, [stop]])　　---返回列表中第一个出现的值为value的索引，如果没有，则异常 ValueError

l = [1, 2, 2]
a = 4
try:
    print( l.index(a))
except ValueError, ve:
    print( &quot;there is no %d in list&quot; % a
　　　　insert(i, value))　　---向列表i位置插入项vlaue，如果没有i，则添加到列表尾部

l = [1, 2, 2]

l.insert(1, 100)
print l #[1, 100, 2, 2]

l.insert(100, 1000)
print l #[1, 100, 2, 2, 1000]

pop([i])　　---返回i位置项，并从列表中删除；如果不提供参数，则删除最后一个项；如果提供，但是i超出索引范围，则异常IndexError

l = [0, 1, 2, 3, 4, 5]

print( l.pop()) # 5
print( l) #[0, 1, 2, 3, 4]

print( l.pop(1)) #1
print( l) #[0, 2, 3, 4]

try:
    l.pop(100)
except IndexError, ie:
    print( &quot;index out of range&quot;)

remove(value)　　---删除列表中第一次出现的value，如果列表中没有vlaue，则异常ValueError

l = [1, 2, 3, 1, 2, 3]

l.remove(2)
print (l )#[1, 3, 1, 2, 3]

try:
    l.remove(10)
except ValueError, ve:
    print (&quot;there is no 10 in list&quot;)

reverse()　　---列表反转

l = [1, 2, 3]
l.reverse()
print (l) #[3, 2, 1]

sort(cmp=None, key=None, reverse=False)　　---列表排序

l5 = [10, 5, 20, 1, 30]
l5.sort()
print( l5) #[1, 5, 10, 20, 30]

l6 = [&quot;bcd&quot;, &quot;abc&quot;, &quot;cde&quot;, &quot;bbb&quot;]
l6.sort(cmp = lambda s1, s2: cmp(s1[0],s2[1]))
print( l6) #[&#39;abc&#39;, &#39;bbb&#39;, &#39;bcd&#39;, &#39;cde&#39;]

l7 = [&quot;bcd&quot;, &quot;abc&quot;, &quot;cde&quot;, &quot;bbb&quot;, &quot;faf&quot;]
l7.sort(key = lambda s: s[1])
print (l7) #[&#39;faf&#39;, &#39;abc&#39;, &#39;bbb&#39;, &#39;bcd&#39;, &#39;cde&#39;]
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id84">
<h1>9、第二篇、小白看的 Python 基础教程，详细得很<a class="headerlink" href="#id84" title="永久链接至标题">¶</a></h1>
<p>﻿</p>
<p>本文是第二篇</p>
<p>&#64;Author：Runsen</p>
<p>&#64;公众号：Python之王</p>
<div class="section" id="id85">
<h2>6.2 元组<a class="headerlink" href="#id85" title="永久链接至标题">¶</a></h2>
<p>tuple和list十分相似，但是tuple是不可变的，即不能修改tuple，元组通过圆括号中用逗号分割的项定义。</p>
<ul class="simple">
<li>支持索引和切片操作</li>
<li>可以使用 in查看一个元素是否在tuple中。</li>
<li>空元组()</li>
<li>只含有一个元素的元组(“a”,) #需要加个逗号</li>
</ul>
<p>优点：tuple比list速度快；对不需要修改的数据进行‘写保护’，可以是代码更安全</p>
<p><code class="docutils literal notranslate"><span class="pre">tuple与list可以相互转换，使用内置的函数list()和tuple()。</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span> <span class="n">l</span> <span class="p">)</span><span class="c1"># [1, 2, 3]</span>

<span class="n">t</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="c1"># (1, 2, 3)</span>

<span class="n">l</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="k">print</span> <span class="p">(</span><span class="n">l</span><span class="p">)</span> <span class="c1">#[1, 2, 3]</span>
</pre></div>
</div>
<p>元组最通常的用法是用在打印语句，如下例：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Runsen&quot;</span>
<span class="n">age</span> <span class="o">=</span> <span class="mi">20</span>
<span class="k">print</span><span class="p">(</span> <span class="s2">&quot;Name: </span><span class="si">%s</span><span class="s2">; Age: </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">)</span>
<span class="c1"># Name: Runsen; Age: 20</span>
</pre></div>
</div>
<p><strong>函数如下：</strong></p>
<ul class="simple">
<li>count(value)</li>
</ul>
<p>返回元组中值为value的元素的个数</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="k">print</span> <span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="p">)</span><span class="c1"># 2</span>
</pre></div>
</div>
<ul class="simple">
<li>index(value, [start, [stop]])</li>
</ul>
<p>返回列表中第一个出现的值为value的索引，如果没有，则异常 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span> <span class="n">t</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="p">)</span><span class="c1"># 2</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">print</span> <span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
<span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">V</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">V</span><span class="p">)</span>  <span class="c1"># there is no 4 in tuple</span>
</pre></div>
</div>
</div>
<div class="section" id="id86">
<h2>6.3 字典<a class="headerlink" href="#id86" title="永久链接至标题">¶</a></h2>
<p>字典由键值对组成，键必须是唯一的；</p>
<p>eg: <code class="docutils literal notranslate"><span class="pre">d</span> <span class="pre">=</span> <span class="pre">{key1:value1,</span> <span class="pre">key2:value2}；</span></code></p>
<p>空字典用{}表示；字典中的键值对是没有顺序的，如果想要一个特定的顺序，那么使用前需要对它们排序；</p>
<p><code class="docutils literal notranslate"><span class="pre">d[key]</span> <span class="pre">=</span> <span class="pre">value</span></code>，如果字典中已有<code class="docutils literal notranslate"><span class="pre">key</span></code>，则为其赋值为<code class="docutils literal notranslate"><span class="pre">value</span></code>，否则添加新的键值对<code class="docutils literal notranslate"><span class="pre">key/value</span></code>；</p>
<p>使用<code class="docutils literal notranslate"><span class="pre">del</span> <span class="pre">d[key]</span> </code>可以删除键值对；判断字典中是否有某键，可以使用in 或 not in；</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">d</span><span class="p">[</span><span class="s2">&quot;1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;one&quot;</span>
<span class="n">d</span><span class="p">[</span><span class="s2">&quot;2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;two&quot;</span>
<span class="n">d</span><span class="p">[</span><span class="s2">&quot;3&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;three&quot;</span>

<span class="k">del</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;3&quot;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">print</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> --&gt; </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
<span class="c1">#1 --&gt; one</span>
<span class="c1">#2 --&gt; two</span>
</pre></div>
</div>
<p><strong>dict函数如下:</strong></p>
<ul class="simple">
<li>clear()</li>
</ul>
<p>删除字典中所有元素</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">d1</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;1&quot;</span><span class="p">:</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">:</span><span class="s2">&quot;two&quot;</span><span class="p">}</span>
<span class="n">d1</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="k">print</span> <span class="p">(</span><span class="n">d1</span> <span class="p">)</span><span class="c1"># {}</span>
</pre></div>
</div>
<ul class="simple">
<li>copy()</li>
</ul>
<p>返回字典的一个副本(浅复制)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">d1</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;1&quot;</span><span class="p">:</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">:</span><span class="s2">&quot;two&quot;</span><span class="p">}</span>
<span class="n">d2</span> <span class="o">=</span> <span class="n">d1</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span> <span class="n">d2</span> <span class="p">)</span><span class="c1">#{&#39;1&#39;: &#39;one&#39;, &#39;2&#39;: &#39;two&#39;}</span>

<span class="k">print</span><span class="p">(</span><span class="n">d1</span> <span class="o">==</span> <span class="n">d2</span><span class="p">)</span> <span class="c1"># True</span>
<span class="k">print</span><span class="p">(</span><span class="n">d1</span> <span class="ow">is</span> <span class="n">d2</span><span class="p">)</span> <span class="c1"># False</span>
</pre></div>
</div>
<p>浅复制值相同，但是对象不同，内存地址不同。</p>
<ul class="simple">
<li>dict.fromkeys(seq,val=None)</li>
</ul>
<p>创建并返回一个新字典，以序列seq中元素做字典的键，val为字典所有键对应的初始值(默认为None)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">t</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">d3</span> <span class="o">=</span> <span class="p">{}</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
<span class="k">print</span> <span class="p">(</span><span class="n">d3</span><span class="p">)</span> <span class="c1">#{1: None, 2: None, 3: None}</span>

<span class="n">d4</span> <span class="o">=</span> <span class="p">{}</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s2">&quot;default&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">d4</span><span class="p">)</span> <span class="c1">#{1: &#39;default&#39;, 2: &#39;default&#39;, 3: &#39;default&#39;}</span>
</pre></div>
</div>
<ul class="simple">
<li>get(key,[default])</li>
</ul>
<p>返回字典dict中键key对应值，如果字典中不存在此键，则返回default的值(default默认值为None)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">d5</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span><span class="s2">&quot;three&quot;</span><span class="p">}</span>
<span class="k">print</span> <span class="p">(</span><span class="n">d5</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">)</span><span class="c1">#one</span>
<span class="k">print</span> <span class="p">(</span><span class="n">d5</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span> <span class="c1">#None</span>
<span class="k">print</span> <span class="p">(</span><span class="n">d5</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;test&quot;</span><span class="p">)</span> <span class="p">)</span><span class="c1">#test</span>
</pre></div>
</div>
<ul class="simple">
<li>has_key(key)</li>
</ul>
<p>判断字典中是否有键key</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">d6</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span><span class="s2">&quot;three&quot;</span><span class="p">}</span>
<span class="k">print</span><span class="p">(</span> <span class="n">d6</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">)</span> <span class="c1">#True</span>
<span class="k">print</span> <span class="p">(</span><span class="n">d6</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>  <span class="c1">#False</span>
</pre></div>
</div>
<ul class="simple">
<li>items()</li>
</ul>
<p>返回一个包含字典中(键, 值)对元组的列表</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">d7</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span><span class="s2">&quot;three&quot;</span><span class="p">}</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">d7</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">print</span> <span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="c1">#(1, &#39;one&#39;)</span>
<span class="c1">#(2, &#39;two&#39;)</span>
<span class="c1">#(3, &#39;three&#39;)</span>

<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">d7</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">print</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> -- </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
<span class="c1">#1 -- one</span>
<span class="c1">#2 -- two</span>
<span class="c1">#3 -- three</span>
</pre></div>
</div>
<ul class="simple">
<li>keys()</li>
</ul>
<p>返回一个包含字典中所有键的列表</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">d8</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span><span class="s2">&quot;three&quot;</span><span class="p">}</span>

<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">d8</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
    <span class="k">print</span> <span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="c1">#1</span>
<span class="c1">#2</span>
<span class="c1">#3</span>
</pre></div>
</div>
<ul class="simple">
<li>values()</li>
</ul>
<p>返回一个包含字典中所有值的列表</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">d8</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span><span class="s2">&quot;three&quot;</span><span class="p">}</span>
<span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">d8</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span> <span class="n">value</span><span class="p">)</span>
<span class="c1">#one</span>
<span class="c1">#two</span>
<span class="c1">#three</span>
</pre></div>
</div>
<ul class="simple">
<li>pop(key, [default])</li>
</ul>
<p>若字典中key键存在，删除并返回dict[key]，若不存在，且未给出default值，引发KeyError异常</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">d9</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span><span class="s2">&quot;three&quot;</span><span class="p">}</span>
<span class="k">print</span> <span class="p">(</span><span class="n">d9</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">)</span><span class="c1">#one</span>
<span class="k">print</span><span class="p">(</span> <span class="n">d9</span><span class="p">)</span> <span class="c1">#{2: &#39;two&#39;, 3: &#39;three&#39;}</span>
<span class="k">print</span><span class="p">(</span> <span class="n">d9</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span> <span class="c1">#None</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">d9</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>  <span class="c1"># raise KeyError</span>
<span class="k">except</span> <span class="ne">KeyError</span><span class="p">,</span> <span class="n">ke</span><span class="p">:</span>
    <span class="k">print</span> <span class="p">(</span> <span class="s2">&quot;KeyError:&quot;</span><span class="p">,</span> <span class="n">ke</span><span class="p">)</span> <span class="c1">#KeyError:5</span>
</pre></div>
</div>
<ul class="simple">
<li>popitem()</li>
</ul>
<p>删除任意键值对，并返回该键值对，如果字典为空，则产生异常KeyError</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">d10</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span><span class="s2">&quot;three&quot;</span><span class="p">}</span>

<span class="k">print</span> <span class="p">(</span><span class="n">d10</span><span class="o">.</span><span class="n">popitem</span><span class="p">()</span> <span class="p">)</span> <span class="c1">#(1, &#39;one&#39;)</span>
<span class="k">print</span> <span class="p">(</span><span class="n">d10</span><span class="p">)</span>  <span class="c1">#{2: &#39;two&#39;, 3: &#39;three&#39;}</span>
</pre></div>
</div>
<ul class="simple">
<li>setdefault(key,[default])</li>
</ul>
<p>若字典中有key，则返回vlaue值，若没有key，则加上该key，值为default，默认None</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span><span class="s2">&quot;three&quot;</span><span class="p">}</span>

<span class="k">print</span> <span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>  <span class="c1">#one</span>
<span class="k">print</span> <span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>  <span class="c1">#None</span>
<span class="k">print</span><span class="p">(</span> <span class="n">d</span><span class="p">)</span>  <span class="c1">#{1: &#39;one&#39;, 2: &#39;two&#39;, 3: &#39;three&#39;, 5: None}</span>
<span class="k">print</span> <span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="s2">&quot;six&quot;</span><span class="p">))</span> <span class="c1">#six</span>
<span class="k">print</span> <span class="p">(</span><span class="n">d</span><span class="p">)</span>  <span class="c1">#{1: &#39;one&#39;, 2: &#39;two&#39;, 3: &#39;three&#39;, 5: None, 6: &#39;six&#39;}</span>
</pre></div>
</div>
<ul class="simple">
<li>update(dict2)</li>
</ul>
<p>把dict2的元素加入到dict中去，键字重复时会覆盖dict中的键值</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span><span class="s2">&quot;three&quot;</span><span class="p">}</span>
<span class="n">d2</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span><span class="s2">&quot;first&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span><span class="s2">&quot;forth&quot;</span><span class="p">}</span>

<span class="n">d</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">d2</span><span class="p">)</span>
<span class="k">print</span> <span class="p">(</span><span class="n">d</span><span class="p">)</span>  <span class="c1">#{1: &#39;first&#39;, 2: &#39;two&#39;, 3: &#39;three&#39;, 4: &#39;forth&#39;}</span>
</pre></div>
</div>
<ul class="simple">
<li>viewitems()</li>
</ul>
<p>返回一个view对象，（key, value）pair的列表，类似于视图。优点是，如果字典发生变化，view会同步发生变化。在
迭代过程中，字典不允许改变，否则会报异常</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span><span class="s2">&quot;three&quot;</span><span class="p">}</span>
<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">viewitems</span><span class="p">():</span>
    <span class="k">print</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> - </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
<span class="c1">#1 - one</span>
<span class="c1">#2 - two</span>
<span class="c1">#3 - three</span>
</pre></div>
</div>
<ul class="simple">
<li>viewkeys()</li>
</ul>
<p>返回一个view对象，key的列表</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span><span class="s2">&quot;three&quot;</span><span class="p">}</span>
<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">viewkeys</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span> <span class="n">key</span><span class="p">)</span>
<span class="c1">#1</span>
<span class="c1">#2</span>
<span class="c1">#3</span>
</pre></div>
</div>
<ul class="simple">
<li>viewvalues()</li>
</ul>
<p>返回一个view对象，value的列表</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span><span class="s2">&quot;three&quot;</span><span class="p">}</span>
<span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">viewvalues</span><span class="p">():</span>
    <span class="k">print</span> <span class="p">(</span><span class="n">value</span><span class="p">)</span>
<span class="c1">#one</span>
<span class="c1">#two</span>
<span class="c1">#three</span>
</pre></div>
</div>
</div>
<div class="section" id="id87">
<h2>6.4 序列<a class="headerlink" href="#id87" title="永久链接至标题">¶</a></h2>
<p>序列类型是指容器内的元素从0开始的索引顺序访问，一次可以访问一个或者多个元素；列表、元组和字符串都是序列。
序列的三个主要特点是</p>
<ul class="simple">
<li>索引操作符和切片操作符</li>
<li>索引可以得到特定元素</li>
<li>切片可以得到部分序列</li>
</ul>
<p><strong>索引操作符和切片操作符</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;zero&quot;</span><span class="p">,</span> <span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="s2">&quot;three&quot;</span><span class="p">,</span> <span class="s2">&quot;four&quot;</span><span class="p">]</span>
  
<span class="k">print</span> <span class="p">(</span><span class="n">numbers</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span><span class="c1"># one</span>
<span class="k">print</span> <span class="p">(</span><span class="n">numbers</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span><span class="c1"># four</span>
<span class="c1">#print( numbers[5]) # raise IndexError</span>
<span class="k">print</span> <span class="p">(</span><span class="n">numbers</span><span class="p">[:])</span> <span class="c1"># [&#39;zero&#39;, &#39;one&#39;, &#39;two&#39;, &#39;three&#39;, &#39;four&#39;]</span>
<span class="k">print</span> <span class="p">(</span><span class="n">numbers</span><span class="p">[</span><span class="mi">3</span><span class="p">:])</span> <span class="c1"># [&#39;three&#39;, &#39;four&#39;]</span>
<span class="k">print</span> <span class="p">(</span><span class="n">numbers</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span> <span class="c1"># [&#39;zero&#39;, &#39;one&#39;]</span>
<span class="k">print</span> <span class="p">(</span><span class="n">numbers</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span> <span class="p">)</span><span class="c1"># [&#39;two&#39;, &#39;three&#39;]</span>
<span class="k">print</span> <span class="p">(</span><span class="n">numbers</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span><span class="c1"># [&#39;one&#39;, &#39;two&#39;, &#39;three&#39;] </span>
</pre></div>
</div>
<p>切片操作符中的第一个数（冒号之前）表示切片开始的位置，第二个数（冒号之后）表示切片到哪里结束。</p>
<p>如果不指定第一个数，Python就从序列首开始。如果没有指定第二个数，则Python会停止在序列尾。</p>
<p>注意，返回的序列从开始位置 开始 ，刚好在结束位置之前 结束。即开始位置是包含在序列切片中的，而结束位置被排斥在切片外。 可以用负数做切片。负数用在从序列尾开始计算的位置。</p>
</div>
</div>
<div class="section" id="id88">
<h1>10、第三篇、小白看的 Python 基础教程，详细得很<a class="headerlink" href="#id88" title="永久链接至标题">¶</a></h1>
<p>﻿</p>
<p>本文是第三篇</p>
<p>&#64;Author：Runsen</p>
<p>&#64;公众号：Python之王</p>
<p>上面两个基本搞定了Python中数据结构，下面花一篇讲讲最重要的类。</p>
<div class="section" id="id89">
<h2>7、面向对象编程<a class="headerlink" href="#id89" title="永久链接至标题">¶</a></h2>
<p>万物皆是对象，Python当然支持面向对象编程。类和对象是面向对象编程的两个主要方面，类创建一个新的对象，对象是这个类的实例。</p>
<p>对象可以使用类的变量，属于对象或类的变量被称为域；对象也可以使用属于类的函数，这样的函数称为类的方法；域和方法可以合称为类的属性。</p>
<p>域有两种类型</p>
<ul class="simple">
<li>属于实例的</li>
<li>属于类本身</li>
</ul>
<p>它们分别被称为实例变量和类变量。类使用关键字<code class="docutils literal notranslate"><span class="pre">class</span></code>创建，类的域和方法被列在一个缩进块中。</p>
<p>类的方法必须有一个额外的第一个参数，但是在调用时不为这个参数赋值，这个特殊变量指对象本身，按照惯例它的名称是self，类似Java中的this。</p>
<p>在类中下面两个特都方法需要注意：</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">__init__</span></code>方法：在类的一个对象被创建时调用该方法；相当于c++中的构造函数，就是当这个类调用了，那么这个<code class="docutils literal notranslate"><span class="pre">__init__</span> </code>方法就要执行。</li>
<li><code class="docutils literal notranslate"><span class="pre">__del__</span></code>方法：在类的对象被销毁时调用该方法；相当于c++中的析构函数。在使用del删除一个对象时也就调用<code class="docutils literal notranslate"><span class="pre">__del__</span></code>方法，<code class="docutils literal notranslate"><span class="pre">__del__</span></code>是最后调用的。</li>
</ul>
<p>Python中所有的类成员(包括数据成员)都是public的，没有Java的私有类，也就是人人都有调用类，虽然编写变成很简单，
但是资源人人都可以随意分配访问，在项目中确实一个不好的东西。</p>
<p>但是Python 类的却有私有变量和私有方法之说，这个是一个例外，如果使用的数据成员以双下划线为前缀，则为私有变量。</p>
<p>你实例化这个类，访问不了。这是很多人忽略 的</p>
<p>比如：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>class public():
    _name = &#39;protected类型的变量&#39;
    __info = &#39;私有类型的变量&#39;
    def _f(self):
        print(&quot;这是一个protected类型的方法&quot;)
    def __f2(self):
        print(&#39;这是一个私有类型的方法&#39;)
    def get(self):
        return(self.__info)
pub = public()
# 先打印可以访问的
print(pub._name)
pub._f()
####结果如下####
protected类型的变量
这是一个protected类型的方法


# 打印下类 私有变量和私有方法
print(pub.__info)
报错：&#39;public&#39; object has no attribute &#39;__info&#39;
pub._f2()
报错：pub._f2()
</pre></div>
</div>
<p>但是私有属性和方法可以在同一个类中被调用</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pub</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="c1">#######</span>
<span class="s1">&#39;私有类型的变量&#39;</span>
</pre></div>
</div>
<p>上面是很多人不知道的，下面，我来声明一个Person类</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>   
<span class="k">class</span> <span class="nc">Person</span><span class="p">():</span>
    <span class="n">Count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">):</span>
        <span class="n">Person</span><span class="o">.</span><span class="n">Count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__age</span> <span class="o">=</span> <span class="n">age</span>
    
<span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="s2">&quot;Runsen&quot;</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">Count</span><span class="p">)</span>

<span class="c1"># 1 说明我实例化，这个__init__方法就要执行</span>


<span class="k">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="c1">#Runsen</span>
<span class="k">print</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">__age</span><span class="p">)</span> 
<span class="c1">#AttributeError: Person instance has no attribute &#39;__age&#39;</span>
<span class="c1">#私有变量访问不了，报错</span>
</pre></div>
</div>
</div>
<div class="section" id="id90">
<h2>8、继承<a class="headerlink" href="#id90" title="永久链接至标题">¶</a></h2>
<p>面向对象编程 (OOP)，英语全称：Object Oriented Programming，面向对象编程的一个主要功能就是“继承”。继承是指这样一种能力：它可以使用现有类的所有功能，并在无需重新编写原来的类的情况下对这些功能进行扩展。</p>
<p>继承，其实这样理解，就是我写了一个爸爸类和儿子类，爸爸有钱，儿子却没钱，于是儿子决定继承爸爸，调用爸爸的钱（爸爸类的变量和方法）。</p>
<p>继承一个类，基本使用下面的五个方法。</p>
<div class="section" id="id91">
<h3>8.1 直接调用父类属性方法；<a class="headerlink" href="#id91" title="永久链接至标题">¶</a></h3>
<p>爸爸有钱，儿子却没钱，于是儿子用爸爸的钱</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>class Father():
    def __init__(self):
        self.money= 1000 
    def action(self):
        print(&#39;调用父类的方法&#39;)
 
class Son(Father):
    pass
 
son=Son()     # 子类Son 继承父类Father的所有属性和方法
son.action()  # 调用父类属性
输出：调用父类的方法
son.money     # 调用父类属性
输出：1000
</pre></div>
</div>
</div>
<div class="section" id="id92">
<h3>8.2 强制调用父类私有属性方法；<a class="headerlink" href="#id92" title="永久链接至标题">¶</a></h3>
<p>爸爸说，你这个儿子，老是用我的钱，我决定藏私房钱。儿子试试<code class="docutils literal notranslate"><span class="pre">super()</span></code>拿你的私房钱，但是这里需要注意<code class="docutils literal notranslate"><span class="pre">super()</span></code>强制调用父类私有属性方法，就是重写方法，私有变量是不能用supper继承不了，还不可以访问父类中的私有属性方法的变量，就是儿子是拿不了私房钱的。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>class Father():
    __money  = 1000 #私有变量是继承不了
    
    def __action(self):  # 父类的私有方法
        money = 1000
        print(&#39;调用父类的方法&#39;)
 
class Son(Father):
        
    def action(self):
        super()._Father__action()
        print(money) 
        
son=Son()
son.action() 

调用父类的方法
name &#39;money&#39; is not defined
</pre></div>
</div>
</div>
<div class="section" id="id93">
<h3>8.3 重写父类属性方法；<a class="headerlink" href="#id93" title="永久链接至标题">¶</a></h3>
<p>突然间儿子竟然有钱，决定不用爸爸的钱，用自己的钱，决定重写父类属性方法。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Father</span><span class="p">():</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">money</span> <span class="o">=</span> <span class="mi">0</span>
    
    <span class="k">def</span> <span class="nf">action</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;调用父类的方法&#39;</span><span class="p">)</span>
 
<span class="k">class</span> <span class="nc">Son</span><span class="p">(</span><span class="n">Father</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">money</span> <span class="o">=</span> <span class="mi">1000</span>
      
    <span class="k">def</span> <span class="nf">action</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;子类重写父类的方法&#39;</span><span class="p">)</span>
 
<span class="n">son</span><span class="o">=</span><span class="n">Son</span><span class="p">()</span>     <span class="c1"># 子类Son继承父类Father的所有属性和方法</span>
<span class="n">son</span><span class="o">.</span><span class="n">action</span><span class="p">()</span>  <span class="c1"># 子类Son调用自身的action方法而不是父类的action方法</span>
<span class="n">son</span><span class="o">.</span><span class="n">money</span>     <span class="c1"># 自己的1000</span>
</pre></div>
</div>
</div>
<div class="section" id="init">
<h3>8.4 调用父类的__init__方法<a class="headerlink" href="#init" title="永久链接至标题">¶</a></h3>
<p>如果爸爸把钱放在<code class="docutils literal notranslate"><span class="pre">__init__</span></code>，儿子有没有可能拿到爸爸的钱，都不是私有变量，就不是私房钱，当然可以拿到</p>
<p>我们先看看如果不用super，能不能拿到。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Father</span><span class="p">():</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">money</span> <span class="o">=</span> <span class="mi">1000</span>
 
<span class="k">class</span> <span class="nc">Son</span><span class="p">(</span><span class="n">Father</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
    
<span class="n">son</span><span class="o">=</span><span class="n">Son</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">son</span><span class="o">.</span><span class="n">money</span><span class="p">)</span>

<span class="c1"># 报错：&#39;Son&#39; object has no attribute &#39;money&#39;</span>
</pre></div>
</div>
<p>连super不用就像拿钱，太小看你爸爸我了。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Father</span><span class="p">():</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">money</span> <span class="o">=</span> <span class="mi">1000</span>
 
<span class="k">class</span> <span class="nc">Son</span><span class="p">(</span><span class="n">Father</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="c1">#也可以用 Father.__init__(self)  这里面的self一定要加上(上面两个相同)</span>
        
        
<span class="n">son</span><span class="o">=</span><span class="n">Son</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">son</span><span class="o">.</span><span class="n">money</span><span class="p">)</span> 

<span class="mi">1000</span>
</pre></div>
</div>
</div>
<div class="section" id="id94">
<h3>8.5 继承父类初始化过程中的参数<a class="headerlink" href="#id94" title="永久链接至标题">¶</a></h3>
<p>有的时候，爸爸需要挣钱和花钱，就是我们初始化过程中的参数，儿子很好奇，决定看看爸爸口袋还要多少钱。</p>
<p>我们这里先写死了earn_money和spend_money</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Father</span><span class="p">():</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">earn_money</span><span class="o">=</span><span class="mi">1000</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spend_money</span><span class="o">=</span> <span class="o">-</span><span class="mi">500</span>
 
<span class="k">class</span> <span class="nc">Son</span><span class="p">(</span><span class="n">Father</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="c1">#也可以用 Father.__init__(self)  这里面的self一定要加上</span>
        
    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">earn_money</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">spend_money</span>
        
        
<span class="n">son</span><span class="o">=</span><span class="n">Son</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">son</span><span class="o">.</span><span class="n">add</span><span class="p">())</span>

<span class="mi">500</span>
</pre></div>
</div>
<p>儿子发现爸爸钱不够，于是偷偷的拿了点钱过来。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Father</span><span class="p">():</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">earn_money</span> <span class="o">=</span> <span class="n">a</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spend_money</span><span class="o">=</span> <span class="n">b</span>
    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span>
 
<span class="c1">#调用父类初始化参数a,b并增加额外参数c</span>
<span class="k">class</span> <span class="nc">Son</span><span class="p">(</span><span class="n">Father</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>  <span class="c1"># c固定值</span>
        <span class="n">Father</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>  
        <span class="bp">self</span><span class="o">.</span><span class="n">son_money</span> <span class="o">=</span> <span class="n">c</span>
        
    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">earn_money</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">spend_money</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">son_money</span>
        
   
        
<span class="n">son</span><span class="o">=</span><span class="n">Son</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span><span class="o">-</span><span class="mi">500</span><span class="p">)</span>   <span class="c1"># 所以c可以不用显示表达出来</span>
<span class="k">print</span><span class="p">(</span><span class="n">son</span><span class="o">.</span><span class="n">add</span><span class="p">())</span>     <span class="c1"># 调用子类add函数</span>

<span class="mi">1500</span>
</pre></div>
</div>
<p>以上基本涵盖了Python类的继承，调用父类的属性和方法基础内容，可以自己动手写些案例，加深理解。</p>
</div>
</div>
<div class="section" id="id95">
<h2>9、输入/输出<a class="headerlink" href="#id95" title="永久链接至标题">¶</a></h2>
<p>程序与用户的交互需要使用输入/输出，主要包括控制台和文件；对于控制台可以使用input和print。input(xxx)输入xxx，
然后读取用户的输入并返回。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="nb">input</span><span class="p">()</span>
<span class="mi">1</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="s1">&#39;1&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="id96">
<h2>10、文件输入/输出<a class="headerlink" href="#id96" title="永久链接至标题">¶</a></h2>
<p>可以使用file类打开一个文件，使用file的read、readline和write来恰当的读写文件。对文件读写能力取决于打开文件时使用的模式，
常用模式</p>
<ul class="simple">
<li>读模式(“r”)</li>
<li>写模式(“w”)</li>
<li>追加模式(“a”)</li>
</ul>
<p>文件操作之后需要调用close方法来关闭文件。如果用with open就不用slose了。</p>
<p>还有r+，w+，a+</p>
<ul class="simple">
<li>r：仅仅表示读入</li>
<li>r+：既可以读取还可以写入</li>
<li>w: 仅仅表示写入</li>
<li>w+：既可以读取还可以写入</li>
</ul>
<p>但r+与w+不同的是，不会把原先存在txt中的东西清空，下面是他们的对比，反正尽量用a+，基本没什么错报出来。</p>
<p>| 描述                 | r+       | w+       | a+                       |
| ——————– | ——– | ——– | ———————— |
| 当前文件不存在时文件 | 抛出异常 | 创建文件 | 创建文件                 |
| 打开后原文件内容     | 保留     | 清空     | 保留                     |
| 初始位置             | 0        | 0        | 文件尾                   |
| 写入位置             | 标记位置 | 标记位置 | <strong>写入时默认跳至文件尾</strong> |</p>
<p>补充个例子吧：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">test</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s1">This is a program about file I/O.</span>
<span class="s1">Author: Runsen</span>
<span class="s1">Date: 2020/3/31</span>
<span class="s1">&#39;&#39;&#39;</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;test.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> 
<span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">test</span><span class="p">)</span> 
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> 

<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;test.txt&quot;</span><span class="p">)</span> <span class="c1">#默认r</span>
<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">line</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  
        <span class="k">break</span>
    <span class="k">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="c1">######</span>
<span class="n">This</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">program</span> <span class="n">about</span> <span class="nb">file</span> <span class="n">I</span><span class="o">/</span><span class="n">O</span><span class="o">.</span>

<span class="n">Author</span><span class="p">:</span> <span class="n">Runsen</span>

<span class="n">Date</span><span class="p">:</span> <span class="mi">2020</span><span class="o">/</span><span class="mi">3</span><span class="o">/</span><span class="mi">31</span>
</pre></div>
</div>
</div>
<div class="section" id="id97">
<h2>11、存储器<a class="headerlink" href="#id97" title="永久链接至标题">¶</a></h2>
<p>存储器，大家应该不知道。python提供一个标准的模块，成为pickle，使用它可以在一个文件中存储任何python对象，之后可以完整的取出来，这被称为持久地存储对象；还有另外一个模块成为cPickle，它的功能和pickle完全一样，只不过它是用c写的，要比pickle速度快(大约快1000倍)。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pickle</span>

<span class="n">datafile</span> <span class="o">=</span> <span class="s2">&quot;data.data&quot;</span>

<span class="n">mylist</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Runsen&quot;</span><span class="p">,</span> <span class="s2">&quot;is&quot;</span><span class="p">,</span> <span class="s2">&quot;20&quot;</span><span class="p">]</span>

<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;test.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;wb+&quot;</span><span class="p">)</span>
<span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">mylist</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="k">del</span> <span class="n">mylist</span>

<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">datafile</span><span class="p">,</span><span class="s1">&#39;rb+&#39;</span><span class="p">)</span>
<span class="n">mylist</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">mylist</span><span class="p">)</span>
<span class="c1">#[&quot;Runsen&quot;, &quot;is&quot;, &quot;20&quot;]</span>
</pre></div>
</div>
</div>
<div class="section" id="id98">
<h2>12、异常<a class="headerlink" href="#id98" title="永久链接至标题">¶</a></h2>
<p>当程序中出现某些异常的状况时，异常就发生了。</p>
<p>python中可以使用<code class="docutils literal notranslate"><span class="pre">try</span> <span class="pre">...</span> <span class="pre">except</span> </code>处理。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="k">print</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ZeroDivisionError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="k">except</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span> <span class="s2">&quot;error or exception occurred.&quot;</span><span class="p">)</span>

<span class="c1">#integer division or modulo by zero</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id99">
<h1>11、最后一篇，小白看的Python基础教程，详细得很<a class="headerlink" href="#id99" title="永久链接至标题">¶</a></h1>
<p>﻿</p>
<p>&#64;Author：Runsen</p>
<div class="section" id="id100">
<h2>13、Python标准库<a class="headerlink" href="#id100" title="永久链接至标题">¶</a></h2>
<p>Python标准库是随Pthon附带安装的，包含了大量极其有用的模块。</p>
<p>我们主要了解下sys和os就够了。</p>
<div class="section" id="sys">
<h3>13.1 sys模块<a class="headerlink" href="#sys" title="永久链接至标题">¶</a></h3>
<p>sys模块主要是针对与Python解释器相关的变量和方法，不是主机操作系统。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span>    <span class="c1">#获取命令行参数列表，第一个元素是程序本身</span>
<span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="c1">#退出Python程序，exit(0)表示正常退出。当参数非0时，会引发一个SystemExit异常，可以在程序中捕获该异常</span>
<span class="n">sys</span><span class="o">.</span><span class="n">version</span> <span class="c1">#获取Python解释程器的版本信息</span>
<span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span> <span class="c1">#最大的Int值，64位平台是2**63 - 1</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span>    <span class="c1">#返回模块的搜索路径，初始化时使用PYTHONPATH环境变量的值</span>
<span class="n">sys</span><span class="o">.</span><span class="n">platform</span>    <span class="c1">#返回操作系统平台名称</span>
<span class="n">sys</span><span class="o">.</span><span class="n">stdin</span>   <span class="c1">#输入相关</span>
<span class="n">sys</span><span class="o">.</span><span class="n">stdout</span>  <span class="c1">#输出相关</span>
<span class="n">sys</span><span class="o">.</span><span class="n">stderr</span>  <span class="c1">#错误相关</span>
<span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>  <span class="c1">#返回异常信息三元元组</span>
<span class="n">sys</span><span class="o">.</span><span class="n">getdefaultencoding</span><span class="p">()</span>    <span class="c1">#获取系统当前编码，默认为utf-8</span>
<span class="n">sys</span><span class="o">.</span><span class="n">setdefaultencoding</span><span class="p">()</span>    <span class="c1">#设置系统的默认编码</span>
<span class="n">sys</span><span class="o">.</span><span class="n">getfilesystemencoding</span><span class="p">()</span> <span class="c1">#获取文件系统使用编码方式，默认是utf-8</span>
<span class="n">sys</span><span class="o">.</span><span class="n">modules</span> <span class="c1">#以字典的形式返回所有当前Python环境中已经导入的模块</span>
<span class="n">sys</span><span class="o">.</span><span class="n">builtin_module_names</span>    <span class="c1">#返回一个列表，包含所有已经编译到Python解释器里的模块的名字</span>
<span class="n">sys</span><span class="o">.</span><span class="n">copyright</span>   <span class="c1">#当前Python的版权信息</span>
<span class="n">sys</span><span class="o">.</span><span class="n">flags</span>   <span class="c1">#命令行标识状态信息列表。只读。</span>
<span class="n">sys</span><span class="o">.</span><span class="n">getrefcount</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span> <span class="c1">#返回对象的引用数量</span>
<span class="n">sys</span><span class="o">.</span><span class="n">getrecursionlimit</span><span class="p">()</span> <span class="c1">#返回Python最大递归深度，默认1000</span>
<span class="n">sys</span><span class="o">.</span><span class="n">getsizeof</span><span class="p">(</span><span class="nb">object</span><span class="p">[,</span> <span class="n">default</span><span class="p">])</span>    <span class="c1">#返回对象的大小</span>
<span class="n">sys</span><span class="o">.</span><span class="n">getswitchinterval</span><span class="p">()</span> <span class="c1">#返回线程切换时间间隔，默认0.005秒</span>
<span class="n">sys</span><span class="o">.</span><span class="n">setswitchinterval</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span> <span class="c1">#设置线程切换的时间间隔，单位秒</span>
<span class="n">sys</span><span class="o">.</span><span class="n">getwindowsversion</span><span class="p">()</span> <span class="c1">#返回当前windwos系统的版本信息</span>
<span class="n">sys</span><span class="o">.</span><span class="n">hash_info</span>   <span class="c1">#返回Python默认的哈希方法的参数</span>
<span class="n">sys</span><span class="o">.</span><span class="n">implementation</span>  <span class="c1">#当前正在运行的Python解释器的具体实现，比如CPython</span>
<span class="n">sys</span><span class="o">.</span><span class="n">thread_info</span> <span class="c1">#当前线程信息</span>
</pre></div>
</div>
<p>上面是sys模块所有语法，我们看看就够了，了解下sys.argv和sys.path就足够了</p>
<p>sys.argv是一个脚本执行参数列表，列表的第一个元素是脚本名称，从第二个元素开始才是真正的参数。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span># test.py
import sys

for index, arg in enumerate(sys.argv):
    print(&quot;第%d个参数是： %s&quot; % (index, arg))

#输出
第0个参数是： test.py
第1个参数是： 1
第2个参数是： 2
第3个参数是： 3
第4个参数是： 4 
</pre></div>
</div>
<p>argv：获取程序外部向程序传递的参数</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#  script.py</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="k">print</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
<p>运行：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># python script.py argv1</span>
<span class="n">sys</span><span class="o">.</span><span class="n">py</span>
<span class="n">argv1</span>
</pre></div>
</div>
<p>sys.path</p>
<p>path是一个目录列表，供Python从中查找模块。在Python启动时，sys.path根据内建规则和PYTHONPATH变量进行初始化。sys.path的第一个元素通常是个空字符串，表示当前目录。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">path</span>
<span class="go">[&#39;&#39;, &#39;C:\\Python36\\Lib\\idlelib&#39;, &#39;C:\\Python36\\python36.zip&#39;, &#39;C:\\Python36\\DLLs&#39;, &#39;C:\\Python36\\lib&#39;, &#39;C:\\Python36&#39;, &#39;C:\\Python36\\lib\\site-packages&#39;]</span>
</pre></div>
</div>
<p>sys.path本质上是一个列表，可以进行append、insert、pop、remove等各种列表相关的操作，但通常都进行append操作，添加自己想要的查找路径。</p>
<p>sys.stdin、sys.stdout、sys.stderr</p>
<ul class="simple">
<li>stdin用于所有的交互式输入（包括input()函数）。</li>
<li>stdout用于print()的打印输出或者input()函数的提示符。</li>
<li>stderr用于解释器自己的提示信息和错误信息。</li>
</ul>
<p>简而言之，这三个属性就是操作系统的标准输入、输出和错误流，它们返回的都是一个“文件类型”对象，支持read()、write()和flush()等操作。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>        
<span class="go">i don&#39;t like python</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span>
<span class="go">&#39;i don&#39;t like python\n&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">i don&#39;t like python </span>
<span class="go">20</span>
</pre></div>
</div>
<p>python3中sys.stdin与input的区别：</p>
<p>input()方法和stdin()类似，不同的是input()括号内可以直接填写说明文字。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Please input something！&#39;</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Please input something！&#39;</span><span class="p">,)</span>  <span class="c1"># 逗号表示不换行</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">readline</span><span class="p">()[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># -1 抛弃输入流中的&#39;\n&#39; 换行符</span>
</pre></div>
</div>
<p>当我们print(obj)的时候，事实上是调用了sys.stdout.write(obj+’\n’)，将内容打印到控制台（默认是显示器），然后追加一个换行符。以下两行等价：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="os">
<h3>13.2 os模块<a class="headerlink" href="#os" title="永久链接至标题">¶</a></h3>
<p>该模块包含普遍的操作系统功能</p>
<ul class="simple">
<li>os.name字符串指示你正在使用的平台。比如对于Windows，它是’nt’，而对于Linux/Unix用户，它是’posix’</li>
<li>os.getcwd()函数得到当前工作目录，即当前Python脚本工作的目录路径</li>
<li>os.getenv()和os.putenv()函数分别用来读取和设置环境变量</li>
<li>os.listdir()返回指定目录下的所有文件和目录名</li>
<li>os.remove()函数用来删除一个文件</li>
<li>os.system()函数用来运行shell命令</li>
<li>os.linesep字符串给出当前平台使用的行终止符。例如，Windows使用’\r\n’，Linux使用’\n’而Mac使用’\r’</li>
<li>os.sep 操作系统特定的路径分割符</li>
<li>os.path.split()函数返回一个路径的目录名和文件名</li>
<li>os.path.isfile()和os.path.isdir()函数分别检验给出的路径是一个文件还是目录</li>
<li>os.path.existe()函数用来检验给出的路径是否真地存在</li>
</ul>
</div>
</div>
<div class="section" id="id101">
<h2>14、类中的特别方法<a class="headerlink" href="#id101" title="永久链接至标题">¶</a></h2>
<p>| 名称                  | 说明                                               |
| ——————— | ————————————————– |
| <strong>init</strong>(self,…)    | 这个方法在新建对象恰好要被返回使用之前被调用。     |
| <strong>del</strong>(self)         | 恰好在对象要被删除之前调用。                       |
| <strong>str</strong>(self)         | 在我们对对象使用print语句或是使用str()的时候调用。 |
| <strong>getitem</strong>(self,key) | 使用x[key]索引操作符的时候调用。                   |
| <strong>len</strong>(self)         | 对序列对象使用内建的len()函数的时候调用。          |</p>
<p>下面的类中定义了上表中的方法：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Array</span><span class="p">:</span>
    <span class="n">__list</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s2">&quot;constructor&quot;</span>

    <span class="k">def</span> <span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s2">&quot;destructor&quot;</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;this self-defined array class&quot;</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__list</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__list</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">Add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">Remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">__list</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">DisplayItems</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s2">&quot;show all items----&quot;</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__list</span><span class="p">:</span>
            <span class="k">print</span> <span class="n">item</span>

<span class="n">arr</span> <span class="o">=</span> <span class="n">Array</span><span class="p">()</span>   <span class="c1">#constructor</span>
<span class="k">print</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>    <span class="c1">#this self-defined array class</span>
<span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">))</span>   <span class="c1">#0</span>
<span class="n">arr</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">arr</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">arr</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">))</span>   <span class="c1">#3</span>
<span class="k">print</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>   <span class="c1">#1</span>
<span class="n">arr</span><span class="o">.</span><span class="n">DisplayItems</span><span class="p">()</span>
<span class="c1">#show all items----</span>
<span class="c1">#1</span>
<span class="c1">#2</span>
<span class="c1">#3</span>
<span class="n">arr</span><span class="o">.</span><span class="n">Remove</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">arr</span><span class="o">.</span><span class="n">DisplayItems</span><span class="p">()</span>
<span class="c1">#show all items----</span>
<span class="c1">#1</span>
<span class="c1">#3</span>
<span class="c1">#destructor</span>
</pre></div>
</div>
</div>
<div class="section" id="id102">
<h2>15、列表推导式<a class="headerlink" href="#id102" title="永久链接至标题">¶</a></h2>
<p>通过列表综合，可以从一个已有的列表导出一个新的列表。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">list1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">list2</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">*</span><span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">list1</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">]</span>

<span class="k">print</span><span class="p">(</span><span class="n">list1</span><span class="p">)</span>  <span class="c1">#[1, 2, 3, 4, 5]</span>
<span class="k">print</span><span class="p">(</span><span class="n">list2</span><span class="p">)</span>  <span class="c1">#[8, 10]</span>
</pre></div>
</div>
</div>
<div class="section" id="args">
<h2>16、 *和**args区别<a class="headerlink" href="#args" title="永久链接至标题">¶</a></h2>
<p>当函数接收元组或字典形式的参数的时候，有一种特殊的方法，使用*和**前缀。</p>
<p>该方法在函数需要获取可变数量的参数的时候特别有用。</p>
<p>由于在args变量前有*前缀，所有多余的函数参数都会作为一个元组存储在args中。如果使用的是**前缀，多余的参数则会被认为是一个字典的键/值对。</p>
<p>*args接受元组</p>
<p>**args接受字典</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">powersum</span><span class="p">(</span><span class="n">power</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
        <span class="n">total</span> <span class="o">+=</span> <span class="nb">pow</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">power</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">total</span>

<span class="k">print</span> <span class="p">(</span><span class="n">powersum</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>  

<span class="c1">#14 1^2+2^2+3^2 = 14</span>


<span class="k">def</span> <span class="nf">displaydic</span><span class="p">(</span><span class="o">**</span><span class="n">args</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">value</span> <span class="ow">in</span> <span class="n">args</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">print</span><span class="p">(</span> <span class="s2">&quot;key:</span><span class="si">%s</span><span class="s2">;value:</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>

<span class="n">displaydic</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s2">&quot;three&quot;</span><span class="p">)</span>


<span class="c1">#key:a;value:one</span>
<span class="c1">#key:c;value:three</span>
<span class="c1">#key:b;value:two</span>
</pre></div>
</div>
</div>
<div class="section" id="lambda">
<h2>17、lambda函数<a class="headerlink" href="#lambda" title="永久链接至标题">¶</a></h2>
<p>lambda语句被用来创建新的函数对象，并在运行时返回它们。lambda需要一个参数，后面仅跟单个表达式作为函数体，而表达式的值被这个</p>
<p>新建的函数返回。 注意，print语句也不能用在lambda形式中，只能使用表达式。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">func</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span> <span class="o">*</span> <span class="mi">3</span>
<span class="k">print</span><span class="p">(</span><span class="n">func</span><span class="p">(</span><span class="s2">&quot;Runsen &quot;</span><span class="p">))</span>  <span class="c1"># Runsen Runsen Runsen</span>


<span class="n">func2</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span>

<span class="k">print</span><span class="p">(</span><span class="n">func2</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>  <span class="c1">#6</span>
</pre></div>
</div>
</div>
<div class="section" id="exec-eval">
<h2>18、exec/eval<a class="headerlink" href="#exec-eval" title="永久链接至标题">¶</a></h2>
<p>exec语句用来执行储存在字符串或文件中的Python语句</p>
<p>eval语句用来计算存储在字符串中的有效Python表达式。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cmd</span> <span class="o">=</span> <span class="s2">&quot;print &#39;hello world&#39;&quot;</span>
<span class="k">exec</span> <span class="n">cmd</span>   <span class="c1">#hello world</span>

<span class="n">expression</span> <span class="o">=</span> <span class="s2">&quot;10 * 2 + 5&quot;</span>
<span class="k">print</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">expression</span><span class="p">))</span>    <span class="c1">#25</span>
</pre></div>
</div>
<p>exec还批量创建变量，这个大家可能忽视</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">):</span>
    <span class="k">exec</span><span class="p">(</span><span class="s1">&#39;v&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; = &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;v&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="nb">eval</span><span class="p">(</span><span class="s1">&#39;v&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)))</span>
    
<span class="n">v0</span><span class="p">:</span> <span class="mi">0</span>
<span class="n">v1</span><span class="p">:</span> <span class="mi">1</span>
<span class="n">v2</span><span class="p">:</span> <span class="mi">2</span>
<span class="n">v3</span><span class="p">:</span> <span class="mi">3</span>
<span class="n">v4</span><span class="p">:</span> <span class="mi">4</span>
<span class="n">v5</span><span class="p">:</span> <span class="mi">5</span>
<span class="n">v6</span><span class="p">:</span> <span class="mi">6</span>
<span class="n">v7</span><span class="p">:</span> <span class="mi">7</span>
    
</pre></div>
</div>
</div>
<div class="section" id="assert">
<h2>19、assert<a class="headerlink" href="#assert" title="永久链接至标题">¶</a></h2>
<p>assert语句用来断言某个条件是真的，并且在它非真的时候引发一个错误–AssertionError。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="bp">True</span>     <span class="c1"># 条件为 true 正常执行</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="bp">False</span>    <span class="c1"># 条件为 false 触发异常</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">AssertionError</span>
</pre></div>
</div>
<p>assert一般和try except连用</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">flag</span> <span class="o">=</span> <span class="bp">True</span>

<span class="k">assert</span> <span class="n">flag</span> <span class="o">==</span> <span class="bp">True</span>

<span class="k">try</span><span class="p">:</span>
    <span class="k">assert</span> <span class="n">flag</span> <span class="o">==</span> <span class="bp">False</span>
<span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>
    <span class="k">print</span> <span class="p">(</span><span class="s2">&quot;failed&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span> <span class="p">(</span><span class="s2">&quot;pass&quot;</span><span class="p">)</span>
    
    
<span class="n">failed</span>
</pre></div>
</div>
</div>
<div class="section" id="repr">
<h2>20、repr<a class="headerlink" href="#repr" title="永久链接至标题">¶</a></h2>
<p>repr函数用来取得对象的规范字符串表示。</p>
<p>注意，在大多数时候有eval(repr(object)) == object。</p>
<p>可以通过定义类的__repr__方法来控制对象在被repr函数调用的时候返回的内容。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>    <span class="c1">#[1, 2, 3]</span>
<span class="k">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">arr</span><span class="p">))</span>    <span class="c1">#[1, 2, 3]</span>
</pre></div>
</div>
<p>其实Python就是这么简单，学Python就是看官方文档，看demo，代码跟做英语阅读似的，多看官方文档，然后调下第三方库，实现需求就行了。</p>
</div>
</div>
<div class="section" id="id103">
<h1>12、深入Python列表和元组<a class="headerlink" href="#id103" title="永久链接至标题">¶</a></h1>
<p>﻿</p>
<div class="section" id="id104">
<h2>什么是列表和元组<a class="headerlink" href="#id104" title="永久链接至标题">¶</a></h2>
<p>列表是动态的，长度大小不固定，可以随意地增加、删减或者改变</p>
<p>而元组是静态的，长度大小固定，无法增加删减或者改变</p>
<p>定义列表和函数</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="s1">&#39;world&#39;</span><span class="p">]</span> <span class="c1"># 列表中同时含有 int 和 string 类型的元素</span>
<span class="n">l</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="s1">&#39;world&#39;</span><span class="p">]</span>

<span class="n">tup</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;jason&#39;</span><span class="p">,</span> <span class="mi">22</span><span class="p">)</span> <span class="c1"># 元组中同时含有 int 和 string 类型的元素</span>
<span class="n">tup</span>
<span class="p">(</span><span class="s1">&#39;jason&#39;</span><span class="p">,</span> <span class="mi">22</span><span class="p">)</span>
</pre></div>
</div>
<p>对于列表来说，由于其是动态的，我们只需简单地在列表末尾，加入</p>
<p>对于元组来说，实际上就是创建了一个新的元组，然后把原来两个元组的值依次填充.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tup</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">new_tup</span> <span class="o">=</span> <span class="n">tup</span> <span class="o">+</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="p">)</span> <span class="c1"># 创建新的元组 new_tup，并依次填充原元组的值</span>
<span class="n">new</span> <span class="n">_tup</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

<span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="c1"># 添加元素 5 到原列表的末尾</span>
<span class="n">l</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
<p>Python 中的列表和元组都支持负数索引，列表和元组都支持切片操作</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">l</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="mi">4</span>

<span class="n">tup</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">tup</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="mi">4</span>


<span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">l</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="c1"># 返回列表中索引从 1 到 2 的子列表</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

<span class="n">tup</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">tup</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="c1"># 返回元组中索引从 1 到 2 的子元组</span>
<span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> 
</pre></div>
</div>
</div>
<div class="section" id="id105">
<h2>列表和元组常见的内置函数<a class="headerlink" href="#id105" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">l</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> 
<span class="mi">2</span>
<span class="n">l</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="mi">3</span>
<span class="n">l</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
<span class="n">l</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">l</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
<span class="n">l</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>

<span class="n">tup</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">tup</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="mi">2</span>
<span class="n">tup</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="mi">3</span>
<span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">tup</span><span class="p">))</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="nb">sorted</span><span class="p">(</span><span class="n">tup</span><span class="p">)</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="id106">
<h2>列表和元组存储方式<a class="headerlink" href="#id106" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>l = []
l.__sizeof__() // 空列表的存储空间为 40 字节
40
l.append(1)
l.__sizeof__() 
72 // 加入了元素 1 之后，列表为其分配了可以存储 4 个元素的空间 (72 - 40)/8 = 4
l.append(2) 
l.__sizeof__()
72 // 由于之前分配了空间，所以加入元素 2，列表空间不变
l.append(3)
l.__sizeof__() 
72 // 同上
l.append(4)
l.__sizeof__() 
72 // 同上
l.append(5)
l.__sizeof__() 
104 // 加入元素 5 之后，列表的空间不足，所以又额外分配了可以存储 4 个元素的空间
</pre></div>
</div>
<p>元组的初始化速度，要比列表快 5 倍。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">timeit</span> <span class="s1">&#39;x=(1,2,3,4,5,6)&#39;</span>
<span class="mi">20000000</span> <span class="n">loops</span><span class="p">,</span> <span class="n">best</span> <span class="n">of</span> <span class="mi">5</span><span class="p">:</span> <span class="mf">9.97</span> <span class="n">nsec</span> <span class="n">per</span> <span class="n">loop</span>
<span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">timeit</span> <span class="s1">&#39;x=[1,2,3,4,5,6]&#39;</span>
<span class="mi">5000000</span> <span class="n">loops</span><span class="p">,</span> <span class="n">best</span> <span class="n">of</span> <span class="mi">5</span><span class="p">:</span> <span class="mf">50.1</span> <span class="n">nsec</span> <span class="n">per</span> <span class="n">loop</span>
</pre></div>
</div>
<p>因此如果存储的数据和数量不变，选择元组</p>
<p>如果存储的数据或数量是可变的，选择列表</p>
<p>下面有两种方法创建列表，哪个初始化更快，运行时间更快。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 创建空列表</span>
<span class="c1"># option A</span>
<span class="n">empty_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>

<span class="c1"># option B</span>
<span class="n">empty_list</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20190523000342208.png" src="https://img-blog.csdnimg.cn/20190523000342208.png" /></p>
<p>测试结果，虽然直接创建元组初始化速度最快，但是由于要用list函数转一道反而不如直接创建列表的速度快。</p>
</div>
</div>
<div class="section" id="id107">
<h1>13、深入Python字典和集合<a class="headerlink" href="#id107" title="永久链接至标题">¶</a></h1>
<div class="section" id="id108">
<h2>字典和集合<a class="headerlink" href="#id108" title="永久链接至标题">¶</a></h2>
<p>字典是一系列无序元素的组合，其长度大小可变，元素可以任意地删减和改变。不过要注意，这里的元素，是一对键（key）和值（value）</p>
<p>相比列表和元组，字典的性能更优，特别是对于查找、添加和删除，字典都能在常数的时间复杂度内完成</p>
<p>而集合和字典基本相同，唯一的区别，就是集合没有键和值的配对是一系列无序的、唯一的元素组合。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">d1</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;jason&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="s1">&#39;male&#39;</span><span class="p">}</span>
<span class="n">d2</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">({</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;jason&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="s1">&#39;male&#39;</span><span class="p">})</span>
<span class="n">d3</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">([(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;jason&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;gender&#39;</span><span class="p">,</span> <span class="s1">&#39;male&#39;</span><span class="p">)])</span>
<span class="n">d4</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;jason&#39;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">gender</span><span class="o">=</span><span class="s1">&#39;male&#39;</span><span class="p">)</span> 
<span class="n">d1</span> <span class="o">==</span> <span class="n">d2</span> <span class="o">==</span> <span class="n">d3</span> <span class="o">==</span><span class="n">d4</span>
<span class="bp">True</span>

<span class="n">s1</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span>
<span class="n">s2</span> <span class="o">=</span> <span class="n">Set</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="n">s1</span> <span class="o">==</span> <span class="n">s2</span>
<span class="bp">True</span>
</pre></div>
</div>
<p>集合并不支持索引操作，因为集合本质上是一个哈希表，和列表不一样</p>
<div class="highlight-和集合 notranslate"><div class="highlight"><pre><span></span>s = {1, 2, 3}
s[0]
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
TypeError: &#39;set&#39; object does not support indexing
</pre></div>
</div>
<p>想要判断一个元素在不在字典或集合内，我们可以用 value  in dict/set</p>
<div class="highlight-和集合 notranslate"><div class="highlight"><pre><span></span>s = {1, 2, 3}
1 in s
True
10 in s
False

d = {&#39;name&#39;: &#39;Runsen&#39;, &#39;age&#39;: 20}
&#39;name&#39; in d
True
&#39;location&#39; in d
False
</pre></div>
</div>
<p><strong>字典的增删改</strong></p>
<div class="highlight-和集合 notranslate"><div class="highlight"><pre><span></span>In [1]: d = {&#39;name&#39;: &#39;Runsen&#39;, &#39;age&#39;: 20}^M
   ...:

In [2]: d[&#39;gender&#39;] = &#39;male&#39;

In [3]: d[&#39;birthday&#39;] = &#39;1999-10-01&#39;

In [4]: d
Out[4]: {&#39;name&#39;: &#39;Runsen&#39;, &#39;age&#39;: 20, &#39;gender&#39;: &#39;male&#39;, &#39;birthday&#39;: &#39;1999-10-01&#39;}

In [5]: d[&#39;birthday&#39;] = &#39;1999/10/01&#39;

In [6]: d.pop(&#39;birthday&#39;)
Out[6]: &#39;1999/10/01&#39;

In [8]: d
Out[8]: {&#39;name&#39;: &#39;Runsen&#39;, &#39;age&#39;: 20, &#39;gender&#39;: &#39;male&#39;}


In [9]: s = {1, 2, 3}^M
   ...:

In [10]: s.add(4)

In [11]: s
Out[11]: {1, 2, 3, 4}

In [12]: s.remove(4)

In [13]: s
Out[13]: {1, 2, 3}****
</pre></div>
</div>
<p><strong>字典的升序和降序排序</strong></p>
<div class="highlight-和集合 notranslate"><div class="highlight"><pre><span></span>d = {&#39;b&#39;: 1, &#39;a&#39;: 2, &#39;c&#39;: 10}
d_sorted_by_key = sorted(d.items(), key=lambda x: x[0]) # 根据字典键的升序排序
d_sorted_by_value = sorted(d.items(), key=lambda x: x[1]) # 根据字典值的升序排序
d_sorted_by_key
[(&#39;a&#39;, 2), (&#39;b&#39;, 1), (&#39;c&#39;, 10)]
d_sorted_by_value
[(&#39;b&#39;, 1), (&#39;a&#39;, 2), (&#39;c&#39;, 10)]
</pre></div>
</div>
</div>
<div class="section" id="id109">
<h2>增删查找<a class="headerlink" href="#id109" title="永久链接至标题">¶</a></h2>
<p>字典和集合是进行过性能高度优化的数据结构，特别是对于查找、添加和删除操作</p>
<p><strong>列表的做法</strong></p>
<div class="highlight-和集合 notranslate"><div class="highlight"><pre><span></span># list version
def find_unique_price_using_list(products):
    unique_price_list = []
    for _, price in products: # A
        if price not in unique_price_list: #B
            unique_price_list.append(price)
    return len(unique_price_list)

# products id 和 price
products = [
    (143121312, 100), 
    (432314553, 30),
    (32421912367, 150),
    (937153201, 30)
]
print(&#39;number of unique price is: {}&#39;.format(find_unique_price_using_list(products)))

# 输出
number of unique price is: 3
</pre></div>
</div>
<p><strong>集合的做法</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># set version</span>
<span class="k">def</span> <span class="nf">find_unique_price_using_set</span><span class="p">(</span><span class="n">products</span><span class="p">):</span>
    <span class="n">unique_price_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">price</span> <span class="ow">in</span> <span class="n">products</span><span class="p">:</span>
        <span class="n">unique_price_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">price</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">unique_price_set</span><span class="p">)</span>        

<span class="n">products</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="mi">143121312</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> 
    <span class="p">(</span><span class="mi">432314553</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">32421912367</span><span class="p">,</span> <span class="mi">150</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">937153201</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
<span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;number of unique price is: {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">find_unique_price_using_set</span><span class="p">(</span><span class="n">products</span><span class="p">)))</span>

<span class="c1"># 输出</span>
<span class="n">number</span> <span class="n">of</span> <span class="n">unique</span> <span class="n">price</span> <span class="ow">is</span><span class="p">:</span> <span class="mi">3</span>
</pre></div>
</div>
<p>比较运行的时间，也就是性能</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="nb">id</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100000</span><span class="p">)]</span>
<span class="n">price</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">200000</span><span class="p">,</span> <span class="mi">300000</span><span class="p">)]</span>
<span class="n">products</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">price</span><span class="p">))</span>

<span class="c1"># 计算列表版本的时间</span>
<span class="n">start_using_list</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
<span class="n">find_unique_price_using_list</span><span class="p">(</span><span class="n">products</span><span class="p">)</span>
<span class="n">end_using_list</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;time elapse using list: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">end_using_list</span> <span class="o">-</span> <span class="n">start_using_list</span><span class="p">))</span>
<span class="c1">## 输出</span>
<span class="n">time</span> <span class="n">elapse</span> <span class="n">using</span> <span class="nb">list</span><span class="p">:</span> <span class="mf">41.61519479751587</span>


<span class="c1"># 计算集合版本的时间</span>
<span class="n">start_using_set</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
<span class="n">find_unique_price_using_set</span><span class="p">(</span><span class="n">products</span><span class="p">)</span>
<span class="n">end_using_set</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;time elapse using set: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">end_using_set</span> <span class="o">-</span> <span class="n">start_using_set</span><span class="p">))</span>
<span class="c1"># 输出</span>
<span class="n">time</span> <span class="n">elapse</span> <span class="n">using</span> <span class="nb">set</span><span class="p">:</span> <span class="mf">0.008238077163696289</span>
</pre></div>
</div>
<p>在性能上集合完爆列表</p>
<p>对于字典，哈希表存储了哈希值，键和值这桑三个元素</p>
<p><img alt="https://img-blog.csdnimg.cn/20190523142853281.png" src="https://img-blog.csdnimg.cn/20190523142853281.png" /></p>
<p>字典和集合都是无序的数据结构，其内部的哈希表存储结构，保证了查找，插入，删除操作的高效性。所以，字典和集合通常运用在对元素的查找，去重</p>
<p>初始化字典的方式有两种方法，比较下哪一种更高效，</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>In [20]: timeit a ={&#39;name&#39;:&quot;runsen&quot;,&#39;age&#39;:20}
127 ns ± 0.8 ns per loop (mean ± std. dev. of 7 runs, 10000000 loops each)

In [21]: timeit b =dict({&#39;name&#39;:&quot;runsen&quot;,&#39;age&#39;:20})
438 ns ± 3.41 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
</pre></div>
</div>
<p>第一种，因为不用调用相关的函数</p>
<p><img alt="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS83NjUxNjE3Yy1hMWM0LTRjMGEtYjkyNC04YmMxMzk3NTAwODkucG5n?x-oss-process=image/format,png" src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS83NjUxNjE3Yy1hMWM0LTRjMGEtYjkyNC04YmMxMzk3NTAwODkucG5n?x-oss-process=image/format,png" /></p>
<p>字典的键可以是一个列表吗？下面这段代码中，字典的初始化是否正确</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">22</span><span class="p">]:</span> <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Runsen&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;education&#39;</span><span class="p">]:</span> <span class="p">[</span><span class="s1">&#39; primary school&#39;</span><span class="p">,</span> <span class="s1">&#39;junior middle school&#39;</span><span class="p">]}</span><span class="o">^</span><span class="n">M</span>
    <span class="o">...</span><span class="p">:</span>
<span class="o">---------------------------------------------------------------------------</span>
<span class="ne">TypeError</span>                                 <span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">22</span><span class="o">-</span><span class="mi">13</span><span class="n">cd196aef11</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="o">----&gt;</span> <span class="mi">1</span> <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Runsen&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;education&#39;</span><span class="p">]:</span> <span class="p">[</span><span class="s1">&#39; primary school&#39;</span><span class="p">,</span> <span class="s1">&#39;junior middle school&#39;</span><span class="p">]}</span>

<span class="ne">TypeError</span><span class="p">:</span> <span class="n">unhashable</span> <span class="nb">type</span><span class="p">:</span> <span class="s1">&#39;list&#39;</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">23</span><span class="p">]:</span> <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Runsen&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;education&#39;</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39; primary school&#39;</span><span class="p">,</span> <span class="s1">&#39;junior middle school&#39;</span><span class="p">]}</span><span class="o">^</span><span class="n">M</span>
    <span class="o">...</span><span class="p">:</span>
    <span class="o">...</span><span class="p">:</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">24</span><span class="p">]:</span> <span class="n">d</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">24</span><span class="p">]:</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Runsen&#39;</span><span class="p">,</span> <span class="s1">&#39;education&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39; primary school&#39;</span><span class="p">,</span> <span class="s1">&#39;junior middle school&#39;</span><span class="p">]}</span>

</pre></div>
</div>
<p>用列表作为 Key 在这里是不被允许的，因为列表是一个动态变化的数据结构，字典当中的 key 要求是不可变的，原因也很好理解.</p>
<p>key 首先是不重复的，如果 Key 是可以变化的话，那么随着 Key 的变化，这里就有可能就会有重复的 Key，那么这就和字典的定义相违背；如果把这里的列表换成之前我们讲过的元组是可以的，因为元组不可变。</p>
</div>
</div>
<div class="section" id="id110">
<h1>14、深入Python条件和循坏<a class="headerlink" href="#id110" title="永久链接至标题">¶</a></h1>
<div class="section" id="id111">
<h2>条件控制<a class="headerlink" href="#id111" title="永久链接至标题">¶</a></h2>
<p>简单来说：当判断的条件为真时，执行某种代码逻辑，这就是条件控制。</p>
<p>那么在讲条件控制之前，可以给大家讲一个程序员当中流传的比较真实的一个例子</p>
<p>说有一天一个程序员，他的媳妇让他去出去买两个包子，那出去之前，他媳妇这么跟他说的，说老公你出去给我买两个包子
，如果看见卖西瓜的就买一个回来。</p>
<p>结果这个程序员回来了，买一个包子。结果媳妇给他一顿揍。
<img alt="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS8zZmYzYThiNy1mMzU1LTQ5YTgtYWRhZi1mNTkzZjc3YWI5ZGQucG5n?x-oss-process=image/format,png" src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS8zZmYzYThiNy1mMzU1LTQ5YTgtYWRhZi1mNTkzZjc3YWI5ZGQucG5n?x-oss-process=image/format,png" /></p>
<p>然后问他为啥，你为啥就买一个包子回来？，他回答他媳妇说我看见了卖西瓜的，所以买了一个包子。</p>
<p>其实这个就是条件控制一个典型的，一个生活化的一个说明场景</p>
<p><img alt="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS85YTdjMWVhZS1lNmU0LTQyODUtOWZjMS05ZTFjYjBlZThmYmQucG5n?x-oss-process=image/format,png" src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS85YTdjMWVhZS1lNmU0LTQyODUtOWZjMS05ZTFjYjBlZThmYmQucG5n?x-oss-process=image/format,png" /></p>
</div>
<div class="section" id="id112">
<h2>条件语句<a class="headerlink" href="#id112" title="永久链接至标题">¶</a></h2>
<p>条件控制就是我们常见的的if else</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># y = |x|</span>
<span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="n">x</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">x</span>
</pre></div>
</div>
<p>在条件语句后面加上 冒号：</p>
<p>python不支持switch语句，但是支持elif</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">condition_1</span><span class="p">:</span>
    <span class="n">statement_1</span>
<span class="k">elif</span> <span class="n">condition_2</span><span class="p">:</span>
    <span class="n">statement_2</span>
<span class="o">...</span>
<span class="k">elif</span> <span class="n">condition_i</span><span class="p">:</span>
    <span class="n">statement_i</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">statement_n</span>
</pre></div>
</div>
<p>不少人喜欢省略半段的条件，就像这样</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">s</span><span class="p">:</span> <span class="c1"># s is a string</span>
    <span class="o">...</span>
<span class="k">if</span> <span class="n">l</span><span class="p">:</span> <span class="c1"># l is a list</span>
    <span class="o">...</span>
<span class="k">if</span> <span class="n">i</span><span class="p">:</span> <span class="c1"># i is an int</span>
    <span class="o">...</span>
<span class="o">...</span> 
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/2019052409161133.png" src="https://img-blog.csdnimg.cn/2019052409161133.png" /></p>
</div>
<div class="section" id="id113">
<h2>循环语句<a class="headerlink" href="#id113" title="永久链接至标题">¶</a></h2>
<p>一般通过for循环和while循环实现</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">l</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>
<span class="mi">4</span>
</pre></div>
</div>
<p>在python数据结构只要时可迭代对象，如列表，集合，等等，就可以遍历</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">iterable</span><span class="o">&gt;</span><span class="p">:</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>但是字典本身只有键时课迭代的，如何要遍历字典的值和键值对，要通过内置的函数values() 和items()  实现</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;jason&#39;</span><span class="p">,</span> <span class="s1">&#39;dob&#39;</span><span class="p">:</span> <span class="s1">&#39;2000-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="s1">&#39;male&#39;</span><span class="p">}</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span> <span class="c1"># 遍历字典的键</span>
    <span class="k">print</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
<span class="n">name</span>
<span class="n">dob</span>
<span class="n">gender</span>

<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">values</span><span class="p">():</span> <span class="c1"># 遍历字典的值</span>
    <span class="k">print</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="n">jason</span>
<span class="mi">2000</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span>
<span class="n">male</span>    

<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">():</span> <span class="c1"># 遍历字典的键值对</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;key: {}, value: {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
<span class="n">key</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">jason</span>
<span class="n">key</span><span class="p">:</span> <span class="n">dob</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="mi">2000</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span>
<span class="n">key</span><span class="p">:</span> <span class="n">gender</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">male</span> 
</pre></div>
</div>
<p>当然可以通过索引来遍历元素</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
<span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">)):</span>
    <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">l</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>        
        
<span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>
<span class="mi">4</span>
<span class="mi">5</span>
</pre></div>
</div>
<p>别忘了还有一个更重要的enumerate() 函数</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
<span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">l</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>  
              
<span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>
<span class="mi">4</span>
<span class="mi">5</span>
</pre></div>
</div>
<p>在循环语句中，要通过continue 或break 一起使用</p>
<p>continue，就是让程序跳过当前这层循环，继续执行下面的循环</p>
<p>break 则是指完全跳出所在的整个循环体</p>
<p>现在找出价格小于1000，颜色不是红色的产品名称和颜色组合，如果不用continue</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># name_price: 产品名称 (str) 到价格 (int) 的映射字典</span>
<span class="c1"># name_color: 产品名字 (str) 到颜色 (list of str) 的映射字典</span>
<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">price</span> <span class="ow">in</span> <span class="n">name_price</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">price</span> <span class="o">&lt;</span> <span class="mi">1000</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">name_color</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">name_color</span><span class="p">[</span><span class="n">name</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">color</span> <span class="o">!=</span> <span class="s1">&#39;red&#39;</span><span class="p">:</span>
                    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;name: {}, color: {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">color</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;name: {}, color: {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;None&#39;</span><span class="p">))</span>

</pre></div>
</div>
<p>共用了5层for 或if 的嵌套</p>
<p>加上了continue，只有3层</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># name_price: 产品名称 (str) 到价格 (int) 的映射字典</span>
<span class="c1"># name_color: 产品名字 (str) 到颜色 (list of str) 的映射字典</span>
<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">price</span> <span class="ow">in</span> <span class="n">name_price</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">price</span> <span class="o">&gt;=</span> <span class="mi">1000</span><span class="p">:</span>
        <span class="k">continue</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">name_color</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;name: {}, color: {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;None&#39;</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">name_color</span><span class="p">[</span><span class="n">name</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">color</span> <span class="o">==</span> <span class="s1">&#39;red&#39;</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;name: {}, color: {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">color</span><span class="p">))</span>

</pre></div>
</div>
<p>while</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">l</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
    <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>

</pre></div>
</div>
<p>那么在什么场合使用for和continue</p>
<p>如果只是遍历已知的集合，找出满足条件的元素，使用for更加的简洁</p>
<p>如果需要在满足某个条件前，要不停的重复操作，并且没有特定的集合来遍历</p>
<p>例如</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Please enter your questions, enter &quot;q&quot; to exit&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">text</span> <span class="o">==</span> <span class="s1">&#39;q&#39;</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Exit system&#39;</span><span class="p">)</span>
            <span class="k">break</span>
        <span class="o">...</span>
        <span class="o">...</span>
        <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">except</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Encountered error: {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">err</span><span class="p">))</span>
        <span class="k">break</span> 

</pre></div>
</div>
<p>for 循环和while循环的效率问题</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">1000000</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000000</span><span class="p">):</span>
    <span class="k">pass</span>


</pre></div>
</div>
<p>range（）函数直接时C语言写的，调用的速度非常快，for循环的效率更高</p>
<p>对于有些大神直接写成一行操作</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">expression1</span> <span class="k">if</span> <span class="n">condition</span> <span class="k">else</span> <span class="n">expression2</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">iterable</span>

</pre></div>
</div>
<p>分解成</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">condition</span><span class="p">:</span>
        <span class="n">expression1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">expression2</span>

</pre></div>
</div>
<p>如何没有else</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">expression</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">iterable</span> <span class="k">if</span> <span class="n">condition</span>

</pre></div>
</div>
<p>现在绘制 y = 2*|x| + 5 的函数图像</p>
<p>只需一行</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="n">value</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">5</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="o">-</span><span class="n">value</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">5</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>

</pre></div>
</div>
<p>在处理字符串时，将文件逐行读取，按照逗号分隔单词，去掉首位空字符，过滤小于3的单词，最后返回单词组成的列表</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">text</span> <span class="o">=</span> <span class="s1">&#39; Today,  is, Sunday&#39;</span>
<span class="n">text_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">text_list</span><span class="p">)</span>
<span class="p">[</span><span class="s1">&#39;Today&#39;</span><span class="p">,</span> <span class="s1">&#39;Sunday&#39;</span><span class="p">]</span>

</pre></div>
</div>
<p>给定两个列表 x、y，要求返回 x、y 中所有元素对组成的元组</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[(</span><span class="n">xx</span><span class="p">,</span> <span class="n">yy</span><span class="p">)</span> <span class="k">for</span> <span class="n">xx</span> <span class="ow">in</span> <span class="n">x</span> <span class="k">for</span> <span class="n">yy</span> <span class="ow">in</span> <span class="n">y</span> <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">]</span>

</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">xx</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">yy</span> <span class="ow">in</span> <span class="n">y</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
            <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>

</pre></div>
</div>
</div>
</div>
<div class="section" id="id114">
<h1>15、深入Python输入和输出<a class="headerlink" href="#id114" title="永久链接至标题">¶</a></h1>
<p>﻿</p>
<p>在很多时候，你会想要让你的程序与用户（可能是你自己）交互。你会从用户那里得到输入，然后打印一些结果。我们可以使用iinput和print语句来完成这些功能。</p>
<div class="section" id="input">
<h2>input<a class="headerlink" href="#input" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>name = input(&#39;your name:&#39;)
gender = input(&#39;you are a boy?(y/n)&#39;)

###### 输入 ######
your name:Jack
you are a boy?

welcome_str = &#39;Welcome to the matrix {prefix} {name}.&#39;
welcome_dic = {
    &#39;prefix&#39;: &#39;Mr.&#39; if gender == &#39;y&#39; else &#39;Mrs&#39;,
    &#39;name&#39;: name
}

print(&#39;authorizing...&#39;)
print(welcome_str.format(**welcome_dic))

########## 输出 ##########
authorizing...
Welcome to the matrix Mr. Jack.
</pre></div>
</div>
<p>input函数暂停运行，等待键盘输入，直到按下回车，输入的类型永远时字符串</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>a = input()
1
b = input()
2

print(&#39;a + b = {}&#39;.format(a + b))
########## 输出 ##############
a + b = 12
print(&#39;type of a is {}, type of b is {}&#39;.format(type(a), type(b)))
########## 输出 ##############
type of a is &lt;class &#39;str&#39;&gt;, type of b is &lt;class &#39;str&#39;&gt;
print(&#39;a + b = {}&#39;.format(int(a) + int(b)))
########## 输出 ##############
a + b = 3
</pre></div>
</div>
</div>
<div class="section" id="id115">
<h2>文件输入和输出<a class="headerlink" href="#id115" title="永久链接至标题">¶</a></h2>
<p>生产级别的 Python 代码，大部分 I/O 则来自于文件</p>
<p>这里有个in.text</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>Mr. Johnson had never been up in an aerophane before and he had read a lot about air accidents, so one day when a friend offered to take him for a ride in his own small phane, Mr. Johnson was very worried about accepting. Finally, however, his friend persuaded him that it was very safe, and Mr. Johnson boarded the plane.

His friend started the engine and began to taxi onto the runway of the airport. Mr. Johnson had heard that the most dangerous part of a flight were the take-off and the landing, so he was extremely frightened and closed his eyes.

After a minute or two he opened them again, looked out of the window of the plane, and said to his friend。

&quot;Look at those people down there. They look as small as ants, don&#39;t they?&quot;

&quot;Those are ants,&quot; answered his friend. &quot;We&#39;re still on the ground.&quot;
</pre></div>
</div>
<p>现在</p>
<ul class="simple">
<li>读取文件</li>
<li>去掉所有标点和换行符，将大写变为小写</li>
<li>合并相同的词，统计每个词出现的频率，将词频从大到小排序</li>
<li>将结果按行输出文件out.txt</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>

<span class="c1"># 你不用太关心这个函数</span>
<span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="c1"># 使用正则表达式去除标点符号和换行符</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;[^\w ]&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>

    <span class="c1"># 转为小写</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    
    <span class="c1"># 生成所有单词的列表</span>
    <span class="n">word_list</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
    
    <span class="c1"># 去除空白单词</span>
    <span class="n">word_list</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">word_list</span><span class="p">)</span>
    
    <span class="c1"># 生成单词和词频的字典</span>
    <span class="n">word_cnt</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">word_list</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">word</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">word_cnt</span><span class="p">:</span>
            <span class="n">word_cnt</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">word_cnt</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
    
    <span class="c1"># 按照词频排序</span>
    <span class="n">sorted_word_cnt</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">word_cnt</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">kv</span><span class="p">:</span> <span class="n">kv</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">sorted_word_cnt</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;in.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fin</span><span class="p">:</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">fin</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="n">word_and_freq</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;out.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fout</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">word</span><span class="p">,</span> <span class="n">freq</span> <span class="ow">in</span> <span class="n">word_and_freq</span><span class="p">:</span>
        <span class="n">fout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;{} {}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">freq</span><span class="p">))</span>

<span class="c1">########## 输出 (省略较长的中间结果) ##########</span>


</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20190523215923502.png" src="https://img-blog.csdnimg.cn/20190523215923502.png" /></p>
<p>但是有个问题，如果文件非常的大容易造成内存奔溃</p>
<p>这个时候给 read 指定参数 size，还可以通过 readline() 函数，每次读取一行，</p>
</div>
<div class="section" id="json">
<h2>json文件读取<a class="headerlink" href="#json" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>import json

params = {
    &#39;symbol&#39;: &#39;123456&#39;,
    &#39;type&#39;: &#39;limit&#39;,
    &#39;price&#39;: 123.4,
    &#39;amount&#39;: 23
}

params_str = json.dumps(params)

print(&#39;after json serialization&#39;)
print(&#39;type of params_str = {}, params_str = {}&#39;.format(type(params_str), params))

original_params = json.loads(params_str)

print(&#39;after json deserialization&#39;)
print(&#39;type of original_params = {}, original_params = {}&#39;.format(type(original_params), original_params))

########## 输出 ##########

after json serialization
type of params_str = &lt;class &#39;str&#39;&gt;, params_str = {&#39;symbol&#39;: &#39;123456&#39;, &#39;type&#39;: &#39;limit&#39;, &#39;price&#39;: 123.4, &#39;amount&#39;: 23}
after json deserialization
type of original_params = &lt;class &#39;dict&#39;&gt;, original_params = {&#39;symbol&#39;: &#39;123456&#39;, &#39;type&#39;: &#39;limit&#39;, &#39;price&#39;: 123.4, &#39;amount&#39;: 23}
</pre></div>
</div>
<p>json.dumps() 这个函数，接受 Python 的基本数据类型 字典，然后转化string （json的字符串）</p>
<p>json.loads() 这个函数，接受一个合法字符串(json)，然后 转化为字典</p>
<p><strong>json 的读入</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>import json

params = {
    &#39;symbol&#39;: &#39;123456&#39;,
    &#39;type&#39;: &#39;limit&#39;,
    &#39;price&#39;: 123.4,
    &#39;amount&#39;: 23
}

with open(&#39;params.json&#39;, &#39;w&#39;) as fout:
    params_str = json.dump(params, fout)

with open(&#39;params.json&#39;, &#39;r&#39;) as fin:
    original_params = json.load(fin)

print(&#39;after json deserialization&#39;)
print(&#39;type of original_params = {}, original_params = {}&#39;.format(type(original_params), original_params))

########## 输出 ##########

after json deserialization
type of original_params = &lt;class &#39;dict&#39;&gt;, original_params = {&#39;symbol&#39;: &#39;123456&#39;, &#39;type&#39;: &#39;limit&#39;, &#39;price&#39;: 123.4, &#39;amount&#39;: 23}
</pre></div>
</div>
</div>
</div>
<div class="section" id="id116">
<h1>16、深入Python字符串<a class="headerlink" href="#id116" title="永久链接至标题">¶</a></h1>
<div class="section" id="id117">
<h2>什么字符串<a class="headerlink" href="#id117" title="永久链接至标题">¶</a></h2>
<p>字符串是由独立字符组成的一个序列，通常包含在单引号（‘ ’），双引号（”“）</p>
<p>三引号（’’’ ‘’’）</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">s1</span> <span class="o">=</span> <span class="s1">&#39;hello&#39;</span>
<span class="n">s2</span> <span class="o">=</span> <span class="s2">&quot;hello&quot;</span>
<span class="n">s3</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;hello&quot;&quot;&quot;</span>
<span class="n">s1</span> <span class="o">==</span> <span class="n">s2</span> <span class="o">==</span> <span class="n">s3</span>
<span class="bp">True</span>
</pre></div>
</div>
<p>三引号字符串常用于函数的注释</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">calculate_similarity</span><span class="p">(</span><span class="n">item1</span><span class="p">,</span> <span class="n">item2</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate similarity between two items</span>
<span class="sd">    Args:</span>
<span class="sd">        item1: 1st item</span>
<span class="sd">        item2: 2nd item</span>
<span class="sd">    Returns:</span>
<span class="sd">      similarity score between item1 and item2</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="id118">
<h2>转义字符<a class="headerlink" href="#id118" title="永久链接至标题">¶</a></h2>
<p>用 \ 开头的字符串，来表示一些特定意义的字符</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;a</span><span class="se">\n</span><span class="s1">b</span><span class="se">\t</span><span class="s1">c&#39;</span>
<span class="k">print</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="n">a</span>
<span class="n">b</span>	  <span class="n">c</span>

<span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="mi">5</span>
</pre></div>
</div>
<p>代码中的’\n’，表示一个字符——换行符；’\t’也表示一个字符，四个空格</p>
<p>字符 a，换行，字符 b，然后制表符，最后打印字符 c
最后打印的输出横跨了两行，但是整个字符串 s 仍然只有 5</p>
</div>
<div class="section" id="id119">
<h2>常用操作<a class="headerlink" href="#id119" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;jason&#39;</span>
<span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="s1">&#39;j&#39;</span>
<span class="n">name</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="s1">&#39;as&#39;</span>


<span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">name</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">char</span><span class="p">)</span>   
<span class="n">j</span>
<span class="n">a</span>
<span class="n">s</span>
<span class="n">o</span>
<span class="n">n</span>

</pre></div>
</div>
<p>注意python的字符串是不可变的</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;hello&#39;</span>
<span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;H&#39;</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">TypeError</span><span class="p">:</span> <span class="s1">&#39;str&#39;</span> <span class="nb">object</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">support</span> <span class="n">item</span> <span class="n">assignment</span>
</pre></div>
</div>
<p>只能通过船创建新的字符串</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;H&#39;</span> <span class="o">+</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;h&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>在java 中有可变的字符串，StringBuilder  ，每次改变字符串，无需创建新的字符串，时间复杂度为O（1）</p>
<p>但是在python中如果想要改变字符串，往往需要O（n)的时间复杂度，n是新字符串的长度</p>
</div>
<div class="section" id="id120">
<h2>拼接字符串<a class="headerlink" href="#id120" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">str1</span> <span class="o">+=</span> <span class="n">str2</span>  <span class="c1"># 表示 str1 = str1 + str2</span>

<span class="c1"># 这个时间复杂度是多少</span>
<span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100000</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</pre></div>
</div>
<p>在python2中总的时间复杂度就为 O(1) + O(2) + … + O(n) = O（n^2)</p>
<p>但是在python3中 str1 += str2 首先会检测str1 是否有其他的引用</p>
<p>所以在python3中时间复杂度是O（n）</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100000</span><span class="p">):</span>
    <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
<span class="n">l</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">l</span><span class="p">)</span> 
</pre></div>
</div>
<p>由于列表的 append 操作是 O(1) 复杂度，时间复杂度为 n*O(1)=O(n)。</p>
</div>
<div class="section" id="split">
<h2>split分割<a class="headerlink" href="#split" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">query_data</span><span class="p">(</span><span class="n">namespace</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    given namespace and table, query database to get corresponding</span>
<span class="sd">    data         </span>
<span class="sd">    &quot;&quot;&quot;</span>

<span class="n">path</span> <span class="o">=</span> <span class="s1">&#39;hive://ads/training_table&#39;</span>
<span class="n">namespace</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;//&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># 返回&#39;ads&#39;</span>
<span class="n">table</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;//&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># 返回 &#39;training_table&#39;</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">query_data</span><span class="p">(</span><span class="n">namespace</span><span class="p">,</span> <span class="n">table</span><span class="p">)</span> 
</pre></div>
</div>
<ul class="simple">
<li>string.strip(str)，表示去掉首尾的 str</li>
<li>tring.lstrip(str)，表示只去掉开头的 str</li>
<li>string.rstrip(str)，表示只去掉尾部的 str</li>
</ul>
<p>在读入文件时候，如果开头和结尾都含有空字符，就采用strip函数</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="s1">&#39; my name is jason &#39;</span>
<span class="n">s</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
<span class="s1">&#39;my name is jason&#39;</span>

</pre></div>
</div>
</div>
<div class="section" id="id121">
<h2>格式化<a class="headerlink" href="#id121" title="永久链接至标题">¶</a></h2>
<p>format</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;no data available for person with id: {}, name: {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;no data available for person with id: </span><span class="si">%s</span><span class="s1">, name: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>

</pre></div>
</div>
<p><strong>%s 表示字符串型，%d 表示整型</strong></p>
<p><strong>两种字符串拼接操作，哪个更好</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100000</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>

</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100000</span><span class="p">):</span>
    <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
    
<span class="n">s</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>

</pre></div>
</div>
<p>对于上面的两种拼接操作，计算运行时间</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 第一个 +=</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="n">start_time</span>  <span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
<span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1000000</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="n">end_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
<span class="c1"># 5.7604558070000005</span>
<span class="k">print</span><span class="p">(</span><span class="n">end_time</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span>
<span class="c1"># 第二个 join</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="n">start_time</span>  <span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
<span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1000000</span><span class="p">):</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
<span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="n">end_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
<span class="c1"># 0.622547053</span>
<span class="k">print</span><span class="p">(</span><span class="n">end_time</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span>



<span class="c1"># 第三个 map</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
<span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000000</span><span class="p">)))</span>
<span class="n">end_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
<span class="c1"># 0.403433529</span>
<span class="k">print</span><span class="p">(</span><span class="n">end_time</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span>

</pre></div>
</div>
<p>结果：</p>
<ul class="simple">
<li>对于数据量大的map好过join，join好过 +=</li>
<li>对于数据量小的map 好过 += 好过join</li>
</ul>
<p><img alt="https://img-blog.csdnimg.cn/2019052315133017.png" src="https://img-blog.csdnimg.cn/2019052315133017.png" /></p>
</div>
</div>
<div class="section" id="id122">
<h1>17、深入Python异常处理<a class="headerlink" href="#id122" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：BY Runsen</p>
<div class="section" id="id123">
<h2>异常处理<a class="headerlink" href="#id123" title="永久链接至标题">¶</a></h2>
<p>在Python 中的错误和异常是什么？</p>
<p>通常来说，程序中的错误至少包括两种，一种是语法错误，另一种则是异常。所谓语法错误，你应该很清楚，也就是你写的代码不符合编程规范，无法被识别与执行，比如下面这个例子的语法错误</p>
<p>下面的代码无法被识别和执行</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span>
    <span class="k">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>If 语句漏掉了冒号，不符合 Python 的语法规范，所以程序就会报错invalid syntax。</p>
<p>异常则是指程序的语法正确，也可以被执行，但在执行过程中遇到了错误，抛出了异常</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="mi">10</span> <span class="o">/</span> <span class="mi">0</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">ZeroDivisionError</span><span class="p">:</span> <span class="n">integer</span> <span class="n">division</span> <span class="ow">or</span> <span class="n">modulo</span> <span class="n">by</span> <span class="n">zero</span>

<span class="n">order</span> <span class="o">*</span> <span class="mi">2</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">NameError</span><span class="p">:</span> <span class="n">name</span> <span class="s1">&#39;order&#39;</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">defined</span>

<span class="mi">1</span> <span class="o">+</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">TypeError</span><span class="p">:</span> <span class="n">unsupported</span> <span class="n">operand</span> <span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="o">+</span><span class="p">:</span> <span class="s1">&#39;int&#39;</span> <span class="ow">and</span> <span class="s1">&#39;list&#39;</span>
</pre></div>
</div>
<p>常见的报错是ZeroDIvision NameError 和 typeError</p>
<p>还有很多其他异常的类型如keyError 字典的键找不到和FileNotFoundError 文件不存在</p>
<p>如何处理异常，通常是用try except来解决</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">s</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;please enter two numbers separated by comma: &#39;</span><span class="p">)</span>
    <span class="n">num1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
    <span class="n">num2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
    <span class="o">...</span> 
<span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Value Error: {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">err</span><span class="p">))</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;continue&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>如果我们输入a,b，程序便会抛出异常invalid literal for int() with base 10:’a’</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">please</span> <span class="n">enter</span> <span class="n">two</span> <span class="n">numbers</span> <span class="n">separated</span> <span class="n">by</span> <span class="n">comma</span><span class="p">:</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span>
<span class="n">Value</span> <span class="n">Error</span><span class="p">:</span> <span class="n">invalid</span> <span class="n">literal</span> <span class="k">for</span> <span class="nb">int</span><span class="p">()</span> <span class="k">with</span> <span class="n">base</span> <span class="mi">10</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span>
<span class="k">continue</span>
</pre></div>
</div>
<p>大型社交网站的后台，需要针对用户发送的请求返回相应记录。用户记录往往储存在 key-value 结构的数据库中，每次有请求过来后，我们拿到用户的 ID，并用 ID 查询数据库中此人的记录，就能返回相应的结果。而数据库返回的原始数据，往往是 json string 的形式，这就需要我们首先对 json string 进行 decode（解码），你可能很容易想到下面的方法：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="n">raw_data</span> <span class="o">=</span> <span class="n">queryDB</span><span class="p">(</span><span class="n">uid</span><span class="p">)</span> <span class="c1"># 根据用户的 id，返回相应的信息</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">raw_data</span><span class="p">)</span>
</pre></div>
</div>
<p>上面的代码是不是就足够呢？</p>
<p>json.loads()函数中，如果输入的字符串不符合规范，那么就无法解码，就会抛出异常</p>
<p>因此写之前就应该考虑如何处理异常</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">raw_data</span><span class="p">)</span>
    <span class="o">....</span>
<span class="k">except</span> <span class="n">JSONDecodeError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;JSONDecodeError: {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">err</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id124">
<h1>18、深入Python函数<a class="headerlink" href="#id124" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author ：By Runsen</p>
<div class="section" id="id125">
<h2>函数<a class="headerlink" href="#id125" title="永久链接至标题">¶</a></h2>
<p>在Python中的函数就是为了实现某一段功能的代码段，可以重复利用。</p>
<p>就是以后不要重复造轮子，遇到那个场景就用那个函数，就是函数式编程</p>
<p>下面，我定义一个 my_func，传入一个Hello World，再打印一个Hello World</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_func</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Got a message: {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="p">))</span>

<span class="c1"># 调用函数 my_func()</span>
<span class="n">my_func</span><span class="p">(</span><span class="s1">&#39;Hello World&#39;</span><span class="p">)</span>
<span class="c1"># 输出</span>
<span class="n">Got</span> <span class="n">a</span> <span class="n">message</span><span class="p">:</span> <span class="n">Hello</span> <span class="n">World</span>
</pre></div>
</div>
<p>简单的知识点</p>
<ul class="simple">
<li>def是函数的声明</li>
<li>my_func是函数的名称</li>
<li>message 是函数的参数</li>
<li>print 是函数的主体部分</li>
<li>在函数的最后 可以返回调用结果（return 或yield ），也可以不返回</li>
</ul>
<p>定义在前，调用在后</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_sum</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">my_sum</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

<span class="c1"># 输出</span>
<span class="mi">8</span>
</pre></div>
</div>
<p>对于函数的参数可以设定默认值</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">param</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>如果param没有传入，那么参数默认是0，如果传入了参数，就覆盖默认值</p>
</div>
<div class="section" id="id126">
<h2>多态<a class="headerlink" href="#id126" title="永久链接至标题">¶</a></h2>
<p>传入的参数可以接受任何数据类型</p>
<p>比如，列表</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">my_sum</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]))</span>

<span class="c1"># 输出</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
</pre></div>
</div>
<p>再比如，字符串</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">my_sum</span><span class="p">(</span><span class="s1">&#39;hello &#39;</span><span class="p">,</span> <span class="s1">&#39;world&#39;</span><span class="p">))</span>

<span class="c1"># 输出</span>
<span class="n">hello</span> <span class="n">world</span>
</pre></div>
</div>
<p>当然，如果参数数据类型不同，而两者无法相加</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">my_sum</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;hello&#39;</span><span class="p">))</span>
<span class="ne">TypeError</span><span class="p">:</span> <span class="n">can</span> <span class="n">only</span> <span class="n">concatenate</span> <span class="nb">list</span> <span class="p">(</span><span class="ow">not</span> <span class="s2">&quot;str&quot;</span><span class="p">)</span> <span class="n">to</span> <span class="nb">list</span>
</pre></div>
</div>
<p>同一个函数可以应用到整数，列表，字符串等等的操作称为<code class="docutils literal notranslate"><span class="pre">多态</span></code>。这可不是变态。</p>
</div>
<div class="section" id="id127">
<h2>函数嵌套<a class="headerlink" href="#id127" title="永久链接至标题">¶</a></h2>
<p>函数嵌套就是函数中有函数，就叫嵌套函数了。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f1</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">f2</span><span class="p">():</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;world&#39;</span><span class="p">)</span>
    <span class="n">f2</span><span class="p">()</span>
<span class="n">f1</span><span class="p">()</span>

<span class="c1"># 输出</span>
<span class="n">hello</span>
<span class="n">world</span>
</pre></div>
</div>
<p>函数的嵌套保证了内部函数的调用，内部函数只能被外部函数所调用，不会作用于全局域中。</p>
<p>合理使用函数嵌套，提高运算速度</p>
<p>比如计算5的阶乘。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">factorial</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
    
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;input must be an integer.&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">input</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;input must be greater or equal to 0&#39;</span> <span class="p">)</span>
  
    <span class="k">def</span> <span class="nf">inner_factorial</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">input</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="nb">input</span> <span class="o">*</span> <span class="n">inner_factorial</span><span class="p">(</span><span class="nb">input</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">inner_factorial</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>


<span class="k">print</span><span class="p">(</span><span class="n">factorial</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>

<span class="mi">120</span>
</pre></div>
</div>
</div>
<div class="section" id="id128">
<h2>函数变量作用域<a class="headerlink" href="#id128" title="永久链接至标题">¶</a></h2>
<p>如果变量是izai函数内部定义的，称为局部变量，只在函数内部有效，当函数执行完毕，局部变量就会被回收。</p>
<p>全局变量就是写在函数外面的。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">MIN_VALUE</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">MAX_VALUE</span> <span class="o">=</span> <span class="mi">10</span>
<span class="k">def</span> <span class="nf">validation_check</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="n">MIN_VALUE</span> <span class="ow">or</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="n">MAX_VALUE</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;validation check fails&#39;</span><span class="p">)</span>

</pre></div>
</div>
<p>这里的MIN_VELUE 和MAX_VALUE就是全局变量，但是我们不能在函数的内部随意改变全局变量的值</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">MIN_VALUE</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">MAX_VALUE</span> <span class="o">=</span> <span class="mi">10</span>
<span class="k">def</span> <span class="nf">validation_check</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="n">MIN_VALUE</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="o">...</span>
<span class="n">validation_check</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="ne">UnboundLocalError</span><span class="p">:</span> <span class="n">local</span> <span class="n">variable</span> <span class="s1">&#39;MIN_VALUE&#39;</span> <span class="n">referenced</span> <span class="n">before</span> <span class="n">assignment</span>

</pre></div>
</div>
<p>要想改变  必须加上global这个声明</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">MIN_VALUE</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">MAX_VALUE</span> <span class="o">=</span> <span class="mi">10</span>
<span class="k">def</span> <span class="nf">validation_check</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">MIN_VALUE</span>
    <span class="o">...</span>
    <span class="n">MIN_VALUE</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="o">...</span>
<span class="n">validation_check</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

</pre></div>
</div>
<p>global告诉python解析器，函数内部的变量MIN_VALUE就是定义的全局变量，这里输入的是2，这样修改的全局变量的值</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">MIN_VALUE</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">MAX_VALUE</span> <span class="o">=</span> <span class="mi">10</span>
<span class="k">def</span> <span class="nf">validation_check</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="n">MIN_VALUE</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="o">...</span>

</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">MIN_VALUE</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">MAX_VALUE</span> <span class="o">=</span> <span class="mi">10</span>
<span class="k">def</span> <span class="nf">validation_check</span><span class="p">():</span>
    <span class="n">MIN_VALUE</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="k">print</span><span class="p">(</span><span class="n">MIN_VALUE</span><span class="p">)</span>
<span class="n">validation_check</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">MIN_VALUE</span><span class="p">)</span>


<span class="c1"># 3</span>
<span class="c1"># 1</span>
</pre></div>
</div>
<p>对于嵌套函数来说，内部函数无法修改外部函数定义的变量，可以访问，想要修改就要加上 nonolocal</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">outer</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;local&quot;</span>
    <span class="k">def</span> <span class="nf">inner</span><span class="p">():</span>
        <span class="n">nonlocal</span> <span class="n">x</span> <span class="c1"># nonlocal 关键字表示这里的 x 就是外部函数 outer 定义的变量 x</span>
        <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;nonlocal&#39;</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;inner:&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
    <span class="n">inner</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;outer:&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<span class="n">outer</span><span class="p">()</span>
<span class="c1"># 输出</span>
<span class="n">inner</span><span class="p">:</span> <span class="n">nonlocal</span>
<span class="n">outer</span><span class="p">:</span> <span class="n">nonlocal</span>

</pre></div>
</div>
<p>不加就不会覆盖</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">outer</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;local&quot;</span>
    <span class="k">def</span> <span class="nf">inner</span><span class="p">():</span>
        <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;nonlocal&#39;</span> <span class="c1"># 这里的 x 是 inner 这个函数的局部变量</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;inner:&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
    <span class="n">inner</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;outer:&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<span class="n">outer</span><span class="p">()</span>
<span class="c1"># 输出</span>
<span class="n">inner</span><span class="p">:</span> <span class="n">nonlocal</span>
<span class="n">outer</span><span class="p">:</span> <span class="n">local</span>

</pre></div>
</div>
</div>
<div class="section" id="id129">
<h2>闭包<a class="headerlink" href="#id129" title="永久链接至标题">¶</a></h2>
<p>闭包就是在函数里面调用函数，一般用return来执行，return出内部调用的函数名。</p>
<p>计算一个数的n次幂</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">nth_power</span><span class="p">(</span><span class="n">exponent</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">exponent_of</span><span class="p">(</span><span class="n">base</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">base</span> <span class="o">**</span> <span class="n">exponent</span>
    <span class="k">return</span> <span class="n">exponent_of</span> <span class="c1"># 返回值是 exponent_of 函数</span>

<span class="n">square</span> <span class="o">=</span> <span class="n">nth_power</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># 计算一个数的平方</span>
<span class="n">cube</span> <span class="o">=</span> <span class="n">nth_power</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># 计算一个数的立方 </span>
<span class="n">square</span>
<span class="c1"># 输出</span>
<span class="o">&lt;</span><span class="n">function</span> <span class="n">__main__</span><span class="o">.</span><span class="n">nth_power</span><span class="o">.&lt;</span><span class="nb">locals</span><span class="o">&gt;.</span><span class="n">exponent</span><span class="p">(</span><span class="n">base</span><span class="p">)</span><span class="o">&gt;</span>

<span class="n">cube</span>
<span class="c1"># 输出</span>
<span class="o">&lt;</span><span class="n">function</span> <span class="n">__main__</span><span class="o">.</span><span class="n">nth_power</span><span class="o">.&lt;</span><span class="nb">locals</span><span class="o">&gt;.</span><span class="n">exponent</span><span class="p">(</span><span class="n">base</span><span class="p">)</span><span class="o">&gt;</span>

<span class="k">print</span><span class="p">(</span><span class="n">square</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>  <span class="c1"># 计算 2 的平方</span>
<span class="k">print</span><span class="p">(</span><span class="n">cube</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span> <span class="c1"># 计算 2 的立方</span>
<span class="c1"># 输出</span>
<span class="mi">4</span> <span class="c1"># 2^2</span>
<span class="mi">8</span> <span class="c1"># 2^3</span>

</pre></div>
</div>
</div>
</div>
<div class="section" id="id130">
<h1>19、深入Python匿名函数<a class="headerlink" href="#id130" title="永久链接至标题">¶</a></h1>
<p>﻿</p>
<p>&#64;Author：By Runsen</p>
<div class="section" id="id131">
<h2>1、匿名函数<a class="headerlink" href="#id131" title="永久链接至标题">¶</a></h2>
<p>匿名函数不需要显示地定义函数名，使用【lambda + 参数 +表达式】的方式</p>
<div class="section" id="id132">
<h3>1.1 lambda 函数<a class="headerlink" href="#id132" title="永久链接至标题">¶</a></h3>
<p>lambda 函数的形式</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">lambda</span> <span class="n">argument1</span><span class="p">,</span> <span class="n">argument2</span><span class="p">,</span><span class="o">...</span> <span class="n">argumentN</span> <span class="p">:</span> <span class="n">expression</span>
</pre></div>
</div>
<p>套入函数，使用lambda</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">square</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span>
<span class="n">square</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="mi">9</span>
</pre></div>
</div>
<p>lambda 返回的一个函数对象</p>
<p>注意：lambda 和def 的区别</p>
<p>lambda 是一个表达式，def 是一个语句</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="p">)(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
<span class="c1"># 输出</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">81</span><span class="p">]</span>
</pre></div>
</div>
<p>lambda 可以用作函数的参数，def 不能</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)]</span>
<span class="n">l</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="c1"># 按列表中元祖的第二个元素排序</span>
<span class="k">print</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
<span class="c1"># 输出</span>
<span class="p">[(</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">)]</span>
</pre></div>
</div>
<p>lambda 是只有一行的简单表达式</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">squared</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
</pre></div>
</div>
<p>如果不用lambda ，你用def就需要多写好多行</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span>

<span class="n">squared</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">square</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
</pre></div>
</div>
<p>在tkinter 中实现的简单功能</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="n">Button</span><span class="p">,</span> <span class="n">mainloop</span>
<span class="n">button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span>
    <span class="n">text</span><span class="o">=</span><span class="s1">&#39;This is a button&#39;</span><span class="p">,</span>
    <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="k">print</span><span class="p">(</span><span class="s1">&#39;being pressed&#39;</span><span class="p">))</span> <span class="c1"># 点击时调用 lambda 函数</span>
<span class="n">button</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
<span class="n">mainloop</span><span class="p">()</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20190602104359313.png" src="https://img-blog.csdnimg.cn/20190602104359313.png" /></p>
<p>主要你按压就出现being pressed</p>
<p>你用def就是下面的样子</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="n">Button</span><span class="p">,</span> <span class="n">mainloop</span>

<span class="k">def</span> <span class="nf">print_message</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;being pressed&#39;</span><span class="p">)</span>

<span class="n">button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span>
    <span class="n">text</span><span class="o">=</span><span class="s1">&#39;This is a button&#39;</span><span class="p">,</span>
    <span class="n">command</span><span class="o">=</span><span class="n">print_message</span><span class="p">)</span> <span class="c1"># 点击时调用 lambda 函数</span>
<span class="n">button</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
<span class="n">mainloop</span><span class="p">()</span>
</pre></div>
</div>
<p>使用def 要写好多行，多定义一个函数</p>
</div>
<div class="section" id="id133">
<h3>1.2 函数式编程<a class="headerlink" href="#id133" title="永久链接至标题">¶</a></h3>
<p>函数式编程是指代码每一块都是不可变的，都是由纯函数的组成</p>
<p>这里的纯函数 值函数本身相互独立，对于相同的输入都有相同的输出</p>
<p>传入一个列表将列表的元素变为原来的2倍</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">multiply_2</span><span class="p">(</span><span class="n">l</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">)):</span>
        <span class="n">l</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">*=</span> <span class="mi">2</span>
    <span class="k">return</span> <span class="n">l</span>

</pre></div>
</div>
<p>这段代码不是纯函数的形式，因为我多次调用，每次得到的结果不一样</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">multiply_2_pure</span><span class="p">(</span><span class="n">l</span><span class="p">):</span>
    <span class="n">new_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">l</span><span class="p">:</span>
        <span class="n">new_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">new_list</span>

</pre></div>
</div>
<p>纯函数的形式，应该在函数里面定义一个新的列表</p>
</div>
</div>
<div class="section" id="id134">
<h2>2、其他函数<a class="headerlink" href="#id134" title="永久链接至标题">¶</a></h2>
<p>对于纯函数python 提供了几个函数</p>
<div class="section" id="map">
<h3>2.1 map<a class="headerlink" href="#map" title="永久链接至标题">¶</a></h3>
<p>map 函数的形式</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>（ function ，iterable ）
</pre></div>
</div>
<p>第一个参数是函数的对象，第二个是一个可迭代对象</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">new_list</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="n">l</span><span class="p">)</span> 
<span class="nb">list</span><span class="p">(</span><span class="n">new_list</span><span class="p">)</span>
<span class="c1"># [2， 4， 6， 8， 10]</span>
</pre></div>
</div>
</div>
<div class="section" id="filter">
<h3>2.2 filter<a class="headerlink" href="#filter" title="永久链接至标题">¶</a></h3>
<p>filter通常对一个集合做g过滤的操作</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">new_list</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">l</span><span class="p">)</span>
<span class="nb">list</span><span class="p">(</span><span class="n">new_list</span><span class="p">)</span>
 <span class="c1"># [2, 4]</span>
</pre></div>
</div>
</div>
<div class="section" id="reduce">
<h3>2.3 reduce<a class="headerlink" href="#reduce" title="永久链接至标题">¶</a></h3>
<p>reduce通常对一个集合做累积的操作</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">functools</span>

<span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">product</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">,</span> <span class="n">l</span><span class="p">)</span> 
<span class="n">product</span>
<span class="c1"># 1*2*3*4*5 = 120</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id135">
<h2>3、思考题<a class="headerlink" href="#id135" title="永久链接至标题">¶</a></h2>
<div class="section" id="id136">
<h3>3.1 如何根据值来排序<a class="headerlink" href="#id136" title="永久链接至标题">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;mike&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;lucy&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;ben&#39;</span><span class="p">:</span> <span class="mi">30</span><span class="p">}</span>


<span class="nb">sorted</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>注意 reduce在3中已经放进functools模块中了</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">**</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="go">&lt;map object at 0x000001CAD42A8CF8&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span><span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="go">&lt;filter object at 0x000001CAD42A8C88&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="p">,[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">NameError</span>: <span class="n">name &#39;reduce&#39; is not defined</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="nb">reduce</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="p">,[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="go">120</span>
<span class="go">map,filter返回的只是一个对象，reduce在3中已经放进fucntools模块中了</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id137">
<h1>20、深入Python迭代器和生成器<a class="headerlink" href="#id137" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：By Runsen</p>
<div class="section" id="id138">
<h2>1、 迭代器<a class="headerlink" href="#id138" title="永久链接至标题">¶</a></h2>
<div class="section" id="id139">
<h3>1.1 容器<a class="headerlink" href="#id139" title="永久链接至标题">¶</a></h3>
<p>首先，在了解迭代器之前，需要知道什么是容器</p>
<p>一切都是对象，对象的抽象就是类，而对象的集合就是容器。</p>
<p>容器，就是有多个对象组成的东西。</p>
<p>比如：列表[0,1,2]，元组(1,2,3),字典{’0:’0’,’1’:”1’}  集合{1,2,3}都是容器</p>
<p>所有的容器都是可迭代对象，也就是可以遍历元素。</p>
<p>可迭代对象：可以被转化为不依赖索引取值的容器，这样的对象就叫做可迭代对象，可以通过__iter__() 来生成不依赖索引取值的容器。</p>
<p>你看下图iter(111)是不是报错了。</p>
<p><img alt="https://img-blog.csdnimg.cn/20190711224541684.png" src="https://img-blog.csdnimg.cn/20190711224541684.png" /></p>
<p>因为111不能遍历，所以iter(111)直接报错。</p>
<p>现在写一个is_iterable判断是不是迭代器</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>def is_iterable(param):
    try: 
        iter(param) 
        return True
    except TypeError:
        return False

params = [
    1234,
    &#39;1234&#39;,
    [1, 2, 3, 4],
    set([1, 2, 3, 4]),
    {1:1, 2:2, 3:3, 4:4},
    (1, 2, 3, 4)
]
    
for param in params:
    print(&#39;{} is iterable? {}&#39;.format(param, is_iterable(param)))

########## 输出 ##########

1234 is iterable? False
1234 is iterable? True
[1, 2, 3, 4] is iterable? True
{1, 2, 3, 4} is iterable? True
{1: 1, 2: 2, 3: 3, 4: 4} is iterable? True
(1, 2, 3, 4) is iterable? True
</pre></div>
</div>
<p>只要for i in 可以遍历，都是迭代器</p>
</div>
<div class="section" id="id140">
<h3>1.2 取值<a class="headerlink" href="#id140" title="永久链接至标题">¶</a></h3>
<p>迭代器提供了一个next方法，调用这个方法，得到了容器的下一个对象或者一个stopiteration 的报错  ，没有下一个对象</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="s2">&quot;123&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">next</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">&#39;1&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">next</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">&#39;2&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">next</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">&#39;3&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">next</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">StopIteration</span>
</pre></div>
</div>
<p>但是迭代和枚举不完全一样</p>
<p>迭代你并不知道总量是多少</p>
</div>
</div>
<div class="section" id="id141">
<h2>2、生成器<a class="headerlink" href="#id141" title="永久链接至标题">¶</a></h2>
<p>那么什么又是生成器，和迭代器又有什么关系？</p>
<p><strong>生成器就是一个迭代器的例子</strong>，如果说迭代器是人，那么生成器就人中的一个人。</p>
<p>为什么会出来一个生成器，其实很简单声明一个迭代器很简单,但是很容易造成内存不够</p>
<p>比如下图（i for i in range(1000000000) 通过元组方式生成迭代器</p>
<p><img alt="https://img-blog.csdnimg.cn/20190711225225435.png" src="https://img-blog.csdnimg.cn/20190711225225435.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20190711225452564.png" src="https://img-blog.csdnimg.cn/20190711225452564.png" /></p>
<p>[i for i in range(1000000000] 它也是一个迭代器，只不会太大了，跑不起来。于是生成器就出来了。</p>
<p>不信比一比内存和消耗的时间，代码如下。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">psutil</span>

<span class="c1"># 显示当前 python 程序占用的内存大小</span>
<span class="k">def</span> <span class="nf">show_memory_info</span><span class="p">(</span><span class="n">hint</span><span class="p">):</span>
    <span class="n">pid</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getpid</span><span class="p">()</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">Process</span><span class="p">(</span><span class="n">pid</span><span class="p">)</span>
    
    <span class="n">info</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">memory_full_info</span><span class="p">()</span>
    <span class="n">memory</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">uss</span> <span class="o">/</span> <span class="mf">1024.</span> <span class="o">/</span> <span class="mi">1024</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;{} memory used: {} MB&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">hint</span><span class="p">,</span> <span class="n">memory</span><span class="p">))</span>
    
<span class="k">def</span> <span class="nf">test_iterator</span><span class="p">():</span>
    <span class="n">show_memory_info</span><span class="p">(</span><span class="s1">&#39;initing iterator&#39;</span><span class="p">)</span>
    <span class="n">list_1</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100000000</span><span class="p">)]</span>
    <span class="n">show_memory_info</span><span class="p">(</span><span class="s1">&#39;after iterator initiated&#39;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">list_1</span><span class="p">))</span>
    <span class="n">show_memory_info</span><span class="p">(</span><span class="s1">&#39;after sum called&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">test_generator</span><span class="p">():</span>
    <span class="n">show_memory_info</span><span class="p">(</span><span class="s1">&#39;initing generator&#39;</span><span class="p">)</span>
    <span class="n">list_2</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100000000</span><span class="p">))</span>
    <span class="n">show_memory_info</span><span class="p">(</span><span class="s1">&#39;after generator initiated&#39;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">list_2</span><span class="p">))</span>
    <span class="n">show_memory_info</span><span class="p">(</span><span class="s1">&#39;after sum called&#39;</span><span class="p">)</span>

<span class="o">%</span><span class="n">time</span> <span class="n">test_iterator</span><span class="p">()</span>
<span class="o">%</span><span class="n">time</span> <span class="n">test_generator</span><span class="p">()</span>

<span class="c1">########## 输出 ##########</span>

<span class="n">initing</span> <span class="n">iterator</span> <span class="n">memory</span> <span class="n">used</span><span class="p">:</span> <span class="mf">48.9765625</span> <span class="n">MB</span>
<span class="n">after</span> <span class="n">iterator</span> <span class="n">initiated</span> <span class="n">memory</span> <span class="n">used</span><span class="p">:</span> <span class="mf">3920.30078125</span> <span class="n">MB</span>
<span class="mi">4999999950000000</span>
<span class="n">after</span> <span class="nb">sum</span> <span class="n">called</span> <span class="n">memory</span> <span class="n">used</span><span class="p">:</span> <span class="mf">3920.3046875</span> <span class="n">MB</span>
<span class="n">Wall</span> <span class="n">time</span><span class="p">:</span> <span class="mi">17</span> <span class="n">s</span>
<span class="n">initing</span> <span class="n">generator</span> <span class="n">memory</span> <span class="n">used</span><span class="p">:</span> <span class="mf">50.359375</span> <span class="n">MB</span>
<span class="n">after</span> <span class="n">generator</span> <span class="n">initiated</span> <span class="n">memory</span> <span class="n">used</span><span class="p">:</span> <span class="mf">50.359375</span> <span class="n">MB</span>
<span class="mi">4999999950000000</span>
<span class="n">after</span> <span class="nb">sum</span> <span class="n">called</span> <span class="n">memory</span> <span class="n">used</span><span class="p">:</span> <span class="mf">50.109375</span> <span class="n">MB</span>
<span class="n">Wall</span> <span class="n">time</span><span class="p">:</span> <span class="mf">12.5</span> <span class="n">s</span>
</pre></div>
</div>
<p>对了，生成器还有一个yield关键字，不信，去菜鸟看看，说真的菜鸟教程真心不错。</p>
<p><img alt="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS81YmIyODg1Ni03NjQwLTRhZTEtOGZhYi0yYmQ1MmI4YTNkYmYucG5n?x-oss-process=image/format,png" src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS81YmIyODg1Ni03NjQwLTRhZTEtOGZhYi0yYmQ1MmI4YTNkYmYucG5n?x-oss-process=image/format,png" /></p>
<p>yield在scrapy用的多，然后我在其他地方没有见到过。</p>
<p>yield和return也很好区别，return就返回值，结束函数，yield只是保存，不会结束函数。想下，你用scrapy爬错，爬一个就return，不干了，这怎么行。</p>
</div>
<div class="section" id="id142">
<h2>3、 练习<a class="headerlink" href="#id142" title="永久链接至标题">¶</a></h2>
<div class="section" id="id143">
<h3>3.1 给定一个列表和一个数字，求这个数字的位置<a class="headerlink" href="#id143" title="永久链接至标题">¶</a></h3>
<p>这好像是leetcode哪题，我忘记了。如果使用枚举的方法，也就是遍历，很简单。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 枚举的方法</span>
<span class="k">def</span> <span class="nf">index_normal</span><span class="p">(</span><span class="n">L</span><span class="p">,</span> <span class="n">target</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">L</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">num</span> <span class="o">==</span> <span class="n">target</span><span class="p">:</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>

<span class="k">print</span><span class="p">(</span><span class="n">index_normal</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="mi">2</span><span class="p">))</span>

<span class="c1">########## 输出 ##########</span>

<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
</pre></div>
</div>
<p>使用迭代器，需要用list转变为列表，才能print输出</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">index_generator</span><span class="p">(</span><span class="n">L</span><span class="p">,</span> <span class="n">target</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">L</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">num</span> <span class="o">==</span> <span class="n">target</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">i</span>

<span class="k">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">index_generator</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="mi">2</span><span class="p">)))</span>

<span class="c1">########## 输出 ##########</span>

<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
</pre></div>
</div>
<p>(1 in iter([1,2,3]))  #   True</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>  <span class="c1"># 生成器</span>

<span class="k">print</span><span class="p">(</span><span class="mi">2</span> <span class="ow">in</span> <span class="n">b</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="mi">4</span> <span class="ow">in</span> <span class="n">b</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="mi">3</span> <span class="ow">in</span> <span class="n">b</span><span class="p">)</span>

<span class="c1">########## 输出 ##########</span>

<span class="bp">True</span>
<span class="bp">True</span>
<span class="bp">True</span>

</pre></div>
</div>
</div>
<div class="section" id="id144">
<h3>3.2 判断第一个子列是不是第二个的子序列<a class="headerlink" href="#id144" title="永久链接至标题">¶</a></h3>
<p>这我记得，https://leetcode.com/problems/is-subsequence/</p>
<p><img alt="https://img-blog.csdnimg.cn/20190713220951609.png" src="https://img-blog.csdnimg.cn/20190713220951609.png" /></p>
<p>在去leetcode国际版找一个大神写的代码少的完美写法，</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">is_subsequence</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="n">b</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="c1"># 迭代器</span>
    <span class="k">return</span> <span class="nb">all</span><span class="p">(</span><span class="n">i</span> <span class="ow">in</span> <span class="n">b</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">a</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">is_subsequence</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]))</span>
<span class="k">print</span><span class="p">(</span><span class="n">is_subsequence</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]))</span>

<span class="c1">########## 输出 ##########</span>

<span class="bp">True</span>
<span class="bp">False</span>
</pre></div>
</div>
<p>竟然有一个all就可以搞定了。我太菜了，菜得天天抄别人代码。</p>
<p><img alt="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS81NTMwZTMwZi00NTQzLTQwMTEtYWQzMC1lMDk5YjBkZWVhMWQucG5n?x-oss-process=image/format,png" src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS81NTMwZTMwZi00NTQzLTQwMTEtYWQzMC1lMDk5YjBkZWVhMWQucG5n?x-oss-process=image/format,png" /></p>
</div>
<div class="section" id="n-3-1-2-3-n-2">
<h3>3.3 验证$1^3+2^3+3^3+……+n^3=(1+2+3+……+n)^2？$<a class="headerlink" href="#n-3-1-2-3-n-2" title="永久链接至标题">¶</a></h3>
<p>生成器玩法，这个公式好像高中学的，</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">generator</span><span class="p">(</span><span class="n">k</span><span class="p">):</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">i</span> <span class="o">**</span> <span class="n">k</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="n">gen_1</span> <span class="o">=</span> <span class="n">generator</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">gen_3</span> <span class="o">=</span> <span class="n">generator</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">gen_1</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">gen_3</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_sum</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">sum_1</span><span class="p">,</span> <span class="n">sum_3</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">next_1</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">gen_1</span><span class="p">)</span>
        <span class="n">next_3</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">gen_3</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;next_1 = {}, next_3 = {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">next_1</span><span class="p">,</span> <span class="n">next_3</span><span class="p">))</span>
        <span class="n">sum_1</span> <span class="o">+=</span> <span class="n">next_1</span>
        <span class="n">sum_3</span> <span class="o">+=</span> <span class="n">next_3</span>
    <span class="k">print</span><span class="p">(</span><span class="n">sum_1</span> <span class="o">*</span> <span class="n">sum_1</span><span class="p">,</span> <span class="n">sum_3</span><span class="p">)</span>

<span class="n">get_sum</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>

<span class="c1">########## 输出 ##########</span>

<span class="o">&lt;</span><span class="n">generator</span> <span class="nb">object</span> <span class="n">generator</span> <span class="n">at</span> <span class="mh">0x000001E70651C4F8</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">generator</span> <span class="nb">object</span> <span class="n">generator</span> <span class="n">at</span> <span class="mh">0x000001E70651C390</span><span class="o">&gt;</span>
<span class="n">next_1</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">next_3</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">next_1</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">next_3</span> <span class="o">=</span> <span class="mi">8</span>
<span class="n">next_1</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">next_3</span> <span class="o">=</span> <span class="mi">27</span>
<span class="n">next_1</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">next_3</span> <span class="o">=</span> <span class="mi">64</span>
<span class="n">next_1</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="n">next_3</span> <span class="o">=</span> <span class="mi">125</span>
<span class="n">next_1</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span> <span class="n">next_3</span> <span class="o">=</span> <span class="mi">216</span>
<span class="n">next_1</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span> <span class="n">next_3</span> <span class="o">=</span> <span class="mi">343</span>
<span class="n">next_1</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span> <span class="n">next_3</span> <span class="o">=</span> <span class="mi">512</span>
<span class="mi">1296</span> <span class="mi">1296</span>
</pre></div>
</div>
<p>经过我三摧残，终于想起来之前的东西。</p>
</div>
</div>
</div>
<div class="section" id="id145">
<h1>21、深入Python强大的装饰器<a class="headerlink" href="#id145" title="永久链接至标题">¶</a></h1>
<p>﻿</p>
<p>&#64;Author：By Runsen</p>
<div class="section" id="id146">
<h2>1、装饰器<a class="headerlink" href="#id146" title="永久链接至标题">¶</a></h2>
<div class="section" id="id147">
<h3>1.1 装饰器入门<a class="headerlink" href="#id147" title="永久链接至标题">¶</a></h3>
<p>装饰器，顾名思义，就是用来“装饰”的。比如&#64;Runsen就是一个装饰器，其中”Runsen”是你的装饰器的名字。它能装饰的东西有：函数、类。</p>
<p>先看两段代码，在这里my_decorator就是一个装饰器，其实装饰器就是一个函数来的函数</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">():</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;wrapper of decorator&#39;</span><span class="p">)</span>
        <span class="n">func</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="k">def</span> <span class="nf">greet</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;hello world&#39;</span><span class="p">)</span>

<span class="n">greet</span> <span class="o">=</span> <span class="n">my_decorator</span><span class="p">(</span><span class="n">greet</span><span class="p">)</span>
<span class="n">greet</span><span class="p">()</span>

<span class="c1"># 输出</span>
<span class="n">wrapper</span> <span class="n">of</span> <span class="n">decorator</span>
<span class="n">hello</span> <span class="n">world</span>
</pre></div>
</div>
<p>my_decorator函数传入greet函数名方法，中间有一个wrapper内函数方法，  return wrapper说明要执行wrapper内函数，wrapper内函数，执行greet函数名方法</p>
<p>greet = my_decorator(greet)这个代码可以用装饰器来替代，在greet上面加一个&#64;my_decorator，直接执行greet()</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">():</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;wrapper of decorator&#39;</span><span class="p">)</span>
        <span class="n">func</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="nd">@my_decorator</span>
<span class="k">def</span> <span class="nf">greet</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;hello world&#39;</span><span class="p">)</span>

<span class="n">greet</span><span class="p">()</span>

<span class="n">wrapper</span> <span class="n">of</span> <span class="n">decorator</span>
<span class="n">hello</span> <span class="n">world</span>
</pre></div>
</div>
<p>装饰器就是继承了 my_decorator函数，因此先调用my_decorator中的wrapper打印出
wrapper of decorator，然后func()被调用，指的就是 greet(),所以在打印出hello world</p>
</div>
<div class="section" id="id148">
<h3>1.2 带参数的装饰器<a class="headerlink" href="#id148" title="永久链接至标题">¶</a></h3>
<p>有时候函数需要传入参数，这时候用*args, **kwargs接受就可以了。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;wrapper of decorator&#39;</span><span class="p">)</span>
        <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wrapper</span>
    
<span class="k">def</span> <span class="nf">repeat</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">my_decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
                <span class="k">print</span><span class="p">(</span><span class="s1">&#39;wrapper of decorator&#39;</span><span class="p">)</span>
                <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">wrapper</span>
    <span class="k">return</span> <span class="n">my_decorator</span>


<span class="nd">@repeat</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">greet</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

<span class="n">greet</span><span class="p">(</span><span class="s1">&#39;hello world&#39;</span><span class="p">)</span>

<span class="c1"># 输出：</span>
<span class="n">wrapper</span> <span class="n">of</span> <span class="n">decorator</span>
<span class="n">hello</span> <span class="n">world</span>
<span class="n">wrapper</span> <span class="n">of</span> <span class="n">decorator</span>
<span class="n">hello</span> <span class="n">world</span>
<span class="n">wrapper</span> <span class="n">of</span> <span class="n">decorator</span>
<span class="n">hello</span> <span class="n">world</span>
<span class="n">wrapper</span> <span class="n">of</span> <span class="n">decorator</span>
<span class="n">hello</span> <span class="n">world</span>

</pre></div>
</div>
<p>但是自定义参数的装饰器将改变函数本身的元信息，即函数不再是本身的函数</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">**</span><span class="n">greet</span><span class="o">.</span><span class="vm">__name__</span>
<span class="c1">## 输出</span>
<span class="s1">&#39;wrapper&#39;</span>

<span class="n">help</span><span class="p">(</span><span class="n">greet</span><span class="p">)</span>
<span class="c1"># 输出</span>
<span class="n">Help</span> <span class="n">on</span> <span class="n">function</span> <span class="n">wrapper</span> <span class="ow">in</span> <span class="n">module</span> <span class="n">__main__</span><span class="p">:</span>

<span class="n">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<p>这时，需要使用内置模块functools.wrap会保留原函数的元信</p>
<p>在源代码中&#64;functools.wraps也是这么来的</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">functools</span>

<span class="k">def</span> <span class="nf">my_decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="nd">@functools.wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;wrapper of decorator&#39;</span><span class="p">)</span>
        <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wrapper</span>
    
<span class="nd">@my_decorator</span>
<span class="k">def</span> <span class="nf">greet</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

<span class="n">greet</span><span class="o">.</span><span class="vm">__name__</span>

<span class="c1"># 输出</span>
<span class="s1">&#39;greet&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id149">
<h2>2、装饰器进阶<a class="headerlink" href="#id149" title="永久链接至标题">¶</a></h2>
<div class="section" id="id150">
<h3>2.1  类装饰器<a class="headerlink" href="#id150" title="永久链接至标题">¶</a></h3>
<p>类装饰器主要依赖函数__call__	，每当调用一个类的实例，函数__call__就会执行一次</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Count</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func</span> <span class="o">=</span> <span class="n">func</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_calls</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_calls</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;num of calls is: {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_calls</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="nd">@Count</span>
<span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;hello world&quot;</span><span class="p">)</span>

<span class="n">example</span><span class="p">()</span>

<span class="c1"># 输出</span>
<span class="n">num</span> <span class="n">of</span> <span class="n">calls</span> <span class="ow">is</span><span class="p">:</span> <span class="mi">1</span>
<span class="n">hello</span> <span class="n">world</span>

<span class="n">example</span><span class="p">()</span>

<span class="c1"># 输出</span>
<span class="n">num</span> <span class="n">of</span> <span class="n">calls</span> <span class="ow">is</span><span class="p">:</span> <span class="mi">2</span>
<span class="n">hello</span> <span class="n">world</span>
</pre></div>
</div>
</div>
<div class="section" id="id151">
<h3>2.2 装饰器的嵌套<a class="headerlink" href="#id151" title="永久链接至标题">¶</a></h3>
<p>如果一个函数上面有多个装饰器，叫做装饰器的嵌套</p>
<p>从下到上</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@decorator1</span>
<span class="nd">@decorator2</span>
<span class="nd">@decorator3</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>那么相当于，从里到外</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">decorator1</span><span class="p">(</span><span class="n">decorator2</span><span class="p">(</span><span class="n">decorator3</span><span class="p">(</span><span class="n">func</span><span class="p">)))</span>


<span class="kn">import</span> <span class="nn">functools</span>

<span class="k">def</span> <span class="nf">my_decorator1</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="nd">@functools.wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;execute decorator1&#39;</span><span class="p">)</span>
        <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wrapper</span>


<span class="k">def</span> <span class="nf">my_decorator2</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="nd">@functools.wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;execute decorator2&#39;</span><span class="p">)</span>
        <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wrapper</span>


<span class="nd">@my_decorator1</span>
<span class="nd">@my_decorator2</span>
<span class="k">def</span> <span class="nf">greet</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>


<span class="n">greet</span><span class="p">(</span><span class="s1">&#39;hello world&#39;</span><span class="p">)</span>

<span class="c1"># 输出</span>
<span class="n">execute</span> <span class="n">decorator1</span>
<span class="n">execute</span> <span class="n">decorator2</span>
<span class="n">hello</span> <span class="n">world</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id152">
<h2>3、装饰器用法实例<a class="headerlink" href="#id152" title="永久链接至标题">¶</a></h2>
<div class="section" id="id153">
<h3>3.1 身份认证<a class="headerlink" href="#id153" title="永久链接至标题">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">functools</span>

<span class="k">def</span> <span class="nf">authenticate</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="nd">@functools.wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">check_user_logged_in</span><span class="p">(</span><span class="n">request</span><span class="p">):</span> <span class="c1"># 如果用户处于登录状态</span>
            <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="c1"># 执行函数 post_comment() </span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Authentication failed&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wrapper</span>
    
<span class="nd">@authenticate</span>
<span class="k">def</span> <span class="nf">post_comment</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
    <span class="o">...</span>
 

</pre></div>
</div>
</div>
<div class="section" id="id154">
<h3>3.2 日志记录<a class="headerlink" href="#id154" title="永久链接至标题">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">functools</span>

<span class="k">def</span> <span class="nf">log_execution_time</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="nd">@functools.wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">end</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;{} took {} ms&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="p">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">return</span> <span class="n">wrapper</span>
    
<span class="nd">@log_execution_time</span>
<span class="k">def</span> <span class="nf">calculate_similarity</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
    <span class="o">...</span>

</pre></div>
</div>
</div>
<div class="section" id="id155">
<h3>3.3 输入合理性<a class="headerlink" href="#id155" title="永久链接至标题">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">functools</span>

<span class="k">def</span> <span class="nf">validation_check</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
    <span class="nd">@functools.wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span> 
        <span class="o">...</span> <span class="c1"># 检查输入是否合法</span>
    
<span class="nd">@validation_check</span>
<span class="k">def</span> <span class="nf">neural_network_training</span><span class="p">(</span><span class="n">param1</span><span class="p">,</span> <span class="n">param2</span><span class="p">,</span> <span class="o">...</span><span class="p">):</span>
    <span class="o">...</span>

</pre></div>
</div>
<p>所谓的装饰器，其实就是通过装饰器函数，来修改函数的一些功能，使得原函数不需要修改</p>
<p>代码来源：极客时间Python专栏</p>
</div>
</div>
</div>
<div class="section" id="id156">
<h1>22、上篇 | Python的进程和线程<a class="headerlink" href="#id156" title="永久链接至标题">¶</a></h1>
<p>&#64;Author: Runsen</p>
<div class="section" id="id157">
<h2>进程和线程<a class="headerlink" href="#id157" title="永久链接至标题">¶</a></h2>
<p>我们打开我们的计算机就会看到进程和线程</p>
<p><img alt="https://img-blog.csdnimg.cn/20190409220332456.png" src="https://img-blog.csdnimg.cn/20190409220332456.png" /></p>
<p>那什么是进程什么是线程</p>
<p>我的理解是进程是指在系统中正在运行的一个应用程序；程序一旦运行就是进程，或者更专业化来说：进程是指程序执行时的一个实例。</p>
<p>线程是进程的一个实体。</p>
<p>进程——资源分配的最小单位，线程——程序执行的最小单位。</p>
<p>我举个例子，<strong>比如打开qq，就是一个线程，有很多个qq上号就是进程</strong></p>
</div>
<div class="section" id="id158">
<h2>python线程和进程的使用<a class="headerlink" href="#id158" title="永久链接至标题">¶</a></h2>
<p>现在讲python线程和进程的使用</p>
<p><img alt="https://img-blog.csdnimg.cn/20190409220401431.png" src="https://img-blog.csdnimg.cn/20190409220401431.png" /></p>
<p>在Python中线程和进程的使用就是通过Thread这个类。这个类在我们的_thread和threading模块中。</p>
<p><img alt="https://img-blog.csdnimg.cn/201904092204568.png" src="https://img-blog.csdnimg.cn/201904092204568.png" /></p>
<p>我们看一个标准的多线程的例子。</p>
<p><img alt="https://img-blog.csdnimg.cn/2019040922060320.png" src="https://img-blog.csdnimg.cn/2019040922060320.png" /></p>
</div>
<div class="section" id="id159">
<h2>练习<a class="headerlink" href="#id159" title="永久链接至标题">¶</a></h2>
<p>下面我们来练习下， 加深hreading模块的使用。</p>
<p>我写了下面的代码</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># -*- coding：utf-8 -*-</span>
<span class="c1"># time ：2019/4/9 21:52</span>
<span class="c1"># author: Runsen</span>
<span class="kn">import</span> <span class="nn">threading</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="k">def</span> <span class="nf">fun1</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Bye&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fun2</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;hi&#39;</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;OUT&#39;</span><span class="p">)</span>
<span class="n">t1</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">fun1</span><span class="p">)</span>
<span class="n">t2</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">fun2</span><span class="p">)</span>
<span class="n">t1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">t2</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="c1"># t1.join()</span>
<span class="c1"># t2.join()</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;主线程完毕&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>我们先不加join()来阻塞，t1和t2两个线程同时执行，由于位置先打印hello，再打印hi，这个时候都sleep2秒钟，但是他sleep2秒钟，主程序还是在执行，所以下面打印print(‘主线程完毕’)，最后才打印Bye和OUT</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hello</span>
<span class="n">hi</span>
<span class="n">主线程完毕</span>
<span class="n">Bye</span>
<span class="n">OUT</span>
</pre></div>
</div>
</div>
<div class="section" id="id160">
<h2>线程间变量的共享<a class="headerlink" href="#id160" title="永久链接至标题">¶</a></h2>
<p><img alt="https://img-blog.csdnimg.cn/20190409221959273.png" src="https://img-blog.csdnimg.cn/20190409221959273.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20190409222051749.png" src="https://img-blog.csdnimg.cn/20190409222051749.png" /></p>
<p>代码如上图所示，打印的a是1还是2，</p>
<p>答案是 ：2。因为出现了global，线程间变量的共享，在func中的a是全局变量。</p>
<p>下面，我们提高一点点难度，代码如下图所示，还是猜一猜a是啥东西。注意:这里出现了join来阻塞来增加了加和减的操作。</p>
<p><img alt="https://img-blog.csdnimg.cn/20190409222525518.png" src="https://img-blog.csdnimg.cn/20190409222525518.png" /></p>
<p>相信很多人都认为是0，其实这个a的值是变化的，可能这次是0 ，下次是1，还有可能是1000000，a就是在[-1000000，1000000]中的一个随机数。</p>
<p>为什么呢？这是因为虽然他们是同时运行的，但是同时在修改我们的a，那就乱了。这是导致a，for i in range(1000000)，就是遍历了1000000，incr和decr的方法都加上一起了，在这1000000次遍历中，不知道有多少加，多少减，比如，我1000000都是加，没有减，a就是1000000。</p>
<p>如果你就是想出现0，其实加一个互斥锁就可以了。这样你加多少次，我就减多少次，加减的次数不会叠加。因此来了lock的用法。</p>
<p><img alt="https://img-blog.csdnimg.cn/20190409222743790.png" src="https://img-blog.csdnimg.cn/20190409222743790.png" /></p>
<p>这个a怎么运行都是 0。因为我们把这个a锁上了，这样就加1000000次，减1000000次，怎么出来都是我们的0。</p>
</div>
</div>
<div class="section" id="id161">
<h1>23、下篇 | Python线程和进程<a class="headerlink" href="#id161" title="永久链接至标题">¶</a></h1>
<p>﻿</p>
<p>&#64;Author：Runsen</p>
<div class="section" id="id162">
<h2>队列<a class="headerlink" href="#id162" title="永久链接至标题">¶</a></h2>
<p>上文锁能解决问题，但是不常见</p>
<p><img alt="https://img-blog.csdnimg.cn/20190409223407931.png" src="https://img-blog.csdnimg.cn/20190409223407931.png" /></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">queue</span> <span class="kn">import</span> <span class="n">Queue</span>
<span class="kn">from</span> <span class="nn">threading</span> <span class="kn">import</span> <span class="n">Thread</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>
<span class="n">my_queue</span> <span class="o">=</span> <span class="n">Queue</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">f1</span><span class="p">(</span><span class="n">my_queus</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
        <span class="n">num</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
        <span class="n">my_queue</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">f2</span><span class="p">(</span><span class="n">my_queus</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
        <span class="n">num</span> <span class="o">=</span> <span class="n">my_queue</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
<span class="n">t1</span> <span class="o">=</span> <span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">f1</span><span class="p">,</span><span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">my_queue</span><span class="p">,))</span>
<span class="n">t2</span> <span class="o">=</span> <span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">f2</span><span class="p">,</span><span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">my_queue</span><span class="p">,))</span>
<span class="n">t1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">t2</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">t1</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
<span class="n">t2</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</pre></div>
</div>
<p>0
5
10
0
5
10、</p>
<p><img alt="https://img-blog.csdnimg.cn/20190409224419329.png" src="https://img-blog.csdnimg.cn/20190409224419329.png" /></p>
</div>
<div class="section" id="id163">
<h2>线程池<a class="headerlink" href="#id163" title="永久链接至标题">¶</a></h2>
<p><img alt="https://img-blog.csdnimg.cn/20190409224540227.png" src="https://img-blog.csdnimg.cn/20190409224540227.png" /></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>from multiprocessing.pool import ThreadPool
import time
def hello(name):
    print(&#39;hello,{}&#39;.format(name))
    time.sleep(2)
    print(&#39;Bye&#39;)
t = ThreadPool(3)
for i in range(3):
    t.apply_async(hello,args=(i,))
t.close()
t.join()

OUT：
几乎一起完成
hello,0
hello,1
hello,2
几乎一起完成
Bye
Bye
Bye
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/2019040922534897.png" src="https://img-blog.csdnimg.cn/2019040922534897.png" /></p>
<p>对于进程和线程，可以提高爬虫速度</p>
</div>
<div class="section" id="id164">
<h2>多线程典型例子<a class="headerlink" href="#id164" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># -*- coding：utf-8 -*-</span>
<span class="c1"># time ：2019/4/23 10:13</span>
<span class="c1"># author: 毛利</span>

<span class="kn">import</span> <span class="nn">threading</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="n">MONEY</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">gLock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">Procuder</span><span class="p">():</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">global</span> <span class="n">MONEY</span>
        <span class="n">random_money</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
        <span class="n">gLock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="n">MONEY</span> <span class="o">+=</span> <span class="n">random_money</span>
        <span class="n">gLock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
        <span class="k">print</span> <span class="p">(</span><span class="s1">&#39;生产者</span><span class="si">%s</span><span class="s1">-生产了</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">,</span><span class="n">random_money</span><span class="p">))</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">Customer</span><span class="p">():</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">global</span> <span class="n">MONEY</span>
        <span class="n">random_money</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">MONEY</span> <span class="o">&gt;</span> <span class="n">random_money</span><span class="p">:</span>
            <span class="k">print</span> <span class="p">(</span><span class="s1">&#39;消费者</span><span class="si">%s</span><span class="s1">-消费了：</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">,</span><span class="n">random_money</span><span class="p">))</span>
            <span class="n">gLock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
            <span class="n">MONEY</span> <span class="o">-=</span> <span class="n">random_money</span>
            <span class="n">gLock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span> <span class="p">(</span><span class="s1">&#39;需要消费的钱为：</span><span class="si">%d</span><span class="s1">，余额为：</span><span class="si">%d</span><span class="s1">，&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">random_money</span><span class="p">,</span><span class="n">MONEY</span><span class="p">))</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">p_c_test</span><span class="p">():</span>
    <span class="c1"># 执行3个线程，来当作生产者</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
        <span class="n">th</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">Procuder</span><span class="p">)</span>
        <span class="n">th</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="c1"># 执行3个线程，来当作消费者</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
        <span class="n">th</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">Customer</span><span class="p">)</span>
        <span class="n">th</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">p_c_test</span><span class="p">()</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20190424214132327.png" src="https://img-blog.csdnimg.cn/20190424214132327.png" /></p>
</div>
</div>
<div class="section" id="id165">
<h1>24、深入Python多线程和多进程<a class="headerlink" href="#id165" title="永久链接至标题">¶</a></h1>
<p>&#64;Author ： Runsen</p>
<div class="section" id="id166">
<h2>多进程和多线程<a class="headerlink" href="#id166" title="永久链接至标题">¶</a></h2>
<ul class="simple">
<li>基本概念</li>
</ul>
<blockquote>
<div>“多任务”就是操作系统可以同时运行多个任务。</div></blockquote>
<p>单核CPU操作系统轮流让各个任务交替执行，任务1执行0.01秒，切换到任务2执行0.01秒反复执行。表面上看，每个任务都是交替执行的，但是，由于CPU的执行速度实在是太快了，感觉就像所有任务都在同时执行一样。真正的并行执行多任务只能在多核CPU上实现，但是，由于任务数量远远多于CPU的核心数量，所以，操作系统也会自动把很多任务轮流调度到每个核心上执行。</p>
<ul class="simple">
<li>并行和并发</li>
</ul>
<blockquote>
<div>并行：当系统有一个以上CPU时,则线程的操作有可能非并发。当一个CPU执行一个线程时，另一个CPU可以执行另一个线程，两个线程互不抢占CPU资源，可以同时进行，这种方式我们称之为并行(Parallel)。</div></blockquote>
<blockquote>
<div>并发：当有多个线程在操作时,如果系统只有一个CPU,则它根本不可能真正同时进行一个以上的线程，它只能把CPU运行时间划分成若干个时间段,再将时间 段分配给各个线程执行，在一个时间段的线程代码运行时，其它线程处于挂起状。这种方式称为并发(Concurrent)。</div></blockquote>
</div>
<div class="section" id="id167">
<h2>进程、线程、协程<a class="headerlink" href="#id167" title="永久链接至标题">¶</a></h2>
<p>一个任务就是一个进程（Process），比如打开一个浏览器就是启动一个浏览器进程。
有些进程不止同时干一件事，比如Word，它可以同时进行打字、拼写检查、打印等事情。在一个进程内部，要同时干多件事，就需要同时运行多个“子任务”，我们把进程内的这些“子任务”称为线程（Thread）。一个进程至少有一个线程。</p>
<ul class="simple">
<li>进程：每个进程都有自己独立的内存空间，不同进程之间的内存空间不共享。
密集CPU任务，需要充分使用多核CPU资源（服务器，大量的并行计算）时，用多进程。
进程之间的通信有操作系统传递，导致通讯效率低，切换开销大。</li>
<li>线程：一个进程可以有多个线程，所有线程共享进程的内存空间，通讯效率高，切换开销小。
共享意味着竞争，导致数据不安全，为了保护内存空间的数据安全，引入”互斥锁”。
一个线程在访问内存空间的时候，其他线程不允许访问，必须等待之前的线程访问结束，才能使用这个内存空间。
密集I/O任务（网络I/O，磁盘I/O，数据库I/O）使用多线程合适。
对于一些要求同时进行并且又要共享某些变量的并发操作，只能用线程，不能用进程。</li>
<li>互斥锁：一种安全有序的让多个线程访问内存空间的机制。</li>
<li>协程：又称微线程，在单线程上执行多个任务，用函数切换，开销极小。不通过操作系统调度，没有进程、线程的切换开销
多线程请求返回是无序的，哪个线程有数据返回就处理哪个线程，而协程返回的数据是有序的</li>
</ul>
<p>缺陷：单线程执行，处理密集CPU和本地磁盘IO的时候，性能较低。处理网络I/O性能还是比较高.</p>
<ul class="simple">
<li>GIL 全局解释器锁：线程的执行权限，在Python的进程里只有一个GIL。
一个线程需要执行任务，必须获取GIL。
好处：直接杜绝了多个线程访问内存空间的安全问题。
坏处：Python的多线程不是真正多线程，不能充分利用多核CPU的资源。
但是，在I/O阻塞的时候，解释器会释放GIL。</li>
</ul>
</div>
<div class="section" id="id168">
<h2>多进程<a class="headerlink" href="#id168" title="永久链接至标题">¶</a></h2>
<ul class="simple">
<li>fork—支持linux/unix
os模块封装了常见的系统调用，其中就包括fork
在Unix/Linux操作系统中，提供了一个fork()系统函数，它非常特殊。
编写完毕的代码，在没有运行的时候，称之为程序，正在运行着的代码，就成为进程</li>
<li>程序执行os.fork()时，操作系统会创建一个新的进程（子进程），然后复制父进程的所有信息到子进程中
普通的函数调用，调用一次，返回一次，但是fork()调用一次，返回两次，因为操作系统自动把当前进程（称为父进程）复制了一份（称为子进程），然后，分别在父进程和子进程内返回。</li>
<li>然后父进程和子进程都会从fork()函数中得到一个返回值，在子进程中这个值一定是0，而父进程中是子进程的 id号
这样做的理由是，一个父进程可以fork出很多子进程，所以，父进程要记下每个子进程的ID，而子进程只需要调用getppid()就可以拿到父进程的ID。</li>
<li>multiprosessing—跨平台
multiprocessing模块是跨平台版本的多进程模块。
multiprocessing模块提供了一个Process类来代表一个进程对象。</li>
<li>创建子进程
创建子进程时，只需要传入一个执行函数和函数的参数，创建一个Process实例，用start()方法启动。
join()方法可以等待子进程结束后再继续往下运行，通常用于进程间的同步。</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">proc</span><span class="p">(</span><span class="n">name</span><span class="p">):</span> <span class="c1">#子进程要执行的代码</span>
   <span class="k">print</span><span class="p">(</span><span class="s1">&#39;运行子进程 </span><span class="si">%s</span><span class="s1"> (</span><span class="si">%s</span><span class="s1">)...&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">getpid</span><span class="p">()))</span>  <span class="c1">#得到子进程id</span>

<span class="n">p</span><span class="o">=</span><span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">proc</span><span class="p">,</span><span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">,))</span> <span class="c1">#传入函数名和参数</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;子进程将要执行...&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;子进程结束&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Process([group [, target [, name [, args [, kwargs]]]]])</p>
<ul class="simple">
<li>target：表示这个进程实例所调用对象；</li>
<li>args：表示调用对象的位置参数元组；</li>
<li>kwargs：表示调用对象的关键字参数字典；</li>
<li>name：为当前进程实例的别名；</li>
<li>group：大多数情况下用不到；</li>
</ul>
<p>Process类常用方法：</p>
<ul class="simple">
<li>is_alive()：判断进程实例是否还在执行；</li>
<li>join([timeout])：是否等待进程实例执行结束，或等待多少秒；</li>
<li>start()：启动进程实例（创建子进程）；</li>
<li>run()：如果没有给定target参数，对这个对象调用start()方法时，就将执行对象中的run()方法；</li>
<li>terminate()：不管任务是否完成，立即终止；</li>
</ul>
<p>Process类常用属性：</p>
<ul class="simple">
<li>name：当前进程实例别名，默认为Process-N，N为从1开始递增的整数；</li>
<li>pid：当前进程实例的PID值；</li>
<li>pool类
如果要启动大量的子进程，可以用进程池的方式批量创建子进程。
初始化Pool时，可以指定一个最大进程数，当有新的请求提交到Pool中时，如果池还没有满，那么就会创建一个新的进程用来执行该请求；但如果池中的进程数已经达到指定的最大值，那么该请求就会等待，直到池中有进程结束，才会创建新的进程来执行</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">task</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;运行子进程</span><span class="si">%s</span><span class="s1">(</span><span class="si">%s</span><span class="s1">)&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">os</span><span class="o">.</span><span class="n">getpid</span><span class="p">()))</span>
    <span class="n">start</span><span class="o">=</span><span class="n">time</span><span class="p">()</span>
    <span class="n">sleep</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span><span class="o">*</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">end</span><span class="o">=</span><span class="n">time</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;子进程</span><span class="si">%s</span><span class="s1">运行 </span><span class="si">%.2f</span><span class="s1"> 秒&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">name</span><span class="p">,(</span><span class="n">end</span><span class="o">-</span><span class="n">start</span><span class="p">)))</span>   <span class="c1">#子进程01213是同时进行的，某个进程运行完毕后再运行子进程4</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;父进程</span><span class="si">%s</span><span class="s1">&#39;</span><span class="o">%</span><span class="n">os</span><span class="o">.</span><span class="n">getpid</span><span class="p">())</span>
    <span class="n">p</span><span class="o">=</span><span class="n">Pool</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>  <span class="c1">#最多同时跑4个子进程，默认大小为cpu核数</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
        <span class="n">p</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">task</span><span class="p">,</span><span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">i</span><span class="p">,))</span>
    <span class="n">p</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>    <span class="c1">#调用close之后不能添加新的进程了</span>
    <span class="n">p</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;所有进程完毕&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>调用join（）会等待所有子进程执行完毕，调用之前必须先调用close，调用close之后不能添加新的进程了</p>
<p>子进程
很多时候，子进程并不是自身，而是一个外部进程。我们创建了子进程后，还需要控制子进程的输入和输出。
subprocess模块启动一个子进程，控制其输入和输出。
子进程可以通过communicate()方法输入</p>
</div>
<div class="section" id="id169">
<h2>进程间通信<a class="headerlink" href="#id169" title="永久链接至标题">¶</a></h2>
<p>python提供了很多进程间通信的方式，queue用于在多进程间通信，pipe用于两个进程间通信。</p>
<ul class="simple">
<li>Queue
可以使用multiprocessing模块的Queue实现多进程之间的数据传递，Queue本身是一个消息列队程序，是多进程安全的队列。</li>
<li>Put方法用以插入数据到队列中，它有两个可选参数:blocked和timeout。如果blocked为True(默认值)，并且timeout为正值，该方法会阻塞timeout指定的时间，直到该队列有剩余的空间。如果超时，会抛出Queue.Full异常。如果blocked为False，但该Queue已满，会立即抛出Queue.Full异常。</li>
<li>Get方法可以从队列读取并且删除一个元素。同样，Get方法有两个可选参数:blocked和timeout。如果blocked为True(默认值)，并且timeout为正值，那么在等待时间内没有取到任何元素，会抛出Queue.Empty异常。如果blocked为False,分两种情况:如果Queue有一个值可用，则立即返回该值;否则，如果队列为空，则立即抛出Queue.Empty异常。</li>
</ul>
</div>
<div class="section" id="pipe">
<h2>Pipe<a class="headerlink" href="#pipe" title="永久链接至标题">¶</a></h2>
<p>Pipe常用来在两个进程间进行通信，两个进程分别位于管道的两端。
Pipe方法返回(conn1, conn2)代表一个管道的两个端。
Pipe方法有duplex参数，如果duplex参数为True(默认值)，那么这个管道是全双工模式，也就是说conn1和conn2均可收发。若duplex为False, conn1只负责接收消息，conn2只负责发送消息。
send和recv方法分别是发送和接收消息的方法。例如，在全双工模式下，可以调用connl.send发送消息，connl.recv接收消息。如果没有消息可接收，recv方法会一直阻塞。如果管道已经被关闭，那么recv方法会抛出EOFError</p>
</div>
<div class="section" id="threading">
<h2>多线程（threading）<a class="headerlink" href="#threading" title="永久链接至标题">¶</a></h2>
<p>多任务可以由多进程完成，也可以由一个进程内多线程完成。
多线程运行有如下优点:</p>
<ul class="simple">
<li>可以把运行时间长的任务放到后台去处理。</li>
<li>用户界面可以更加吸引人，比如用户点击了一个按钮去触发某些事件的处理，可以弹出一个进度条来显示处理的进度。</li>
<li>程序的运行速度可能加快。</li>
<li>在一些需要等待的任务实现上，如用户输入、文件读写和网络收发数据等，线程就比较有用了。在这种情况下我们可以释放一些珍贵的资源，如内存占用等。</li>
</ul>
<p><strong>threading模块一般通过两种方式创建多线程:</strong></p>
<ol class="simple">
<li>把一个函数传入并创建Thread实例，然后调用start方法开始执行</li>
<li>直接从threading. Thread继承并创建线程类，然后重写__init__方法和run方法</li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">threading</span><span class="o">,</span><span class="nn">time</span>
<span class="k">def</span> <span class="nf">loop1</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;线程 </span><span class="si">%s</span><span class="s1"> 运行...&#39;</span><span class="o">%</span><span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>  <span class="c1">#显示子线程实例名字</span>
    <span class="n">n</span><span class="o">=</span><span class="mi">0</span>
    <span class="k">while</span> <span class="n">n</span><span class="o">&lt;</span><span class="mi">3</span><span class="p">:</span>
        <span class="n">n</span><span class="o">=</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> &gt;&gt;&gt; </span><span class="si">%s</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">n</span><span class="p">))</span>     <span class="c1">#current_thread()函数返回当前线程实例</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;线程 </span><span class="si">%s</span><span class="s1"> 结束...&#39;</span><span class="o">%</span><span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">loop2</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;线程 </span><span class="si">%s</span><span class="s1"> 运行...&#39;</span><span class="o">%</span><span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
    <span class="n">n</span><span class="o">=</span><span class="mi">0</span>
    <span class="k">while</span> <span class="n">n</span><span class="o">&lt;</span><span class="mi">2</span><span class="p">:</span>
        <span class="n">n</span><span class="o">+=</span><span class="mi">1</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> &gt;&gt;&gt; </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">n</span><span class="p">))</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;线程 </span><span class="si">%s</span><span class="s1"> 结束...&#39;</span> <span class="o">%</span> <span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;---开始---:</span><span class="si">%s</span><span class="s1">&#39;</span><span class="o">%</span><span class="n">time</span><span class="o">.</span><span class="n">ctime</span><span class="p">(),</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="c1"># 显示当前线程，即主线程实例名字</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> 运行&#39;</span><span class="o">%</span><span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
    <span class="c1"># 创建子线程，子线程名字在创建时指定，loopthread为子线程的名字，不指定为默认名</span>
    <span class="n">t</span><span class="o">=</span><span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">loop1</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;子线程1&#39;</span><span class="p">)</span>
    <span class="n">p</span><span class="o">=</span><span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">loop2</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;子线程2&#39;</span><span class="p">)</span>
    <span class="c1">#子线程可以全部start之后再join，即为同步运行，分开执行，为运行完子线程1，再运行子线程2</span>
    <span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">t</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
    <span class="n">p</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">p</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">length</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">threading</span><span class="o">.</span><span class="n">enumerate</span><span class="p">())</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;当前运行线程数量：</span><span class="si">%d</span><span class="s1">&#39;</span><span class="o">%</span><span class="n">length</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">length</span><span class="o">&lt;=</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">break</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;thread </span><span class="si">%s</span><span class="s1"> ended&#39;</span><span class="o">%</span><span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>任何进程默认就会启动一个线程，该线程称为主线程，主线程又可以启动新的线程， threading模块current_thread()函数返回当前线程的实例。</p>
</div>
<div class="section" id="lock">
<h2>线程同步—lock<a class="headerlink" href="#lock" title="永久链接至标题">¶</a></h2>
<p>多线程和多进程最大的不同在于，多进程中，同一个变量，各自有一份拷贝存在于每个进程中，互不影响，而多线程中，所有变量都由所有线程共享，所以，任何一个变量都可以被任何一个线程修改，因此，线程之间共享数据最大的危险在于多个线程同时改一个变量</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">t</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</pre></div>
</div>
<p>多线程交替运行，每个线程有自己的局部变量，导致赋予全局变量的值会打乱，确保全局变量的值为正确值，要给change_it()上一把锁，其他线程不能同时执行change_it()，只能等待，直到锁被释放后，获得该锁以后才能改。锁只有一个，无论多少线程，同一时刻最多只有一个线程持有该锁，所以，不会造成修改的冲突。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">change_it</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="c1"># 先存后取，结果应该为0:</span>
    <span class="k">global</span> <span class="n">balance</span>
    <span class="n">balance</span> <span class="o">=</span> <span class="n">balance</span> <span class="o">+</span> <span class="n">n</span>
    <span class="n">balance</span> <span class="o">=</span> <span class="n">balance</span> <span class="o">-</span> <span class="n">n</span>

<span class="k">def</span> <span class="nf">thread</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">):</span>
        <span class="c1">#获取锁</span>
        <span class="n">lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">change_it</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="c1">#改完释放锁</span>
            <span class="n">lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">balance</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">lock</span><span class="o">=</span><span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
    <span class="n">t1</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">thread</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,))</span>
    <span class="n">t2</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">thread</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,))</span>
    <span class="n">t1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">t2</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">t1</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
    <span class="n">t2</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">balance</span><span class="p">)</span>
</pre></div>
</div>
<p>ThreadLocal: 解决参数在一个线程中各个函数之间互相传递的问题。
local_data = threading.local()  #创建全局ThreadLocal对象
local_data为一个ThreadLocal对象，每个thread对其可读写属性，但互不影响。可以把local_school看成全局变量，但每个属性如local_data.data都是线程的局部变量，可以理解为全局变量local_data是一个dict，不但可以用local_data.data，还可以绑定其他变量，如local_data.teacher等等可以任意读写而互不干扰，也不用管理锁的问题，ThreadLocal内部会处理。
ThreadLocal最常用的地方就是为每个线程绑定一个数据库连接，HTTP请求，用户身份信息等，这样一个线程的所有调用到的处理函数都可以非常方便地访问这些资源。</p>
</div>
<div class="section" id="coroutine">
<h2>协程 (coroutine )<a class="headerlink" href="#coroutine" title="永久链接至标题">¶</a></h2>
<p>协程又称微线程，纤程，是一种用户级的轻量级线程。
协程拥有自己的寄存器上下文和栈。协程调度切换时，将寄存器上下文和栈保存到其他地方，在切回来的时候，恢复先前保存的寄存器上下文和栈。因此协程能保留上一次调用时的状态，每次过程重入时，就相当于进人上一次调用的状态。
在并发编程中，协程与线程类似，每个协程表示一个执行单元，有自己的本地数据，与其他协程共享全局数据和其他资源。
协程需要用户自己来编写调度逻辑，对于CPU来说，协程其实是单线程，所以CPU不
用去考虑怎么调度、切换上下文，这就省去了CPU的切换开销，所以协程在一定程度上又好于多线程。</p>
<p>Python通过yield提供了对协程的基本支持，但是不完全，第三方gevent库提供了比较完善的协程支持。gevent是一个基于协程的Python网络函数库，使用greenlet在libev事件循环顶部提供了一个有高级别并发性的API。</p>
<p>主要特性：</p>
<ul class="simple">
<li>基于libev的快速事件循环，Linux上是epoll机制。</li>
<li>基于greenlet的轻量级执行单元。</li>
<li>API复用了Python标准库里的内容。</li>
<li>支持SSL的协作式sockets.</li>
<li>可通过线程池或c-ares实现DNS查询。</li>
<li>通过monkey patching功能使得第三方模块变成协作式。</li>
</ul>
</div>
<div class="section" id="id170">
<h2>分布式进程<a class="headerlink" href="#id170" title="永久链接至标题">¶</a></h2>
<p>在Thread和Process中，应当优选Process，因为Process更稳定，而且，Process可以分布到多台机器上，而Thread最多只能分布到同一台机器的多个CPU上。</p>
<p>Python的multiprocessing模块不但支持多进程，其中managers子模块还支持把多进程分布到多台机器上。一个服务进程可以作为调度者，将任务分布到其他多个进程中，依靠网络通信。</p>
</div>
</div>
<div class="section" id="id171">
<h1>25、深入Python中的协程<a class="headerlink" href="#id171" title="永久链接至标题">¶</a></h1>
<p>﻿</p>
<p>&#64;Author： runsen</p>
<div class="section" id="id172">
<h2>协程是实现并发编程的一种方式<a class="headerlink" href="#id172" title="永久链接至标题">¶</a></h2>
<p>https://docs.python.org/zh-cn/3/library/asyncio.html</p>
<p>一说并发，你肯定想到了多线程 ， 多进程模型，没错，多线程 和 多进程，正是解决并发问题的经典模型之一</p>
<p>但是你了解过协程Coroutine吗？</p>
<p>协程：是单线程下的并发，又称微线程。</p>
<p>就是只有一个线程，如何提高速度，解决并发编程</p>
<p>英文名Coroutine。</p>
<p>协程比线程的单位更小——协程</p>
<p>注意协程这个概念完全是程序员自己想出来的东西，它对于操作系统来说根本不存在。操作系统只有进程和线程。</p>
<p>从一个demo学起</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">import</span> <span class="n">time</span> 

<span class="n">def</span> <span class="n">print_num</span><span class="p">(</span><span class="n">num</span><span class="p">)</span><span class="o">:</span>
    <span class="n">print</span><span class="p">(</span><span class="s">&quot;Maoli is printing &quot;</span> <span class="o">+</span> <span class="n">str</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot; nows&quot;</span> <span class="p">)</span>
    <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">print</span><span class="p">(</span><span class="s">&quot;Maoli prints&quot;</span> <span class="o">+</span> <span class="n">str</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot; OK&quot;</span><span class="p">)</span>

<span class="n">def</span> <span class="n">main</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span><span class="o">:</span>
    <span class="k">for</span> <span class="n">num</span> <span class="n">in</span> <span class="nl">nums</span><span class="p">:</span>
        <span class="n">print_num</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
<span class="o">%</span><span class="n">time</span> <span class="n">main</span><span class="p">([</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="n">in</span> <span class="n">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">)])</span>


<span class="n">Maoli</span> <span class="n">is</span> <span class="n">printing</span> <span class="mi">1</span> <span class="n">nows</span>
<span class="n">Maoli</span> <span class="n">prints1</span> <span class="n">OK</span>
<span class="n">Maoli</span> <span class="n">is</span> <span class="n">printing</span> <span class="mi">2</span> <span class="n">nows</span>
<span class="n">Maoli</span> <span class="n">prints2</span> <span class="n">OK</span>
<span class="n">Maoli</span> <span class="n">is</span> <span class="n">printing</span> <span class="mi">3</span> <span class="n">nows</span>
<span class="n">Maoli</span> <span class="n">prints3</span> <span class="n">OK</span>
<span class="n">Maoli</span> <span class="n">is</span> <span class="n">printing</span> <span class="mi">4</span> <span class="n">nows</span>
<span class="n">Maoli</span> <span class="n">prints4</span> <span class="n">OK</span>
<span class="n">Maoli</span> <span class="n">is</span> <span class="n">printing</span> <span class="mi">5</span> <span class="n">nows</span>
<span class="n">Maoli</span> <span class="n">prints5</span> <span class="n">OK</span>
<span class="n">Wall</span> <span class="nl">time</span><span class="p">:</span> <span class="mi">5</span> <span class="n">s</span>
</pre></div>
</div>
<p>%time 需要在jupyter notebook中运行。</p>
<p>上面代码是从上到下执行的。</p>
<p>下面将上面代码改为协程版</p>
<p><strong>注意py版本3.7以上</strong>，主要使用的是asyncio</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">import</span> <span class="n">asyncio</span>

<span class="n">async</span> <span class="n">def</span> <span class="n">print_num</span><span class="p">(</span><span class="n">num</span><span class="p">)</span><span class="o">:</span>
    <span class="n">print</span><span class="p">(</span><span class="s">&quot;Maoli is printing &quot;</span> <span class="o">+</span> <span class="n">str</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot; nows&quot;</span> <span class="p">)</span>
    <span class="n">await</span> <span class="n">asyncio</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">print</span><span class="p">(</span><span class="s">&quot;Maoli prints&quot;</span> <span class="o">+</span> <span class="n">str</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot; OK&quot;</span><span class="p">)</span>

<span class="n">async</span> <span class="n">def</span> <span class="n">main</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span><span class="o">:</span>
    <span class="k">for</span> <span class="n">num</span> <span class="n">in</span> <span class="nl">nums</span><span class="p">:</span>
        <span class="n">await</span> <span class="n">print_num</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
<span class="o">%</span><span class="n">time</span> <span class="n">asyncio</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">([</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="n">in</span> <span class="n">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">)]))</span>


<span class="n">Maoli</span> <span class="n">is</span> <span class="n">printing</span> <span class="mi">1</span> <span class="n">nows</span>
<span class="n">Maoli</span> <span class="n">prints1</span> <span class="n">OK</span>
<span class="n">Maoli</span> <span class="n">is</span> <span class="n">printing</span> <span class="mi">2</span> <span class="n">nows</span>
<span class="n">Maoli</span> <span class="n">prints2</span> <span class="n">OK</span>
<span class="n">Maoli</span> <span class="n">is</span> <span class="n">printing</span> <span class="mi">3</span> <span class="n">nows</span>
<span class="n">Maoli</span> <span class="n">prints3</span> <span class="n">OK</span>
<span class="n">Maoli</span> <span class="n">is</span> <span class="n">printing</span> <span class="mi">4</span> <span class="n">nows</span>
<span class="n">Maoli</span> <span class="n">prints4</span> <span class="n">OK</span>
<span class="n">Maoli</span> <span class="n">is</span> <span class="n">printing</span> <span class="mi">5</span> <span class="n">nows</span>
<span class="n">Maoli</span> <span class="n">prints5</span> <span class="n">OK</span>
<span class="n">Wall</span> <span class="nl">time</span><span class="p">:</span> <span class="mf">5.01</span> <span class="n">s</span>
</pre></div>
</div>
<p>asyncio.run() 函数用来运行最高层级的入口点 “main()” 函数</p>
<p>await 是同步调用等待一个协程。以下代码段会在等待 1 秒后打印 num，速度上没有发生改变。</p>
<p>需要引入asyncio.create_task才可以</p>
</div>
<div class="section" id="id173">
<h2>可等待对象<a class="headerlink" href="#id173" title="永久链接至标题">¶</a></h2>
<p>如果一个对象可以在 await 语句中使用，那么它就是 可等待 对象</p>
<p>协程中的还一个重要概念，任务（Task）</p>
<p>如果写一个数字是一个任务，那么毛利我要完成5个任务</p>
<p>毛利我写个1-5都这么慢，不行，我要加速写</p>
<p>asyncio.create_task() 函数用来并发运行作为 asyncio 任务 的多个协程。</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">import</span> <span class="n">asyncio</span>

<span class="n">async</span> <span class="n">def</span> <span class="n">print_num</span><span class="p">(</span><span class="n">num</span><span class="p">)</span><span class="o">:</span>
    <span class="n">print</span><span class="p">(</span><span class="s">&quot;Maoli is printing &quot;</span> <span class="o">+</span> <span class="n">str</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot; nows&quot;</span> <span class="p">)</span>
    <span class="n">await</span> <span class="n">asyncio</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">print</span><span class="p">(</span><span class="s">&quot;Maoli prints&quot;</span> <span class="o">+</span> <span class="n">str</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot; OK&quot;</span><span class="p">)</span>

<span class="n">async</span> <span class="n">def</span> <span class="n">main</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span><span class="o">:</span>
    <span class="n">tasks</span> <span class="o">=</span> <span class="p">[</span><span class="n">asyncio</span><span class="p">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">print_num</span><span class="p">(</span><span class="n">num</span><span class="p">))</span> <span class="k">for</span> <span class="n">num</span> <span class="n">in</span> <span class="n">nums</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">task</span> <span class="n">in</span> <span class="nl">tasks</span><span class="p">:</span>
        <span class="n">await</span> <span class="n">task</span>
<span class="o">%</span><span class="n">time</span> <span class="n">asyncio</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">([</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="n">in</span> <span class="n">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">)]))</span>


<span class="n">Maoli</span> <span class="n">is</span> <span class="n">printing</span> <span class="mi">1</span> <span class="n">nows</span>
<span class="n">Maoli</span> <span class="n">is</span> <span class="n">printing</span> <span class="mi">2</span> <span class="n">nows</span>
<span class="n">Maoli</span> <span class="n">is</span> <span class="n">printing</span> <span class="mi">3</span> <span class="n">nows</span>
<span class="n">Maoli</span> <span class="n">is</span> <span class="n">printing</span> <span class="mi">4</span> <span class="n">nows</span>
<span class="n">Maoli</span> <span class="n">is</span> <span class="n">printing</span> <span class="mi">5</span> <span class="n">nows</span>
<span class="n">Maoli</span> <span class="n">prints1</span> <span class="n">OK</span>
<span class="n">Maoli</span> <span class="n">prints3</span> <span class="n">OK</span>
<span class="n">Maoli</span> <span class="n">prints5</span> <span class="n">OK</span>
<span class="n">Maoli</span> <span class="n">prints2</span> <span class="n">OK</span>
<span class="n">Maoli</span> <span class="n">prints4</span> <span class="n">OK</span>
<span class="n">Wall</span> <span class="nl">time</span><span class="p">:</span> <span class="mf">1.01</span> <span class="n">s</span>
</pre></div>
</div>
<p>还可以写成<code class="docutils literal notranslate"><span class="pre">await</span> <span class="pre">asyncio.gather(*tasks)</span></code>这种方法</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">import</span> <span class="n">asyncio</span>

<span class="n">async</span> <span class="n">def</span> <span class="n">print_num</span><span class="p">(</span><span class="n">num</span><span class="p">)</span><span class="o">:</span>
    <span class="n">print</span><span class="p">(</span><span class="s">&quot;Maoli is printing &quot;</span> <span class="o">+</span> <span class="n">str</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot; nows&quot;</span> <span class="p">)</span>
    <span class="n">await</span> <span class="n">asyncio</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">print</span><span class="p">(</span><span class="s">&quot;Maoli prints&quot;</span> <span class="o">+</span> <span class="n">str</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot; OK&quot;</span><span class="p">)</span>

<span class="n">async</span> <span class="n">def</span> <span class="n">main</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span><span class="o">:</span>
    <span class="n">tasks</span> <span class="o">=</span> <span class="p">[</span><span class="n">asyncio</span><span class="p">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">print_num</span><span class="p">(</span><span class="n">num</span><span class="p">))</span> <span class="k">for</span> <span class="n">num</span> <span class="n">in</span> <span class="n">nums</span><span class="p">]</span>
    <span class="n">await</span> <span class="n">asyncio</span><span class="p">.</span><span class="n">gather</span><span class="p">(</span><span class="o">*</span><span class="n">tasks</span><span class="p">)</span>
<span class="o">%</span><span class="n">time</span> <span class="n">asyncio</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">([</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="n">in</span> <span class="n">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">)]))</span>
</pre></div>
</div>
<p>*tasks 解包列表，将列表变成了函数的参数；与之对应的是，  ** dict 将字典变成了函数的参数。</p>
<p>#asyncio 队列</p>
<p>asyncio也是只有在Pytohn3.7才有的东西。</p>
<p>asyncio 队列被设计成与 queue 模块类似。</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>import asyncio
import random

async def consumer(queue, id):
    while True:
        val = await queue.get()
        print(&#39;{} get a val: {}&#39;.format(id, val))
        await asyncio.sleep(1)

async def producer(queue, id):
    for i in range(5):
        val = random.randint(1, 10)
        await queue.put(val)
        print(&#39;{} put a val: {}&#39;.format(id, val))
        await asyncio.sleep(1)

async def main():
    # 创建队列
    queue = asyncio.Queue()
    # 消费者1号
    consumer_1 = asyncio.create_task(consumer(queue, &#39;consumer_1&#39;))
    # 消费者2号
    consumer_2 = asyncio.create_task(consumer(queue, &#39;consumer_2&#39;))
    # 生产者1号
    producer_1 = asyncio.create_task(producer(queue, &#39;producer_1&#39;))
    # 生产者2号
    producer_2 = asyncio.create_task(producer(queue, &#39;producer_2&#39;))
    # stop 10秒
    await asyncio.sleep(10)
    consumer_1.cancel()
    consumer_2.cancel()
    
    await asyncio.gather(consumer_1, consumer_2, producer_1, producer_2, return_exceptions=True)

%time asyncio.run(main())
</pre></div>
</div>
<p>协程的写法简洁清晰，只要把 async / await 语法和 create_task 结合来用，就是Python中比较常见的协程</p>
</div>
<div class="section" id="id174">
<h2>典型的例子<a class="headerlink" href="#id174" title="永久链接至标题">¶</a></h2>
<p>典型的生产者和消费者</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">consumer</span><span class="p">(</span><span class="n">queue</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">val</span> <span class="o">=</span> <span class="k">await</span> <span class="n">queue</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> get a val: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">val</span><span class="p">))</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">producer</span><span class="p">(</span><span class="n">queue</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
        <span class="n">val</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="k">await</span> <span class="n">queue</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> put a val: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">val</span><span class="p">))</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">queue</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Queue</span><span class="p">()</span>

    <span class="n">consumer_1</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">consumer</span><span class="p">(</span><span class="n">queue</span><span class="p">,</span> <span class="s1">&#39;consumer_1&#39;</span><span class="p">))</span>
    <span class="n">consumer_2</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">consumer</span><span class="p">(</span><span class="n">queue</span><span class="p">,</span> <span class="s1">&#39;consumer_2&#39;</span><span class="p">))</span>

    <span class="n">producer_1</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">producer</span><span class="p">(</span><span class="n">queue</span><span class="p">,</span> <span class="s1">&#39;producer_1&#39;</span><span class="p">))</span>
    <span class="n">producer_2</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">producer</span><span class="p">(</span><span class="n">queue</span><span class="p">,</span> <span class="s1">&#39;producer_2&#39;</span><span class="p">))</span>

    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">consumer_1</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
    <span class="n">consumer_2</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
    
    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="n">consumer_1</span><span class="p">,</span> <span class="n">consumer_2</span><span class="p">,</span> <span class="n">producer_1</span><span class="p">,</span> <span class="n">producer_2</span><span class="p">,</span> <span class="n">return_exceptions</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="o">%</span><span class="n">time</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>

<span class="c1">########## 输出 ##########</span>

<span class="n">producer_1</span> <span class="n">put</span> <span class="n">a</span> <span class="n">val</span><span class="p">:</span> <span class="mi">5</span>
<span class="n">producer_2</span> <span class="n">put</span> <span class="n">a</span> <span class="n">val</span><span class="p">:</span> <span class="mi">3</span>
<span class="n">consumer_1</span> <span class="n">get</span> <span class="n">a</span> <span class="n">val</span><span class="p">:</span> <span class="mi">5</span>
<span class="n">consumer_2</span> <span class="n">get</span> <span class="n">a</span> <span class="n">val</span><span class="p">:</span> <span class="mi">3</span>
<span class="n">producer_1</span> <span class="n">put</span> <span class="n">a</span> <span class="n">val</span><span class="p">:</span> <span class="mi">1</span>
<span class="n">producer_2</span> <span class="n">put</span> <span class="n">a</span> <span class="n">val</span><span class="p">:</span> <span class="mi">3</span>
<span class="n">consumer_2</span> <span class="n">get</span> <span class="n">a</span> <span class="n">val</span><span class="p">:</span> <span class="mi">1</span>
<span class="n">consumer_1</span> <span class="n">get</span> <span class="n">a</span> <span class="n">val</span><span class="p">:</span> <span class="mi">3</span>
<span class="n">producer_1</span> <span class="n">put</span> <span class="n">a</span> <span class="n">val</span><span class="p">:</span> <span class="mi">6</span>
<span class="n">producer_2</span> <span class="n">put</span> <span class="n">a</span> <span class="n">val</span><span class="p">:</span> <span class="mi">10</span>
<span class="n">consumer_1</span> <span class="n">get</span> <span class="n">a</span> <span class="n">val</span><span class="p">:</span> <span class="mi">6</span>
<span class="n">consumer_2</span> <span class="n">get</span> <span class="n">a</span> <span class="n">val</span><span class="p">:</span> <span class="mi">10</span>
<span class="n">producer_1</span> <span class="n">put</span> <span class="n">a</span> <span class="n">val</span><span class="p">:</span> <span class="mi">4</span>
<span class="n">producer_2</span> <span class="n">put</span> <span class="n">a</span> <span class="n">val</span><span class="p">:</span> <span class="mi">5</span>
<span class="n">consumer_2</span> <span class="n">get</span> <span class="n">a</span> <span class="n">val</span><span class="p">:</span> <span class="mi">4</span>
<span class="n">consumer_1</span> <span class="n">get</span> <span class="n">a</span> <span class="n">val</span><span class="p">:</span> <span class="mi">5</span>
<span class="n">producer_1</span> <span class="n">put</span> <span class="n">a</span> <span class="n">val</span><span class="p">:</span> <span class="mi">2</span>
<span class="n">producer_2</span> <span class="n">put</span> <span class="n">a</span> <span class="n">val</span><span class="p">:</span> <span class="mi">8</span>
<span class="n">consumer_1</span> <span class="n">get</span> <span class="n">a</span> <span class="n">val</span><span class="p">:</span> <span class="mi">2</span>
<span class="n">consumer_2</span> <span class="n">get</span> <span class="n">a</span> <span class="n">val</span><span class="p">:</span> <span class="mi">8</span>
<span class="n">Wall</span> <span class="n">time</span><span class="p">:</span> <span class="mi">10</span> <span class="n">s</span>
</pre></div>
</div>
</div>
<div class="section" id="id175">
<h2>真实的爬虫<a class="headerlink" href="#id175" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://movie.douban.com/cinema/later/beijing/&quot;</span>
    <span class="n">init_page</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">content</span>
    <span class="n">init_soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">init_page</span><span class="p">,</span> <span class="s1">&#39;lxml&#39;</span><span class="p">)</span>

    <span class="n">all_movies</span> <span class="o">=</span> <span class="n">init_soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;showing-soon&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">each_movie</span> <span class="ow">in</span> <span class="n">all_movies</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;item&quot;</span><span class="p">):</span>
        <span class="n">all_a_tag</span> <span class="o">=</span> <span class="n">each_movie</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
        <span class="n">all_li_tag</span> <span class="o">=</span> <span class="n">each_movie</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;li&#39;</span><span class="p">)</span>

        <span class="n">movie_name</span> <span class="o">=</span> <span class="n">all_a_tag</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>
        <span class="n">url_to_fetch</span> <span class="o">=</span> <span class="n">all_a_tag</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;href&#39;</span><span class="p">]</span>
        <span class="n">movie_date</span> <span class="o">=</span> <span class="n">all_li_tag</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>

        <span class="n">response_item</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url_to_fetch</span><span class="p">)</span><span class="o">.</span><span class="n">content</span>
        <span class="n">soup_item</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">response_item</span><span class="p">,</span> <span class="s1">&#39;lxml&#39;</span><span class="p">)</span>
        <span class="n">img_tag</span> <span class="o">=</span> <span class="n">soup_item</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;img&#39;</span><span class="p">)</span>

        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;{} {} {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">movie_name</span><span class="p">,</span> <span class="n">movie_date</span><span class="p">,</span> <span class="n">img_tag</span><span class="p">[</span><span class="s1">&#39;src&#39;</span><span class="p">]))</span>

<span class="o">%</span><span class="n">time</span> <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>Wall time: 26 s</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">aiohttp</span>

<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">fetch_content</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="n">async</span> <span class="k">with</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span><span class="p">(</span>
        <span class="n">connector</span><span class="o">=</span><span class="n">aiohttp</span><span class="o">.</span><span class="n">TCPConnector</span><span class="p">(</span><span class="n">ssl</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">async</span> <span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">response</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">await</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://movie.douban.com/cinema/later/beijing/&quot;</span>
    <span class="n">init_page</span> <span class="o">=</span> <span class="n">await</span> <span class="n">fetch_content</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">init_soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">init_page</span><span class="p">,</span> <span class="s1">&#39;lxml&#39;</span><span class="p">)</span>

    <span class="n">movie_names</span><span class="p">,</span> <span class="n">urls_to_fetch</span><span class="p">,</span> <span class="n">movie_dates</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>

    <span class="n">all_movies</span> <span class="o">=</span> <span class="n">init_soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;showing-soon&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">each_movie</span> <span class="ow">in</span> <span class="n">all_movies</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;item&quot;</span><span class="p">):</span>
        <span class="n">all_a_tag</span> <span class="o">=</span> <span class="n">each_movie</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
        <span class="n">all_li_tag</span> <span class="o">=</span> <span class="n">each_movie</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;li&#39;</span><span class="p">)</span>

        <span class="n">movie_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">all_a_tag</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="n">urls_to_fetch</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">all_a_tag</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;href&#39;</span><span class="p">])</span>
        <span class="n">movie_dates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">all_li_tag</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

    <span class="n">tasks</span> <span class="o">=</span> <span class="p">[</span><span class="n">fetch_content</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">urls_to_fetch</span><span class="p">]</span>
    <span class="n">pages</span> <span class="o">=</span> <span class="n">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="o">*</span><span class="n">tasks</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">movie_name</span><span class="p">,</span> <span class="n">movie_date</span><span class="p">,</span> <span class="n">page</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">movie_names</span><span class="p">,</span> <span class="n">movie_dates</span><span class="p">,</span> <span class="n">pages</span><span class="p">):</span>
        <span class="n">soup_item</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">page</span><span class="p">,</span> <span class="s1">&#39;lxml&#39;</span><span class="p">)</span>
        <span class="n">img_tag</span> <span class="o">=</span> <span class="n">soup_item</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;img&#39;</span><span class="p">)</span>

        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;{} {} {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">movie_name</span><span class="p">,</span> <span class="n">movie_date</span><span class="p">,</span> <span class="n">img_tag</span><span class="p">[</span><span class="s1">&#39;src&#39;</span><span class="p">]))</span>

<span class="o">%</span><span class="n">time</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>

</pre></div>
</div>
<p>Wall time: 4.57 s，速度快了5倍。</p>
</div>
</div>
<div class="section" id="pythontimeos">
<h1>26、Python中的Time和os模块<a class="headerlink" href="#pythontimeos" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author: Runsen</p>
<div class="section" id="datetime-time">
<h2>日期与时间管理的库datetime 与time<a class="headerlink" href="#datetime-time" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">datetime</span> 
<span class="n">t</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> 
<span class="c1"># Lets show the different compoenets # datetime.time(hour,minute,second,microsecond) </span>
<span class="k">print</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;hour  :&#39;</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">hour</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;minute:&#39;</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">minute</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;second:&#39;</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">second</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;microsecond:&#39;</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">microsecond</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;tzinfo:&#39;</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">01</span><span class="p">:</span><span class="mi">20</span><span class="p">:</span><span class="mi">01</span>
<span class="n">hour</span>  <span class="p">:</span> <span class="mi">1</span>
<span class="n">minute</span><span class="p">:</span> <span class="mi">20</span>
<span class="n">second</span><span class="p">:</span> <span class="mi">1</span>
<span class="n">microsecond</span><span class="p">:</span> <span class="mi">0</span>
<span class="n">tzinfo</span><span class="p">:</span> <span class="kc">None</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span> 
<span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="c1">#10位</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">1557212908.1839943</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;Earliest  :&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">min</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Latest    :&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">max</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Resolution:&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">resolution</span><span class="p">)</span> 
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Earliest</span>  <span class="p">:</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>
<span class="n">Latest</span>    <span class="p">:</span> <span class="mi">23</span><span class="p">:</span><span class="mi">59</span><span class="p">:</span><span class="mf">59.999999</span>
<span class="n">Resolution</span><span class="p">:</span> <span class="mi">0</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">00.000001</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">today</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">today</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;ctime:&#39;</span><span class="p">,</span> <span class="n">today</span><span class="o">.</span><span class="n">ctime</span><span class="p">())</span> 
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;tuple:&#39;</span><span class="p">,</span> <span class="n">today</span><span class="o">.</span><span class="n">timetuple</span><span class="p">())</span> 
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;ordinal:&#39;</span><span class="p">,</span> <span class="n">today</span><span class="o">.</span><span class="n">toordinal</span><span class="p">())</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Year:&#39;</span><span class="p">,</span> <span class="n">today</span><span class="o">.</span><span class="n">year</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Mon :&#39;</span><span class="p">,</span> <span class="n">today</span><span class="o">.</span><span class="n">month</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Day :&#39;</span><span class="p">,</span> <span class="n">today</span><span class="o">.</span><span class="n">day</span><span class="p">)</span> 
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2019</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">07</span>
<span class="n">ctime</span><span class="p">:</span> <span class="n">Tue</span> <span class="n">May</span>  <span class="mi">7</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="mi">2019</span>
<span class="nb">tuple</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">struct_time</span><span class="p">(</span><span class="n">tm_year</span><span class="o">=</span><span class="mi">2019</span><span class="p">,</span> <span class="n">tm_mon</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">tm_mday</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">tm_hour</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">tm_min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">tm_sec</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">tm_wday</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tm_yday</span><span class="o">=</span><span class="mi">127</span><span class="p">,</span> <span class="n">tm_isdst</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ordinal</span><span class="p">:</span> <span class="mi">737186</span>
<span class="n">Year</span><span class="p">:</span> <span class="mi">2019</span>
<span class="n">Mon</span> <span class="p">:</span> <span class="mi">5</span>
<span class="n">Day</span> <span class="p">:</span> <span class="mi">7</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;Earliest  :&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">min</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Latest    :&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">max</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Resolution:&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">resolution</span><span class="p">)</span> 
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Earliest</span>  <span class="p">:</span> <span class="mi">0001</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span>
<span class="n">Latest</span>    <span class="p">:</span> <span class="mi">9999</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">31</span>
<span class="n">Resolution</span><span class="p">:</span> <span class="mi">1</span> <span class="n">day</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">d1</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2019</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;d1:&#39;</span><span class="p">,</span> <span class="n">d1</span><span class="p">)</span> 
<span class="n">d2</span> <span class="o">=</span> <span class="n">d1</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">1990</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;d2:&#39;</span><span class="p">,</span> <span class="n">d2</span><span class="p">)</span> 
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">d1</span><span class="p">:</span> <span class="mi">2019</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">07</span>
<span class="n">d2</span><span class="p">:</span> <span class="mi">1990</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">07</span>
</pre></div>
</div>
</div>
<div class="section" id="id176">
<h2>os 操作模块<a class="headerlink" href="#id176" title="永久链接至标题">¶</a></h2>
<p>OS模块简单的来说它是一个Python的系统编程的操作模块，可以处理文件和目录这些我们日常手动需要做的 操作。 可以查看OS模块的帮助文档：</p>
<p>import os #导入os模块<br />help(os)   #查看os模块帮助文档，里面详细的模块相关函数和使用方法</p>
<div class="section" id="id177">
<h3>OS模块重要函数和变量:<a class="headerlink" href="#id177" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li>os.sep 更改操作系统中的路径分隔符。</li>
<li>os.getcwd()获取当前路径，这个在Python代码中比较 常用。</li>
<li>os.listdir() 列出当前目录下的所有文件和文件夹。</li>
<li>os.remove() 方法可以删除指定 的文件。</li>
<li>os.system() 方法用来运行shell命令。</li>
<li>os.chdir() 改变当前目录，到指定目录 中。</li>
</ul>
</div>
<div class="section" id="id178">
<h3>OS模块函数作用详解<a class="headerlink" href="#id178" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li>os.system函数可以运行shello命令，Linux系统中就是终端模拟器中的命令。 也有一些函数可以执行外部 程序，包括execv，它会退出Python解释器，并且将控制权交给被执行的程序。</li>
<li>os.sep变量主要用于系统路 径中的分隔符。 Windows系统通过是“\”，Linux类系统如Ubuntu的分隔符是“/”，而苹果Mac OS系统中 是“:”。</li>
<li>os.sep 可以取代操作系统特定的路径分割符。</li>
<li>os.name字符串指示你正在使用的平台。比如对于Windows，它是’nt’，而对于Linux/Unix用户，它 是’posix’。</li>
<li>os.getcwd()函数得到当前工作目录，即当前Python脚本工作的目录路径。</li>
<li>os.getenv()和os.putenv()函数分别用来读取和设置环境变量。</li>
<li>os.listdir()返回指定目录下的所有文件和目录名。</li>
<li>os.remove()函数用来删除一个文件。</li>
<li>os.system()函数用来运行shell命令。</li>
<li>os.linesep字符串给出当前平台使用的行终止符。例如，Windows使用’\r\n’，Linux使用’\n’而Mac使 用’\r’。</li>
<li>os.path.split()函数返回一个路径的目录名和文件名。</li>
<li>os.path.isfile()和os.path.isdir()函数分别检验给出的路径是一个文件还是目录。</li>
<li>os.path.existe()函数用来检验给出的路径是否真地存在</li>
<li>os.listdir(dirname)：列出dirname下的目录和文件</li>
<li>os.getcwd()：获得当前工作目录</li>
<li>os.curdir:返回但前目录（’.’)</li>
<li>os.chdir(dirname):改变工作目录到dirname</li>
</ul>
</div>
<div class="section" id="os-path">
<h3>os.path模块<a class="headerlink" href="#os-path" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li>os.path.isdir(name):判断name是不是一个目录，name不是目录就返回false</li>
<li>os.path.isfile(name):判断name是不是一个文件，不存在name也返回false</li>
<li>os.path.exists(name):判断是否存在文件或目录name</li>
<li>os.path.getsize(name):获得文件大小，如果name是目录返回0L</li>
<li>os.path.abspath(name):获得绝对路径</li>
<li>os.path.normpath(path):规范path字符串形式</li>
<li>os.path.split(name):分割文件名与目录（事实上，如果你完全使用目录，它也会将最后一个目录作为文件 名而分离，同时它不会判断文件或目录是否存在）</li>
<li>os.path.splitext():分离文件名与扩展名</li>
<li>os.path.join(path,name):连接目录与文件名或目录</li>
<li>os.path.basename(path):返回文件名</li>
<li>os.path.dirname(path):返回文件路径</li>
</ul>
<p>以上就是总结的Python os模块的一些比较重要的内容。</p>
</div>
</div>
</div>
<div class="section" id="pythonpickle">
<h1>27、Python序列化pickle标准库﻿<a class="headerlink" href="#pythonpickle" title="永久链接至标题">¶</a></h1>
<p>听过Python序列化pickle标准库吗？</p>
<div class="section" id="id179">
<h2>序列化<a class="headerlink" href="#id179" title="永久链接至标题">¶</a></h2>
<p>序列化 (Serialization)是将对象的状态信息转换为可以存储或传输的形式的过程。就是将数据结构转化成你看不懂的东西</p>
<p>pickle提供四个功能：dumps,dump,loads,load 和json 一样</p>
<p>从小demo入手</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pickle</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mf">2.22</span><span class="p">}]</span>
<span class="c1"># 使用 pickle.dumps() 可以将一个对象转换为二进制字符串（dump string）：</span>
<span class="n">data_string</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;DATA:&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;PICKLE:&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">data_string</span><span class="p">)</span>
</pre></div>
</div>
<hr class="docutils" />
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">DATA</span><span class="p">:</span>
<span class="p">[{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mf">2.22</span><span class="p">}]</span>
<span class="n">PICKLE</span><span class="p">:</span>
<span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x80\x03</span><span class="s1">]q</span><span class="se">\x00</span><span class="s1">}q</span><span class="se">\x01</span><span class="s1">(X</span><span class="se">\x01\x00\x00\x00</span><span class="s1">aq</span><span class="se">\x02</span><span class="s1">X</span><span class="se">\x01\x00\x00\x00</span><span class="s1">Aq</span><span class="se">\x03</span><span class="s1">X</span><span class="se">\x01\x00\x00\x00</span><span class="s1">bq</span><span class="se">\x04</span><span class="s1">K</span><span class="se">\x02</span><span class="s1">X</span><span class="se">\x01\x00\x00\x00</span><span class="s1">cq</span><span class="se">\x05</span><span class="s1">G@</span><span class="se">\x01\xc2\x8f\\</span><span class="s1">(</span><span class="se">\xf5\xc3</span><span class="s1">ua.&#39;</span>
</pre></div>
</div>
<p>现在给你这个data_string 你能知道这是啥吗？</p>
<p>虽然 pickle 编码的字符串并不一定可读，但是我们可以用 pickle.loads() 来从这个字符串中恢复原对象中的内容（load string）：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># pickle.loads() 来从这个字符串中恢复原对象中的内容（load string）：</span>
<span class="n">data_from_string</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">data_string</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">data_from_string</span><span class="p">)</span>
</pre></div>
</div>
<p>dumps 和loads 相反的作用</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mf">2.22</span><span class="p">}]</span>
</pre></div>
</div>
<p>dumps 可以接受一个可省略的 protocol 参数（默认为 0）</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data_string_0</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Pickle 0:&quot;</span><span class="p">,</span> <span class="n">data_string_0</span><span class="p">)</span>
<span class="n">data_string_1</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Pickle 1:&quot;</span><span class="p">,</span> <span class="n">data_string_1</span><span class="p">)</span>
<span class="n">data_string_2</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Pickle 2:&quot;</span><span class="p">,</span> <span class="n">data_string_2</span><span class="p">)</span>
<span class="c1"># 如果 protocol 参数指定为负数，那么将调用当前的最高级的编码协议进行编码：</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Pickle -1:&quot;</span><span class="p">,</span> <span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
<p>输出如下</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Pickle</span> <span class="mi">0</span><span class="p">:</span> <span class="sa">b</span><span class="s1">&#39;(lp0</span><span class="se">\n</span><span class="s1">(dp1</span><span class="se">\n</span><span class="s1">Va</span><span class="se">\n</span><span class="s1">p2</span><span class="se">\n</span><span class="s1">VA</span><span class="se">\n</span><span class="s1">p3</span><span class="se">\n</span><span class="s1">sVb</span><span class="se">\n</span><span class="s1">p4</span><span class="se">\n</span><span class="s1">L2L</span><span class="se">\n</span><span class="s1">sVc</span><span class="se">\n</span><span class="s1">p5</span><span class="se">\n</span><span class="s1">L3L</span><span class="se">\n</span><span class="s1">sa.&#39;</span>
<span class="n">Pickle</span> <span class="mi">1</span><span class="p">:</span> <span class="sa">b</span><span class="s1">&#39;]q</span><span class="se">\x00</span><span class="s1">}q</span><span class="se">\x01</span><span class="s1">(X</span><span class="se">\x01\x00\x00\x00</span><span class="s1">aq</span><span class="se">\x02</span><span class="s1">X</span><span class="se">\x01\x00\x00\x00</span><span class="s1">Aq</span><span class="se">\x03</span><span class="s1">X</span><span class="se">\x01\x00\x00\x00</span><span class="s1">bq</span><span class="se">\x04</span><span class="s1">K</span><span class="se">\x02</span><span class="s1">X</span><span class="se">\x01\x00\x00\x00</span><span class="s1">cq</span><span class="se">\x05</span><span class="s1">K</span><span class="se">\x03</span><span class="s1">ua.&#39;</span>
<span class="n">Pickle</span> <span class="mi">2</span><span class="p">:</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x80\x02</span><span class="s1">]q</span><span class="se">\x00</span><span class="s1">}q</span><span class="se">\x01</span><span class="s1">(X</span><span class="se">\x01\x00\x00\x00</span><span class="s1">aq</span><span class="se">\x02</span><span class="s1">X</span><span class="se">\x01\x00\x00\x00</span><span class="s1">Aq</span><span class="se">\x03</span><span class="s1">X</span><span class="se">\x01\x00\x00\x00</span><span class="s1">bq</span><span class="se">\x04</span><span class="s1">K</span><span class="se">\x02</span><span class="s1">X</span><span class="se">\x01\x00\x00\x00</span><span class="s1">cq</span><span class="se">\x05</span><span class="s1">K</span><span class="se">\x03</span><span class="s1">ua.&#39;</span>
<span class="n">Pickle</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x80\x04\x95\x1c\x00\x00\x00\x00\x00\x00\x00</span><span class="s1">]</span><span class="se">\x94</span><span class="s1">}</span><span class="se">\x94</span><span class="s1">(</span><span class="se">\x8c\x01</span><span class="s1">a</span><span class="se">\x94\x8c\x01</span><span class="s1">A</span><span class="se">\x94\x8c\x01</span><span class="s1">b</span><span class="se">\x94</span><span class="s1">K</span><span class="se">\x02\x8c\x01</span><span class="s1">c</span><span class="se">\x94</span><span class="s1">K</span><span class="se">\x03</span><span class="s1">ua.&#39;</span>
</pre></div>
</div>
<p>从这些格式中恢复对象时，不需要指定所用的协议，pickle.load() 会自动识别：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>print(&quot;Load 1:&quot;, pickle.loads(data_string_1))
print(&quot;Load 2:&quot;, pickle.loads(data_string_2))

OUT：
Load 1: [{&#39;a&#39;: &#39;A&#39;, &#39;b&#39;: 2, &#39;c&#39;: 3}]
Load 2: [{&#39;a&#39;: &#39;A&#39;, &#39;b&#39;: 2, &#39;c&#39;: 3}]
</pre></div>
</div>
</div>
<div class="section" id="pickle">
<h2>存储和读取 pickle 文件<a class="headerlink" href="#pickle" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span># 存储和读取 pickle 文件
with open(&#39;data.pkl&#39;, &#39;wb&#39;) as f:
    pickle.dump(data, f)

with open(&#39;data.pkl&#39;,&quot;rb&quot;) as f:
    data_from_file = pickle.load(f)

print(data_from_file)

# 清理生成的文件：
os.remove(&#39;data.pkl&#39;)

OUT：
[{&#39;a&#39;: &#39;A&#39;, &#39;b&#39;: 2, &#39;c&#39;: 3}]
</pre></div>
</div>
</div>
</div>
<div class="section" id="pythonlogging">
<h1>28、Python中的日志处理logging模块<a class="headerlink" href="#pythonlogging" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen</p>
<div class="section" id="logging">
<h2>日志logging<a class="headerlink" href="#logging" title="永久链接至标题">¶</a></h2>
<p>日志是一种可以追踪某些软件运行时所发生事件的方法。软件开发人员可以向他们的代码中调用日志记录相关的方法来表明发生了某些事情。一个事件可以用一个可包含可选变量数据的消息来描述。此外，事件也有重要性的概念，这个重要性也可以被称为严重性级（level）。</p>
<p><img alt="https://img-blog.csdnimg.cn/20190418234643545.png" src="https://img-blog.csdnimg.cn/20190418234643545.png" /></p>
<p>Logging 中几种级别：DEBUG &lt; INFO &lt; WARNING &lt; ERROR &lt; CRITICAL</p>
<p><img alt="https://img-blog.csdnimg.cn/20190418234723863.png" src="https://img-blog.csdnimg.cn/20190418234723863.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20190418234754723.png" src="https://img-blog.csdnimg.cn/20190418234754723.png" /></p>
<p>logging模块是python内置的标准模块，主要用于输出运行日志，可以设置输出日志的等级、日志保存路径、日志文件和回滚等；
可以说，logging模块主要由4部分组成：</p>
<ul class="simple">
<li>Logger 记录器，提供了应用程序代码能直接使用的接口</li>
<li>Handler 处理器，将记录器产生的日志记录发送至合适的目的地，或者说将Logger产生的日志传到指定位置</li>
<li>Filters 过滤器，对输出的日志进行过滤，它可以决定输出哪些日志记录</li>
<li>Formatter 格式化器，控制日志输出的格式，指明了最终输出中日志记录的布局</li>
</ul>
<p><img alt="https://img-blog.csdnimg.cn/20190418234825414.png" src="https://img-blog.csdnimg.cn/20190418234825414.png" /></p>
</div>
<div class="section" id="id180">
<h2>模块化组件使用<a class="headerlink" href="#id180" title="永久链接至标题">¶</a></h2>
<ul class="simple">
<li>创建一个logger（日志处理器）对象</li>
<li>定义handler(日志处理器)，决定把日志发到哪里</li>
</ul>
<p><img alt="https://img-blog.csdnimg.cn/20190418235053974.png" src="https://img-blog.csdnimg.cn/20190418235053974.png" /></p>
<ul class="simple">
<li>设置日志级别（level）和输出格式Formatters（日志格式器）</li>
<li>把handler添加到对应的logger中去</li>
</ul>
<p><img alt="https://img-blog.csdnimg.cn/20190418235206590.png" src="https://img-blog.csdnimg.cn/20190418235206590.png" /></p>
</div>
</div>
<div class="section" id="python-collections">
<h1>29、Python标准库 collections<a class="headerlink" href="#python-collections" title="永久链接至标题">¶</a></h1>
<p>﻿</p>
<p>&#64;Author：Runsen</p>
<div class="section" id="collections">
<h2>collections<a class="headerlink" href="#collections" title="永久链接至标题">¶</a></h2>
<p>计数器（counter）以字典的形式返回序列中各个字符出现的次数，值为key，次数为value</p>
<p>Counter是对字典类型的补充，用于追踪值得出现次数 ps:具备字典的所有功能 + 自己的功能</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">collections</span>

<span class="n">counter_test</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">Counter</span><span class="p">(</span><span class="s2">&quot;asfafjhadgkhjkgfjhgfjhaghdg&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">counter_test</span><span class="p">)</span>
</pre></div>
</div>
<p>Counter({‘h’: 5, ‘g’: 5, ‘a’: 4, ‘f’: 4, ‘j’: 4, ‘d’: 2, ‘k’: 2, ‘s’: 1})</p>
<p>数量从大到小排列，获取前N个元素</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># most_common(N)数量从大到小排列，获取前N个元素 </span>
<span class="n">counter_test</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>[(‘h’, 5), (‘g’, 5), (‘a’, 4)]</p>
<p>列出所有不同的元素并排序</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># sorted()列出所有不同的元素并排序 </span>
<span class="nb">sorted</span><span class="p">(</span><span class="n">counter_test</span><span class="p">)</span>
</pre></div>
</div>
<p>[‘a’, ‘d’, ‘f’, ‘g’, ‘h’, ‘j’, ‘k’, ‘s’]</p>
<p>转换成字符串</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 转换成字符串 </span>
<span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">counter_test</span><span class="o">.</span><span class="n">elements</span><span class="p">()))</span> 
</pre></div>
</div>
<p>‘aaaaddffffggggghhhhhjjjjkks’</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 取得元素重复次数的值</span>
<span class="n">counter_test</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>4</p>
<p>update()更新计数器</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># update()更新计数器，其实就是增加；如果原来没有，则新建，如果有则加一</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">Counter</span><span class="p">(</span><span class="s1">&#39;simsalabim&#39;</span><span class="p">)</span> 
<span class="n">counter_test</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="n">counter_test</span><span class="p">)</span> 
</pre></div>
</div>
<p>Counter({‘a’: 6, ‘h’: 5, ‘g’: 5, ‘f’: 4, ‘j’: 4, ‘s’: 3, ‘d’: 2, ‘k’: 2, ‘i’: 2, ‘m’: 2, ‘l’: 1, ‘b’: 1})</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># elements()取得计数器中的所有元素，注：此处非所有元素集合，而是包含所有元素集合的迭代器 </span>
<span class="n">counter_test</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">Counter</span><span class="p">(</span><span class="s1">&#39;abcabc&#39;</span><span class="p">)</span> 
<span class="nb">sorted</span><span class="p">(</span><span class="n">counter_test</span><span class="o">.</span><span class="n">elements</span><span class="p">())</span> 
</pre></div>
</div>
<p>[‘a’, ‘a’, ‘b’, ‘b’, ‘c’, ‘c’]</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># subtract()相减，原来的计数器中的每一个元素的数量减去后添加的元素的数量 </span>

<span class="n">counter_test</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">Counter</span><span class="p">(</span><span class="s1">&#39;which&#39;</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="n">counter_test</span><span class="p">)</span>
<span class="n">counter_test</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span><span class="s1">&#39;watch&#39;</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="n">counter_test</span><span class="p">)</span>
</pre></div>
</div>
<p>Counter({‘h’: 2, ‘w’: 1, ‘i’: 1, ‘c’: 1})
Counter({‘h’: 1, ‘i’: 1, ‘w’: 0, ‘c’: 0, ‘a’: -1, ‘t’: -1})</p>
</div>
<div class="section" id="ordereddict">
<h2>有序字典（orderedDict)<a class="headerlink" href="#ordereddict" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span> 
<span class="n">dic</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span> 
<span class="n">dic</span><span class="p">[</span><span class="s1">&#39;k1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;v1&#39;</span> 
<span class="n">dic</span><span class="p">[</span><span class="s1">&#39;k2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;v2&#39;</span> 
<span class="n">dic</span><span class="p">[</span><span class="s1">&#39;k3&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;v3&#39;</span> 
<span class="k">print</span><span class="p">(</span><span class="n">dic</span><span class="p">)</span> 
</pre></div>
</div>
<p>OrderedDict([(‘k1’, ‘v1’), (‘k2’, ‘v2’), (‘k3’, ‘v3’)])</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 得字典所有的键 </span>
<span class="k">print</span><span class="p">(</span><span class="n">dic</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</pre></div>
</div>
<p>odict_keys([‘k1’, ‘k2’, ‘k3’])</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 取得字典所有值 </span>
<span class="k">print</span><span class="p">(</span><span class="n">dic</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</pre></div>
</div>
<p>odict_values([‘v1’, ‘v2’, ‘v3’])</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># items() 方法以列表返回可遍历的(键, 值) 元组数组 </span>
<span class="k">print</span><span class="p">(</span><span class="n">dic</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
</pre></div>
</div>
<p>odict_items([(‘k1’, ‘v1’), (‘k2’, ‘v2’), (‘k3’, ‘v3’)])</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#pop()方法，删除指定的键值 </span>
<span class="n">dic</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;k1&#39;</span><span class="p">)</span>  
<span class="k">print</span><span class="p">(</span><span class="n">dic</span><span class="p">)</span> 

</pre></div>
</div>
<p>OrderedDict([(‘k2’, ‘v2’), (‘k3’, ‘v3’)])</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#item()方法，默认删除字典最后一个元素 </span>
<span class="n">dic</span><span class="o">.</span><span class="n">popitem</span><span class="p">()</span> 
<span class="k">print</span><span class="p">(</span><span class="n">dic</span><span class="p">)</span> 
</pre></div>
</div>
<p>OrderedDict([(‘k2’, ‘v2’)])</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># move_to_end(&#39;k&#39;)方法将指定键值一道最后</span>
<span class="n">dic</span><span class="o">.</span><span class="n">move_to_end</span><span class="p">(</span><span class="s1">&#39;k2&#39;</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="n">dic</span><span class="p">)</span>
</pre></div>
</div>
<p>OrderedDict([(‘k2’, ‘v2’)])</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># update()更新字典 </span>
<span class="n">dic</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;k1&#39;</span><span class="p">:</span><span class="s1">&#39;v1111&#39;</span><span class="p">,</span><span class="s1">&#39;k10&#39;</span><span class="p">:</span><span class="s1">&#39;v10&#39;</span><span class="p">})</span> 
<span class="k">print</span><span class="p">(</span><span class="n">dic</span><span class="p">)</span> 
</pre></div>
</div>
<p>OrderedDict([(‘k2’, ‘v2’), (‘k1’, ‘v1111’), (‘k10’, ‘v10’)])</p>
</div>
<div class="section" id="defaultdict">
<h2>默认字典（defaultdict）<a class="headerlink" href="#defaultdict" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#导入collections模块</span>
<span class="kn">import</span> <span class="nn">collections</span>
<span class="n">my_dict</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
<span class="n">my_dict</span><span class="p">[</span><span class="s1">&#39;k1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;v1&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">my_dict</span><span class="p">)</span>
</pre></div>
</div>
<p>defaultdict(&lt;class ‘list’&gt;, {‘k1’: [‘v1’]})</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 练习：元素分类</span>
<span class="c1"># 有如下值集合 [11,22,33,44,55,66,77,88,99,90...]，</span>
<span class="c1"># 将所有大于 66 的值保存至字典的第一个key中，将小于 66 的值保存至第二个key的值中。</span>
<span class="c1"># 即： {&#39;k1&#39;: 大于66 , &#39;k2&#39;: 小于66}</span>

<span class="c1">### 1、不用默认指点的写法要判断字典中是否已有{&#39;k1&#39;:[]}</span>
<span class="n">all_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mi">44</span><span class="p">,</span><span class="mi">55</span><span class="p">,</span><span class="mi">66</span><span class="p">,</span><span class="mi">77</span><span class="p">,</span><span class="mi">88</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">90</span><span class="p">,]</span>
<span class="n">dic</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">all_list</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">66</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;k1&quot;</span> <span class="ow">in</span> <span class="n">dic</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">dic</span><span class="p">[</span><span class="s1">&#39;k1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dic</span><span class="p">[</span><span class="s1">&#39;k1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">,]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;k2&quot;</span> <span class="ow">in</span> <span class="n">dic</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">dic</span><span class="p">[</span><span class="s1">&#39;k2&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dic</span><span class="p">[</span><span class="s1">&#39;k2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">,]</span>

<span class="k">print</span><span class="p">(</span><span class="n">dic</span><span class="p">)</span>

<span class="c1">### 2、默认字典</span>
<span class="n">all_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mi">44</span><span class="p">,</span><span class="mi">55</span><span class="p">,</span><span class="mi">66</span><span class="p">,</span><span class="mi">77</span><span class="p">,</span><span class="mi">88</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">90</span><span class="p">,]</span>
<span class="n">dic</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">all_list</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">66</span><span class="p">:</span>
        <span class="n">dic</span><span class="p">[</span><span class="s1">&#39;k1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">dic</span><span class="p">[</span><span class="s1">&#39;k2&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">dic</span><span class="p">)</span>

</pre></div>
</div>
<p>{‘k2’: [11, 22, 33, 44, 55, 66], ‘k1’: [77, 88, 99, 90]}
defaultdict(&lt;class ‘list’&gt;, {‘k2’: [11, 22, 33, 44, 55, 66], ‘k1’: [77, 88, 99, 90]})</p>
</div>
<div class="section" id="namedtuple">
<h2>可命名元组（namedtuple)<a class="headerlink" href="#namedtuple" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">### 根据nametuple可以创建一个包含tuple所有功能以及其他功能的类型。 </span>

<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span> <span class="c1">#创建(给元组命名) </span>
<span class="n">Mytuple</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;Mytuple&#39;</span><span class="p">,[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="s1">&#39;z&#39;</span><span class="p">])</span> 
<span class="n">obj</span> <span class="o">=</span> <span class="n">Mytuple</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">33</span><span class="p">)</span> <span class="c1">#通过x,y,z取得元组的值 </span>
<span class="k">print</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">x</span> <span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">y</span> <span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">z</span> <span class="p">)</span>
</pre></div>
</div>
<p>11
22
33</p>
</div>
<div class="section" id="deque">
<h2>双向队列（deque)<a class="headerlink" href="#deque" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">deque</span> <span class="c1">#创建双向队列 </span>
<span class="n">d</span> <span class="o">=</span> <span class="n">deque</span><span class="p">()</span> 
<span class="n">d</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span> 
<span class="n">d</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">)</span>

<span class="c1"># append()向队列中插入数据（从右边插入） </span>
<span class="n">d</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;3&#39;</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> 

</pre></div>
</div>
<p>deque([‘1’, ‘2’, ‘3’])</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># appendleft()向队列中插入数据（从左边插入） </span>
<span class="n">d</span><span class="o">.</span><span class="n">appendleft</span><span class="p">(</span><span class="s1">&#39;4&#39;</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> 
</pre></div>
</div>
<p>deque([‘4’, ‘1’, ‘2’, ‘3’])</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">## clear()清空队列 </span>
<span class="n">d</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span> 
<span class="k">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> 
</pre></div>
</div>
<p>deque([])</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># count()计数 </span>
<span class="n">d</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> 
<span class="n">d</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span> 
</pre></div>
</div>
<p>deque([‘1’])</p>
<p>1</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># extend()从右边向队列添加额外元素 </span>
<span class="n">d</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;qq&#39;</span><span class="p">,</span><span class="s1">&#39;ww&#39;</span><span class="p">,</span><span class="s1">&#39;ee&#39;</span><span class="p">])</span> 
<span class="k">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> 


</pre></div>
</div>
<p>deque([‘1’, ‘qq’, ‘ww’, ‘ee’])</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">## extendleft()从左边向队列添加元素 </span>
<span class="n">d</span><span class="o">.</span><span class="n">extendleft</span><span class="p">([</span><span class="s1">&#39;qq&#39;</span><span class="p">,</span><span class="s1">&#39;ww&#39;</span><span class="p">,</span><span class="s1">&#39;ee&#39;</span><span class="p">])</span> 
<span class="k">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> 



</pre></div>
</div>
<p>deque([‘ee’, ‘ww’, ‘qq’, ‘1’, ‘qq’, ‘ww’, ‘ee’])</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># index()取得元素下标 </span>
<span class="n">d</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span> 



</pre></div>
</div>
<p>3</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># insert()指定位置插入元素 </span>
<span class="n">d</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;nn&#39;</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> 


</pre></div>
</div>
<p>deque([‘ee’, ‘nn’, ‘ww’, ‘qq’, ‘1’, ‘qq’, ‘ww’, ‘ee’])</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># pop()从右边移除一个元素 </span>
<span class="n">d</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span> 

<span class="k">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> 
<span class="n">deque</span><span class="p">([</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="s1">&#39;nn&#39;</span><span class="p">])</span>


</pre></div>
</div>
<p>deque([‘ee’, ‘nn’, ‘ww’, ‘qq’, ‘1’, ‘qq’, ‘ww’])</p>
<p>deque([‘1’, ‘nn’])</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># popleft()从左边移除一个元素 </span>
<span class="n">d</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span> 
<span class="k">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> 


</pre></div>
</div>
<p>deque([‘nn’, ‘ww’, ‘qq’, ‘1’, ‘qq’, ‘ww’])</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># remove()移除指定元素 </span>
<span class="n">d</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> 
<span class="n">deque</span><span class="p">([</span><span class="s1">&#39;2&#39;</span><span class="p">])</span>


</pre></div>
</div>
<p>deque([‘nn’, ‘ww’, ‘qq’, ‘qq’, ‘ww’])</p>
<p>deque([‘2’])</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># reverse()反转队列 </span>
<span class="k">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> 
<span class="n">d</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span> 
<span class="k">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> 
<span class="n">deque</span><span class="p">([</span><span class="s1">&#39;2&#39;</span><span class="p">,</span><span class="s1">&#39;1&#39;</span><span class="p">])</span>

</pre></div>
</div>
<p>deque([‘nn’, ‘ww’, ‘qq’, ‘qq’, ‘ww’])
deque([‘ww’, ‘qq’, ‘qq’, ‘ww’, ‘nn’])
deque([‘2’, ‘1’])</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">## rotate()将右边指定的元素个数移到队列左边 </span>
<span class="n">d</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;4&#39;</span><span class="p">)</span> 
<span class="n">d</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;5&#39;</span><span class="p">)</span> 
<span class="n">d</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;6&#39;</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> 
<span class="n">d</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> 

</pre></div>
</div>
<p>deque([‘ww’, ‘qq’, ‘qq’, ‘ww’, ‘nn’, ‘4’, ‘5’, ‘6’])
deque([‘4’, ‘5’, ‘6’, ‘ww’, ‘qq’, ‘qq’, ‘ww’, ‘nn’])</p>
</div>
<div class="section" id="fifo">
<h2>单向队列（先进先出 FIFO ）<a class="headerlink" href="#fifo" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>import queue # 创建单向队列 
&gt;&gt;&gt; q = queue.Queue()

1.添加元素 
&gt;&gt;&gt; q.put(&#39;11&#39;) 
&gt;&gt;&gt; q.put(&#39;22&#39;)

2.qsize()获取队列中元素个数 
&gt;&gt;&gt; q.qsize() 
2

3.get()取得元素（先进先出) 
&gt;&gt;&gt; q.get() 
11 
&gt;&gt;&gt; q.get() 
22
</pre></div>
</div>
</div>
</div>
<div class="section" id="pythonjson">
<h1>30、Python中的Json解析模块<a class="headerlink" href="#pythonjson" title="永久链接至标题">¶</a></h1>
<p>﻿</p>
<p>&#64;Author：Runsen</p>
<div class="section" id="id181">
<h2>什么是json<a class="headerlink" href="#id181" title="永久链接至标题">¶</a></h2>
<p>JSON(JavaScript Object Notation, JS 对象简谱) 是一种轻量级的数据交换格式。</p>
<p>它基于 ECMAScript (欧洲计算机协会制定的js规范)的一个子集，采用完全独立于编程语言的文本格式来存储和表示数据。简洁和清晰的层次结构使得 JSON 成为理想的数据交换语言。 易于人阅读和编写，同时也易于机器解析和生成，并有效地提升网络传输效率。</p>
</div>
<div class="section" id="js">
<h2>JS对象<a class="headerlink" href="#js" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>var teacher_1 = {
    name: ‘Runsen’,
    age: 18,
    feature : [‘高’, ‘富’,  ‘帅’]
}
</pre></div>
</div>
</div>
<div class="section" id="id182">
<h2>JSON字符串<a class="headerlink" href="#id182" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>{
    “name”: “Runsen”,
    “age”: 18,
    “ feature “ : [‘高’, ‘富’,  ‘帅’]
}
</pre></div>
</div>
</div>
<div class="section" id="id183">
<h2>Python字典<a class="headerlink" href="#id183" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>{
    ‘name’: ‘Runsen’,
    ‘age’: 18
    ‘feature’ : [‘高’, ‘富’,  ‘帅’]
}
</pre></div>
</div>
<p>注意点：</p>
<ul class="simple">
<li>字符串必须用双引号（即：””）来包括</li>
<li>值可以是字符串、数字、true、false、null、列表，或字典。</li>
</ul>
<p><img alt="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS8wYjY2OTcxNC02ZDg3LTQyOTItYjBiZC02OWQ4MGVhZTQxNmEucG5n?x-oss-process=image/format,png" src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS8wYjY2OTcxNC02ZDg3LTQyOTItYjBiZC02OWQ4MGVhZTQxNmEucG5n?x-oss-process=image/format,png" /></p>
</div>
<div class="section" id="jsonapi">
<h2>Json模块API<a class="headerlink" href="#jsonapi" title="永久链接至标题">¶</a></h2>
<p>常用json就知道，json模块提供了四个常用的方法：dumps、dump、loads、load，用于字符串 和 python数据类型间进行转换。</p>
<ul class="simple">
<li>json.dumps(obj)    –&gt; 将python数据转化为json</li>
</ul>
<p>Indent实现缩进，ensure_ascii 是否用ascii解析</p>
<ul class="simple">
<li>json.loads(s)      –&gt;将json数据转换为python的数据</li>
<li>json.dump(obj, fp)  –&gt;转换为json并保存到文件中</li>
<li>json.load(fp) –&gt;  从文件中读取json，并转化为python数据</li>
</ul>
</div>
<div class="section" id="id184">
<h2>Json模块使用<a class="headerlink" href="#id184" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>import json
my_dict = {&#39;a&#39;:&#39;1&#39;,&#39;b&#39;:&#39;2&#39;,&#39;c&#39;:&#39;3&#39;,&#39;d&#39;:&#39;4&#39;}
print(type(my_dict))
a = json.dumps(my_dict)
print(a)
print(type(a))
b=json.loads(a)
print(b)
print(type(b))
OUT：
&lt;class &#39;dict&#39;&gt;
{&quot;a&quot;: &quot;1&quot;, &quot;b&quot;: &quot;2&quot;, &quot;c&quot;: &quot;3&quot;, &quot;d&quot;: &quot;4&quot;}
&lt;class &#39;str&#39;&gt; #json的字符串
{&#39;a&#39;: &#39;1&#39;, &#39;b&#39;: &#39;2&#39;, &#39;c&#39;: &#39;3&#39;, &#39;d&#39;: &#39;4&#39;}
&lt;class &#39;dict&#39;&gt;
——————————
&gt;&gt;&gt; import json
&gt;&gt;&gt; print (json.dumps(&#39;中国&#39;))
&quot;\u4e2d\u56fd&quot;
&gt;&gt;&gt; print(json.dumps(&#39;中国&#39;, ensure_ascii=False))
&quot;中国&quot;
——————————
#json.dump() 和 json.load() 来编码和解码JSON数据,用于处理文件。

import json
my_dict = {&#39;a&#39;:&#39;1&#39;,&#39;b&#39;:&#39;2&#39;,&#39;c&#39;:&#39;3&#39;,&#39;d&#39;:&#39;4&#39;}
json.dump(my_dict,open(&#39;a.txt&#39;,&#39;w&#39;))
print(json.load(open(&#39;a.txt&#39;,&#39;r&#39;)))
OUT:
会生成一个“a.txt&quot;文件
{&#39;a&#39;: &#39;1&#39;, &#39;b&#39;: &#39;2&#39;, &#39;c&#39;: &#39;3&#39;, &#39;d&#39;: &#39;4&#39;}
</pre></div>
</div>
</div>
</div>
<div class="section" id="pythondocx">
<h1>31、Python读写docx文件<a class="headerlink" href="#pythondocx" title="永久链接至标题">¶</a></h1>
<p>﻿</p>
<p>&#64;Author：Runsen</p>
<div class="section" id="id185">
<h2>Python读写docx文件<a class="headerlink" href="#id185" title="永久链接至标题">¶</a></h2>
<p>Python读写word文档有现成的库可以处理</p>
<p><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">python-docx</span></code>安装一下。
https://python-docx.readthedocs.io/en/latest/</p>
<p>学习官网： http://python-docx.readthedocs.org/en/latest/</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">docx</span>
<span class="c1"># 新建,打开,保存文件。</span>

<span class="kn">import</span> <span class="nn">docx</span>
<span class="c1">#新建文档</span>
<span class="n">doc_new</span> <span class="o">=</span> <span class="n">docx</span><span class="o">.</span><span class="n">Document</span><span class="p">()</span>
<span class="c1"># 保存文档</span>
<span class="n">doc_new</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;demo.docx&#39;</span><span class="p">)</span>
<span class="c1">#读取文档</span>
<span class="n">doc</span> <span class="o">=</span> <span class="n">docx</span><span class="o">.</span><span class="n">Document</span><span class="p">(</span><span class="s1">&#39;demo.docx&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>python-docx包含了word文档的相关对象</strong></p>
<ul class="simple">
<li>doc.paragraphs    #段落</li>
<li>doc.tables        #表格</li>
<li>doc.sections      #节</li>
<li>doc.styles        #样式</li>
<li>doc.inline_shapes   #内置图形</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 插入段落。</span>

<span class="n">doc</span><span class="o">.</span><span class="n">add_paragraph</span><span class="p">(</span><span class="s1">&#39;第一段&#39;</span><span class="p">,</span><span class="n">style</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span> <span class="c1">#插入一个段落，文本为“第一段”</span>
<span class="c1">#默认是不应用样式，这里也可以不写style参数，或者指定一个段落样式</span>

<span class="n">doc</span><span class="o">.</span><span class="n">add_paragraph</span><span class="p">(</span><span class="s1">&#39;第二段&#39;</span><span class="p">,</span><span class="n">style</span><span class="o">=</span><span class="s1">&#39;Heading 2&#39;</span><span class="p">)</span>
<span class="c1">#这些样式都是word默认带有的样式，可以直接罗列出来有哪些段落样式</span>
<span class="k">print</span> <span class="p">([</span><span class="n">s</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">doc</span><span class="o">.</span><span class="n">styles</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">type</span><span class="o">==</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;Normal&#39;</span><span class="p">,</span> <span class="s1">&#39;Header&#39;</span><span class="p">,</span> <span class="s1">&#39;Footer&#39;</span><span class="p">,</span> <span class="s1">&#39;Heading 1&#39;</span><span class="p">,</span> <span class="s1">&#39;Heading 2&#39;</span><span class="p">,</span> <span class="s1">&#39;Heading 3&#39;</span><span class="p">,</span> <span class="s1">&#39;Heading 4&#39;</span><span class="p">,</span> <span class="s1">&#39;Heading 5&#39;</span><span class="p">,</span> <span class="s1">&#39;Heading 6&#39;</span><span class="p">,</span> <span class="s1">&#39;Heading 7&#39;</span><span class="p">,</span> <span class="s1">&#39;Heading 8&#39;</span><span class="p">,</span> <span class="s1">&#39;Heading 9&#39;</span><span class="p">,</span> <span class="s1">&#39;No Spacing&#39;</span><span class="p">,</span> <span class="s1">&#39;Title&#39;</span><span class="p">,</span> <span class="s1">&#39;Subtitle&#39;</span><span class="p">,</span> <span class="s1">&#39;List Paragraph&#39;</span><span class="p">,</span> <span class="s1">&#39;Body Text&#39;</span><span class="p">,</span> <span class="s1">&#39;Body Text 2&#39;</span><span class="p">,</span> <span class="s1">&#39;Body Text 3&#39;</span><span class="p">,</span> <span class="s1">&#39;List&#39;</span><span class="p">,</span> <span class="s1">&#39;List 2&#39;</span><span class="p">,</span> <span class="s1">&#39;List 3&#39;</span><span class="p">,</span> <span class="s1">&#39;List Bullet&#39;</span><span class="p">,</span> <span class="s1">&#39;List Bullet 2&#39;</span><span class="p">,</span> <span class="s1">&#39;List Bullet 3&#39;</span><span class="p">,</span> <span class="s1">&#39;List Number&#39;</span><span class="p">,</span> <span class="s1">&#39;List Number 2&#39;</span><span class="p">,</span> <span class="s1">&#39;List Number 3&#39;</span><span class="p">,</span> <span class="s1">&#39;List Continue&#39;</span><span class="p">,</span> <span class="s1">&#39;List Continue 2&#39;</span><span class="p">,</span> <span class="s1">&#39;List Continue 3&#39;</span><span class="p">,</span> <span class="s1">&#39;macro&#39;</span><span class="p">,</span> <span class="s1">&#39;Quote&#39;</span><span class="p">,</span> <span class="s1">&#39;Caption&#39;</span><span class="p">,</span> <span class="s1">&#39;Intense Quote&#39;</span><span class="p">,</span> <span class="s1">&#39;TOC Heading&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 新增样式</span>
<span class="kn">from</span> <span class="nn">docx.shared</span> <span class="kn">import</span> <span class="n">RGBColor</span> <span class="c1">#这个是docx的颜色类</span>
<span class="c1">#新建文档</span>
<span class="c1">#新增样式(第一个参数是样式名称，第二个参数是样式类型：1代表段落；2代表字符；3代表表格)</span>
<span class="n">style</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">styles</span><span class="o">.</span><span class="n">add_style</span><span class="p">(</span><span class="s1">&#39;style name 1&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="c1">#设置具体样式(修改样式字体为蓝色，当然还可以修改其他的)</span>
<span class="n">style</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">rgb</span> <span class="o">=</span> <span class="n">RGBColor</span><span class="p">(</span><span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 字符样式</span>
<span class="c1"># 插入一个空白段落</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">add_paragraph</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c1"># 写入</span>
<span class="n">p</span><span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="s1">&#39;毛利1&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;Heading 1 Char&quot;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="s1">&#39;毛利2&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="s1">&#39;毛利3&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;Heading 2 Char&quot;</span><span class="p">)</span>
<span class="c1">#这样一个段落就应用了两个字符样式，中间“毛利”就没应用样式</span>
<span class="k">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">text</span><span class="p">)</span> <span class="c1">#输出结果是u&#39;123456789&#39; 也还是连续的</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">毛利1毛利2毛利3</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 设置字体</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="s1">&#39;毛利4&#39;</span><span class="p">)</span>
<span class="n">r</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">bold</span> <span class="o">=</span> <span class="bp">True</span>    <span class="c1">#加粗</span>
<span class="n">r</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">italic</span> <span class="o">=</span> <span class="bp">True</span>  <span class="c1">#倾斜 </span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 表格操作</span>

<span class="c1">#新建一个2x3的表格，style可以不写</span>
<span class="n">table</span><span class="o">=</span><span class="n">doc</span><span class="o">.</span><span class="n">add_table</span><span class="p">(</span><span class="n">rows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">cols</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">style</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
<span class="c1">#可以用table 的rows和columns得到这个表格的行数和列数</span>
<span class="k">print</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">rows</span><span class="p">))</span>
<span class="k">print</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">columns</span><span class="p">))</span>
<span class="c1">#遍历表格rows</span>
<span class="k">for</span> <span class="n">index</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">rows</span><span class="p">):</span>
    <span class="n">row</span><span class="o">.</span><span class="n">cells</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;毛利{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">cells</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

<span class="c1">#新增行或列</span>
<span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">()</span>
<span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span>
<span class="mi">3</span>
<span class="n">毛利0</span>
<span class="n">毛利1</span>



<span class="o">&lt;</span><span class="n">docx</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">_Column</span> <span class="n">at</span> <span class="mh">0x17a7f928128</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 官方例子</span>
<span class="kn">from</span> <span class="nn">docx</span> <span class="kn">import</span> <span class="n">Document</span>
<span class="kn">from</span> <span class="nn">docx.shared</span> <span class="kn">import</span> <span class="n">Inches</span>

<span class="n">document</span> <span class="o">=</span> <span class="n">Document</span><span class="p">()</span>

<span class="n">document</span><span class="o">.</span><span class="n">add_heading</span><span class="p">(</span><span class="s1">&#39;Document Title&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="c1"># 段落</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">add_paragraph</span><span class="p">(</span><span class="s1">&#39;A plain paragraph having some &#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">bold</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">p</span><span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="s1">&#39; and some &#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">add_run</span><span class="p">(</span><span class="s1">&#39;italic.&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">italic</span> <span class="o">=</span> <span class="bp">True</span>
<span class="c1"># </span>
<span class="n">document</span><span class="o">.</span><span class="n">add_heading</span><span class="p">(</span><span class="s1">&#39;Heading, level 1&#39;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">document</span><span class="o">.</span><span class="n">add_paragraph</span><span class="p">(</span><span class="s1">&#39;Intense quote&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;Intense Quote&#39;</span><span class="p">)</span>

<span class="n">document</span><span class="o">.</span><span class="n">add_paragraph</span><span class="p">(</span>
    <span class="s1">&#39;first item in unordered list&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;List Bullet&#39;</span>
<span class="p">)</span>
<span class="n">document</span><span class="o">.</span><span class="n">add_paragraph</span><span class="p">(</span>
    <span class="s1">&#39;first item in ordered list&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;List Number&#39;</span>
<span class="p">)</span>

<span class="c1"># document.add_picture(&#39;monty-truth.png&#39;, width=Inches(1.25))</span>

<span class="n">records</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;101&#39;</span><span class="p">,</span> <span class="s1">&#39;Spam&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;422&#39;</span><span class="p">,</span> <span class="s1">&#39;Eggs&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;631&#39;</span><span class="p">,</span> <span class="s1">&#39;Spam, spam, eggs, and spam&#39;</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">table</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">add_table</span><span class="p">(</span><span class="n">rows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">hdr_cells</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">cells</span>
<span class="n">hdr_cells</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Qty&#39;</span>
<span class="n">hdr_cells</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Id&#39;</span>
<span class="n">hdr_cells</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Desc&#39;</span>
<span class="k">for</span> <span class="n">qty</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">desc</span> <span class="ow">in</span> <span class="n">records</span><span class="p">:</span>
    <span class="n">row_cells</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">()</span><span class="o">.</span><span class="n">cells</span>
    <span class="n">row_cells</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span>
    <span class="n">row_cells</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="nb">id</span>
    <span class="n">row_cells</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">desc</span>

<span class="n">document</span><span class="o">.</span><span class="n">add_page_break</span><span class="p">()</span>

<span class="n">document</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;demo1.docx&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20190505223424346.png" src="https://img-blog.csdnimg.cn/20190505223424346.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20190505223505857.png" src="https://img-blog.csdnimg.cn/20190505223505857.png" />
参考： http://python-docx.readthedocs.org/en/latest/</p>
</div>
</div>
<div class="section" id="id186">
<h1>32、教你Python制作简单的二维码<a class="headerlink" href="#id186" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen</p>
<div class="section" id="myqr">
<h2>安装MyQR<a class="headerlink" href="#myqr" title="永久链接至标题">¶</a></h2>
<p>cmd 窗口中用 pip 命令安装</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">MyQR</span>
</pre></div>
</div>
<p>这个库提供了两种使用方法，一种是直接使用命令行的方式，另外一种使用import引入</p>
<p>先在最原始的IDE上</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">MyQR</span> <span class="k">import</span> <span class="n">myqr</span>
<span class="n">myqr</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s1">&#39;1234567&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20190425123522141.png" src="https://img-blog.csdnimg.cn/20190425123522141.png" /></p>
<p>在看下源码
<img alt="https://img-blog.csdnimg.cn/20190425123316449.png" src="https://img-blog.csdnimg.cn/20190425123316449.png" /></p>
<p>位置参数
单词：STR</p>
<p>可选参数
版本：int，从1到40</p>
<p>级别：str，仅限其中一个（l’、’m’、’q’、’h’）</p>
<p>picutre:str，图像的文件名</p>
<p>着色：布尔</p>
<p>constrast:浮动</p>
<p>亮度：浮动</p>
<p>保存“name:str”，输出文件名如“example.png”</p>
<p>save_dir:str，输出目录</p>
<p><img alt="https://img-blog.csdnimg.cn/20190425131139766.png0" src="https://img-blog.csdnimg.cn/20190425131139766.png0" /></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">MyQR</span> <span class="k">import</span> <span class="n">myqr</span>
<span class="n">myqr</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">words</span><span class="o">=</span><span class="s1">&#39;123456&#39;</span><span class="p">,</span><span class="n">picture</span><span class="o">=</span><span class="s1">&#39;1.jpg&#39;</span><span class="p">,</span><span class="n">save_name</span><span class="o">=</span><span class="s1">&#39;demo.png&#39;</span><span class="p">,</span><span class="n">colorized</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20190425124718125.png" src="https://img-blog.csdnimg.cn/20190425124718125.png" /></p>
</div>
<div class="section" id="id187">
<h2>动图<a class="headerlink" href="#id187" title="永久链接至标题">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">MyQR</span> <span class="k">import</span> <span class="n">myqr</span>
<span class="n">myqr</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">words</span><span class="o">=</span><span class="s1">&#39;https://www.baidu.com&#39;</span><span class="p">,</span><span class="n">picture</span><span class="o">=</span><span class="s1">&#39;1.gif&#39;</span><span class="p">,</span><span class="n">save_name</span><span class="o">=</span><span class="s1">&#39;demo1.gif&#39;</span><span class="p">,</span><span class="n">colorized</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20190425125335676.gif" src="https://img-blog.csdnimg.cn/20190425125335676.gif" /></p>
<p>第二种cmd下的方法</p>
<p>参数</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">myqr     Words</span>
<span class="s1">        [-v {1,2,3,...,40}]</span>
<span class="s1">        [-l {L,M,Q,H}]</span>
<span class="s1">        [-n output-filename]</span>
<span class="s1">        [-d output-directory]</span>
<span class="s1">        [-p picture_file]</span>
<span class="s1">        [-c]</span>
<span class="s1">        [-con contrast]</span>
<span class="s1">        [-bri brightness]</span>
<span class="s1">&#39;&#39;&#39;</span>
</pre></div>
</div>
<p>-v 参数是控制二维码边长的，范围 1至40，数字越大边长越大；</p>
<p>-l 控制纠错水平，范围是L、M、Q、H，从左到右依次升高。默认纠错等级是最高级的H。</p>
<p>-n 控制文件名，格式可以是 .jpg， .png ，.bmp ，.gif ；</p>
<p>-d 控制位置，控制二维码图片的保存位置。</p>
<p>-p 参数可以把原二维码和同目录下另一张图片结合形成新的黑白艺术二维码。</p>
<p>-con 用以调节图片的对比度，1.0 表示原始图片，更小的值表示更低对比度，更大反之。默认为1.0。</p>
<p>-bri 用来调节图片的亮度，其余用法和取值与 -con 相同。</p>
<p><img alt="https://img-blog.csdnimg.cn/20190425125634355.png" src="https://img-blog.csdnimg.cn/20190425125634355.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/2019042512570917.png" src="https://img-blog.csdnimg.cn/2019042512570917.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20190425125721429.png" src="https://img-blog.csdnimg.cn/20190425125721429.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20190425130043254.png" src="https://img-blog.csdnimg.cn/20190425130043254.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/2019042513010215.gif" src="https://img-blog.csdnimg.cn/2019042513010215.gif" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20190425130513425.png" src="https://img-blog.csdnimg.cn/20190425130513425.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20190425130523197.png" src="https://img-blog.csdnimg.cn/20190425130523197.png" /></p>
</div>
<div class="section" id="id188">
<h2>搜索范冰冰<a class="headerlink" href="#id188" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">MyQR</span> <span class="kn">import</span> <span class="n">myqr</span>
<span class="n">myqr</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">words</span><span class="o">=</span><span class="s1">&#39;https://www.baidu.com/s?wd=</span><span class="si">%E</span><span class="s1">8%8C</span><span class="si">%83%</span><span class="s1">E5</span><span class="si">%86%</span><span class="s1">B0</span><span class="si">%E</span><span class="s1">5</span><span class="si">%86%</span><span class="s1">B0&amp;rsv_spt=1&amp;rsv_iqid=0xa48f245a0000d799&amp;issp=1&amp;f=8&amp;rsv_bp=1&amp;rsv_idx=2&amp;ie=utf8&amp;tn=baiduhome_pg&amp;rsv_enter=1&amp;rsv_sug3=12&amp;rsv_sug1=10&amp;rsv_sug7=100&amp;rsv_t=b7</span>
<span class="n">a30UsfuYzvKe8JVKCYqvrCF</span><span class="o">%</span><span class="mi">2</span><span class="n">FVdbjT</span><span class="o">%</span><span class="mi">2</span><span class="n">B0viM0p7fh8j</span><span class="o">%</span><span class="mi">2</span><span class="n">BUKcUaEJF</span><span class="o">%</span><span class="mi">2</span><span class="n">FTojpsWfmTDc</span><span class="o">%</span><span class="mi">2</span><span class="n">FL5s</span><span class="o">&amp;</span><span class="n">rsv_sug2</span>
<span class="o">=</span><span class="mi">0</span><span class="o">&amp;</span><span class="n">inputT</span><span class="o">=</span><span class="mi">3459</span><span class="o">&amp;</span><span class="n">rsv_sug4</span><span class="o">=</span><span class="mi">3459</span><span class="o">&amp;</span><span class="n">rsv_sug</span><span class="o">=</span><span class="mi">1</span><span class="s1">&#39;,picture=&#39;</span><span class="mf">2.</span><span class="n">png</span><span class="s1">&#39;,save_name=&#39;</span><span class="n">demo1</span><span class="o">.</span><span class="n">png</span><span class="s1">&#39;,colorized=True)</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20190425132652811.png" src="https://img-blog.csdnimg.cn/20190425132652811.png" /></p>
<p>出现的问题：cannot write mode RGBA as JPEG</p>
<p>原因：RGBA意思是红色，绿色，蓝色，Alpha的色彩空间，Alpha指透明度。而JPG不支持透明度，所以要么丢弃Alpha,要么保存为.png文件</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;2.jpg&#39;</span><span class="p">)</span>
<span class="c1"># image = image.convert(&quot;RGB&quot;) </span>
<span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;2.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="pythonpil">
<h1>33、自从我会了Python中的PIL，发现了其实超级简单<a class="headerlink" href="#pythonpil" title="永久链接至标题">¶</a></h1>
<p>﻿PIL全称是Python Image Library，顾名思义，是用来做图像处理的。</p>
<div class="section" id="pil">
<h2>了解PIL<a class="headerlink" href="#pil" title="永久链接至标题">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">PIL</span></code> (Python Image Library) 已经算是 <code class="docutils literal notranslate"><span class="pre">Python</span></code> 处理图片的标准库了，兼具强大的功能和简洁的<code class="docutils literal notranslate"> <span class="pre">API.</span></code>
但是<code class="docutils literal notranslate"><span class="pre">PIL</span></code>库的更新非常缓慢， 并且它只支持到<code class="docutils literal notranslate"><span class="pre">python2.7</span></code>，不支持<code class="docutils literal notranslate"><span class="pre">python3</span></code></p>
<p>由于PIL库更新太慢了，于是于是一群志愿者在PIL库的基础上创建了一个新的分支版本，命名为<code class="docutils literal notranslate"><span class="pre">Pillow</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">Pillow</span></code>目前最新支持到<code class="docutils literal notranslate"><span class="pre">python3.6</span></code>，它的维护和开发十分活跃，兼容PIL库的绝大多数语法，并且增加了许多新的特性，推荐直接使用<code class="docutils literal notranslate"><span class="pre">Pillow</span></code></p>
</div>
<div class="section" id="id189">
<h2>概念了解<a class="headerlink" href="#id189" title="永久链接至标题">¶</a></h2>
<p>PIL中所涉及的基本概念有如下几个：</p>
<ul class="simple">
<li>通道(bands)</li>
<li>尺寸(size)</li>
<li>坐标系统(coordinate system)</li>
</ul>
<div class="section" id="id190">
<h3>通道<a class="headerlink" href="#id190" title="永久链接至标题">¶</a></h3>
<p>每张图片都是由一个或者多个数据通道构成，如果这些通道具有相同的维数和深度，PIL允许将这些通道进行叠加</p>
<p>以RGB图像为例，每张图片都是由三个数据通道叠加构成，分别为R 、G 、B。</p>
<p>对于灰度图像（没有色彩的图片， RGB色彩分量全部相等），只有一个通道。</p>
<p>灰度指的是黑白图像中点的颜色深度，范围一般是0到255， 白色为255，黑色为0</p>
</div>
</div>
<div class="section" id="id191">
<h2>图片尺寸<a class="headerlink" href="#id191" title="永久链接至标题">¶</a></h2>
<p>指的是图片的宽度和高度</p>
<p>通过size属性可以获取图片的尺寸，它的返回值是一个元祖，元祖里面有两个值，分别是水平和垂直方向上的像素个数</p>
<div class="section" id="id192">
<h3>坐标系统<a class="headerlink" href="#id192" title="永久链接至标题">¶</a></h3>
<p>PIL使用笛卡尔像素坐标系统，图像的左上角为左边的原点（0，0），这就意味着，x轴的数值是从左到右增长的，y轴的数值是从上到下增长的。</p>
<p>在我们处理图像的时候，常常需要去表示一个矩形的图像区域。Pillow中很多方法都需要传入一个表示矩形区域的元祖</p>
<p>这个元祖包含四个值，分别表示矩形四条边距离x轴或者y轴的距离。顺序是（左，顶，右，底）
例如，一个800x600的像素图像表示为（0， 0， 800， 600）</p>
<p>我们可以用PIL干嘛呢？</p>
<p>第一，可以将两张图片合并在一起</p>
<p><strong>Image.blend(image1,image2,alpha)</strong></p>
<p>合成公式为：out=image1(1.0- alpha)+image2alpha</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="n">im1</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;1.jpg&quot;</span><span class="p">)</span>
<span class="n">im2</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;2.jpg&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">im1</span><span class="o">.</span><span class="n">mode</span><span class="p">,</span><span class="n">im1</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>  <span class="c1"># RGB (500, 300)</span>
<span class="k">print</span><span class="p">(</span><span class="n">im2</span><span class="o">.</span><span class="n">mode</span><span class="p">,</span><span class="n">im2</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>   <span class="c1"># RGB (500, 300)</span>
<span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">blend</span><span class="p">(</span><span class="n">im1</span><span class="p">,</span> <span class="n">im2</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="n">im</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;3.jpg&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>这是1.jpg
<img alt="https://img-blog.csdnimg.cn/20190502220733889.jpg" src="https://img-blog.csdnimg.cn/20190502220733889.jpg" />
这是2.jpg
<img alt="https://img-blog.csdnimg.cn/20190502220739252.jpg" src="https://img-blog.csdnimg.cn/20190502220739252.jpg" /></p>
<p>这是3.jpg</p>
<p><img alt="合成后的图片" src="https://img-blog.csdnimg.cn/2019050222074462.jpg" /></p>
<p>当然除了上面的方法还可以使用Composite类
Image.composite(image1,image2, mask) ⇒ image
复合类使用给定的两张图像及mask图像作为透明度，插值出一张新的图像。变量mask图像的模式可以为“1”，“L”或者“RGBA”。所有图像必须有相同的尺寸。</p>
<p>看一波源码，如下图所示</p>
<p><img alt="https://img-blog.csdnimg.cn/20190502221303486.png" src="https://img-blog.csdnimg.cn/20190502221303486.png" /></p>
<p>一波代码开干</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="n">im1</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;1.jpg&quot;</span><span class="p">)</span>
<span class="n">im2</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;2.jpg&quot;</span><span class="p">)</span>
<span class="n">r</span><span class="p">,</span><span class="n">g</span><span class="p">,</span><span class="n">b</span> <span class="o">=</span> <span class="n">im1</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">mode</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">im1</span><span class="o">.</span><span class="n">mode</span><span class="p">,</span><span class="n">im1</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">im2</span><span class="o">.</span><span class="n">mode</span><span class="p">,</span><span class="n">im2</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
<span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">composite</span><span class="p">(</span><span class="n">im1</span><span class="p">,</span><span class="n">im2</span><span class="p">,</span><span class="n">mask</span><span class="o">=</span><span class="n">b</span><span class="p">)</span>
<span class="n">im</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;4.jpg&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>这是4.jpg</p>
<p><img alt="https://img-blog.csdnimg.cn/20190502222239658.jpg" src="https://img-blog.csdnimg.cn/20190502222239658.jpg" /></p>
</div>
</div>
<div class="section" id="id193">
<h2>Filter类<a class="headerlink" href="#id193" title="永久链接至标题">¶</a></h2>
<p>im.filter(filter) ⇒ image</p>
<p>返回一个使用给定滤波器处理过的图像的拷贝。在该模块中，预先定义了很多增强滤波器，可以通过filter()函数使用，预定义滤波器包括：</p>
<ul class="simple">
<li>BLUR</li>
<li>CONTOUR</li>
<li>DETAIL</li>
<li>EDGE_ENHANCE</li>
<li>EDGE_ENHANCE_MORE</li>
<li>EMBOSS</li>
<li>FIND_EDGES</li>
<li>SMOOTH</li>
</ul>
<p>再看一波源码，如下图所示</p>
<p><img alt="https://img-blog.csdnimg.cn/20190502223542859.png" src="https://img-blog.csdnimg.cn/20190502223542859.png" /></p>
<p>一波代码开干</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">ImageFilter</span>                         <span class="c1">## 调取ImageFilter</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;1.jpg&quot;</span><span class="p">)</span>
<span class="n">blu</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ImageFilter</span><span class="o">.</span><span class="n">BLUR</span><span class="p">)</span>                <span class="c1">##均值滤波</span>
<span class="n">con</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ImageFilter</span><span class="o">.</span><span class="n">CONTOUR</span><span class="p">)</span>             <span class="c1">##找轮廓</span>
<span class="n">edge</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ImageFilter</span><span class="o">.</span><span class="n">FIND_EDGES</span><span class="p">)</span>         <span class="c1">##边缘检测</span>
<span class="n">blu</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;均值滤波.jpg&#39;</span><span class="p">)</span>
<span class="n">con</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;找轮廓.jpg&#39;</span><span class="p">)</span>
<span class="n">edge</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;边缘检测.jpg&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>这是均值滤波.jpg</p>
<p><img alt="https://img-blog.csdnimg.cn/20190502223351590.jpg" src="https://img-blog.csdnimg.cn/20190502223351590.jpg" /></p>
<p>这是找轮廓.jpg</p>
<p><img alt="https://img-blog.csdnimg.cn/20190502223356699.jpg" src="https://img-blog.csdnimg.cn/20190502223356699.jpg" /></p>
<p>这是边缘检测.jpg</p>
<p><img alt="https://img-blog.csdnimg.cn/20190502223400421.jpg" src="https://img-blog.csdnimg.cn/20190502223400421.jpg" /></p>
</div>
<div class="section" id="id194">
<h2>PIL所有操作<a class="headerlink" href="#id194" title="永久链接至标题">¶</a></h2>
<p>原图
<img alt="1.jpg" src="https://img-blog.csdnimg.cn/20190328222744357.jpg" /></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 导入模块</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="c1"># 打开图片</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;1.jpg&#39;</span><span class="p">)</span>
<span class="n">image</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="c1"># 新建图片</span>
<span class="n">newImage</span><span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;RGB&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="s1">&#39;red&#39;</span><span class="p">)</span>
<span class="n">newImage</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;new.jpg&#39;</span><span class="p">)</span>
<span class="c1"># 获得图像尺寸:</span>
<span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">size</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;原本图像大小: </span><span class="si">%s</span><span class="s1">x</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">))</span>
<span class="c1"># 缩放到50%:</span>
<span class="n">image</span><span class="o">.</span><span class="n">thumbnail</span><span class="p">((</span><span class="n">w</span><span class="o">//</span><span class="mi">2</span><span class="p">,</span> <span class="n">h</span><span class="o">//</span><span class="mi">2</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;缩放后图片的大小: </span><span class="si">%s</span><span class="s1">x</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">w</span><span class="o">//</span><span class="mi">2</span><span class="p">,</span> <span class="n">h</span><span class="o">//</span><span class="mi">2</span><span class="p">))</span>
<span class="c1"># 把缩放后的图像用jpeg格式保存:</span>
<span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;2.jpg&#39;</span><span class="p">,</span> <span class="s1">&#39;jpeg&#39;</span><span class="p">)</span>
<span class="c1"># 复制图片</span>
<span class="n">image2</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">image2</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;3.jpg&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>剪切 粘贴，合并图像</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 剪切图片</span>
<span class="c1"># 设置要拷贝的区域</span>
<span class="n">box</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">image3</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span><span class="n">box</span><span class="p">)</span>
<span class="n">image3</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;4.jpg&quot;</span><span class="p">)</span>
<span class="c1"># 这个region可以用来后续的操作(region其实就是一个Image对象)</span>
<span class="n">region</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span><span class="n">box</span><span class="p">)</span>
<span class="c1"># 处理复制的矩形选区并粘贴到原图</span>
<span class="n">region</span> <span class="o">=</span> <span class="n">region</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">Image</span><span class="o">.</span><span class="n">ROTATE_180</span><span class="p">)</span>
<span class="n">image</span><span class="o">.</span><span class="n">paste</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">box</span><span class="p">)</span>
<span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;5.jpg&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>旋转和翻转图像</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 保持原图像不变。逆时针旋转。</span>
<span class="n">image</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;6.jpg&#39;</span><span class="p">)</span>
<span class="c1"># 水平翻转，</span>
<span class="n">image</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">Image</span><span class="o">.</span><span class="n">FLIP_LEFT_RIGHT</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;7.jpg&#39;</span><span class="p">)</span>
<span class="c1"># 垂直翻转</span>
<span class="n">image</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">Image</span><span class="o">.</span><span class="n">FLIP_TOP_BOTTOM</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;8.jpg&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>过滤操作</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">ImageFilter</span>
<span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;1.jpg&#39;</span><span class="p">)</span>
<span class="c1"># 高斯模糊</span>
<span class="n">im</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ImageFilter</span><span class="o">.</span><span class="n">GaussianBlur</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;高斯模糊.jpg&#39;</span><span class="p">)</span>
<span class="c1"># 普通模糊</span>
<span class="n">im</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ImageFilter</span><span class="o">.</span><span class="n">BLUR</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;普通模糊.jpg&#39;</span><span class="p">)</span>
<span class="c1"># 边缘增强</span>
<span class="n">im</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ImageFilter</span><span class="o">.</span><span class="n">EDGE_ENHANCE</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;边缘增强.jpg&#39;</span><span class="p">)</span>
<span class="c1"># 找到边缘</span>
<span class="n">im</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ImageFilter</span><span class="o">.</span><span class="n">FIND_EDGES</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;找到边缘.jpg&#39;</span><span class="p">)</span>
<span class="c1"># 浮雕</span>
<span class="n">im</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ImageFilter</span><span class="o">.</span><span class="n">EMBOSS</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;浮雕.jpg&#39;</span><span class="p">)</span>
<span class="c1"># 轮廓</span>
<span class="n">im</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ImageFilter</span><span class="o">.</span><span class="n">CONTOUR</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;轮廓.jpg&#39;</span><span class="p">)</span>
<span class="c1"># 锐化</span>
<span class="n">im</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ImageFilter</span><span class="o">.</span><span class="n">SHARPEN</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;锐化.jpg&#39;</span><span class="p">)</span>
<span class="c1"># 平滑</span>
<span class="n">im</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ImageFilter</span><span class="o">.</span><span class="n">SMOOTH</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;平滑.jpg&#39;</span><span class="p">)</span>
<span class="c1"># 细节</span>
<span class="n">im</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ImageFilter</span><span class="o">.</span><span class="n">DETAIL</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;细节.jpg&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20190328223500732.jpg" src="https://img-blog.csdnimg.cn/20190328223500732.jpg" /></p>
</div>
</div>
<div class="section" id="pytesser3-pillow">
<h1>34、使用pytesser3 和pillow完成图形验证码的识别<a class="headerlink" href="#pytesser3-pillow" title="永久链接至标题">¶</a></h1>
<p>﻿</p>
<p>&#64;Author: Runsen</p>
<div class="section" id="id195">
<h2>灰度化<a class="headerlink" href="#id195" title="永久链接至标题">¶</a></h2>
<p>像素点是最小的图片单元，一张图片由很多像素点构成，一个像素点的颜色是由RGB三个值来表现的，所以一个像素点对应三个颜色向量矩阵，我们对图像的处理就是对这个像素点的操作。</p>
<p>图片的灰度化，就是让像素点矩阵中的每一个像素点满足 R=G=B，此时这个值叫做灰度值，白色为0，黑色为255
灰度转化一般公式为：</p>
<p><code class="docutils literal notranslate"><span class="pre">R=G=B</span> <span class="pre">=</span> <span class="pre">处理前的</span> <span class="pre">RX0.3</span> <span class="pre">+</span> <span class="pre">GX0.59</span> <span class="pre">+</span> <span class="pre">B*0.11</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PIL</span> <span class="k">import</span> <span class="n">Image</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;code.jpg&#39;</span><span class="p">)</span>
<span class="n">im</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;L&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id196">
<h2>二值化<a class="headerlink" href="#id196" title="永久链接至标题">¶</a></h2>
<p>图像的二值化，就是将图像的像素点矩阵中的每个像素点的灰度值设置为0（黑色）或255（白色），从而实现二值化，将整个图像呈现出明显的只有黑和白的视觉效果。</p>
<p>二值化原理是利用设定的一个阈值来判断图像像素是0还是255， 一般小于阈值的像素点变为0， 大于的变成255</p>
<p>这个临界灰度值就被称为阈值，阈值的设置很重要，阈值过大或过小都会对图片造成损坏</p>
<p>选择阈值的原则是：既要尽可能保存图片信息，又要尽可能减少背景和噪声的干扰</p>
<p>常用阈值选择的方法是：</p>
<ul class="simple">
<li>灰度平局值法： 取127 （0~255的中数， （0+255）/2 = 127）</li>
<li>平均值法：</li>
</ul>
<p>计算像素点矩阵中的所有像素点的灰度值的平均值avg</p>
<ul class="simple">
<li>迭代法：</li>
</ul>
<p>选择一个近似阈值作为估计值的初始值，然后进行分割图像，根据产生的子图像的特征来选取新的阈值，在利用新的阈值分割图像，经过多次循环，使得错误分割的图像像素点降到最小。</p>
</div>
<div class="section" id="id197">
<h2>降噪<a class="headerlink" href="#id197" title="永久链接至标题">¶</a></h2>
<p>经过了二值化处理，整个图片像素就被分为了两个值0和255.</p>
<p>如果一个像素点是图片或者干扰因素的一部分，那么她的灰度值一定是0（黑色），如果一个点是背景，其灰度值应该是255，白色</p>
<p>所以对于孤立的噪点，他的周围应该都是白色，或者大多数点都是白色的，所以在判断的时候条件应该放宽，一个点是黑色并且相邻的点为白色的点的个数大于一个固定的值，那么这个点就是噪点。</p>
<p>我们根据一个点A的RGB值，与周围的8个点的RBG值比较，设定一个值N（0 &lt;N &lt;8），当A的RGB值与周围8个点的RGB相等或者小于N时，此点为噪点</p>
<p>下面是用比较古老的<code class="docutils literal notranslate"><span class="pre">pytesser3</span></code>识别验证码</p>
<p>pytesser3 的安装
<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">pytesser3</span></code></p>
<p>先安装<code class="docutils literal notranslate"><span class="pre">Tesseract</span></code> ，下载好后</p>
<p>将Tesseract.exe 和 <code class="docutils literal notranslate"><span class="pre">testdata</span></code> 复制到 <code class="docutils literal notranslate"><span class="pre">pytesser3</span></code>文件中
<img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/20190331224106775.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDUxMDYxNQ==,size_16,color_FFFFFF,t_70" /></p>
<p>将pytesser3包下面__init__文件内tesseract_exe_name的值设置为为你的tesseract.exe的路径</p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/20190331224114649.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDUxMDYxNQ==,size_16,color_FFFFFF,t_70" />
<img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/20190331224118834.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDUxMDYxNQ==,size_16,color_FFFFFF,t_70" /></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># -*- coding：utf-8 -*-</span>
<span class="c1"># time ：2019/3/30 22:03</span>
<span class="c1"># author: 毛利</span>
<span class="kn">from</span> <span class="nn">pytesser3</span> <span class="kn">import</span> <span class="n">image_to_string</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>

<span class="k">def</span> <span class="nf">binazing</span><span class="p">(</span><span class="n">image</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    对图片进行灰度和二值化</span>
<span class="sd">    :param image:</span>
<span class="sd">    :return:</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;L&#39;</span><span class="p">)</span>
    <span class="n">w</span><span class="p">,</span><span class="n">h</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">size</span>
    <span class="c1"># print(w,h)</span>
    <span class="c1">### 二值化</span>
    <span class="n">pixdata</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">h</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">w</span><span class="p">):</span>

            <span class="k">if</span> <span class="n">pixdata</span><span class="p">[</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">170</span><span class="p">:</span>
                <span class="n">pixdata</span><span class="p">[</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">255</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">pixdata</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">return</span> <span class="n">image</span>

<span class="k">def</span> <span class="nf">depoint</span><span class="p">(</span><span class="n">image</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    对图片进行降噪</span>
<span class="sd">    :param image:</span>
<span class="sd">    :return:</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">pixdata</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
    <span class="n">w</span><span class="p">,</span><span class="n">h</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">size</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">h</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">w</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">if</span> <span class="n">pixdata</span><span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span><span class="mi">245</span><span class="p">:</span>
                <span class="n">count</span> <span class="o">=</span><span class="n">count</span> <span class="o">+</span><span class="mi">1</span>
            <span class="k">if</span> <span class="n">pixdata</span><span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span><span class="mi">245</span><span class="p">:</span>
                <span class="n">count</span> <span class="o">=</span><span class="n">count</span> <span class="o">+</span><span class="mi">1</span>
            <span class="k">if</span> <span class="n">pixdata</span><span class="p">[</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;</span><span class="mi">245</span><span class="p">:</span>
                <span class="n">count</span> <span class="o">=</span><span class="n">count</span> <span class="o">+</span><span class="mi">1</span>
            <span class="k">if</span> <span class="n">pixdata</span><span class="p">[</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;</span><span class="mi">245</span><span class="p">:</span>
                <span class="n">count</span> <span class="o">=</span><span class="n">count</span> <span class="o">+</span><span class="mi">1</span>
            <span class="k">if</span> <span class="n">pixdata</span><span class="p">[</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">245</span><span class="p">:</span>
                <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">pixdata</span><span class="p">[</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">245</span><span class="p">:</span>
                <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">pixdata</span><span class="p">[</span><span class="n">x</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">245</span><span class="p">:</span>
                <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">pixdata</span><span class="p">[</span><span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">245</span><span class="p">:</span>
                <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">count</span><span class="o">&gt;</span><span class="mi">4</span><span class="p">:</span>
                <span class="n">pixdata</span><span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span><span class="mi">255</span>
    <span class="k">return</span> <span class="n">image</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;111.jpg&#39;</span><span class="p">)</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">binazing</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">depoint</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
    <span class="n">image</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">image_to_string</span><span class="p">(</span><span class="n">image</span><span class="p">))</span>

<span class="c1">####输出结果#####</span>
<span class="n">TBQL</span>
</pre></div>
</div>
<p>这是111.jpg</p>
<p><img alt="https://imgconvert.csdnimg.cn/aHR0cDovL3B3ZmdtOWZqby5ia3QuY2xvdWRkbi5jb20vRmotSXZrRE9oTWJkcm9GRy1oT1RET2dCRG1zWg?x-oss-process=image/format,png" src="https://imgconvert.csdnimg.cn/aHR0cDovL3B3ZmdtOWZqby5ia3QuY2xvdWRkbi5jb20vRmotSXZrRE9oTWJkcm9GRy1oT1RET2dCRG1zWg?x-oss-process=image/format,png" /></p>
</div>
</div>
<div class="section" id="pythonwindowpyinstaller">
<h1>35、Python在window平台打包工具pyinstaller<a class="headerlink" href="#pythonwindowpyinstaller" title="永久链接至标题">¶</a></h1>
<p>﻿Java 一次编译到处运行，Python没有这么好本事，但是也有一个pyinstaller可以打包exe，在window平台下运行</p>
<div class="section" id="pyinstaller">
<h2>pyinstaller<a class="headerlink" href="#pyinstaller" title="永久链接至标题">¶</a></h2>
<p>安装<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">pyinstaller</span></code>，参数如下</p>
<p>| 参数          | 含 义                                 |
| ————- | ————————————- |
| -F            | 只生成一个exe文件                     |
| –distpath     | 指定生成的exe存放的目录               |
| –workpath     | 指定编译中临时文件存放的目录          |
| -i            | 创建一个目录包含：exe文件、依赖文件   |
| -F            | 指定exe图标                           |
| -p            | 指定exe依赖的包、模块                 |
| -d            | 编译为debug模式，获取运行中的日志信息 |
| -clean        | 清理编译时临时文件                    |
| -c            | 使用控制台                            |
| -w            | 使用窗口                              |
| -version-file | 添加exe版本信息                       |</p>
</div>
<div class="section" id="id198">
<h2>计算机小助手例子<a class="headerlink" href="#id198" title="永久链接至标题">¶</a></h2>
<p>在我桌面有demo8.py文件，psutil这个标准库是计算计算机的性能的。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># -*- coding：utf-8 -*-</span>
<span class="c1"># time ：2019/3/28 22:44</span>
<span class="c1"># author: Runsen</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;欢迎您,我是您的计算机小助手&#39;</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">psutil</span> <span class="kn">as</span> <span class="nn">ps</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;本机开机的时间是:{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S&#39;</span><span class="p">,</span><span class="n">time</span><span class="o">.</span><span class="n">localtime</span><span class="p">(</span><span class="n">ps</span><span class="o">.</span><span class="n">boot_time</span><span class="p">()))))</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;-------------------------&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;CPU部分&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;-------------------------&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;本机物理CPU个数:{}个&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ps</span><span class="o">.</span><span class="n">cpu_count</span><span class="p">()))</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;本机逻辑CPU个数:{}个&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ps</span><span class="o">.</span><span class="n">cpu_count</span><span class="p">(</span><span class="n">logical</span><span class="o">=</span><span class="bp">False</span><span class="p">)))</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;-------------------------&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;内容部分&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;-------------------------&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;本机内存大小为:{}个字节&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ps</span><span class="o">.</span><span class="n">virtual_memory</span><span class="p">()</span><span class="o">.</span><span class="n">total</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;本机已用内存大小为:{}个字节&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ps</span><span class="o">.</span><span class="n">virtual_memory</span><span class="p">()</span><span class="o">.</span><span class="n">used</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;本机已用内存大小占比为:{}%&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ps</span><span class="o">.</span><span class="n">virtual_memory</span><span class="p">()</span><span class="o">.</span><span class="n">percent</span><span class="p">))</span>
<span class="nb">input</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="id199">
<h2>注意点：<a class="headerlink" href="#id199" title="永久链接至标题">¶</a></h2>
<p>一定要在代码最后面加上<code class="docutils literal notranslate"><span class="pre">input()</span></code>,这样打开exe不会一散而过，</p>
<p><img alt="https://img-blog.csdnimg.cn/20190328231100468.png" src="https://img-blog.csdnimg.cn/20190328231100468.png" /></p>
<p>cd 到代码的目录执行 <code class="docutils literal notranslate"><span class="pre">pyinstaller</span> <span class="pre">-F</span> <span class="pre">demo8.py</span></code></p>
<p>这样就会生成日记等文件</p>
<p><img alt="https://img-blog.csdnimg.cn/20190328231232777.jpg" src="https://img-blog.csdnimg.cn/20190328231232777.jpg" /></p>
<p>我们找到exe</p>
<p><img alt="https://img-blog.csdnimg.cn/20190328231312320.jpg" src="https://img-blog.csdnimg.cn/20190328231312320.jpg" /></p>
<p>双击打开它，这样就显示出电脑的内存占用，说明下电脑的内存和你下载的东西无关，就是看你打开了多少网页和程序。</p>
<p><img alt="https://img-blog.csdnimg.cn/20190328231336607.jpg" src="https://img-blog.csdnimg.cn/20190328231336607.jpg" /></p>
<p>和jar包比起来就是给人家完爆的感觉。</p>
</div>
</div>
<div class="section" id="tkinter">
<h1>36、上篇 | 教你玩转tkinter窗口<a class="headerlink" href="#tkinter" title="永久链接至标题">¶</a></h1>
<p>现在极少有人会用上tkinter了，所以真正研究的人也就更少了，还是学下tkinter吧，其实这个东西真他妈简单。</p>
<p>tkinter 是内置的模块，无需安装</p>
<div class="section" id="id200">
<h2>窗口主体框架<a class="headerlink" href="#id200" title="永久链接至标题">¶</a></h2>
<p>每一个 tkinter 应用的主体框架都可以包含下面这部分. 定义 window 窗口 和 window的一些属性, 然后书写窗口内容, 最后执行window.mainloop让窗口活起来.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">tkinter</span> <span class="kn">as</span> <span class="nn">tk</span>
<span class="n">window</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
<span class="n">window</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;my window&#39;</span><span class="p">)</span>
<span class="n">window</span><span class="o">.</span><span class="n">geometry</span><span class="p">(</span><span class="s1">&#39;200x100&#39;</span><span class="p">)</span>

<span class="c1"># 这里是窗口的内容</span>
<span class="n">window</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200516171208131.png" src="https://img-blog.csdnimg.cn/20200516171208131.png" /></p>
</div>
<div class="section" id="id201">
<h2>窗口内容<a class="headerlink" href="#id201" title="永久链接至标题">¶</a></h2>
<p>这次我们会建立一个用来描述的标签 tk.Label, 比如:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">tkinter</span> <span class="kn">as</span> <span class="nn">tk</span>
<span class="n">window</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
<span class="n">window</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;my window&#39;</span><span class="p">)</span>
<span class="n">window</span><span class="o">.</span><span class="n">geometry</span><span class="p">(</span><span class="s1">&#39;200x100&#39;</span><span class="p">)</span>



<span class="n">l</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">window</span><span class="p">,</span> 
    <span class="n">text</span><span class="o">=</span><span class="s1">&#39;OMG! this is TK!&#39;</span><span class="p">,</span>    <span class="c1"># 标签的文字</span>
    <span class="n">bg</span><span class="o">=</span><span class="s1">&#39;green&#39;</span><span class="p">,</span>     <span class="c1"># 背景颜色</span>
    <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Arial&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span>     <span class="c1"># 字体和字体大小</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">2</span>  <span class="c1"># 标签长宽</span>
    <span class="p">)</span>
<span class="n">l</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>    <span class="c1"># 固定窗口位置</span>

<span class="n">window</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200516171306182.png" src="https://img-blog.csdnimg.cn/20200516171306182.png" /></p>
</div>
<div class="section" id="id202">
<h2>控件<a class="headerlink" href="#id202" title="永久链接至标题">¶</a></h2>
<p>上面的Label就是一个控件，还有很多的，如按钮，标签和文本框等，如下图所示</p>
<p><img alt="https://img-blog.csdnimg.cn/20200516171415379.png" src="https://img-blog.csdnimg.cn/20200516171415379.png" /></p>
<p>控件自带的共同属性，如大小，字体和颜色等。可根据控件展现形式选择相应的属性，具体属性如下表：</p>
<p><img alt="https://img-blog.csdnimg.cn/20200516171433691.png" src="https://img-blog.csdnimg.cn/20200516171433691.png" /></p>
</div>
<div class="section" id="id203">
<h2>tkinter绑定事件<a class="headerlink" href="#id203" title="永久链接至标题">¶</a></h2>
<p>tkinter绑定事件，就是定义一个函数，然后通过command属性传入函数名，下面通过Button绑定事件，点击就出现Runsen爱学习</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span>from tkinter import *

def p_label():
    global root
    Lb = Label(root, text=&#39;Runsen爱学习&#39;)
    Lb.pack()

root = Tk()
root.title(&quot;应用程序窗口&quot;)
B_n = Button(root, text=&#39;点我&#39;, command=p_label, bg=&#39;red&#39;)  # command后面不能有任何的标点符号
B_n.pack()
root.mainloop()
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200516171815987.png" src="https://img-blog.csdnimg.cn/20200516171815987.png" /></p>
</div>
<div class="section" id="id204">
<h2>布局显示<a class="headerlink" href="#id204" title="永久链接至标题">¶</a></h2>
<p>一个窗口都应该有布局，就是pack的时候需要设置side，expand需要扩展吗，fill需要填充吗</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">from</span> <span class="nt">tkinter</span> <span class="nt">import</span> <span class="o">*</span>
<span class="nt">root</span> <span class="o">=</span> <span class="nt">Tk</span><span class="o">()</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">title</span><span class="o">(</span><span class="s2">&quot;应用程序窗口&quot;</span><span class="o">)</span>
<span class="nt">Button</span><span class="o">(</span><span class="nt">root</span><span class="o">,</span><span class="nt">text</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">pack</span><span class="o">(</span><span class="nt">side</span><span class="o">=</span><span class="nt">LEFT</span><span class="o">,</span><span class="nt">expand</span><span class="o">=</span><span class="nt">YES</span><span class="o">,</span><span class="nt">fill</span><span class="o">=</span><span class="nt">Y</span><span class="o">)</span>
<span class="nt">Button</span><span class="o">(</span><span class="nt">root</span><span class="o">,</span><span class="nt">text</span><span class="o">=</span><span class="s1">&#39;2&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">pack</span><span class="o">(</span><span class="nt">side</span><span class="o">=</span><span class="nt">TOP</span><span class="o">,</span><span class="nt">expand</span><span class="o">=</span><span class="nt">YES</span><span class="o">,</span><span class="nt">fill</span><span class="o">=</span><span class="nt">BOTH</span><span class="o">)</span>
<span class="nt">Button</span><span class="o">(</span><span class="nt">root</span><span class="o">,</span><span class="nt">text</span><span class="o">=</span><span class="s1">&#39;3&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">pack</span><span class="o">(</span><span class="nt">side</span><span class="o">=</span><span class="nt">RIGHT</span><span class="o">,</span><span class="nt">expand</span><span class="o">=</span><span class="nt">YES</span><span class="o">,</span><span class="nt">fill</span><span class="o">=</span><span class="nt">NONE</span><span class="o">)</span>
<span class="nt">Button</span><span class="o">(</span><span class="nt">root</span><span class="o">,</span><span class="nt">text</span><span class="o">=</span><span class="s1">&#39;4&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">pack</span><span class="o">(</span><span class="nt">side</span><span class="o">=</span><span class="nt">LEFT</span><span class="o">,</span><span class="nt">expand</span><span class="o">=</span><span class="nt">NO</span><span class="o">,</span><span class="nt">fill</span><span class="o">=</span><span class="nt">Y</span><span class="o">)</span>
<span class="nt">Button</span><span class="o">(</span><span class="nt">root</span><span class="o">,</span><span class="nt">text</span><span class="o">=</span><span class="s1">&#39;5&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">pack</span><span class="o">(</span><span class="nt">side</span><span class="o">=</span><span class="nt">TOP</span><span class="o">,</span><span class="nt">expand</span><span class="o">=</span><span class="nt">YES</span><span class="o">,</span><span class="nt">fill</span><span class="o">=</span><span class="nt">BOTH</span><span class="o">)</span>
<span class="nt">Button</span><span class="o">(</span><span class="nt">root</span><span class="o">,</span><span class="nt">text</span><span class="o">=</span><span class="s1">&#39;6&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">pack</span><span class="o">(</span><span class="nt">side</span><span class="o">=</span><span class="nt">BOTTOM</span><span class="o">,</span><span class="nt">expand</span><span class="o">=</span><span class="nt">YES</span><span class="o">)</span>
<span class="nt">Button</span><span class="o">(</span><span class="nt">root</span><span class="o">,</span><span class="nt">text</span><span class="o">=</span><span class="s1">&#39;7&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">pack</span><span class="o">(</span><span class="nt">anchor</span><span class="o">=</span><span class="nt">SE</span><span class="o">)</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">mainloop</span><span class="o">()</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200516172055242.png" src="https://img-blog.csdnimg.cn/20200516172055242.png" /></p>
<p>除了pack还有一个grid，grid将组件布局为表格</p>
<p>下面做一个电话拨号盘GUI</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span>from tkinter import *
root = Tk()
labels = [[&#39;1&#39;,&#39;2&#39;,&#39;3&#39;], # 文本，布局为网格
          [&#39;4&#39;,&#39;5&#39;,&#39;6&#39;],
          [&#39;7&#39;,&#39;8&#39;,&#39;9&#39;],
          [&#39;*&#39;,&#39;0&#39;,&#39;#&#39;]]

for r in range(4): # 行循环
    for c in range(3): # 列循环
        label = Label(root,
                      relief=RAISED, # 设置边框格式
                      padx=10, # 加宽标签
                      text=labels[r][c]) # 标签文本
        label.grid(row=r, column=c) # 将标签放置在r行c列
root.mainloop()
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200516172458594.png" src="https://img-blog.csdnimg.cn/20200516172458594.png" /></p>
</div>
<div class="section" id="id205">
<h2>制作一个日历<a class="headerlink" href="#id205" title="永久链接至标题">¶</a></h2>
<p>上面教你做一个电话拨号盘GUI，下面能做一个简单的日历吗？</p>
<p>我看你就不会，不是我瞧不起你</p>
<p><img alt="https://img-blog.csdnimg.cn/20200516173244403.png" src="https://img-blog.csdnimg.cn/20200516173244403.png" /></p>
<p>放心，有我这个大佬在。这需要导入calendar模块了，</p>
<p><img alt="https://img-blog.csdnimg.cn/20200516173605591.png" src="https://img-blog.csdnimg.cn/20200516173605591.png" /></p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">import</span> <span class="nt">calendar</span>
<span class="nt">from</span> <span class="nt">tkinter</span> <span class="nt">import</span> <span class="o">*</span>
<span class="nt">root</span> <span class="o">=</span> <span class="nt">Tk</span><span class="o">()</span>
<span class="nt">labels</span> <span class="o">=</span> <span class="o">[[</span><span class="s1">&#39;Mon&#39;</span><span class="o">,</span><span class="s1">&#39;Tue&#39;</span><span class="o">,</span><span class="s1">&#39;Wed&#39;</span><span class="o">,</span><span class="s1">&#39;Thu&#39;</span><span class="o">,</span><span class="s1">&#39;Fri&#39;</span><span class="o">,</span><span class="s1">&#39;Sat&#39;</span><span class="o">,</span><span class="s1">&#39;Sun&#39;</span><span class="o">]]</span>

<span class="nt">MonthCal</span> <span class="o">=</span> <span class="nt">calendar</span><span class="p">.</span><span class="nc">monthcalendar</span><span class="o">(</span><span class="nt">2020</span><span class="o">,</span> <span class="nt">5</span><span class="o">)</span> 
<span class="nt">for</span> <span class="nt">i</span> <span class="nt">in</span> <span class="nt">range</span><span class="o">(</span><span class="nt">len</span><span class="o">(</span><span class="nt">MonthCal</span><span class="o">)):</span>
    <span class="nt">labels</span><span class="p">.</span><span class="nc">append</span><span class="o">(</span><span class="nt">MonthCal</span><span class="o">[</span><span class="nt">i</span><span class="o">])</span>
<span class="nt">for</span> <span class="nt">r</span> <span class="nt">in</span> <span class="nt">range</span><span class="o">(</span><span class="nt">len</span><span class="o">(</span><span class="nt">MonthCal</span><span class="o">)+</span><span class="nt">1</span><span class="o">):</span>
    <span class="nt">for</span> <span class="nt">c</span> <span class="nt">in</span> <span class="nt">range</span><span class="o">(</span><span class="nt">7</span><span class="o">):</span>
        <span class="nt">if</span> <span class="nt">labels</span><span class="o">[</span><span class="nt">r</span><span class="o">][</span><span class="nt">c</span><span class="o">]</span> <span class="o">==</span> <span class="nt">0</span><span class="o">:</span>
            <span class="nt">labels</span><span class="o">[</span><span class="nt">r</span><span class="o">][</span><span class="nt">c</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span>
        <span class="nt">label</span> <span class="o">=</span> <span class="nt">Label</span><span class="o">(</span><span class="nt">root</span><span class="o">,</span>          
                      <span class="nt">padx</span><span class="o">=</span><span class="nt">5</span><span class="o">,</span>
                      <span class="nt">pady</span><span class="o">=</span><span class="nt">5</span><span class="o">,</span>
                      <span class="nt">text</span><span class="o">=</span><span class="nt">str</span><span class="o">(</span><span class="nt">labels</span><span class="o">[</span><span class="nt">r</span><span class="o">][</span><span class="nt">c</span><span class="o">]))</span>        
        <span class="nt">label</span><span class="p">.</span><span class="nc">grid</span><span class="o">(</span><span class="nt">row</span><span class="o">=</span><span class="nt">r</span><span class="o">,</span><span class="nt">column</span><span class="o">=</span><span class="nt">c</span><span class="o">)</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">mainloop</span><span class="o">()</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200516173714374.png" src="https://img-blog.csdnimg.cn/20200516173714374.png" /></p>
</div>
<div class="section" id="id206">
<h2>丰富我们的日历<a class="headerlink" href="#id206" title="永久链接至标题">¶</a></h2>
<p>上面的日历就是一个辣鸡，啥功能都没有，需求很简单，就是来两个按钮实现向上翻，向下翻。</p>
<p>向上翻，向下翻两个按钮就需要清空界面，再把日历加到labels列表中  ，放置日历。好像很简单，其实就是这么简单。</p>
<p>大家想一想，怎么做出来。</p>
<p>我还是给标准实现代码</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span>#@Author： Runsen
import calendar 
from tkinter import *
root = Tk()


def LabelCal(Year, Month):
    # 首行放置“年、月”的位置
    label = Label(root,text=str(Year)+&quot;年&quot;)
    label.grid(row=0,column=2)
    label = Label(root,text=str(Month)+&quot;月&quot;)
    label.grid(row=0,column=4)
    # labels列表：放置“星期”的标题
    labels = [[&#39;Mon&#39;,&#39;Tue&#39;,&#39;Wed&#39;,&#39;Thu&#39;,&#39;Fri&#39;,&#39;Sat&#39;,&#39;Sun&#39;]]
    # 用calendar库计算日历
    MonthCal = calendar.monthcalendar(Year, Month)
    # 先把界面清空
    for r in range(7):
        for c in range(7):            
            label = Label(root,
                          width =5,
                          padx=5,
                          pady=5,
                          text=&#39; &#39;)        
            label.grid(row=r+1,column=c)
    # 把日历加到labels列表中     
    for i in range(len(MonthCal)):
        labels.append(MonthCal[i])
    # 放置日历
    for r in range(len(MonthCal)+1):
        for c in range(7):
            if labels[r][c] == 0:
                labels[r][c] = &#39; &#39;
            label = Label(root,
                          width =5,
                          padx=5,
                          pady=5,
                          text=str(labels[r][c]))        
            label.grid(row=r+1,column=c) # 网格布局


# 默认日期
Year, Month = 2020,5
LabelCal(Year, Month)
        
# button：Enter
def ButtonPrevious():
    global Year, Month
    Month = Month-1
    if Month&lt;1:
        Month = Month+12
        Year = Year-1
    LabelCal(Year, Month)
    
button1 = Button(root, text=&#39;Previous&#39;, command=ButtonPrevious)
button1.grid(row=len(MonthCal)+3, column=0)


# button：Clear
def ButtonNext():
    global Year, Month
    Month = Month+1
    if Month&gt;12:
        Month = Month-12
        Year = Year+1 
    LabelCal(Year, Month)
    
button2 = Button(root, text=&#39;Next&#39;, command=ButtonNext)
button2.grid(row=len(MonthCal)+3, column=6)

root.mainloop()
</pre></div>
</div>
<p>运行一波，来一个gif图</p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/2020051617494865.gif" /></p>
</div>
</div>
<div class="section" id="id207">
<h1>37、下篇 | tkinter实现一个翻译软件<a class="headerlink" href="#id207" title="永久链接至标题">¶</a></h1>
<p>&#64;Author : Runsen</p>
<p>下面使用 tkinter实现一个翻译软件，我们用的有道云翻译</p>
<p>我先试下把访问的url搞出来
<img alt="https://img-blog.csdnimg.cn/2020051618303574.png" src="https://img-blog.csdnimg.cn/2020051618303574.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20200516183545919.png" src="https://img-blog.csdnimg.cn/20200516183545919.png" />
你可以查看这些参数，都是请求的参数，这需要进一步找的，不是我不会，是我写过，看下面的文章</p>
<p><a class="reference external" href="https://maoli.blog.csdn.net/article/details/103609133">JS逆向有道云翻译</a></p>
<p>有道翻译的网址原本不是代码中所展现的，但是这个是有道最原始的<code class="docutils literal notranslate"><span class="pre">url</span> <span class="pre">=</span> <span class="pre">'http://fanyi.youdao.com/translate?smartresult=dict&amp;smartresult=rule'</span></code></p>
<p>现在的url估计是担心别人爬的多，所以就加了一些不必要的参数。因为是零基础专栏，就用最原始的url。</p>
<p>给出代码吧</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># -*- coding：utf-8 -*-</span>
<span class="c1"># time ：2019/5/2 23:44</span>
<span class="c1"># author: 毛利</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="n">messagebox</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="k">def</span> <span class="nf">translation</span><span class="p">():</span>

    <span class="c1"># 接受用户的信息</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">content</span> <span class="o">==</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">messagebox</span><span class="o">.</span><span class="n">showinfo</span><span class="p">(</span><span class="s1">&#39;提示&#39;</span><span class="p">,</span><span class="s1">&#39;请输入要翻译的内容&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># url = &#39;http://fanyi.youdao.com/translate_o?smartresult=dict&amp;smartresult=rule&#39;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://fanyi.youdao.com/translate?smartresult=dict&amp;smartresult=rule&#39;</span>
        <span class="n">data</span>  <span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;i&#39;</span><span class="p">:</span><span class="n">content</span><span class="p">,</span>
            <span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;AUTO&#39;</span><span class="p">,</span>
            <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;AUTO&#39;</span><span class="p">,</span>
            <span class="s1">&#39;smartresult&#39;</span><span class="p">:</span> <span class="s1">&#39;dict&#39;</span><span class="p">,</span>
            <span class="s1">&#39;client&#39;</span><span class="p">:</span> <span class="s1">&#39;fanyideskweb&#39;</span><span class="p">,</span>
            <span class="c1"># 时间戳  14位</span>
            <span class="c1"># &#39;salt&#39;: &#39;15568459610827&#39;,</span>
            <span class="c1"># &#39;sign&#39;: &#39;9494fda01d62399b1a3476280a82c990&#39;,</span>
            <span class="c1"># 时间戳13位</span>
            <span class="c1"># &#39;ts&#39;: &#39;1556845961082&#39;,</span>
            <span class="c1"># &#39;bv&#39;: &#39;d6c3cd962e29b66abe48fcb8f4dd7f7d&#39;,</span>
            <span class="s1">&#39;doctype&#39;</span><span class="p">:</span> <span class="s1">&#39;json&#39;</span><span class="p">,</span>
            <span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="s1">&#39;2.1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;keyfrom&#39;</span><span class="p">:</span> <span class="s1">&#39;fanyi.web&#39;</span><span class="p">,</span>
            <span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="s1">&#39;FY_BY_REALTlME&#39;</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">data</span><span class="p">)</span>
        <span class="n">tarn</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;translateResult&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;tgt&#39;</span><span class="p">]</span>
        <span class="n">res</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">tarn</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">tarn</span><span class="p">)</span>



<span class="c1"># 创建窗口</span>
<span class="n">root</span> <span class="o">=</span> <span class="n">Tk</span><span class="p">()</span>

<span class="c1"># 窗口标题</span>

<span class="n">root</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;翻译软件&#39;</span><span class="p">)</span>

<span class="c1"># 窗口大小 小写的x 不是370*100</span>
<span class="n">root</span><span class="o">.</span><span class="n">geometry</span><span class="p">(</span><span class="s1">&#39;370x100&#39;</span><span class="p">)</span>
<span class="c1"># 窗口位置</span>
<span class="n">root</span><span class="o">.</span><span class="n">geometry</span><span class="p">(</span><span class="s1">&#39;+500+300&#39;</span><span class="p">)</span>
<span class="c1"># root.geometry(&#39;300x100+500+300&#39;)</span>

<span class="c1"># 标签控件 font = (&#39;微软雅黑&#39;,12)</span>
<span class="n">label</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">root</span><span class="p">,</span><span class="n">text</span> <span class="o">=</span><span class="s1">&#39;输入要翻译的文字&#39;</span><span class="p">)</span>

<span class="c1"># 定位  pack 包  place 位置</span>
<span class="n">label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">column</span> <span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="c1"># fg = &#39;red&#39; 字体颜色</span>
<span class="n">label1</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">root</span><span class="p">,</span><span class="n">text</span> <span class="o">=</span><span class="s1">&#39;翻译之后的结果:&#39;</span><span class="p">)</span>
<span class="n">label1</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span> <span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">column</span><span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="c1"># 输入控件</span>
<span class="n">entry</span> <span class="o">=</span> <span class="n">Entry</span><span class="p">(</span><span class="n">root</span><span class="p">,</span><span class="n">font</span> <span class="o">=</span><span class="p">(</span><span class="s1">&#39;微软雅黑&#39;</span><span class="p">,</span><span class="mi">15</span><span class="p">))</span>
<span class="n">entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">column</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="c1"># 翻译之后的结果</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">StringVar</span><span class="p">()</span>
<span class="n">entry1</span> <span class="o">=</span> <span class="n">Entry</span><span class="p">(</span><span class="n">root</span><span class="p">,</span><span class="n">font</span> <span class="o">=</span><span class="p">(</span><span class="s1">&#39;微软雅黑&#39;</span><span class="p">,</span><span class="mi">15</span><span class="p">),</span><span class="n">textvariable</span><span class="o">=</span><span class="n">res</span><span class="p">)</span>
<span class="n">entry1</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">column</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1"># 点击按钮</span>

<span class="n">button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">root</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;翻译&quot;</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">command</span> <span class="o">=</span> <span class="n">translation</span><span class="p">)</span>
<span class="c1"># sticky 对齐方式 N S E W</span>
<span class="n">button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">sticky</span><span class="o">=</span><span class="n">W</span><span class="p">)</span>

<span class="n">button1</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">root</span><span class="p">,</span><span class="n">text</span>  <span class="o">=</span><span class="s1">&#39;退出&#39;</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">command</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">quit</span><span class="p">)</span>
<span class="n">button1</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">column</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span><span class="n">sticky</span><span class="o">=</span><span class="n">E</span> <span class="p">)</span>
<span class="c1"># 消息循环</span>
<span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</pre></div>
</div>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/2019050310370113.png" /></p>
<p>打包 ptyinstaller -F demo.py</p>
</div>
<div class="section" id="id208">
<h1>38、练习、Python<strong>判断一个信用卡号是否合理</strong><a class="headerlink" href="#id208" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author: Runsen</p>
<p>这个一个编程题</p>
<p>一个信用卡号必须是13到16位的整数</p>
<p>1954年，IBM的Hans Luhn提出一种算法，用于验证信用卡号的有效性。</p>
<p>这个算法在确定输入的卡号是否正确，或者这张信用卡是否被扫描仪正确扫描方面是非常有用的。</p>
<ul class="simple">
<li><strong>4，指Visa信用卡</strong></li>
<li><strong>5，指Master万事达卡</strong></li>
<li><strong>37，指American Express 国际信用卡</strong></li>
<li><strong>6，指Discover 信用卡</strong></li>
</ul>
<p>遵循这个合法性检测可以生成所有的信用卡号，通常称之为Luhn检测或者Mod 10检测，可以如下描述（为了方便解释，假设卡号4388576018402626：</p>
<p>1.从右到左对偶数位数字翻倍。如果对某个数字翻倍之后的结果是一个两位数，那么就将这两位加在一起得到一位数。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200330100745345.png" src="https://img-blog.csdnimg.cn/20200330100745345.png" /></p>
<p>2.现在将第一步得到的所有一位数相加。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200330100753832.png" src="https://img-blog.csdnimg.cn/20200330100753832.png" /></p>
<p>3.将卡号里从右到左奇数位上的所有数字相加。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200330100806932.png" src="https://img-blog.csdnimg.cn/20200330100806932.png" /></p>
<p>4.将第二步和第三步得到的结果相加。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200330100818162.png" src="https://img-blog.csdnimg.cn/20200330100818162.png" /></p>
<p>5.如果第四步得到的结果能被10整除，那么卡号是合法的；否则，卡号是不合法的。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200330100831819.png" src="https://img-blog.csdnimg.cn/20200330100831819.png" /></p>
<p>例如，号码4388576018402626是不合法的，但是号码4388576018410707是合法的。
编写程序，提示用户输入一个long型整数的信用卡号码，显示这个数字是合法的还是非法的</p>
<p><img alt="https://img-blog.csdnimg.cn/20200330100841306.png" src="https://img-blog.csdnimg.cn/20200330100841306.png" /></p>
<div class="section" id="id209">
<h2>代码<a class="headerlink" href="#id209" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>def isValid(number):
    # 判断是不是合法，就是计算出第四步的结果，如果整除就是合法，我们取模就可以了
    if sumOf0ddPlace(number) % 10 == 0:
    	print(&quot;信用卡号的合法&quot;)
    else:
    	print(&quot;信用卡号的不合法&quot;)

def sumOfDoubleEvenPlace(number):
	# 现在将第一步得到的所有一位数相加。这里的number传入的是int类型
	sum = 0 
	for i in str(number)[::2]:
		if int(i)*2 &lt;10:
			sum = sum + int(i)*2
		else:
			for j in str(int(i)*2):
				sum = sum + int(j)
	return sum 

def getDigit(number):
	return sum([int(i) for i in str(number)[1::2]])

def sumOf0ddPlace(number):
	return sumOfDoubleEvenPlace(number) + getDigit(number)



number = input(&quot;用户输入一个的信用卡号码，必须是13到16位的整数&quot;)
isValid(number)

# 验证
用户输入一个的信用卡号码，必须是13到16位的整数4388576018402626
信用卡号的不合法
用户输入一个的信用卡号码，必须是13到16位的整数4388576018410707
信用卡号的合法
</pre></div>
</div>
</div>
<div class="section" id="id210">
<h2>补充<a class="headerlink" href="#id210" title="永久链接至标题">¶</a></h2>
<p>添加  prefixMatched，判断卡号的前缀是否合法。</p>
<p>4，指visa卡
5，指master卡
37，指American Express卡
6，指Discovery卡</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">def</span> <span class="nt">prefixMatched</span><span class="o">(</span><span class="nt">number</span><span class="o">):</span>
    <span class="nt">if</span> <span class="nt">number</span><span class="o">[</span><span class="nt">0</span><span class="o">]</span> <span class="o">==</span> <span class="s1">&#39;4&#39;</span> <span class="nt">or</span> <span class="nt">number</span><span class="o">[</span><span class="nt">0</span><span class="o">]</span> <span class="o">==</span> <span class="s1">&#39;5&#39;</span> <span class="nt">or</span> <span class="nt">number</span><span class="o">[</span><span class="nt">0</span><span class="o">]</span> <span class="o">==</span> <span class="s1">&#39;37&#39;</span><span class="o">:</span>
        <span class="nt">print</span><span class="o">(</span><span class="s2">&quot;信用卡前缀的合法&quot;</span><span class="o">)</span>
    <span class="nt">elif</span> <span class="nt">number</span><span class="o">[</span><span class="p">:</span><span class="nd">2</span><span class="o">]</span> <span class="o">==</span> <span class="s1">&#39;37&#39;</span><span class="o">:</span>
        <span class="nt">print</span><span class="o">(</span><span class="s2">&quot;信用卡前缀的合法&quot;</span><span class="o">)</span>
    <span class="nt">else</span><span class="o">:</span>
        <span class="nt">print</span><span class="o">(</span><span class="s2">&quot;信用卡前缀的不合法&quot;</span><span class="o">)</span>
</pre></div>
</div>
<p>函数6：def getSize(d):   获得信用卡号的长度并将结果返回</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">def</span> <span class="nt">getSize</span><span class="o">(</span><span class="nt">d</span><span class="o">):</span>
    <span class="nt">return</span> <span class="nt">number</span><span class="o">[</span><span class="p">:</span><span class="nd">d</span><span class="o">]</span>
</pre></div>
</div>
<p>函数7：def getPrefix(number, k): 获得信用卡号的第k位’’’</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">def</span> <span class="nt">getPrefix</span><span class="o">(</span><span class="nt">number</span><span class="o">,</span> <span class="nt">k</span><span class="o">):</span>
    <span class="nt">return</span> <span class="nt">number</span><span class="o">[</span><span class="nt">k</span><span class="o">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id211">
<h1>39、Python对象的深浅拷贝，练习冒泡排序<a class="headerlink" href="#id211" title="永久链接至标题">¶</a></h1>
<p>&#64;Author：By Runsen</p>
<div class="section" id="id212">
<h2>对象的深浅拷贝<a class="headerlink" href="#id212" title="永久链接至标题">¶</a></h2>
<p>在Python有个重要的东西，就是对象的深浅拷贝。</p>
<p>我们就称为：’==’ vs ‘is’</p>
<ul class="simple">
<li>== 比较对象之间的值是否相等</li>
<li>is 比较的是对象身份是否相等，它们是否同一个对象</li>
</ul>
<p>我们一般通过id来是否相等来判断是否同一个对象</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">10</span>

<span class="n">a</span> <span class="o">==</span> <span class="n">b</span>
<span class="bp">True</span>

<span class="nb">id</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="mi">4427562448</span>

<span class="nb">id</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="mi">4427562448</span>

<span class="n">a</span> <span class="ow">is</span> <span class="n">b</span>
<span class="bp">True</span>
</pre></div>
</div>
<p>注意a is b == True 只适合和用于-5 到256之间，这个不知道你是否知道，我觉得面试官肯定不知道。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="mi">257</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">257</span>

<span class="n">a</span> <span class="o">==</span> <span class="n">b</span>
<span class="bp">True</span>

<span class="nb">id</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="mi">4473417552</span>

<span class="nb">id</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="mi">4473417584</span>

<span class="n">a</span> <span class="ow">is</span> <span class="n">b</span>
<span class="bp">False</span>
</pre></div>
</div>
<p>下面我们说下，浅拷贝和深拷贝</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">l1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">l2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">l1</span><span class="p">)</span>

<span class="n">l2</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

<span class="n">l1</span> <span class="o">==</span> <span class="n">l2</span>
<span class="bp">True</span>

<span class="n">l1</span> <span class="ow">is</span> <span class="n">l2</span>
<span class="bp">False</span>

<span class="n">s1</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="n">s2</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span>

<span class="n">s2</span>
<span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span>

<span class="n">s1</span> <span class="o">==</span> <span class="n">s2</span>
<span class="bp">True</span>

<span class="n">s1</span> <span class="ow">is</span> <span class="n">s2</span>
<span class="bp">False</span>
</pre></div>
</div>
<p>浅拷贝指重新分配一块内存，l2 就是l1的浅拷贝，但是只要是序列的浅拷贝，他们的id就是不一样的。</p>
<p>对于深拷贝，在python中提供了对应的函数copy.copy()</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">copy</span>
<span class="n">l1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">l2</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">l1</span><span class="p">)</span>

<span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">t2</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">t1</span><span class="p">)</span>

<span class="n">t1</span> <span class="o">==</span> <span class="n">t2</span>
<span class="bp">True</span>

<span class="n">t1</span> <span class="ow">is</span> <span class="n">t2</span>
<span class="bp">True</span>
</pre></div>
</div>
<p>元组（1，2，3）只被创建一次，t1和t2同时指向这个元组，反正你看到copy.copy()就是两个True</p>
<p>这里有一个天天来骗小孩的东西，就是l1变了，l2变不变的问题</p>
<p>我这里在使用的嵌套列表</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">l1</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">)]</span>
<span class="n">l2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">l1</span><span class="p">)</span>

<span class="n">l2</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">)]</span>

<span class="n">l1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="n">l1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="n">l1</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">),</span> <span class="mi">100</span><span class="p">]</span>

<span class="n">l2</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">)]</span>
</pre></div>
</div>
<p>l2竟然变了，这是为什么。首先初始化一个列表l1，里面的元素是一个列表和元组，然后对l1执行浅拷贝，赋予了l2
，但是l2中的元素和l1指向同一个列表和元组对象，只有列表对象变，你浅拷贝就要跟着我变。</p>
<p>如果你添加一个序列来，我浅拷贝没有指向你新来的对象。我干嘛跟着你变。</p>
<p>l1.append(100)l1的列表新增元素100，不会对l2产生影响，l1和l2是两个不同的对象</p>
<p><strong>如果我在元组加呢？？？</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">l1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>

<span class="n">l1</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">60</span><span class="p">),</span> <span class="mi">100</span><span class="p">]</span>

<span class="n">l2</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">)]</span>
</pre></div>
</div>
<p>竟然不会变，说白了只有列表对象变，难道元组不可变你不知道？</p>
<p>深度拷贝，就是你爱怎么变，就去哪里变，我就不变了。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">copy</span>
<span class="n">l1</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">)]</span>
<span class="n">l2</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">l1</span><span class="p">)</span>
<span class="n">l1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="n">l1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="n">l1</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">),</span> <span class="mi">100</span><span class="p">]</span>

<span class="n">l2</span> 
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">)]</span>
</pre></div>
</div>
<p>因为此时l1和l2完全独立了，没有任何影响</p>
<p>总结起来其实就是两句话</p>
<ul class="simple">
<li>浅拷贝，不可变的不可变，可变的依旧可变</li>
<li>深拷贝，都不可变</li>
</ul>
<p>下面我们练习下冒泡排序</p>
</div>
<div class="section" id="id213">
<h2>冒泡排序<a class="headerlink" href="#id213" title="永久链接至标题">¶</a></h2>
<p>要学习冒泡排序必须知道它的原理：</p>
<p>所谓冒泡，就是将元素两两之间进行比较，谁大就往后移动，直到将最大的元素排到最后面，接着再循环一趟，从头开始进行两两比较，而上一趟已经排好的那个元素就不用进行比较了。（图中排好序的元素标记为黄色柱子）</p>
<p>说得不清楚，我们看看下面的动图就应该明白了</p>
<p>下面，我们就进入代码环节。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200710225406469.png" src="https://img-blog.csdnimg.cn/20200710225406469.png" /></p>
<p>Python实现冒泡排序
现在，我给你一个nums = [3,1,25,6,8,10,15]，要求你用Python将nums实现冒泡排序。</p>
<p>看上去很难入手，其实很简单，我先给出代码</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">nums</span> <span class="p">=</span> <span class="p">[</span><span class="m">3</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">25</span><span class="p">,</span><span class="m">6</span><span class="p">,</span><span class="m">8</span><span class="p">,</span><span class="m">10</span><span class="p">,</span><span class="m">15</span><span class="p">]</span>
<span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)-</span><span class="m">1</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="k">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span> <span class="p">-</span> <span class="n">i</span> <span class="p">-</span><span class="m">1</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="p">&gt;</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">+</span><span class="m">1</span><span class="p">]:</span>
            <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">],</span><span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">+</span><span class="m">1</span><span class="p">]</span> <span class="p">=</span>  <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">+</span><span class="m">1</span><span class="p">],</span><span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
        <span class="n">print</span><span class="p">(</span><span class="s">&quot;第&quot;</span><span class="p">+</span><span class="n">str</span><span class="p">(</span><span class="n">j</span><span class="p">)+</span><span class="s">&quot;次内循环&quot;</span><span class="p">+</span><span class="n">str</span><span class="p">(</span><span class="n">nums</span><span class="p">))</span>
    <span class="n">print</span><span class="p">(</span><span class="s">&quot;第&quot;</span><span class="p">+</span><span class="n">str</span><span class="p">(</span><span class="n">i</span><span class="p">)+</span><span class="s">&quot;次外循环&quot;</span><span class="p">+</span><span class="n">str</span><span class="p">(</span><span class="n">nums</span><span class="p">))</span>
<span class="n">print</span><span class="p">(</span><span class="s">&quot;最后的结果&quot;</span><span class="p">+</span><span class="n">str</span><span class="p">(</span><span class="n">nums</span><span class="p">))</span>
</pre></div>
</div>
<p>我们先遍历nums，这不就是我们的range(len(nums)-1)，至于为什么是range(len(nums)-1)，其实就是我们的下标从0开始的，len(nums)返回是7，range是左开右闭，但是冒泡排序，我们只需要取到nums[5] = 10 就足够了，所以这里range(len(nums)-1)，取到[3,1,25,6,8,10]。</p>
<p>然后，我们在遍历之后的nums，比如i = 0，我们将j取值范围到len(nums) - i -1，用nums[j] &gt; nums[j+1]判断两两的大小, 每次内循环将最大的移到最右边。</p>
<p>每一次内循环的目的就是将当中最大的移到最右边，而每一次外循环的目的就是当最大的移到最右边后，缩小范围，再寻找最大的数，再把它移到最右边。</p>
<p>我们执行上面的代码的结果如下：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>第0次内循环[1, 3, 25, 6, 8, 10, 15]
第1次内循环[1, 3, 25, 6, 8, 10, 15]
第2次内循环[1, 3, 6, 25, 8, 10, 15]
第3次内循环[1, 3, 6, 8, 25, 10, 15]
第4次内循环[1, 3, 6, 8, 10, 25, 15]
第5次内循环[1, 3, 6, 8, 10, 15, 25]
第0次外循环[1, 3, 6, 8, 10, 15, 25]
第0次内循环[1, 3, 6, 8, 10, 15, 25]
第1次内循环[1, 3, 6, 8, 10, 15, 25]
第2次内循环[1, 3, 6, 8, 10, 15, 25]
第3次内循环[1, 3, 6, 8, 10, 15, 25]
第4次内循环[1, 3, 6, 8, 10, 15, 25]
第1次外循环[1, 3, 6, 8, 10, 15, 25]
第0次内循环[1, 3, 6, 8, 10, 15, 25]
第1次内循环[1, 3, 6, 8, 10, 15, 25]
第2次内循环[1, 3, 6, 8, 10, 15, 25]
第3次内循环[1, 3, 6, 8, 10, 15, 25]
第2次外循环[1, 3, 6, 8, 10, 15, 25]
第0次内循环[1, 3, 6, 8, 10, 15, 25]
第1次内循环[1, 3, 6, 8, 10, 15, 25]
第2次内循环[1, 3, 6, 8, 10, 15, 25]
第3次外循环[1, 3, 6, 8, 10, 15, 25]
第0次内循环[1, 3, 6, 8, 10, 15, 25]
第1次内循环[1, 3, 6, 8, 10, 15, 25]
第4次外循环[1, 3, 6, 8, 10, 15, 25]
第0次内循环[1, 3, 6, 8, 10, 15, 25]
第5次外循环[1, 3, 6, 8, 10, 15, 25]
最后的结果[1, 3, 6, 8, 10, 15, 25]
</pre></div>
</div>
<p>我们可以看到，第0次外循环，已经将25放在了最右边，第1次外循环确定把15放到最右边，这样从右往左，从大到小，这就是完整的冒泡排序。</p>
</div>
</div>
<div class="section" id="id214">
<h1>40、练习、Python的八皇后<a class="headerlink" href="#id214" title="永久链接至标题">¶</a></h1>
<p>&#64;Author：By Runsen</p>
<div class="section" id="id215">
<h2>什么是八皇后<a class="headerlink" href="#id215" title="永久链接至标题">¶</a></h2>
<p><strong>八皇后问题</strong>是一个以国际象棋为背景的问题：如何能够在8×8的国际象棋棋盘上放置八个皇后，使得任何一个皇后都无法直接吃掉其他的皇后。</p>
<p>来自百度百科，皇后的走法是可以横竖斜着走任意格。</p>
<p><img alt="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS80NzBjMGE4NC04NTM4LTQyMzAtYjg2Ny03ZTg2NTk4Y2Q2NzIucG5n?x-oss-process=image/format,png" src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS80NzBjMGE4NC04NTM4LTQyMzAtYjg2Ny03ZTg2NTk4Y2Q2NzIucG5n?x-oss-process=image/format,png" /></p>
<p>国际象棋棋盘是8 * 8的方格，每个方格里放一个棋子。皇后这种棋子可以攻击同一行或者同一列或者斜线（左上左下右上右下四个方向）上的棋子。在一个棋盘上如果要放八个皇后，使得她们互相之间不能攻击（即任意两两之间都不同行不同列不同斜线），求出一种所有布局方式。</p>
<p>好了我们来解决这个八皇后的问题，最常用的就是回溯法</p>
</div>
<div class="section" id="id216">
<h2>回溯法<a class="headerlink" href="#id216" title="永久链接至标题">¶</a></h2>
<p>回溯法（探索与回溯法）是一种选优搜索法，又称为试探法，按选优条件向前搜索，以达到目标。但当探索到某一步时，发现原先选择并不优或达不到目标，就退回一步重新选择，这种走不通就退回再走的技术为回溯法，而满足回溯条件]的某个[状态的点称为“回溯点”。（来自百度百科）</p>
<p>说到底，就是一个一个的试错，在第一行第一个列放皇后，然后在第二行放皇后，一直将整个棋盘放满。如果发现放不了，就回到上一行放皇后的地方，选择其他位置放皇后。</p>
<p><img alt="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS9kNmVhODUzOC0wYjQ2LTRiMzMtYmJmOS02YWRlZjkwZjUyNmQucG5n?x-oss-process=image/format,png" src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS9kNmVhODUzOC0wYjQ2LTRiMzMtYmJmOS02YWRlZjkwZjUyNmQucG5n?x-oss-process=image/format,png" /></p>
<p>回溯法就是不断的试错，有错了就回到上一行放皇后，直到整个棋盘放满。</p>
</div>
<div class="section" id="id217">
<h2>代码<a class="headerlink" href="#id217" title="永久链接至标题">¶</a></h2>
<p>下图是八皇后问题的一个解：</p>
<p><img alt="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS8xNGQ2ZGM2Yi01ZTk2LTQxNjMtYjAzMS1mMTAwM2NhNmRkODIucG5n?x-oss-process=image/format,png" src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS8xNGQ2ZGM2Yi01ZTk2LTQxNjMtYjAzMS1mMTAwM2NhNmRkODIucG5n?x-oss-process=image/format,png" /></p>
<p>首先定义一个冲突函数，如下，ps是positions 的缩写，表示之前摆放的皇后位置，是一个list，每个元素代表第几列放的，比如上图所有的皇后可以表示为</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
<p><img alt="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS9mMDY3OWI2NC1iNmEyLTQ0ODItODc0NC03YzdiZWI3NzU2MzUucG5n?x-oss-process=image/format,png" src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS9mMDY3OWI2NC1iNmEyLTQ0ODItODc0NC03YzdiZWI3NzU2MzUucG5n?x-oss-process=image/format,png" /></p>
<p>state 这里理解元组，就是之前放回皇后的位置，nextX表示新皇后要放的横坐标，conflict函数就是检测新皇后放的位置和之前的皇后在位置上是否有冲突，有的话返回True。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">conflict</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">nextX</span><span class="p">):</span>
    <span class="n">nextY</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
    <span class="c1"># 新皇后要放的纵坐标</span>
    <span class="c1"># print(state) #不知道可以下面打印下</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nextY</span><span class="p">):</span>
    	<span class="c1">#在同一行或者在对角线上 nextY-i=1 就是对角线</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-</span><span class="n">nextX</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">nextY</span><span class="o">-</span><span class="n">i</span><span class="p">):</span> 
            <span class="k">return</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">False</span>
</pre></div>
</div>
<p>再定义一个queens函数， 这里我们用Python的生成器来存储我们的结果</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>def queens(num,state=()):
    for pos in range(num):
    	# 没有冲突
        if not conflict(state,pos):
        	# 最后一个pos，就是放到了最后一行，就yield储存在queens队列中
            if len(state) ==num-1:  
                yield(pos,)
            # 还没有到最后一行，就放皇后   
            else:
            	# 遍历之前的queens队列中储存的结果，(pos,) 就是当前放皇后，我们不知道是否最后一行，所以不断地递归，直到放到了最后一行
                for result in queens(num, state + (pos,)): 
                    yield (pos, ) + result

print(len(list(queens(8))))
# 92

一共有92中方法
</pre></div>
</div>
<p><img alt="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS80MDg3YTU5OC05MTI3LTQyNmQtOGVmMS02Y2RhNjg1OTBkYjAucG5n?x-oss-process=image/format,png" src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS80MDg3YTU5OC05MTI3LTQyNmQtOGVmMS02Y2RhNjg1OTBkYjAucG5n?x-oss-process=image/format,png" /></p>
<p><code class="docutils literal notranslate"><span class="pre">list(queens(8))</span></code>就是我们的结果，下面我们定义一个<code class="docutils literal notranslate"><span class="pre">preetyprint</span></code>打印美观先</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>

<span class="k">def</span> <span class="nf">preetyprint</span><span class="p">(</span><span class="n">solution</span><span class="p">):</span>      <span class="c1"># pilish 输出</span>
    <span class="k">def</span> <span class="nf">line</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">solution</span><span class="p">)):</span>
        <span class="k">return</span><span class="s1">&#39;| &#39;</span><span class="o">*</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;|X&#39;</span><span class="o">+</span><span class="s1">&#39;| &#39;</span><span class="o">*</span><span class="p">(</span><span class="n">length</span><span class="o">-</span><span class="n">pos</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">pos</span> <span class="ow">in</span> <span class="n">solution</span><span class="p">:</span>
        <span class="k">print</span> <span class="p">(</span><span class="n">line</span><span class="p">(</span><span class="n">pos</span><span class="p">))</span>
        
<span class="n">preetyprint</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">queens</span><span class="p">(</span><span class="mi">8</span><span class="p">))))</span>

<span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span><span class="n">X</span><span class="o">|</span> <span class="o">|</span> 
<span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span><span class="n">X</span><span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> 
<span class="o">|</span> <span class="o">|</span><span class="n">X</span><span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> 
<span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span><span class="n">X</span><span class="o">|</span> 
<span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span><span class="n">X</span><span class="o">|</span> <span class="o">|</span> <span class="o">|</span> 
<span class="o">|</span><span class="n">X</span><span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> 
<span class="o">|</span> <span class="o">|</span> <span class="o">|</span><span class="n">X</span><span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> 
<span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span><span class="n">X</span><span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span>
</pre></div>
</div>
</div>
<div class="section" id="id218">
<h2>完整代码<a class="headerlink" href="#id218" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>

<span class="k">def</span> <span class="nf">conflict</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">nextX</span><span class="p">):</span>
    <span class="n">nextY</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
    <span class="c1"># 新皇后要放的纵坐标</span>
    <span class="c1"># print(state) #不知道可以下面打印下</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nextY</span><span class="p">):</span>
    <span class="c1">#在同一行或者在对角线上 nextY-i=1 就是对角线</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-</span><span class="n">nextX</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">nextY</span><span class="o">-</span><span class="n">i</span><span class="p">):</span> 
            <span class="k">return</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">False</span>

<span class="k">def</span> <span class="nf">queens</span><span class="p">(</span><span class="n">num</span><span class="p">,</span><span class="n">state</span><span class="o">=</span><span class="p">()):</span>
    <span class="k">for</span> <span class="n">pos</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
    <span class="c1"># 没有冲突</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">conflict</span><span class="p">(</span><span class="n">state</span><span class="p">,</span><span class="n">pos</span><span class="p">):</span>
        <span class="c1"># 最后一个pos，就是放到了最后一行，就yield储存在queens队列中</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">state</span><span class="p">)</span> <span class="o">==</span><span class="n">num</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>  
                <span class="k">yield</span><span class="p">(</span><span class="n">pos</span><span class="p">,)</span>
            <span class="c1"># 还没有到最后一行，就放皇后   </span>
            <span class="k">else</span><span class="p">:</span>
            <span class="c1"># 遍历之前的queens队列中储存的结果，(pos,) 就是当前放皇后，我们不知道是否最后一行，所以不断地递归，直到放到了最后一行</span>
                <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">queens</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">state</span> <span class="o">+</span> <span class="p">(</span><span class="n">pos</span><span class="p">,)):</span> 
                    <span class="k">yield</span> <span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="p">)</span> <span class="o">+</span> <span class="n">result</span>

 
<span class="k">def</span> <span class="nf">preetyprint</span><span class="p">(</span><span class="n">solution</span><span class="p">):</span>      
    <span class="k">def</span> <span class="nf">line</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">solution</span><span class="p">)):</span>
        <span class="k">return</span><span class="s1">&#39;| &#39;</span><span class="o">*</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;|X&#39;</span><span class="o">+</span><span class="s1">&#39;| &#39;</span><span class="o">*</span><span class="p">(</span><span class="n">length</span><span class="o">-</span><span class="n">pos</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">pos</span> <span class="ow">in</span> <span class="n">solution</span><span class="p">:</span>
        <span class="k">print</span> <span class="p">(</span><span class="n">line</span><span class="p">(</span><span class="n">pos</span><span class="p">))</span>
        
<span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">queens</span><span class="p">(</span><span class="mi">8</span><span class="p">))))</span>
       
<span class="n">preetyprint</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">queens</span><span class="p">(</span><span class="mi">8</span><span class="p">))))</span>



<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">queens</span><span class="p">(</span><span class="mi">8</span><span class="p">)):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> 
</pre></div>
</div>
</div>
</div>
<div class="section" id="pythonstatistics">
<h1>41、Python统计模块statistics<a class="headerlink" href="#pythonstatistics" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen</p>
<p>官网：  https://docs.python.org/3/library/statistics.html</p>
<div class="section" id="id219">
<h2>Python统计模块statistics<a class="headerlink" href="#id219" title="永久链接至标题">¶</a></h2>
<p>statistics 模块实现了许多常用的统计公式，以便使用 Python 的各种数值类型（int，float，Decimal 和 Fraction）进行高效的计算。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 计算平均数</span>
<span class="kn">import</span> <span class="nn">statistics</span>


<span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mf">5.6</span><span class="p">]</span>

<span class="k">print</span><span class="p">(</span><span class="n">statistics</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">))</span><span class="c1"># 3.12</span>
<span class="c1"># 等同于</span>

<span class="k">print</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">3.12</span>
<span class="mf">3.12</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># mode 众数</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="n">statistics</span><span class="o">.</span><span class="n">mode</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span>
</pre></div>
</div>
</div>
<div class="section" id="median">
<h2>median－中位数<a class="headerlink" href="#median" title="永久链接至标题">¶</a></h2>
<ul class="simple">
<li>median-low()－中位数(如果项数是偶数，返回小值)</li>
<li>median-high()－中位数(如果项数是偶数，返回大值)</li>
<li>median-grouped() - j将数字排序好再选择中位数</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">statistics</span><span class="o">.</span><span class="n">median</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">]))</span>
<span class="k">print</span><span class="p">(</span><span class="n">statistics</span><span class="o">.</span><span class="n">median_low</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">]))</span>
<span class="k">print</span><span class="p">(</span><span class="n">statistics</span><span class="o">.</span><span class="n">median_high</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">]))</span>
<span class="k">print</span><span class="p">(</span><span class="n">statistics</span><span class="o">.</span><span class="n">median_grouped</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">]))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">4.0</span>
<span class="mi">3</span>
<span class="mi">5</span>
<span class="mf">5.0</span>
</pre></div>
</div>
</div>
<div class="section" id="id220">
<h2>方差<a class="headerlink" href="#id220" title="永久链接至标题">¶</a></h2>
<p><strong>计算样本方差（sample variance）和样本标准差（sample standard deviation，the square root of the sample variance，也叫均方差）。</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># variance()－方差</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">statistics</span><span class="o">.</span><span class="n">variance</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>  <span class="c1"># 1.3</span>
<span class="c1"># stdev－标准差</span>
<span class="n">statistics</span><span class="o">.</span><span class="n">stdev</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="c1"># 1.140175425099138</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># pvariance()－总体方差</span>
<span class="n">statistics</span><span class="o">.</span><span class="n">pvariance</span><span class="p">([</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mf">2.75</span><span class="p">,</span> <span class="mf">3.25</span><span class="p">,</span> <span class="mf">4.75</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">0.9739583333333334</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">### pstdev() -- 返回总体标准差（)。</span>
<span class="c1">### pvariance() --返回总体方差（)。</span>

<span class="n">statistics</span><span class="o">.</span><span class="n">pstdev</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="c1"># 1.019803902718557</span>
<span class="n">statistics</span><span class="o">.</span><span class="n">pvariance</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="c1"># 1.04</span>
</pre></div>
</div>
<p>https://docs.python.org/3/library/statistics.html</p>
</div>
</div>
<div class="section" id="mooc-pythonscipy">
<h1>42、MOOC课程 _ Python中的Scipy模块<a class="headerlink" href="#mooc-pythonscipy" title="永久链接至标题">¶</a></h1>
<p>这是MOOC课上的Scipy基础</p>
<div class="section" id="scipy">
<h2>SciPy的介绍<a class="headerlink" href="#scipy" title="永久链接至标题">¶</a></h2>
<p>在Numpy库的基础上增加了众多的数学、科学以及工程计算中常用 的库函数</p>
<ul class="simple">
<li>线性代数</li>
<li>常微分方程数值求解</li>
<li>信号处理</li>
<li>图像处理</li>
<li>稀疏矩阵</li>
</ul>
</div>
<div class="section" id="id221">
<h2>SciPy的常数<a class="headerlink" href="#id221" title="永久链接至标题">¶</a></h2>
<p>SciPy的constants模块包含了众多的物理常数：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">constants</span>
<span class="k">print</span><span class="p">(</span><span class="n">constants</span><span class="o">.</span><span class="n">c</span><span class="p">)</span> <span class="c1"># 真空中的光速</span>
<span class="mf">299792458.0</span>
<span class="k">print</span><span class="p">(</span><span class="n">constants</span><span class="o">.</span><span class="n">h</span><span class="p">)</span> <span class="c1"># 普朗克常数</span>
<span class="mf">6.62607004e-34</span>
</pre></div>
</div>
<p>在字典physical_constants中，以物理常量名为键，对应的值是一个含有三 个元素的元组，查看电子质量的例子：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>print(constants.physical_constants[&#39;electron mass&#39;])

(9.10938356e-31, &#39;kg&#39;, 1.1e-38)
常数值 单位 误差
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20190507230820928.png" src="https://img-blog.csdnimg.cn/20190507230820928.png" /></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1英里等于多少米, 1英寸等于多少米, 1克等于多少千克, 1磅等于多少千克</span>
<span class="k">print</span><span class="p">(</span><span class="n">C</span><span class="o">.</span><span class="n">mile</span><span class="p">,</span> <span class="n">C</span><span class="o">.</span><span class="n">inch</span><span class="p">,</span><span class="n">C</span><span class="o">.</span><span class="n">gram</span><span class="p">,</span><span class="n">C</span><span class="o">.</span><span class="n">pound</span><span class="p">)</span>

<span class="mf">1609.3439999999998</span> <span class="mf">0.0254</span> <span class="mf">0.001</span> <span class="mf">0.45359236999999997</span>
</pre></div>
</div>
</div>
<div class="section" id="optimize">
<h2>optimize模块<a class="headerlink" href="#optimize" title="永久链接至标题">¶</a></h2>
<p>optimize模块提供了许多数值优化算法，可以实现</p>
<ul class="simple">
<li>非线性方程组求解</li>
<li>数据拟合</li>
<li>函数最小值
<img alt="https://img-blog.csdnimg.cn/20190507230952638.png" src="https://img-blog.csdnimg.cn/20190507230952638.png" /></li>
</ul>
<p><img alt="https://img-blog.csdnimg.cn/20190507231011629.png" src="https://img-blog.csdnimg.cn/20190507231011629.png" /></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">scipy.optimize</span> <span class="kn">import</span> <span class="n">leastsq</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">8.19</span><span class="p">,</span> <span class="mf">2.72</span><span class="p">,</span> <span class="mf">6.39</span><span class="p">,</span> <span class="mf">8.71</span><span class="p">,</span> <span class="mf">4.7</span><span class="p">,</span> <span class="mf">2.66</span><span class="p">,</span> <span class="mf">3.78</span><span class="p">])</span>
<span class="n">Y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">7.01</span><span class="p">,</span> <span class="mf">2.78</span><span class="p">,</span> <span class="mf">6.47</span><span class="p">,</span> <span class="mf">6.71</span><span class="p">,</span> <span class="mf">4.1</span><span class="p">,</span> <span class="mf">4.23</span><span class="p">,</span> <span class="mf">4.05</span><span class="p">])</span>
<span class="c1">#计算以p为参数的直线和原始数据之间的误差</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
    <span class="n">k</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">p</span>
    <span class="k">return</span><span class="p">(</span><span class="n">Y</span><span class="o">-</span><span class="p">(</span><span class="n">k</span><span class="o">*</span><span class="n">X</span><span class="o">+</span><span class="n">b</span><span class="p">))</span>
<span class="c1">#leastsq使得f的输出数组的平方和最小，参数初始值为[1,0]</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">leastsq</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="n">k</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;k=&quot;</span><span class="p">,</span><span class="n">k</span><span class="p">,</span><span class="s2">&quot;b=&quot;</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>

<span class="n">k</span><span class="o">=</span> <span class="mf">0.6134953491930442</span> <span class="n">b</span><span class="o">=</span> <span class="mf">1.794092543259387</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20190507231137418.png" src="https://img-blog.csdnimg.cn/20190507231137418.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20190507231154670.png" src="https://img-blog.csdnimg.cn/20190507231154670.png" /></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.optimize</span> <span class="kn">import</span> <span class="n">fsolve</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sin</span>
<span class="c1">#f计算方程组的误差,x是一组可能的解</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="c1">#转换为标准的浮点数列表</span>
    <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="k">return</span><span class="p">[</span><span class="mi">5</span><span class="o">*</span><span class="n">x1</span><span class="o">+</span><span class="mi">3</span><span class="p">,</span>
           <span class="mi">4</span><span class="o">*</span><span class="n">x0</span><span class="o">*</span><span class="n">x0</span> <span class="o">-</span> <span class="mi">2</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">x1</span><span class="o">*</span><span class="n">x2</span><span class="p">),</span>
           <span class="n">x1</span><span class="o">*</span><span class="n">x2</span><span class="o">-</span><span class="mf">1.5</span><span class="p">]</span>
<span class="c1">#[1,1,1]是未知数的初始值</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">fsolve</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="c1">#输出方程组的解</span>
<span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="c1">#输出误差</span>
<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>

<span class="p">[</span><span class="o">-</span><span class="mf">0.70622057</span> <span class="o">-</span><span class="mf">0.6</span>        <span class="o">-</span><span class="mf">2.5</span>       <span class="p">]</span>
<span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">9.126033262418787e-14</span><span class="p">,</span> <span class="mf">5.329070518200751e-15</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="interpolate">
<h2>插值-interpolate<a class="headerlink" href="#interpolate" title="永久链接至标题">¶</a></h2>
</div>
</div>
<div class="section" id="id222">
<h1><a class="headerlink" href="#id222" title="永久链接至标题">¶</a></h1>
<ul class="simple">
<li>插值：通过已知的离散数据来求解未知数据的方法，要求
曲线通过所有的已知数据。</li>
<li>拟合：要求曲线函数与已知数据集的误差最小，不要求曲
线通过所有的已知数据。</li>
</ul>
<p><strong>intepolate模块提供了许多对数据进行插值运算的函数：</strong></p>
<ul class="simple">
<li>B样条曲线插值</li>
<li>外推</li>
<li>Spline拟合（UnivariateSpline插值运算）</li>
<li>二维插值运算等</li>
</ul>
<p><img alt="https://img-blog.csdnimg.cn/20190507231542972.png" src="https://img-blog.csdnimg.cn/20190507231542972.png" />
<img alt="https://img-blog.csdnimg.cn/20190507231551681.png" src="https://img-blog.csdnimg.cn/20190507231551681.png" /></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 创建数据点集：</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">pylab</span> <span class="kn">as</span> <span class="nn">pl</span>
<span class="n">pl</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="s1">&#39;ro&#39;</span><span class="p">)</span>
<span class="n">pl</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20190507231833418.png" src="https://img-blog.csdnimg.cn/20190507231833418.png" />
<strong>B样条曲线插值-举例</strong>
<img alt="https://img-blog.csdnimg.cn/20190507232206654.png" src="https://img-blog.csdnimg.cn/20190507232206654.png" />
<img alt="https://img-blog.csdnimg.cn/20190507232229935.png" src="https://img-blog.csdnimg.cn/20190507232229935.png" /></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">interpolate</span>
<span class="kn">import</span> <span class="nn">pylab</span> <span class="kn">as</span> <span class="nn">pl</span>
<span class="c1">#创建数据点集并绘制</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">pl</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="s1">&#39;ro&#39;</span><span class="p">)</span>
<span class="c1">#建立插值数据点</span>
<span class="n">xnew</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">101</span><span class="p">)</span>
<span class="k">for</span> <span class="n">kind</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;nearest&#39;</span><span class="p">,</span> <span class="s1">&#39;zero&#39;</span><span class="p">,</span><span class="s1">&#39;linear&#39;</span><span class="p">,</span><span class="s1">&#39;quadratic&#39;</span><span class="p">]:</span>
    <span class="c1">#根据kind创建插值对象interp1d</span>
    <span class="n">f</span> <span class="o">=</span> <span class="n">interpolate</span><span class="o">.</span><span class="n">interp1d</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">kind</span> <span class="o">=</span> <span class="n">kind</span><span class="p">)</span>
    <span class="n">ynew</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="n">xnew</span><span class="p">)</span><span class="c1">#计算插值结果</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xnew</span><span class="p">,</span> <span class="n">ynew</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">kind</span><span class="p">))</span>
<span class="n">pl</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span> <span class="o">=</span> <span class="s1">&#39;lower right&#39;</span><span class="p">)</span>
<span class="n">pl</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20190507232107790.pn" src="https://img-blog.csdnimg.cn/20190507232107790.pn" /></p>
<p><img alt="https://img-blog.csdnimg.cn/2019050723464798.Jpeg" src="https://img-blog.csdnimg.cn/2019050723464798.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/20190507234650759.Jpeg" src="https://img-blog.csdnimg.cn/20190507234650759.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/20190507234654748.Jpeg" src="https://img-blog.csdnimg.cn/20190507234654748.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/2019050723465825.Jpeg" src="https://img-blog.csdnimg.cn/2019050723465825.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/20190507234701218.Jpeg" src="https://img-blog.csdnimg.cn/20190507234701218.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/20190507234704658.Jpeg" src="https://img-blog.csdnimg.cn/20190507234704658.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/20190507234708104.Jpeg" src="https://img-blog.csdnimg.cn/20190507234708104.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/20190507234711667.Jpeg" src="https://img-blog.csdnimg.cn/20190507234711667.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/2019050723471532.Jpeg" src="https://img-blog.csdnimg.cn/2019050723471532.Jpeg" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20190507234727542.Jpeg" src="https://img-blog.csdnimg.cn/20190507234727542.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/20190507234738729.Jpeg" src="https://img-blog.csdnimg.cn/20190507234738729.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/20190507234742401.Jpeg" src="https://img-blog.csdnimg.cn/20190507234742401.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/20190507234745727.Jpeg" src="https://img-blog.csdnimg.cn/20190507234745727.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/20190507234808467.Jpeg" src="https://img-blog.csdnimg.cn/20190507234808467.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/20190507234812407.Jpeg" src="https://img-blog.csdnimg.cn/20190507234812407.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/20190507234820974.Jpeg" src="https://img-blog.csdnimg.cn/20190507234820974.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/20190507234827194.Jpeg" src="https://img-blog.csdnimg.cn/20190507234827194.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/2019050723483554.Jpeg" src="https://img-blog.csdnimg.cn/2019050723483554.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/20190507234838989.Jpeg" src="https://img-blog.csdnimg.cn/20190507234838989.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/20190507234842351.Jpeg" src="https://img-blog.csdnimg.cn/20190507234842351.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/20190507234853398.Jpeg" src="https://img-blog.csdnimg.cn/20190507234853398.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/20190507234917869.Jpeg" src="https://img-blog.csdnimg.cn/20190507234917869.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/20190507234922406.Jpeg" src="https://img-blog.csdnimg.cn/20190507234922406.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/20190507234934928.Jpeg" src="https://img-blog.csdnimg.cn/20190507234934928.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/20190507235034101.Jpeg" src="https://img-blog.csdnimg.cn/20190507235034101.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/20190507234946502.Jpeg" src="https://img-blog.csdnimg.cn/20190507234946502.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/20190507235113899.Jpeg" src="https://img-blog.csdnimg.cn/20190507235113899.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/20190507235140760.Jpeg" src="https://img-blog.csdnimg.cn/20190507235140760.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/2019050723514621.Jpeg" src="https://img-blog.csdnimg.cn/2019050723514621.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/20190507235226486.Jpeg" src="https://img-blog.csdnimg.cn/20190507235226486.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/20190507235212116.Jpeg" src="https://img-blog.csdnimg.cn/20190507235212116.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/20190507235235835.Jpeg" src="https://img-blog.csdnimg.cn/20190507235235835.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/20190507235239996.Jpeg" src="https://img-blog.csdnimg.cn/20190507235239996.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/20190507235334260.Jpeg" src="https://img-blog.csdnimg.cn/20190507235334260.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/20190507235342238.Jpeg" src="https://img-blog.csdnimg.cn/20190507235342238.Jpeg" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20190507235349850.Jpeg" src="https://img-blog.csdnimg.cn/20190507235349850.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/20190507235354452.Jpeg" src="https://img-blog.csdnimg.cn/20190507235354452.Jpeg" />
<img alt="https://img-blog.csdnimg.cn/20190507235358306.Jpeg" src="https://img-blog.csdnimg.cn/20190507235358306.Jpeg" /></p>
</div>
<div class="section" id="pandas">
<h1>43、去年pandas的笔记<a class="headerlink" href="#pandas" title="永久链接至标题">¶</a></h1>
<p>&#64;Author：Runsen</p>
</div>
<div class="section" id="id223">
<h1><a class="headerlink" href="#id223" title="永久链接至标题">¶</a></h1>
<p>pandas 是基于NumPy 的一种工具，该工具是为了解决数据分析任务而创建的。Pandas 纳入了大量库和一些标准的数据模型，提供了高效地操作大型数据集所需的工具。pandas提供了大量能使我们快速便捷地处理数据的函数和方法。你很快就会发现，它是使Python成为强大而高效的数据分析环境的重要因素之一。</p>
<div class="section" id="id224">
<h2>1、pandas数据结构的介绍<a class="headerlink" href="#id224" title="永久链接至标题">¶</a></h2>
<ul class="simple">
<li>Series：一维数组，与Numpy中的一维array类似。二者与Python基本的数据结构List也很相近。Series如今能保存不同种数据类型，字符串、boolean值、数字等都能保存在Series中。</li>
<li>Time- Series：以时间为索引的Series。</li>
<li>DataFrame：二维的表格型数据结构。很多功能与R中的data.frame类似。可以将DataFrame理解为Series的容器。</li>
<li>Panel ：三维的数组，可以理解为DataFrame的容器。</li>
</ul>
</div>
<div class="section" id="series">
<h2>2、Series的操作<a class="headerlink" href="#series" title="永久链接至标题">¶</a></h2>
<div class="section" id="id225">
<h3>2.1 对象创建<a class="headerlink" href="#id225" title="永久链接至标题">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="c1"># 直接创建</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="s1">&#39;d&#39;</span><span class="p">,</span><span class="s1">&#39;e&#39;</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> 
<span class="c1"># 字典（dict）类型数据创建</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span><span class="mi">20</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span><span class="mi">30</span><span class="p">},</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">])</span>

<span class="n">OUT</span><span class="p">:</span>
<span class="n">a</span>   <span class="o">-</span><span class="mf">0.620323</span>
<span class="n">b</span>   <span class="o">-</span><span class="mf">0.189133</span>
<span class="n">c</span>    <span class="mf">1.677690</span>
<span class="n">d</span>   <span class="o">-</span><span class="mf">1.480348</span>
<span class="n">e</span>   <span class="o">-</span><span class="mf">0.539061</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>

<span class="n">OUT</span><span class="p">:</span>
<span class="n">a</span>    <span class="mi">10</span>
<span class="n">b</span>    <span class="mi">20</span>
<span class="n">c</span>    <span class="mi">30</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">int64</span>
</pre></div>
</div>
</div>
<div class="section" id="id226">
<h3>2.2 查看数据<a class="headerlink" href="#id226" title="永久链接至标题">¶</a></h3>
<p>切片、索引、dict操作</p>
<p>Series既然是一维数组类型的数据结构，那么它支持想数组那样去操作它。通过数组下标索引、切片都可以去操作他，且它的data可以是dict类型的，那么它肯定也就支持字典的索引方式。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>import pandas as pd
import numpy as np

s = pd.Series(np.random.randn(5), index=[&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;,&#39;e&#39;])

print(s)

# 下标索引
print(&#39;下标索引方式s[0] = : %s&#39; % s[0])

# 字典访问方式
print(&#39;字典访问方式s[b] = ：%s&#39; % s[&#39;b&#39;])

# 切片操作
print(&#39;切片操作s[2:]\n:%s&#39; % s[2:])
print(&#39;a&#39; in s)
print(&#39;k&#39; in s)
OUT:
a   -0.799676
b   -1.581704
c   -1.240885
d    0.623757
e   -0.234417
dtype: float64

下标索引方式s[0] = : -0.799676067487
字典访问方式s[b] = ：-1.58170351838
切片操作s[2:]:
c   -1.240885
d    0.623757
e   -0.234417
True
False
</pre></div>
</div>
</div>
<div class="section" id="id227">
<h3>2.3 Series的算术操作<a class="headerlink" href="#id227" title="永久链接至标题">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="n">s1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">])</span>

<span class="n">s2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">s1</span><span class="o">+</span><span class="n">s2</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">s1</span><span class="o">-</span><span class="n">s2</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">s1</span><span class="o">*</span><span class="n">s2</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">s1</span><span class="o">/</span><span class="n">s2</span><span class="p">)</span>
<span class="n">OUT</span><span class="p">:</span>
<span class="n">a</span>    <span class="mf">0.236514</span>
<span class="n">b</span>   <span class="o">-</span><span class="mf">0.132153</span>
<span class="n">c</span>    <span class="mf">0.203186</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>

<span class="n">a</span>    <span class="mf">0.305397</span>
<span class="n">b</span>   <span class="o">-</span><span class="mf">1.474441</span>
<span class="n">c</span>   <span class="o">-</span><span class="mf">1.697982</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>

<span class="n">a</span>   <span class="o">-</span><span class="mf">0.009332</span>
<span class="n">b</span>   <span class="o">-</span><span class="mf">0.539128</span>
<span class="n">c</span>   <span class="o">-</span><span class="mf">0.710465</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>

<span class="n">a</span>   <span class="o">-</span><span class="mf">7.867120</span>
<span class="n">b</span>   <span class="o">-</span><span class="mf">1.196907</span>
<span class="n">c</span>   <span class="o">-</span><span class="mf">0.786252</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="dataframe">
<h2>3、dataframe的操作<a class="headerlink" href="#dataframe" title="永久链接至标题">¶</a></h2>
<div class="section" id="id228">
<h3>3.1 对象创建<a class="headerlink" href="#id228" title="永久链接至标题">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">70</span><span class="p">]:</span>  <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Ohio&#39;</span><span class="p">,</span> <span class="s1">&#39;Ohio&#39;</span><span class="p">,</span> <span class="s1">&#39;Ohio&#39;</span><span class="p">,</span> <span class="s1">&#39;Nevada&#39;</span><span class="p">,</span> <span class="s1">&#39;Nevada&#39;</span><span class="p">],</span><span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">2001</span><span class="p">,</span> <span class="mi">20</span>
    <span class="o">...</span><span class="p">:</span> <span class="mo">02</span><span class="p">,</span> <span class="mi">2001</span><span class="p">,</span> <span class="mi">2002</span><span class="p">],</span><span class="s1">&#39;pop&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">1.7</span><span class="p">,</span> <span class="mf">3.6</span><span class="p">,</span> <span class="mf">2.4</span><span class="p">,</span> <span class="mf">2.9</span><span class="p">]}</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">71</span><span class="p">]:</span> <span class="n">data</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">71</span><span class="p">]:</span> 
<span class="p">{</span><span class="s1">&#39;pop&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">1.7</span><span class="p">,</span> <span class="mf">3.6</span><span class="p">,</span> <span class="mf">2.4</span><span class="p">,</span> <span class="mf">2.9</span><span class="p">],</span>
 <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Ohio&#39;</span><span class="p">,</span> <span class="s1">&#39;Ohio&#39;</span><span class="p">,</span> <span class="s1">&#39;Ohio&#39;</span><span class="p">,</span> <span class="s1">&#39;Nevada&#39;</span><span class="p">,</span> <span class="s1">&#39;Nevada&#39;</span><span class="p">],</span>
 <span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">2001</span><span class="p">,</span> <span class="mi">2002</span><span class="p">,</span> <span class="mi">2001</span><span class="p">,</span> <span class="mi">2002</span><span class="p">]}</span>
<span class="c1"># 建立DataFrame对象</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">72</span><span class="p">]:</span> <span class="n">frame1</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="c1"># 红色部分为自动生成的索引</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">73</span><span class="p">]:</span> <span class="n">frame1</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">73</span><span class="p">]:</span> 
   <span class="n">pop</span>   <span class="n">state</span>  <span class="n">year</span>
<span class="mi">0</span>  <span class="mf">1.5</span>    <span class="n">Ohio</span>  <span class="mi">2000</span>
<span class="mi">1</span>  <span class="mf">1.7</span>    <span class="n">Ohio</span>  <span class="mi">2001</span>
<span class="mi">2</span>  <span class="mf">3.6</span>    <span class="n">Ohio</span>  <span class="mi">2002</span>
<span class="mi">3</span>  <span class="mf">2.4</span>  <span class="n">Nevada</span>  <span class="mi">2001</span>
<span class="mi">4</span>  <span class="mf">2.9</span>  <span class="n">Nevada</span>  <span class="mi">2002</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">lista</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">listb</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="s1">&#39;d&#39;</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;col1&#39;</span><span class="p">:</span><span class="n">lista</span><span class="p">,</span><span class="s1">&#39;col2&#39;</span><span class="p">:</span><span class="n">listb</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span>
   <span class="n">col1</span> <span class="n">col2</span>
<span class="mi">0</span>     <span class="mi">1</span>    <span class="n">a</span>
<span class="mi">1</span>     <span class="mi">2</span>    <span class="n">b</span>
<span class="mi">2</span>     <span class="mi">5</span>    <span class="n">c</span>
<span class="mi">3</span>     <span class="mi">7</span>    <span class="n">d</span>
</pre></div>
</div>
</div>
<div class="section" id="id229">
<h3>3.2 选择数据<a class="headerlink" href="#id229" title="永久链接至标题">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
   <span class="o">...</span><span class="p">:</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span>
   <span class="o">...</span><span class="p">:</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">df</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span>
    <span class="n">a</span>   <span class="n">b</span>   <span class="n">c</span>
<span class="mi">0</span>   <span class="mi">0</span>   <span class="mi">2</span>   <span class="mi">4</span>
<span class="mi">1</span>   <span class="mi">6</span>   <span class="mi">8</span>  <span class="mi">10</span>
<span class="mi">2</span>  <span class="mi">12</span>  <span class="mi">14</span>  <span class="mi">16</span>
<span class="mi">3</span>  <span class="mi">18</span>  <span class="mi">20</span>  <span class="mi">22</span>
<span class="mi">4</span>  <span class="mi">24</span>  <span class="mi">26</span>  <span class="mi">28</span>
<span class="mi">5</span>  <span class="mi">30</span>  <span class="mi">32</span>  <span class="mi">34</span>
<span class="mi">6</span>  <span class="mi">36</span>  <span class="mi">38</span>  <span class="mi">40</span>
<span class="mi">7</span>  <span class="mi">42</span>  <span class="mi">44</span>  <span class="mi">46</span>
<span class="mi">8</span>  <span class="mi">48</span>  <span class="mi">50</span>  <span class="mi">52</span>
<span class="mi">9</span>  <span class="mi">54</span>  <span class="mi">56</span>  <span class="mi">58</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">]</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="mi">4</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">4</span><span class="p">,[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">]]</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">4</span><span class="p">]:</span>
    <span class="n">a</span>   <span class="n">c</span>
<span class="mi">1</span>   <span class="mi">6</span>  <span class="mi">10</span>
<span class="mi">2</span>  <span class="mi">12</span>  <span class="mi">16</span>
<span class="mi">3</span>  <span class="mi">18</span>  <span class="mi">22</span>
<span class="mi">4</span>  <span class="mi">24</span>  <span class="mi">28</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="mi">4</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">6</span><span class="p">]:</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">4</span><span class="p">,[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">]]</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">6</span><span class="p">]:</span>
    <span class="n">a</span>   <span class="n">c</span>
<span class="mi">1</span>   <span class="mi">6</span>  <span class="mi">10</span>
<span class="mi">2</span>  <span class="mi">12</span>  <span class="mi">16</span>
<span class="mi">3</span>  <span class="mi">18</span>  <span class="mi">22</span>
</pre></div>
</div>
</div>
<div class="section" id="id230">
<h3>3.3 函数应用<a class="headerlink" href="#id230" title="永久链接至标题">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>frame = pd.DataFrame(np.random.randn(4, 3), columns=list(&#39;bde&#39;),
                     index=[&#39;Utah&#39;, &#39;Ohio&#39;, &#39;Texas&#39;, &#39;Oregon&#39;])
frame
np.abs(frame)

OUT：
            b	     d            e
Utah	0.204708	0.478943	0.519439
Ohio	0.555730	1.965781	1.393406
Texas	0.092908	0.281746	0.769023
Oregon	1.246435	1.007189	1.296221


f = lambda x: x.max() - x.min()
frame.apply(f)
OUT：
b    1.802165
d    1.684034
e    2.689627
dtype: float64

def f(x):
    return pd.Series([x.min(), x.max()], index=[&#39;min&#39;, &#39;max&#39;])
frame.apply(f)

            b	d	      e
Utah	-0.20	0.48	-0.52
Ohio	-0.56	1.97	1.39
Texas	0.09	0.28	0.77
Oregon	1.25	1.01	-1.30
</pre></div>
</div>
</div>
<div class="section" id="id231">
<h3>3.4 统计概述和计算<a class="headerlink" href="#id231" title="永久链接至标题">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>df = pd.DataFrame([[1.4, np.nan], [7.1, -4.5],
                   [np.nan, np.nan], [0.75, -1.3]],
                  index=[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;],
                  columns=[&#39;one&#39;, &#39;two&#39;])
df
OUT:
    one     two
a	1.40	NaN
b	7.10	-4.5
c	NaN     NaN
d	0.75	-1.3


df.info()
df.describe()


&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
Index: 4 entries, a to d
Data columns (total 2 columns):
one    3 non-null float64
two    2 non-null float64
dtypes: float64(2)
memory usage: 256.0+ bytes

OUT：
          one          two
count	3.000000	2.000000
mean	3.083333	-2.900000
std	3.493685	2.262742
min	0.750000	-4.500000
25%	1.075000	-3.700000
50%	1.400000	-2.900000
75%	4.250000	-2.100000
max	7.100000	-1.300000
</pre></div>
</div>
</div>
<div class="section" id="id232">
<h3>3.5 数据读取<a class="headerlink" href="#id232" title="永久链接至标题">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>data = pd.read_csv(&#39;./dataset/HR.csv&#39;)
data.info()

out：
&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 14999 entries, 0 to 14998
Data columns (total 10 columns):
satisfaction_level       14999 non-null float64
last_evaluation          14999 non-null float64
number_project           14999 non-null int64
average_montly_hours     14999 non-null int64
time_spend_company       14999 non-null int64
Work_accident            14999 non-null int64
left                     14999 non-null int64
promotion_last_5years    14999 non-null int64
sales                    14999 non-null object
salary                   14999 non-null object
dtypes: float64(2), int64(6), object(2)
memory usage: 1.1+ MB

data = pd.read_csv(&#39;./dataset/movielens/movies.dat&#39;, header=None, names=[&#39;name&#39;, &#39;types&#39;], sep=&#39;::&#39;, engine=&#39;python&#39;)
data.head()
OUT：
                name	types
1	Toy Story (1995)	Animation|Children&#39;s|Comedy
2	Jumanji (1995)	Adventure|Children&#39;s|Fantasy
3	Grumpier Old Men (1995)	Comedy|Romance
4	Waiting to Exhale (1995)	Comedy|Drama
5	Father of the Bride Part II (1995)	Comedy


data = pd.read_excel(&#39;./dataset/my_excel.xlsx&#39;, sheet_name=1)
data.head()
ouput:
        date	H1	H2	H3
0	2014-06-01	1	2	3
1	2014-06-02	2	3	4
2	2014-06-03	3	4	5
3	2014-06-04	4	5	6
</pre></div>
</div>
</div>
</div>
<div class="section" id="time-series">
<h2>4、Time- Series的操作<a class="headerlink" href="#time-series" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span><span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;20180101&#39;</span><span class="p">,</span><span class="n">periods</span><span class="o">=</span><span class="mi">1000</span><span class="p">),</span><span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;abcd&#39;</span><span class="p">))</span>
<span class="n">ts</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span>
<span class="n">ts</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/20190313200310360.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDUxMDYxNQ==,size_16,color_FFFFFF,t_70" /></p>
</div>
</div>
<div class="section" id="pythonstatsmodels">
<h1>44、Python中的statsmodels模块<a class="headerlink" href="#pythonstatsmodels" title="永久链接至标题">¶</a></h1>
<p>﻿</p>
<p>&#64;Author：Runsen</p>
<div class="section" id="statsmodels">
<h2>statsmodels入门<a class="headerlink" href="#statsmodels" title="永久链接至标题">¶</a></h2>
<p>这个非常简单的案例研究旨在让您快速上手 statsmodels。从原始数据开始，我们将展示估计统计模型和绘制诊断图所需的步骤。我们只使用由statsmodels它或它pandas和patsy 依赖项提供的函数。</p>
<p>来源：http://www.statsmodels.org/stable/gettingstarted.html</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">statsmodels.api</span> <span class="kn">as</span> <span class="nn">sm</span>
<span class="kn">import</span> <span class="nn">pandas</span>
<span class="kn">from</span> <span class="nn">patsy</span> <span class="kn">import</span> <span class="n">dmatrices</span> <span class="c1"># patsy用于描述统计模型和使用类似公式构建设计矩阵R</span>
<span class="c1">#下载了Guerry数据集，这是一组历史数据，用于支持Andre-Michel Guerry在1833年 关于法国道德统计的论文。</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">get_rdataset</span><span class="p">(</span><span class="s2">&quot;Guerry&quot;</span><span class="p">,</span> <span class="s2">&quot;HistData&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200717085206962.png" src="https://img-blog.csdnimg.cn/20200717085206962.png" /></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Index</span><span class="p">([</span><span class="s1">&#39;dept&#39;</span><span class="p">,</span> <span class="s1">&#39;Region&#39;</span><span class="p">,</span> <span class="s1">&#39;Department&#39;</span><span class="p">,</span> <span class="s1">&#39;Crime_pers&#39;</span><span class="p">,</span> <span class="s1">&#39;Crime_prop&#39;</span><span class="p">,</span> <span class="s1">&#39;Literacy&#39;</span><span class="p">,</span>
       <span class="s1">&#39;Donations&#39;</span><span class="p">,</span> <span class="s1">&#39;Infants&#39;</span><span class="p">,</span> <span class="s1">&#39;Suicides&#39;</span><span class="p">,</span> <span class="s1">&#39;MainCity&#39;</span><span class="p">,</span> <span class="s1">&#39;Wealth&#39;</span><span class="p">,</span> <span class="s1">&#39;Commerce&#39;</span><span class="p">,</span>
       <span class="s1">&#39;Clergy&#39;</span><span class="p">,</span> <span class="s1">&#39;Crime_parents&#39;</span><span class="p">,</span> <span class="s1">&#39;Infanticide&#39;</span><span class="p">,</span> <span class="s1">&#39;Donation_clergy&#39;</span><span class="p">,</span> <span class="s1">&#39;Lottery&#39;</span><span class="p">,</span>
       <span class="s1">&#39;Desertion&#39;</span><span class="p">,</span> <span class="s1">&#39;Instruction&#39;</span><span class="p">,</span> <span class="s1">&#39;Prostitutes&#39;</span><span class="p">,</span> <span class="s1">&#39;Distance&#39;</span><span class="p">,</span> <span class="s1">&#39;Area&#39;</span><span class="p">,</span>
       <span class="s1">&#39;Pop1831&#39;</span><span class="p">],</span>
      <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;object&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 86 entries, 0 to 85
Data columns (total 23 columns):
dept               86 non-null int64
Region             85 non-null object
Department         86 non-null object
Crime_pers         86 non-null int64
Crime_prop         86 non-null int64
Literacy           86 non-null int64
Donations          86 non-null int64
Infants            86 non-null int64
Suicides           86 non-null int64
MainCity           86 non-null object
Wealth             86 non-null int64
Commerce           86 non-null int64
Clergy             86 non-null int64
Crime_parents      86 non-null int64
Infanticide        86 non-null int64
Donation_clergy    86 non-null int64
Lottery            86 non-null int64
Desertion          86 non-null int64
Instruction        86 non-null int64
Prostitutes        86 non-null int64
Distance           86 non-null float64
Area               86 non-null int64
Pop1831            86 non-null float64
dtypes: float64(2), int64(18), object(3)
memory usage: 15.5+ KB
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 在地区Region  85 non-null object有缺失值</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
</pre></div>
</div>
<p>法国86个省的识字率是否与19世纪20年代皇家彩票的人均赌注有关。</p>
<p>我们需要控制每个部门的财富水平，在回归方程的右侧包含一系列虚拟变量，以控制由于区域效应而导致的未观察到的异质性。</p>
<p><strong>使用普通最小二乘回归（OLS）估计模型。</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 使用patsy的dmatrices函数来创建设计矩阵</span>
<span class="c1">#  y 是一个 N×1关于人均彩票投注数据的一栏（彩票）。X 是 N×7带有截距， 识字和财富变量，以及4个区域二进制变量</span>
<span class="n">y</span><span class="p">,</span> <span class="n">X</span> <span class="o">=</span> <span class="n">dmatrices</span><span class="p">(</span><span class="s1">&#39;Lottery ~ Literacy + Wealth + Region&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">return_type</span><span class="o">=</span><span class="s1">&#39;dataframe&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">y</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span><span class="n">dataframe</span> <span class="n">tbody</span> <span class="n">tr</span> <span class="n">th</span> <span class="p">{</span>
    <span class="n">vertical</span><span class="o">-</span><span class="n">align</span><span class="p">:</span> <span class="n">top</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">.</span><span class="n">dataframe</span> <span class="n">thead</span> <span class="n">th</span> <span class="p">{</span>
    <span class="n">text</span><span class="o">-</span><span class="n">align</span><span class="p">:</span> <span class="n">right</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</style><table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Lottery</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>41.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>38.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>66.0</td>
    </tr>
  </tbody>
</table></div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">X</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span><span class="n">dataframe</span> <span class="n">tbody</span> <span class="n">tr</span> <span class="n">th</span> <span class="p">{</span>
    <span class="n">vertical</span><span class="o">-</span><span class="n">align</span><span class="p">:</span> <span class="n">top</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">.</span><span class="n">dataframe</span> <span class="n">thead</span> <span class="n">th</span> <span class="p">{</span>
    <span class="n">text</span><span class="o">-</span><span class="n">align</span><span class="p">:</span> <span class="n">right</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</style><table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Intercept</th>
      <th>Region[T.E]</th>
      <th>Region[T.N]</th>
      <th>Region[T.S]</th>
      <th>Region[T.W]</th>
      <th>Literacy</th>
      <th>Wealth</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>37.0</td>
      <td>73.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>51.0</td>
      <td>22.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>13.0</td>
      <td>61.0</td>
    </tr>
  </tbody>
</table></div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 模型拟合和总结</span>
<span class="n">mod</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">OLS</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">X</span><span class="p">)</span>    <span class="c1"># Describe model</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>       <span class="c1"># Fit model</span>

<span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>   <span class="c1"># Summarize model</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>                            <span class="n">OLS</span> <span class="n">Regression</span> <span class="n">Results</span>                            
<span class="o">==============================================================================</span>
<span class="n">Dep</span><span class="o">.</span> <span class="n">Variable</span><span class="p">:</span>                <span class="n">Lottery</span>   <span class="n">R</span><span class="o">-</span><span class="n">squared</span><span class="p">:</span>                       <span class="mf">0.338</span>
<span class="n">Model</span><span class="p">:</span>                            <span class="n">OLS</span>   <span class="n">Adj</span><span class="o">.</span> <span class="n">R</span><span class="o">-</span><span class="n">squared</span><span class="p">:</span>                  <span class="mf">0.287</span>
<span class="n">Method</span><span class="p">:</span>                 <span class="n">Least</span> <span class="n">Squares</span>   <span class="n">F</span><span class="o">-</span><span class="n">statistic</span><span class="p">:</span>                     <span class="mf">6.636</span>
<span class="n">Date</span><span class="p">:</span>                <span class="n">Thu</span><span class="p">,</span> <span class="mi">09</span> <span class="n">May</span> <span class="mi">2019</span>   <span class="n">Prob</span> <span class="p">(</span><span class="n">F</span><span class="o">-</span><span class="n">statistic</span><span class="p">):</span>           <span class="mf">1.07e-05</span>
<span class="n">Time</span><span class="p">:</span>                        <span class="mi">18</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mi">22</span>   <span class="n">Log</span><span class="o">-</span><span class="n">Likelihood</span><span class="p">:</span>                <span class="o">-</span><span class="mf">375.30</span>
<span class="n">No</span><span class="o">.</span> <span class="n">Observations</span><span class="p">:</span>                  <span class="mi">85</span>   <span class="n">AIC</span><span class="p">:</span>                             <span class="mf">764.6</span>
<span class="n">Df</span> <span class="n">Residuals</span><span class="p">:</span>                      <span class="mi">78</span>   <span class="n">BIC</span><span class="p">:</span>                             <span class="mf">781.7</span>
<span class="n">Df</span> <span class="n">Model</span><span class="p">:</span>                           <span class="mi">6</span>                                         
<span class="n">Covariance</span> <span class="n">Type</span><span class="p">:</span>            <span class="n">nonrobust</span>                                         
<span class="o">===============================================================================</span>
                  <span class="n">coef</span>    <span class="n">std</span> <span class="n">err</span>          <span class="n">t</span>      <span class="n">P</span><span class="o">&gt;|</span><span class="n">t</span><span class="o">|</span>      <span class="p">[</span><span class="mf">0.025</span>      <span class="mf">0.975</span><span class="p">]</span>
<span class="o">-------------------------------------------------------------------------------</span>
<span class="n">Intercept</span>      <span class="mf">38.6517</span>      <span class="mf">9.456</span>      <span class="mf">4.087</span>      <span class="mf">0.000</span>      <span class="mf">19.826</span>      <span class="mf">57.478</span>
<span class="n">Region</span><span class="p">[</span><span class="n">T</span><span class="o">.</span><span class="n">E</span><span class="p">]</span>   <span class="o">-</span><span class="mf">15.4278</span>      <span class="mf">9.727</span>     <span class="o">-</span><span class="mf">1.586</span>      <span class="mf">0.117</span>     <span class="o">-</span><span class="mf">34.793</span>       <span class="mf">3.938</span>
<span class="n">Region</span><span class="p">[</span><span class="n">T</span><span class="o">.</span><span class="n">N</span><span class="p">]</span>   <span class="o">-</span><span class="mf">10.0170</span>      <span class="mf">9.260</span>     <span class="o">-</span><span class="mf">1.082</span>      <span class="mf">0.283</span>     <span class="o">-</span><span class="mf">28.453</span>       <span class="mf">8.419</span>
<span class="n">Region</span><span class="p">[</span><span class="n">T</span><span class="o">.</span><span class="n">S</span><span class="p">]</span>    <span class="o">-</span><span class="mf">4.5483</span>      <span class="mf">7.279</span>     <span class="o">-</span><span class="mf">0.625</span>      <span class="mf">0.534</span>     <span class="o">-</span><span class="mf">19.039</span>       <span class="mf">9.943</span>
<span class="n">Region</span><span class="p">[</span><span class="n">T</span><span class="o">.</span><span class="n">W</span><span class="p">]</span>   <span class="o">-</span><span class="mf">10.0913</span>      <span class="mf">7.196</span>     <span class="o">-</span><span class="mf">1.402</span>      <span class="mf">0.165</span>     <span class="o">-</span><span class="mf">24.418</span>       <span class="mf">4.235</span>
<span class="n">Literacy</span>       <span class="o">-</span><span class="mf">0.1858</span>      <span class="mf">0.210</span>     <span class="o">-</span><span class="mf">0.886</span>      <span class="mf">0.378</span>      <span class="o">-</span><span class="mf">0.603</span>       <span class="mf">0.232</span>
<span class="n">Wealth</span>          <span class="mf">0.4515</span>      <span class="mf">0.103</span>      <span class="mf">4.390</span>      <span class="mf">0.000</span>       <span class="mf">0.247</span>       <span class="mf">0.656</span>
<span class="o">==============================================================================</span>
<span class="n">Omnibus</span><span class="p">:</span>                        <span class="mf">3.049</span>   <span class="n">Durbin</span><span class="o">-</span><span class="n">Watson</span><span class="p">:</span>                   <span class="mf">1.785</span>
<span class="n">Prob</span><span class="p">(</span><span class="n">Omnibus</span><span class="p">):</span>                  <span class="mf">0.218</span>   <span class="n">Jarque</span><span class="o">-</span><span class="n">Bera</span> <span class="p">(</span><span class="n">JB</span><span class="p">):</span>                <span class="mf">2.694</span>
<span class="n">Skew</span><span class="p">:</span>                          <span class="o">-</span><span class="mf">0.340</span>   <span class="n">Prob</span><span class="p">(</span><span class="n">JB</span><span class="p">):</span>                        <span class="mf">0.260</span>
<span class="n">Kurtosis</span><span class="p">:</span>                       <span class="mf">2.454</span>   <span class="n">Cond</span><span class="o">.</span> <span class="n">No</span><span class="o">.</span>                         <span class="mf">371.</span>
<span class="o">==============================================================================</span>

<span class="n">Warnings</span><span class="p">:</span>
<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="n">Standard</span> <span class="n">Errors</span> <span class="n">assume</span> <span class="n">that</span> <span class="n">the</span> <span class="n">covariance</span> <span class="n">matrix</span> <span class="n">of</span> <span class="n">the</span> <span class="n">errors</span> <span class="ow">is</span> <span class="n">correctly</span> <span class="n">specified</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">res</span><span class="o">.</span><span class="n">params</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Intercept</span>      <span class="mf">38.651655</span>
<span class="n">Region</span><span class="p">[</span><span class="n">T</span><span class="o">.</span><span class="n">E</span><span class="p">]</span>   <span class="o">-</span><span class="mf">15.427785</span>
<span class="n">Region</span><span class="p">[</span><span class="n">T</span><span class="o">.</span><span class="n">N</span><span class="p">]</span>   <span class="o">-</span><span class="mf">10.016961</span>
<span class="n">Region</span><span class="p">[</span><span class="n">T</span><span class="o">.</span><span class="n">S</span><span class="p">]</span>    <span class="o">-</span><span class="mf">4.548257</span>
<span class="n">Region</span><span class="p">[</span><span class="n">T</span><span class="o">.</span><span class="n">W</span><span class="p">]</span>   <span class="o">-</span><span class="mf">10.091276</span>
<span class="n">Literacy</span>       <span class="o">-</span><span class="mf">0.185819</span>
<span class="n">Wealth</span>          <span class="mf">0.451475</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 应用Rainbow测试线性度</span>
<span class="k">print</span><span class="p">(</span><span class="n">sm</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">linear_rainbow</span><span class="p">(</span><span class="n">res</span><span class="p">))</span><span class="c1">#第一个数字是F统计量，第二个数字是p值。</span>
<span class="n">sm</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">plot_partregress</span><span class="p">(</span><span class="s1">&#39;Lottery&#39;</span><span class="p">,</span> <span class="s1">&#39;Wealth&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">,</span> <span class="s1">&#39;Literacy&#39;</span><span class="p">],</span>
                          <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">obs_labels</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mf">0.847233997615691</span><span class="p">,</span> <span class="mf">0.6997965543621644</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20190509180722494.png" src="https://img-blog.csdnimg.cn/20190509180722494.png" /></p>
<p>对于statsmodels确实是一个值得学习的机器学习库</p>
<p>参考：http://www.statsmodels.org/stable/gettingstarted.html</p>
</div>
</div>
<div class="section" id="id233">
<h1>45、和我一起看看，国外的Python考试到底是怎么样（上篇）<a class="headerlink" href="#id233" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author ： By Runsen
&#64;Written Date：2020/05/20</p>
<div class="section" id="id234">
<h2>前言<a class="headerlink" href="#id234" title="永久链接至标题">¶</a></h2>
<p>我是在4月底帮别人考试的，然后别人发过来去年的考试题的。我看了下，全是英文，原来是留学生啊。</p>
<p>走，我带你们看看国外的Python考试题到底是什么辣鸡东西？</p>
<p><img alt="https://img-blog.csdnimg.cn/20200520093613896.png" src="https://img-blog.csdnimg.cn/20200520093613896.png" /></p>
<p>看了下，好像我英语不行，但也知道满分是70，什么辣鸡玩意，一脸懵逼</p>
</div>
<div class="section" id="id235">
<h2>第一题<a class="headerlink" href="#id235" title="永久链接至标题">¶</a></h2>
<p><img alt="https://img-blog.csdnimg.cn/20200520093834495.png" src="https://img-blog.csdnimg.cn/20200520093834495.png" /></p>
<p>就是要我定义samPlaces函数方法，主要这个是需要O（n)的时间复杂度，对于我这老油条来说，就是一个切菜的东西，直接用字典，Leetcode第一题的两数相加就是这个玩意。难度0，切菜级别</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">@Author： Runsen</span>
<span class="s1">@微信公众号： Python之王</span>
<span class="s1">@博客： https://blog.csdn.net/weixin_44510615</span>
<span class="s1">@Date： 2020/4/23</span>
<span class="s1">&#39;&#39;&#39;</span>
<span class="s1">&#39;&#39;&#39;</span>
<span class="s1">输出两个列表的相同的索引</span>
<span class="s1">&#39;&#39;&#39;</span>
<span class="nt">def</span> <span class="nt">samPlaces</span><span class="o">(</span><span class="nt">s1</span><span class="o">,</span><span class="nt">s2</span><span class="o">):</span>
    <span class="nt">if</span> <span class="nt">len</span><span class="o">(</span><span class="nt">s1</span><span class="o">)</span> <span class="o">!=</span> <span class="nt">len</span><span class="o">(</span><span class="nt">s2</span><span class="o">):</span>
        <span class="nt">return</span> <span class="o">[]</span>
    <span class="nt">my_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="nt">my_index</span> <span class="o">=</span> <span class="o">[]</span>
    <span class="nt">for</span> <span class="nt">index</span><span class="o">,</span><span class="nt">item</span> <span class="nt">in</span> <span class="nt">enumerate</span><span class="o">(</span><span class="nt">s1</span><span class="o">):</span>
        <span class="nt">my_dict</span><span class="o">[</span><span class="nt">item</span><span class="o">]</span> <span class="o">=</span> <span class="nt">index</span>
    <span class="nt">for</span> <span class="nt">i</span> <span class="nt">in</span> <span class="nt">s2</span><span class="o">:</span>
        <span class="nt">if</span> <span class="nt">i</span> <span class="nt">in</span> <span class="nt">my_dict</span><span class="p">.</span><span class="nc">keys</span><span class="o">():</span>
            <span class="nt">my_index</span><span class="p">.</span><span class="nc">append</span><span class="o">(</span><span class="nt">my_dict</span><span class="o">[</span><span class="nt">i</span><span class="o">])</span>
    <span class="nt">return</span> <span class="nt">my_index</span>
<span class="nt">if</span> <span class="nt">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="o">:</span>
    <span class="nt">print</span><span class="o">(</span><span class="nt">samPlaces</span><span class="o">([</span><span class="nt">1</span><span class="o">,</span><span class="nt">7</span><span class="o">,</span><span class="nt">9</span><span class="o">],[</span><span class="nt">1</span><span class="o">,</span><span class="nt">3</span><span class="o">,</span><span class="nt">9</span><span class="o">]))</span>
</pre></div>
</div>
</div>
<div class="section" id="id236">
<h2>第二题<a class="headerlink" href="#id236" title="永久链接至标题">¶</a></h2>
<p><img alt="https://img-blog.csdnimg.cn/20200520100505451.png" src="https://img-blog.csdnimg.cn/20200520100505451.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20200520100522829.png" src="https://img-blog.csdnimg.cn/20200520100522829.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/2020052010092650.png" src="https://img-blog.csdnimg.cn/2020052010092650.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20200520101007795.png" src="https://img-blog.csdnimg.cn/20200520101007795.png" />
二题看的我就是一个煞笔，一个InputOuput.py 就是读取文件的，第二Quicsort.py就是快速排序的。第三个是一个字符串开头和结尾字符要相同。4+3+5+4+4=20分</p>
<p>第一个问我Manipulation.py输出什么，这不是当我傻逼，如果单词前后字母都相同，直接del，沙比。</p>
<p>答案是</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="o">[</span><span class="s1">&#39;cat&#39;</span><span class="o">,</span> <span class="s1">&#39;elephant&#39;</span><span class="o">]</span>
<span class="o">[]</span>
</pre></div>
</div>
<p>第二题，我去，这么简单，太简单了，送分的</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">begin</span>
<span class="nt">this</span>
<span class="nt">is</span>
<span class="nt">a</span>
<span class="nt">test</span>
<span class="nt">end</span>
</pre></div>
</div>
<p>第三题，用一个函数main（）编写一个程序，就是读取，再排序，再去除单词前后字母都相同，然后将结果字符串写入名为cookedData.txt文件</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span>def readFromFile(filename):
    lst = []
    fp = open(filename,&quot;r&quot;)
    item = fp.readline().strip()
    while item != &#39;&#39;:
        lst.append(item)
        item = fp.readline().strip()
    fp.close()

    return lst

def writeTofile(contents,filename):
    fp = open(filename,&quot;w&quot;)
    fp.write(&quot;begin\n&quot;)
    for item in contents:
        fp.write(item + &quot; &quot;)
    fp.write(&quot;\nend&quot;)
    fp.close()

def sort(lis):
    if len(lis) &lt; 2:
        return lis
    less, equal ,greater = [],[],[]
    pval = lis[0]
    for i in lis:
        if i &lt; pval :
            less.append(i)
        elif i &gt; pval:
            greater.append(i)
        else:
            equal.append(i)
    return sort(less) + equal + sort(greater)

def modifylist(values):
    i=0
    while i &lt;  len(values):
        if values[i][0] == values[i][-1] or (&quot; &quot; in values[i]):
           del values [i]
        else:
            i +=1
            
if __name__ == &#39;__main__&#39;:
    # [&#39;for loop&#39;, &#39;link list&#39;, &#39;return&#39;, &#39;CISC&#39;, &#39;binary rearch tree&#39;, &#39;variable&#39;]
    data = readFromFile(&quot;rawData.txt&quot;)
    # [&#39;CISC&#39;, &#39;binary rearch tree&#39;, &#39;for loop&#39;, &#39;link list&#39;, &#39;return&#39;, &#39;variable&#39;]
    sort_data = sort(data)
    modifylist(sort_data)
    print(sort_data)  # [&#39;return&#39;, &#39;variable&#39;]
    writeTofile(sort_data,&quot;cookedData.txt&quot;)

</pre></div>
</div>
<p>第四题，都是切菜切菜</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span># cookedData.txt
begin
return variable 
end
</pre></div>
</div>
<p>第五题，将在快速排序中按降序（从最大值到最小值）排序，辣鸡，简单，大于变小于，小于变大于。</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span>def sort(lis):
    if len(lis) &lt; 2:
        return lis
    less, equal ,greater = [],[],[]
    pval = lis[0]
    for i in lis:
        if i &gt; pval :
            less.append(i)
        elif i &lt; pval:
            greater.append(i)
        else:
            equal.append(i)
    return sort(less) + equal + sort(greater)
if __name__ == &#39;__main__&#39;:
    print(sort([17,-28,11,9,15,-2]))
    # [17, 15, 11, 9, -2, -28]
</pre></div>
</div>
</div>
<div class="section" id="id237">
<h2>第三题<a class="headerlink" href="#id237" title="永久链接至标题">¶</a></h2>
<p>填空题选择题， 我看看。好像挺难的。
<img alt="https://img-blog.csdnimg.cn/20200520110048350.png" src="https://img-blog.csdnimg.cn/20200520110048350.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20200520110103721.png" src="https://img-blog.csdnimg.cn/20200520110103721.png" /></p>
<p>第一题，如果在未排序的列表上使用二分搜索，下面对的是哪个？</p>
<p>A，程序崩了？你才崩了
B、永远找不到要查找的值。这么绝对，比如[2,1,3,5,4]，我要找3，不就打脸了吗？
C、有时搜索能成功，不用说了，就是你
D、时间复杂度发生改变，程度不变，你时间复杂度变个毛</p>
<p>我觉得就是C，送分，切菜</p>
<p>第二题、使用二分搜索来按升序搜索数字列表，但有些数字出现了不止一次。以下哪个是正确的？</p>
<p>A、搜索始终找到第一个发生
B、搜索始终找到最后一个发生
C、搜索有时找到第一个，有时找到最后一个
D、时间复杂度发生改变</p>
<p>如果是[1,1,2,3,5,6,] 找1，是[1,2,3,4,5,5,] 找4，所以搜索找到的位置不能明确，二分查找在最坏情况下是在排除到只剩下最后一个值之后得到结果，二分查找的时间复杂度O(log2n)，如果出现相同的数字，时间复杂度应该发生改变，答案我觉得是D</p>
<p>第三题、冒泡排序，对以下列表进行排序数值：[17，5,12,13,16,3]，显示冒泡排的第一次迭代后的列表</p>
<p><a class="reference external" href="https://maoli.blog.csdn.net/article/details/105119302">练习、Python实现冒泡排序（三十九）</a></p>
<p>我这篇搞定了，辣鸡东西，一个外循环，切菜送分</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="o">[</span><span class="nt">5</span><span class="o">,</span><span class="nt">12</span><span class="o">,</span><span class="nt">13</span><span class="o">,</span><span class="nt">16</span><span class="o">,</span><span class="nt">3</span><span class="o">,</span><span class="nt">17</span><span class="o">]</span>
</pre></div>
</div>
<p>第四题，选择排序，插入排序，冒泡排序选一个，</p>
<p><img alt="https://img-blog.csdnimg.cn/20200520111951448.png" src="https://img-blog.csdnimg.cn/20200520111951448.png" /></p>
<p>摆明选择，这他妈的简单一笔</p>
<p>第五题</p>
<p>在合并排序中，将列表重复拆分，然后将排序列表重新合并在一起。显示这两者的合并结果列表：[4，7,9,12]，[1,4,6,8,15]   合并成 [1, 4.，6，7，8，9，12，15,。需要代码实现，</p>
<p>这有点难度，但是也是很基础的排序。就是切菜，辣鸡</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span>&#39;&#39;&#39;
@Author： Runsen
@微信公众号： Python之王
@博客： https://blog.csdn.net/weixin_44510615
@Date： 2020/4/25
&#39;&#39;&#39;
def merge(a, b):
    &#39;&#39;&#39;
    合并排序：两个已经排序好的
    &#39;&#39;&#39;
    c = []
    h = j = 0
    # 谁小加谁
    while j &lt; len(a) and h &lt; len(b):
        if a[j] &lt; b[h]:
            c.append(a[j])
            j += 1
        # 相同也没事
        else:
            c.append(b[h])
            h += 1
    # 有的时候 j 直接达到了len(a)，那么直接append b剩下的
    if j == len(a):
        for i in b[h:]:
            c.append(i)
    if h == len(b):
        for i in a[j:]:
            c.append(i)
    return c

if __name__ == &#39;__main__&#39;:
    print(merge([4,7,9,12],[1,4,6,8,15]))
    # [1, 4, 4, 6, 7, 8, 9, 12, 15]
</pre></div>
</div>
</div>
<div class="section" id="id238">
<h2>第四题<a class="headerlink" href="#id238" title="永久链接至标题">¶</a></h2>
<p><img alt="https://img-blog.csdnimg.cn/20200520112531575.png" src="https://img-blog.csdnimg.cn/20200520112531575.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20200520113620386.png" src="https://img-blog.csdnimg.cn/20200520113620386.png" />
我还以为什么东西，练习时间复杂度，切菜</p>
<p>第一题</p>
<p><img alt="https://img-blog.csdnimg.cn/20200520113655623.png" src="https://img-blog.csdnimg.cn/20200520113655623.png" /></p>
<p>时间复杂度$O(N^2)$</p>
<p>第二题</p>
<p><img alt="https://img-blog.csdnimg.cn/20200520114051865.png" src="https://img-blog.csdnimg.cn/20200520114051865.png" /></p>
<p>取整除等于用<code class="docutils literal notranslate"><span class="pre">//=</span></code>来进行表示。一样的道理</p>
<p>一个堆排序的样子，时间复杂度$O(N*log_2N)$</p>
<p>第三题
<img alt="https://img-blog.csdnimg.cn/20200520114608591.png" src="https://img-blog.csdnimg.cn/20200520114608591.png" /></p>
<p>时间复杂度$O(N)$</p>
<p>第四题</p>
<p><img alt="https://img-blog.csdnimg.cn/20200520114748294.png" src="https://img-blog.csdnimg.cn/20200520114748294.png" /></p>
<p>时间复杂度$O(N^2)$</p>
<p>我没有答案的，就是自己瞎逼逼的，先到这，有点长了</p>
</div>
</div>
<div class="section" id="id239">
<h1>46、和我一起看看，国外的Python考试到底是怎么样（下篇）<a class="headerlink" href="#id239" title="永久链接至标题">¶</a></h1>
<p>&#64;Author: Runsen
&#64;Date：2020/5/21</p>
<div class="section" id="id240">
<h2>第五题<a class="headerlink" href="#id240" title="永久链接至标题">¶</a></h2>
<p>看题，看Runsen怎么解决国外Python考试。
<img alt="https://img-blog.csdnimg.cn/202005212231099.png" src="https://img-blog.csdnimg.cn/202005212231099.png" /></p>
<p>第一题，就是代入法，送分</p>
<p>len一开始是5，然后m等于2，取整除，这样就是 c+ab+de</p>
<p>然后再将ab，de运行一次</p>
<p>ab：2整除是1，得到b，a ，</p>
<p>de：2整除是1，得到e，d ，</p>
<p>答案就是cbaed</p>
<p>我不信，就写代码测试一下</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">@Author： Runsen</span>
<span class="s1">@微信公众号： Python之王</span>
<span class="s1">@博客： https://blog.csdn.net/weixin_44510615</span>
<span class="s1">@Date： 2020/5/21</span>
<span class="s1">&#39;&#39;&#39;</span>
<span class="nt">def</span> <span class="nt">fn</span><span class="o">(</span><span class="nt">a</span><span class="o">):</span>
    <span class="nt">if</span> <span class="nt">len</span><span class="o">(</span><span class="nt">a</span><span class="o">)</span> <span class="o">&lt;</span><span class="nt">2</span><span class="o">:</span>
        <span class="nt">return</span>  <span class="nt">a</span>
    <span class="nt">m</span> <span class="o">=</span> <span class="nt">len</span><span class="o">(</span><span class="nt">a</span><span class="o">)</span> <span class="o">//</span><span class="nt">2</span>
    <span class="nt">print</span><span class="o">(</span><span class="nt">a</span><span class="o">[</span><span class="nt">m</span><span class="o">],</span><span class="nt">a</span><span class="o">[</span><span class="p">:</span><span class="nd">m</span><span class="o">],</span><span class="nt">a</span><span class="o">[</span><span class="nt">m</span><span class="o">+</span><span class="nt">1</span><span class="o">:])</span>
    <span class="nt">return</span> <span class="nt">a</span><span class="o">[</span><span class="nt">m</span><span class="o">]</span> <span class="o">+</span> <span class="nt">fn</span><span class="o">(</span><span class="nt">a</span><span class="o">[</span><span class="p">:</span><span class="nd">m</span><span class="o">])</span> <span class="o">+</span> <span class="nt">fn</span><span class="o">(</span><span class="nt">a</span><span class="o">[</span><span class="nt">m</span><span class="o">+</span><span class="nt">1</span><span class="o">:])</span>

<span class="nt">if</span> <span class="nt">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="o">:</span>
    <span class="nt">print</span><span class="o">(</span><span class="nt">fn</span><span class="o">(</span><span class="s1">&#39;abcde&#39;</span><span class="o">))</span>

<span class="nt">c</span> <span class="nt">ab</span> <span class="nt">de</span>
<span class="nt">b</span> <span class="nt">a</span> 
<span class="nt">e</span> <span class="nt">d</span> 
<span class="nt">cbaed</span>
</pre></div>
</div>
<p>和想得一样，简单</p>
<p><img alt="https://img-blog.csdnimg.cn/20200521223123412.png" src="https://img-blog.csdnimg.cn/20200521223123412.png" /></p>
<p>继续代入，其中lo =0，hi=4，m=2.，num[2] = 15，这样就是[1, 2, 15, 4, 5]</p>
<p>fn([1,2,15,4,5],0,1)  ，继续代入m=0，s=3，num[0] =3，就是[3, 2, 15, 4, 5]</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span># 错误的想法
这是这是把本身的fn运行，在fn还有两个fn。继续代入，fn([3,2,15,4,5],0,0)，其中m=2.，num[0] = 3，无变化。fn([3,2,15,4,5],1,5)，其中m=3，num[0] = 3



这样就是[1, 2, 15, 4, 5]

</pre></div>
</div>
<p><strong>我终于知道了，这里考的是函数的嵌套</strong></p>
<p>这题，我真的不会，一个函数再调用两次，直接打印看看，结果是[3, 2, 15, 9, 5]，此题不会，</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">@Author： Runsen</span>
<span class="s1">@微信公众号： Python之王</span>
<span class="s1">@博客： https://blog.csdn.net/weixin_44510615</span>
<span class="s1">@Date： 2020/5/21</span>
<span class="s1">&#39;&#39;&#39;</span>

<span class="nt">def</span> <span class="nt">fn</span><span class="o">(</span><span class="nt">nums</span><span class="o">,</span><span class="nt">lo</span><span class="o">,</span><span class="nt">hi</span><span class="o">):</span>
    <span class="nt">if</span> <span class="nt">hi</span> <span class="o">&lt;</span> <span class="nt">lo</span><span class="o">:</span>
        <span class="nt">return</span>
    <span class="nt">m</span> <span class="o">=</span> <span class="o">(</span><span class="nt">lo</span> <span class="o">+</span><span class="nt">hi</span> <span class="o">)//</span><span class="nt">2</span>
    <span class="nt">s</span> <span class="o">=</span> <span class="nt">0</span>
    <span class="nt">for</span> <span class="nt">i</span> <span class="nt">in</span> <span class="nt">range</span><span class="o">(</span><span class="nt">lo</span><span class="o">,</span><span class="nt">hi</span><span class="o">+</span><span class="nt">1</span><span class="o">):</span>
        <span class="nt">s</span> <span class="o">+=</span> <span class="nt">nums</span><span class="o">[</span><span class="nt">i</span><span class="o">]</span>
    <span class="nt">nums</span><span class="o">[</span><span class="nt">m</span><span class="o">]</span> <span class="o">=</span> <span class="nt">s</span>
    <span class="nt">print</span><span class="o">(</span><span class="nt">nums</span><span class="o">,</span><span class="nt">lo</span><span class="o">,</span><span class="nt">m</span><span class="o">)</span>
    <span class="nt">fn</span><span class="o">(</span><span class="nt">nums</span><span class="o">,</span><span class="nt">lo</span> <span class="o">,</span> <span class="nt">m-1</span><span class="o">)</span>
    <span class="nt">print</span><span class="o">(</span><span class="nt">nums</span><span class="o">)</span>
    <span class="nt">fn</span><span class="o">(</span><span class="nt">nums</span><span class="o">,</span><span class="nt">m</span><span class="o">+</span><span class="nt">1</span> <span class="o">,</span> <span class="nt">hi</span><span class="o">)</span>

<span class="nt">if</span> <span class="nt">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="o">:</span>
    <span class="nt">test</span> <span class="o">=</span> <span class="o">[</span><span class="nt">1</span><span class="o">,</span> <span class="nt">2</span><span class="o">,</span> <span class="nt">3</span><span class="o">,</span> <span class="nt">4</span><span class="o">,</span> <span class="nt">5</span><span class="o">]</span>
    <span class="nt">fn</span><span class="o">(</span><span class="nt">test</span><span class="o">,</span> <span class="nt">0</span><span class="o">,</span> <span class="nt">len</span><span class="o">(</span><span class="nt">test</span><span class="o">)</span><span class="nt">-1</span><span class="o">)</span>
    <span class="nt">print</span><span class="o">(</span><span class="nt">test</span><span class="o">)</span>




<span class="o">[</span><span class="nt">1</span><span class="o">,</span> <span class="nt">2</span><span class="o">,</span> <span class="nt">15</span><span class="o">,</span> <span class="nt">4</span><span class="o">,</span> <span class="nt">5</span><span class="o">]</span> <span class="nt">0</span> <span class="nt">2</span>
<span class="o">[</span><span class="nt">3</span>

<span class="o">,</span> <span class="nt">2</span><span class="o">,</span> <span class="nt">15</span><span class="o">,</span> <span class="nt">4</span><span class="o">,</span> <span class="nt">5</span><span class="o">]</span> <span class="nt">0</span> <span class="nt">0</span>
<span class="o">[</span><span class="nt">3</span><span class="o">,</span> <span class="nt">2</span><span class="o">,</span> <span class="nt">15</span><span class="o">,</span> <span class="nt">4</span><span class="o">,</span> <span class="nt">5</span><span class="o">]</span>
<span class="o">[</span><span class="nt">3</span><span class="o">,</span> <span class="nt">2</span><span class="o">,</span> <span class="nt">15</span><span class="o">,</span> <span class="nt">4</span><span class="o">,</span> <span class="nt">5</span><span class="o">]</span> <span class="nt">1</span> <span class="nt">1</span>
<span class="o">[</span><span class="nt">3</span><span class="o">,</span> <span class="nt">2</span><span class="o">,</span> <span class="nt">15</span><span class="o">,</span> <span class="nt">4</span><span class="o">,</span> <span class="nt">5</span><span class="o">]</span>
<span class="o">[</span><span class="nt">3</span><span class="o">,</span> <span class="nt">2</span><span class="o">,</span> <span class="nt">15</span><span class="o">,</span> <span class="nt">4</span><span class="o">,</span> <span class="nt">5</span><span class="o">]</span>
<span class="o">[</span><span class="nt">3</span><span class="o">,</span> <span class="nt">2</span><span class="o">,</span> <span class="nt">15</span><span class="o">,</span> <span class="nt">9</span><span class="o">,</span> <span class="nt">5</span><span class="o">]</span> <span class="nt">3</span> <span class="nt">3</span>
<span class="o">[</span><span class="nt">3</span><span class="o">,</span> <span class="nt">2</span><span class="o">,</span> <span class="nt">15</span><span class="o">,</span> <span class="nt">9</span><span class="o">,</span> <span class="nt">5</span><span class="o">]</span>
<span class="o">[</span><span class="nt">3</span><span class="o">,</span> <span class="nt">2</span><span class="o">,</span> <span class="nt">15</span><span class="o">,</span> <span class="nt">9</span><span class="o">,</span> <span class="nt">5</span><span class="o">]</span> <span class="nt">4</span> <span class="nt">4</span>
<span class="o">[</span><span class="nt">3</span><span class="o">,</span> <span class="nt">2</span><span class="o">,</span> <span class="nt">15</span><span class="o">,</span> <span class="nt">9</span><span class="o">,</span> <span class="nt">5</span><span class="o">]</span>
<span class="o">[</span><span class="nt">3</span><span class="o">,</span> <span class="nt">2</span><span class="o">,</span> <span class="nt">15</span><span class="o">,</span> <span class="nt">9</span><span class="o">,</span> <span class="nt">5</span><span class="o">]</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200521223141986.png" src="https://img-blog.csdnimg.cn/20200521223141986.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20200521223200423.png" src="https://img-blog.csdnimg.cn/20200521223200423.png" /></p>
<p>runsen一开始看这题就是蒙的，然后发现了规律$a[n+1]=a[n]+3^n$</p>
<p>这里还要求递归计算，不能超过四行代码，简单搞定</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">@Author： Runsen</span>
<span class="s1">@微信公众号： Python之王</span>
<span class="s1">@博客： https://blog.csdn.net/weixin_44510615</span>
<span class="s1">@Date： 2020/5/22</span>
<span class="s1">&#39;&#39;&#39;</span>

<span class="nt">def</span> <span class="nt">tulip</span><span class="o">(</span><span class="nt">n</span><span class="o">):</span>
    <span class="nt">if</span> <span class="nt">n</span> <span class="o">==</span> <span class="nt">0</span><span class="o">:</span>
        <span class="nt">return</span> <span class="nt">1</span>
    <span class="nt">else</span><span class="o">:</span>
        <span class="nt">return</span> <span class="nt">tulip</span><span class="o">(</span><span class="nt">n-1</span><span class="o">)</span> <span class="o">+</span> <span class="nt">3</span><span class="o">**</span><span class="nt">n</span>

<span class="nt">def</span> <span class="nt">main</span><span class="o">():</span>
    <span class="nt">n</span> <span class="o">=</span> <span class="nt">int</span><span class="o">(</span><span class="nt">input</span><span class="o">(</span><span class="s1">&#39;Enter a value for n:&#39;</span><span class="o">))</span>
    <span class="nt">for</span> <span class="nt">i</span> <span class="nt">in</span> <span class="nt">range</span><span class="o">(</span><span class="nt">n</span><span class="o">+</span><span class="nt">1</span><span class="o">):</span>
        <span class="nt">print</span><span class="o">(</span><span class="nt">tulip</span><span class="o">(</span><span class="nt">i</span><span class="o">))</span>
<span class="nt">main</span><span class="o">()</span>

<span class="nt">Enter</span> <span class="nt">a</span> <span class="nt">value</span> <span class="nt">for</span> <span class="nt">n</span><span class="p">:</span><span class="nd">5</span>
<span class="nt">1</span>
<span class="nt">4</span>
<span class="nt">13</span>
<span class="nt">40</span>
<span class="nt">121</span>
<span class="nt">364</span>
</pre></div>
</div>
</div>
<div class="section" id="id241">
<h2>第六题<a class="headerlink" href="#id241" title="永久链接至标题">¶</a></h2>
<p>第一题
<img alt="https://img-blog.csdnimg.cn/20200522162910746.png" src="https://img-blog.csdnimg.cn/20200522162910746.png" /></p>
<p>第一题。问当代码在上面显示的链表上执行时，会打印什么？</p>
<p>小白先看这个
<img alt="https://img-blog.csdnimg.cn/20200522163538501.png" src="https://img-blog.csdnimg.cn/20200522163538501.png" /></p>
<p>count=0，ptr  20
count=1，ptr  30</p>
<p>然后2跳出循环，答案到30，也是就10,20,30]，送分</p>
<p><img alt="https://img-blog.csdnimg.cn/20200522163746415.png" src="https://img-blog.csdnimg.cn/20200522163746415.png" /></p>
<p>第二题，这就是傻逼做的，答案[14,18,12,13]。解答没有</p>
<p><img alt="https://img-blog.csdnimg.cn/20200522164021974.png" src="https://img-blog.csdnimg.cn/20200522164021974.png" /></p>
<p>第三题，我的结果是[5,4,9,4]</p>
<p><img alt="https://img-blog.csdnimg.cn/20200522164348195.png" src="https://img-blog.csdnimg.cn/20200522164348195.png" /></p>
<p>考链表的时间复杂度，链表中的元素都会两个属性，一个是元素的值，另一个是指针，此指针标记了下一个元素的地址，每一个数据都会保存下一个数据的内存的地址，通过此地址可以找到下一个数据，任意位置插入元素和删除元素效率较高，时间复杂度为O(1)。随机访问效率低，时间复杂度为0(N)</p>
<p><img alt="https://img-blog.csdnimg.cn/20200522165427407.png" src="https://img-blog.csdnimg.cn/20200522165427407.png" />
我的答案</p>
<p>第一个尾节点加入节点的时间复杂度$O(1)$</p>
<p>第二个确定链表长度的时间复杂度$O(n)$</p>
<p>第三个将链表中的前10个值相加的时间复杂度为$O(1)$</p>
<p>第四个对于已排序的链接列表，搜索不在列表中的值的时间复杂性为$O(n)$</p>
</div>
<div class="section" id="id242">
<h2>第七题<a class="headerlink" href="#id242" title="永久链接至标题">¶</a></h2>
<p><img alt="https://img-blog.csdnimg.cn/20200522165627577.png" src="https://img-blog.csdnimg.cn/20200522165627577.png" /></p>
<p>第一题显示列表值在下面的树中的位置，以形成二叉搜索树。假设节点是按照在原始列表中的出现顺序插入的，从44开始，然后是60，然后是62，依此类推。</p>
<p>取中间作根节点，下图就我的答案</p>
<p><img alt="https://img-blog.csdnimg.cn/20200522170413407.png" src="https://img-blog.csdnimg.cn/20200522170413407.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20200522170727592.png" src="https://img-blog.csdnimg.cn/20200522170727592.png" /></p>
<p>第二题。指出树是否表示二叉搜索树（BST），如果树不是二叉搜索树，为什么</p>
<p>二叉搜索树：任意节点的键值一定大于其左子树中的每一个节点的键值，并小于其右子树中的每一个节点的键值。</p>
<p>第一个不是，这里错了</p>
<p><img alt="https://img-blog.csdnimg.cn/20200522171407902.png" src="https://img-blog.csdnimg.cn/20200522171407902.png" /></p>
<p>第二个是</p>
<p>第三个不是，因为不是二叉树</p>
<p>至此，这份70分的考卷结束了。我还要一份，继续。</p>
</div>
</div>
<div class="section" id="id243">
<h1>47、第二份国外的Python考试（上篇）<a class="headerlink" href="#id243" title="永久链接至标题">¶</a></h1>
<p>&#64;Author：Runsen
&#64;Date：2020/5/26</p>
<p>之前撸了一份国外的Python考试题目，那个留学生还有一份，我接着继续撸。走，看看国外的Python考试题到底是什么东西？</p>
<p><img alt="https://img-blog.csdnimg.cn/20200524163744996.png" src="https://img-blog.csdnimg.cn/20200524163744996.png" /></p>
<p>满分55分，之前的是70，不知道什么回事，撸就对了。</p>
<div class="section" id="id244">
<h2>第一题<a class="headerlink" href="#id244" title="永久链接至标题">¶</a></h2>
<p><img alt="https://img-blog.csdnimg.cn/20200526182922726.png" src="https://img-blog.csdnimg.cn/20200526182922726.png" /></p>
<p>第一题很明显就是一个时间复杂度的题目，一个快速排序，一个链表查找，一个冒泡排序，一个链表插入，一个二叉搜索，一个访问Python列表中的单个元素。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200527094912912.png" src="https://img-blog.csdnimg.cn/20200527094912912.png" /></p>
<p>快速排序$Onlogn)$，链表查找$On)$，冒泡排序$On^2)$，链表插入$O(1)$，二叉搜索$O(Logn)$
访问Python列表中的单个元素$O(1)$。</p>
<p>Python列表做元素的遍历、删除、插入等操作，对应的时间复杂度为O(n)；访问某个索引的元素、尾部添加元素或删除元素这些操作比较适合做，对应的时间复杂度为O(1)。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200527100100585.png" src="https://img-blog.csdnimg.cn/20200527100100585.png" /></p>
<p>答案我不知道，没有标准答案。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200527100151854.png" src="https://img-blog.csdnimg.cn/20200527100151854.png" /></p>
<p>第二题是指出函数的时间复杂性</p>
<p>三个循环，但是结尾是一个n//4，应该是$O(nlogn)$，因为<code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">i</span> <span class="pre">in</span> <span class="pre">range(10)</span></code>这个是$O(1)$</p>
<p><img alt="https://img-blog.csdnimg.cn/20200527101032924.png" src="https://img-blog.csdnimg.cn/20200527101032924.png" /></p>
<p>二个循环，应该是$O(n^2)$</p>
</div>
<div class="section" id="id245">
<h2>第二题<a class="headerlink" href="#id245" title="永久链接至标题">¶</a></h2>
<p><img alt="https://img-blog.csdnimg.cn/20200527101155993.png" src="https://img-blog.csdnimg.cn/20200527101155993.png" /></p>
<p>打印出什么，2<em>fizbin(6,10)，然后就是4</em>fizbin(3,5)，答案就是4。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200527101439234.png" src="https://img-blog.csdnimg.cn/20200527101439234.png" /></p>
<p>一开始mid等于2，left = mysteryFun([1,0]) =  mysteryFun([1]) +mysteryFun([0]) = 1</p>
<p>right =  mysteryFun([2，3]) =  mysteryFun([2]) +mysteryFun([3]) = 4+9=13</p>
<p>答案14。</p>
<p>如果mysteryFun([0,1])，运行3次。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200527102542313.png" src="https://img-blog.csdnimg.cn/20200527102542313.png" /></p>
<p>写一个函数应该返回一个由列表中所有字符串组成的字符串，这些字符串以一个空格分隔的给定字符开头，用字符决定排序的列表。</p>
<p>难度一般，</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span>def alliterationMaker(alist,char):
    # 对alist的开头不是char的去除
    for i in alist:
        if i[0] != char:
            alist.pop(alist.index(i))
    alist.sort()
    return alist

if __name__ == &#39;__main__&#39;:
    print(alliterationMaker([&quot;big&quot;,&quot;cow&quot;,&quot;bug&quot;,&quot;bit&quot;,&quot;table&quot;,&quot;black&quot;,&quot;bear&quot;],&quot;b&quot;))
    
[&#39;bear&#39;, &#39;big&#39;, &#39;bit&#39;, &#39;black&#39;, &#39;bug&#39;]
</pre></div>
</div>
</div>
<div class="section" id="id246">
<h2>第三题<a class="headerlink" href="#id246" title="永久链接至标题">¶</a></h2>
<p><img alt="https://img-blog.csdnimg.cn/20200527104040275.png" src="https://img-blog.csdnimg.cn/20200527104040275.png" /></p>
<p>就是把从大到小，6，5，4，2，2，然后再全部加一，7，6，5，3，3.再反转，3，3，5，6，7</p>
<p><img alt="https://img-blog.csdnimg.cn/2020052710452826.png" src="https://img-blog.csdnimg.cn/2020052710452826.png" /></p>
<p>答案8，7，6，25</p>
</div>
<div class="section" id="id247">
<h2>第四题<a class="headerlink" href="#id247" title="永久链接至标题">¶</a></h2>
<p><img alt="https://img-blog.csdnimg.cn/20200527105249730.png" src="https://img-blog.csdnimg.cn/20200527105249730.png" /></p>
<p>二叉树的遍历是指从二叉树的根结点出发，按照某种次序依次访问二叉树中的所有结点，使得每个结点被访问一次，且仅被访问一次，分别有前序遍历，中序遍历，后序遍历</p>
<p>前序遍历通俗的说就是从二叉树的根结点出发，当第一次到达结点时就输出结点数据，按照先向左在向右的方向访问。</p>
<p>中序遍历就是从二叉树的根结点出发，当第二次到达结点时就输出结点数据，按照先向左在向右的方向访问。</p>
<p>后序遍历就是从二叉树的根结点出发，当第三次到达结点时就输出结点数据，按照先向左在向右的方向访问。</p>
<p><img alt="https://img-blog.csdnimg.cn/20190528215926380.png" src="https://img-blog.csdnimg.cn/20190528215926380.png" /></p>
<p>选项A就是后序遍历 正确
选项B就是前序遍历 但是错误
选项C就是前序遍历 正确
选项D什么遍历都不是，错误
选项E什么遍历都不是，错误
<img alt="https://img-blog.csdnimg.cn/20200527110144387.png" src="https://img-blog.csdnimg.cn/20200527110144387.png" /></p>
<p>当输入是上面显示的树时，显示以下代码打印的内容。</p>
<p>这个真的不知道写什么，就是不断地分解子树，打印出来</p>
</div>
</div>
<div class="section" id="id248">
<h1>48、第二份国外的Python考试（下篇）<a class="headerlink" href="#id248" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen
&#64;Date：2020/5/26</p>
<div class="section" id="id249">
<h2>第五题<a class="headerlink" href="#id249" title="永久链接至标题">¶</a></h2>
<p><img alt="https://img-blog.csdnimg.cn/20200527111432148.png" src="https://img-blog.csdnimg.cn/20200527111432148.png" /></p>
<p>归并排序和快速排序在最佳情况下都具有$O（n logn）$时间复杂性。然而，其中一个算法的最坏情况复杂度为$O(n^2)$。说明哪些算法的时间复杂度为$O(n^2)$，并简要解释为什么</p>
<p>答案是快速排序
<img alt="https://img-blog.csdnimg.cn/20200527111040603.png" src="https://img-blog.csdnimg.cn/20200527111040603.png" /></p>
<p>快速排序具有最好的平均性能（average behavior），但最坏性能（worst case behavior）和插入排序</p>
<p>相同，也是$O(n^2)$。比如一个序列5,4,3,2,1，要排为1,2,3,4,5。按照快速排序方法，每次只会有一个数据进入正确顺序，不能把数据分成大小相当的两份，很明显，]时间复杂度就成了O(n^2)。</p>
<p>第二题</p>
<p><img alt="https://img-blog.csdnimg.cn/20200527111409799.png" src="https://img-blog.csdnimg.cn/20200527111409799.png" /></p>
<p>在对冒泡排序、选择排序和插入排序的外部循环进行三次迭代之后，下面使用哪种排序</p>
<p>第一个很明显选择排序，选择排序在未排序序列中找到最小（大）元素，存放到排序序列的起始位置。</p>
<p>第三个很明显冒泡排序，</p>
<p>那么第二个很明显插入排序</p>
<p><img alt="https://img-blog.csdnimg.cn/20200527112109255.png" src="https://img-blog.csdnimg.cn/20200527112109255.png" /></p>
<p>第三题，其实就是一个二分查找，只不过变成了查找对应的字符串，变汤不变药，问题就是当count等于2时候，那么对应的mid，higth，low。</p>
<p>第一，len(collection) = 10，一开始mid等于4，然后不对，直接low等于5，count等于1，接着mid等于7，不对，直接low等于8，count等于2，</p>
<p>因此答案是mid等于7，higth等于9，low等于8。</p>
</div>
<div class="section" id="id250">
<h2>最后一题<a class="headerlink" href="#id250" title="永久链接至标题">¶</a></h2>
<p><img alt="https://img-blog.csdnimg.cn/20200527122433768.png" src="https://img-blog.csdnimg.cn/20200527122433768.png" /></p>
<p>（20分）你被委托写一个简单的游戏卡游戏称为考试扑克。这场比赛是用一套标准的扑克牌进行的。在您的游戏中，卡片将被表示为（等级，套装）元组的列表。注意数字11-13代表杰克、王后、国王，而我代表王牌。西装（黑桃钻石、红桃和梅花）用一个字母表示。我们将把这些卡片存储在一个叫做deck的全局抖动结构中。您可以假设在您的程序中定义了以下内容</p>
<p>SCDH就是扑克牌的四种类别，一共有52张扑克牌</p>
<p>玩家最初获得5张牌。然后，他们还有三个（可选）回合，目标是实现以下其中一个</p>
<p>其中通俗的来说，就是现在你有五张牌，打牌的时候，怎么可以出五张牌，顺子可以打出去，三带二可以打出去，还有就是锄大地的同一种花色可以打出去。最后，通过五张牌的总和作为得分。你可以换牌。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200527122502815.png" src="https://img-blog.csdnimg.cn/20200527122502815.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20200527123008596.png" src="https://img-blog.csdnimg.cn/20200527123008596.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20200527123654834.png" src="https://img-blog.csdnimg.cn/20200527123654834.png" /></p>
<p>这个代码写了我快一个小时，真的很多细节注意</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span>&#39;&#39;&#39;
@Author： Runsen
@微信公众号： Python之王
@博客： https://blog.csdn.net/weixin_44510615
@Date： 2020/5/21
&#39;&#39;&#39;
import random
# 定义一副未洗的牌[0, 1....51]
porks = [i for i in range(52)]
# 定义花色
# 方片D(Diamonds) 梅花C(Clubs)  红桃H(heart)  黑桃S(spade)
suits = [&#39;D&#39;, &#39;C&#39;, &#39;H&#39;, &#39;S&#39;]
# 定义编号
ranks = [&#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39;, &#39;8&#39;,
         &#39;9&#39;, &#39;10&#39;, &#39;11&#39;, &#39;12&#39;, &#39;13&#39;]
s = 0
def get_porks(mylist):
    # 随机生成一牌，但是要求不能在之前的出现
    pork = random.choice(ranks) +  random.choice(suits)
    if pork in mylist:
        # 出现重新生成一牌
        return get_porks(mylist)
    else:
        return pork

def get_five_porks():
    mylist = []
    for i in range(52):
        # 随机得到0-51整数随机数
        randomIndex = random.randint(0, 51)
        # 交换
        porks[i], porks[randomIndex] = porks[randomIndex], porks[i]
    for i in range(5):
        suit = suits[porks[i] // 13]
        rank = ranks[porks[i] % 13]
        mylist.append(str(rank + suit))
    return mylist

def change_porks(mylist):
    # 需不需要换牌

    global s
    print(mylist,s)
    Change = input(&quot;Change some cards：y or n： &quot;)
    if Change == &quot;y&quot;:
        keep = input(&quot;Indicate which cards you wish to keep ：&quot;)
        for index,i in enumerate(keep):
            if i == &#39;0&#39;:
                # 换牌
                pork = get_porks(mylist)
                print(pork)
                mylist.insert(index, pork)
                # 在删除之后的下一个
                mylist.pop(index+1)
        print(&quot;You now have：&quot;+ str(mylist))
        change_porks(mylist)
    else:
        # 计算分数
        for i in mylist:
            print(i)
            s += int(i[:-1])
        print(&quot;Your total score is now：&quot; +str(s))
        return s


def teststraightchecker():
    global s
    mylist = get_five_porks()
    print(&quot;Here is your first hand：&quot; + str(mylist))
    change_porks(mylist)
    choice = input(&quot;Would you like to play again (y or n) ：&quot;)
    if choice == &#39;y&#39;:
        teststraightchecker()
    else:
        print(&quot;Thank you for playing&quot;)

if __name__ == &#39;__main__&#39;:
    teststraightchecker()
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200527214817516.png" src="https://img-blog.csdnimg.cn/20200527214817516.png" /></p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span>Here is your first hand：[&#39;11D&#39;, &#39;13H&#39;, &#39;3H&#39;, &#39;6C&#39;, &#39;12C&#39;]
Change some cards：y or n： y
Indicate which cards you wish to keep ：11001
You now have：[&#39;11D&#39;, &#39;13H&#39;, &#39;3S&#39;, &#39;7D&#39;, &#39;12C&#39;]
Change some cards：y or n： y
Indicate which cards you wish to keep ：11001
You now have：[&#39;11D&#39;, &#39;13H&#39;, &#39;11H&#39;, &#39;8S&#39;, &#39;12C&#39;]
Change some cards：y or n： y
Indicate which cards you wish to keep ：11101
You now have：[&#39;11D&#39;, &#39;13H&#39;, &#39;11H&#39;, &#39;6H&#39;, &#39;12C&#39;]
Change some cards：y or n： y
Indicate which cards you wish to keep ：11100
You now have：[&#39;11D&#39;, &#39;13H&#39;, &#39;11H&#39;, &#39;13C&#39;, &#39;6C&#39;]
Change some cards：y or n： y
Indicate which cards you wish to keep ：11110
You now have：[&#39;11D&#39;, &#39;13H&#39;, &#39;11H&#39;, &#39;13C&#39;, &#39;13S&#39;]
Change some cards：y or n： n
Your total score is now：61
Would you like to play again (y or n) ：n
Thank you for playing
</pre></div>
</div>
</div>
</div>
<div class="section" id="mysqlpymysql">
<h1>49、Mysql的命令总结和PyMysql<a class="headerlink" href="#mysqlpymysql" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen</p>
<p>&#64;Date：2019/2/27</p>
<div class="section" id="mysql">
<h2>了解MySQL<a class="headerlink" href="#mysql" title="永久链接至标题">¶</a></h2>
<p>MySQL是一个<strong>关系型</strong>数据库管理系统，由瑞典MySQL AB 公司开发，目前属于 Oracle 旗下产品。MySQL 是最流行的关系型数据库管理系统之一，在 WEB 应用方面，MySQL是最好的 RDBMS (Relational Database Management System，关系数据库管理系统) 应用软件。
MySQL是一种关系数据库管理系统，关系数据库将数据保存在不同的表中，而不是将所有数据放在一个大仓库内，这样就增加了速度并提高了灵活性。
MySQL所使用的 SQL 语言是用于访问数据库的最常用标准化语言。MySQL 软件采用了双授权政策，分为社区版和商业版，由于其体积小、速度快、总体拥有成本低，尤其是开放源码这一特点，一般中小型网站的开发都选择 MySQL 作为网站数据库。</p>
</div>
<div class="section" id="id251">
<h2>MySql安装<a class="headerlink" href="#id251" title="永久链接至标题">¶</a></h2>
<div class="section" id="id252">
<h3>安装和配置<a class="headerlink" href="#id252" title="永久链接至标题">¶</a></h3>
<p>下面（以CentOS Linux环境为例）。</p>
<p>Linux下有一个MySQL的分支版本，名为MariaDB，它由MySQL的一些原始开发者开发，有商业支持，旨在继续保持MySQL数据库在<a class="reference external" href="https://zh.wikipedia.org/wiki/GNU%E9%80%9A%E7%94%A8%E5%85%AC%E5%85%B1%E8%AE%B8%E5%8F%AF%E8%AF%81">GNU GPL</a>下开源（因为大家担心MySQL被甲骨文收购后会不再开源）。如果决定要直接使用MariaDB作为MySQL的替代品，可以使用下面的命令进行安装。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>yum install mariadb mariadb-server
</pre></div>
</div>
<p>如果要安装官方版本的MySQL，可以在<a class="reference external" href="https://www.mysql.com/">MySQL官方网站</a>下载安装文件。首先在下载页面中选择平台和版本，然后找到对应的下载链接。下面以MySQL 5.7.26版本和Red Hat Enterprise Linux为例，直接下载包含所有安装文件的归档文件，解归档之后通过包管理工具进行安装。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>wget https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.26-1.el7.x86_64.rpm-bundle.tar
tar -xvf mysql-5.7.26-1.el7.x86_64.rpm-bundle.tar
</pre></div>
</div>
<p>如果系统上有MariaDB相关的文件，需要先移除MariaDB相关的文件。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>yum list installed <span class="p">|</span> grep mariadb <span class="p">|</span> awk <span class="s1">&#39;{print $1}&#39;</span> <span class="p">|</span> xargs yum erase -y
</pre></div>
</div>
<p>接下来可以按照如下所示的顺序用RPM（Redhat Package Manager）工具安装MySQL。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>rpm -ivh mysql-community-common-5.7.26-1.el7.x86_64.rpm
rpm -ivh mysql-community-libs-5.7.26-1.el7.x86_64.rpm
rpm -ivh mysql-community-client-5.7.26-1.el7.x86_64.rpm
rpm -ivh mysql-community-server-5.7.26-1.el7.x86_64.rpm
</pre></div>
</div>
<p>可以使用下面的命令查看已经安装的MySQL相关的包。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>rpm -qa <span class="p">|</span> grep mysql
</pre></div>
</div>
</div>
<div class="section" id="id253">
<h3>启动MySQL服务<a class="headerlink" href="#id253" title="永久链接至标题">¶</a></h3>
<p>先修改MySQL的配置文件（<code class="docutils literal notranslate"><span class="pre">/etc/my.cnf</span></code>）添加一行<code class="docutils literal notranslate"><span class="pre">skip-grant-tables</span></code>，可以设置不进行身份验证即可连接MySQL服务器，然后就可以以超级管理员（root）身份登录。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>vim /etc/my.cnf
</pre></div>
</div>
<div class="highlight-INI notranslate"><div class="highlight"><pre><span></span><span class="k">[mysqld]</span>
<span class="na">skip-grant-tables</span>

<span class="na">datadir</span><span class="o">=</span><span class="s">/var/lib/mysql</span>
<span class="na">socket</span><span class="o">=</span><span class="s">/var/lib/mysql/mysql.sock</span>

<span class="na">symbolic-links</span><span class="o">=</span><span class="s">0</span>

<span class="na">log-error</span><span class="o">=</span><span class="s">/var/log/mysqld.log</span>
<span class="na">pid-file</span><span class="o">=</span><span class="s">/var/run/mysqld/mysqld.pid</span>
</pre></div>
</div>
<p>接下来可以使用下面的命令来启动MySQL。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>service mysqld start
</pre></div>
</div>
<p>在CentOS 7中建议使用下面的命令来启动MySQL。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>systemctl start mysqld
</pre></div>
</div>
<ul class="simple">
<li>使用MySQL客户端工具连接服务器。</li>
</ul>
<p>命令行工具：</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>mysql -u root
</pre></div>
</div>
<p>修改超级管理员（root）的访问口令为i_LOVE_macos_123。</p>
<div class="highlight-SQL notranslate"><div class="highlight"><pre><span></span><span class="n">use</span> <span class="n">mysql</span><span class="p">;</span>
<span class="k">update</span> <span class="k">user</span> <span class="k">set</span> <span class="n">authentication_string</span><span class="o">=</span><span class="n">password</span><span class="p">(</span><span class="s1">&#39;i_LOVE_macos_123&#39;</span><span class="p">)</span> <span class="k">where</span> <span class="k">user</span><span class="o">=</span><span class="s1">&#39;root&#39;</span><span class="p">;</span>
<span class="n">flush</span> <span class="k">privileges</span><span class="p">;</span>
</pre></div>
</div>
<p>将MySQL配置文件中的<code class="docutils literal notranslate"><span class="pre">skip-grant-tables</span></code>去掉，然后重启服务器，重新登录。这一次需要提供用户名和口令才能连接MySQL服务器。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>systemctl restart mysqld
mysql -u root -p
</pre></div>
</div>
<p>也可以选择图形化的客户端工具来连接MySQL服务器，可以选择下列工具之一：</p>
<ul class="simple">
<li>MySQL Workbench（官方提供的工具）</li>
<li>Navicat for MySQL（界面简单优雅，功能直观强大）</li>
<li>SQLyog for MySQL（强大的MySQL数据库管理员工具）</li>
</ul>
</div>
</div>
<div class="section" id="mysqll">
<h2>MySQLl命令<a class="headerlink" href="#mysqll" title="永久链接至标题">¶</a></h2>
<p><strong>MySQL进入与退出</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>- mysql –uusername -ppassword （进入）
- exit  (退出）
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20190227220439691.jpg" src="https://img-blog.csdnimg.cn/20190227220439691.jpg" /></p>
<p><strong>库级操作语句</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>- 显示所有的库：show databases;
- 创建库：create database [if not exists] db_name; 
- 删除库：drop database [if exists] db_name;
- 进入数据库：use db_name;
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20190227220941236.jpg" src="https://img-blog.csdnimg.cn/20190227220941236.jpg" /></p>
<p><strong>表级操作语句</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>- 显示所有的表：show tables;
- 创建表：create table [if not exists]  tb_name (create definition…);
- 显示创建表的信息：show create table tb_name;
- 删除表：drop table tb_name;
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20190227222358297.jpg" src="https://img-blog.csdnimg.cn/20190227222358297.jpg" /></p>
<ul class="simple">
<li>注意：语句结束符：<strong>每个语句都以 ; 或者 \G 结束</strong></li>
</ul>
<p><strong>插入数据</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>- 全字段插入： INSERT INTO tb_name VALUE (all_values); 一般只用这种
</pre></div>
</div>
<p>​	
<img alt="https://img-blog.csdnimg.cn/20190227223014419.jpg" src="https://img-blog.csdnimg.cn/20190227223014419.jpg" /></p>
<p><strong>查询数据</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">SELECT</span> <span class="n">field_names</span> <span class="n">FROM</span> <span class="n">tb_name</span><span class="p">;</span>
<span class="o">-</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">tb_name</span><span class="p">;</span>
<span class="o">-</span> <span class="n">SELECT</span> <span class="n">field_names</span> <span class="n">FROM</span> <span class="n">tb_name</span> <span class="n">WHERE</span> <span class="n">conditions</span><span class="p">;</span> 
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20190227223616269.png" src="https://img-blog.csdnimg.cn/20190227223616269.png" /></p>
<p><strong>修改数据</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>- 修改所有数据：UPDATE  tb_name  SET field_1=value_1 ；
- 修改多个： UPDATE  tb_name  SET field_1=value_1, field_2=value_2 …; 
- 修改满足条件的数据： UPDATE  tb_name  SET field_1=value_1  WHERE  conditions; 
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20190227224457869.jpg" src="https://img-blog.csdnimg.cn/20190227224457869.jpg" /></p>
<p><strong>删除数据</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>- 删除表中所有数据：DELETE  FROM  tb_name;
- 删除表中满足条件的数据： DELETE  FROM  tb_name  WHERE  conditions;
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20190227224858367.jpg" src="https://img-blog.csdnimg.cn/20190227224858367.jpg" /></p>
<p><strong>数值类型</strong></p>
<p><img alt="https://img-blog.csdnimg.cn/20190227220245409.png" src="https://img-blog.csdnimg.cn/20190227220245409.png" /></p>
<p><strong>字符类</strong></p>
<p><img alt="https://img-blog.csdnimg.cn/20190227220327863.png" src="https://img-blog.csdnimg.cn/20190227220327863.png" /></p>
</div>
<div class="section" id="pythonmysql">
<h2>Python连接Mysql<a class="headerlink" href="#pythonmysql" title="永久链接至标题">¶</a></h2>
<p>Python连接Mysql，用的是pymysql</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pymysql</span>

<span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;host&#39;</span><span class="p">:</span> <span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;port&#39;</span><span class="p">:</span> <span class="mi">3306</span><span class="p">,</span>
    <span class="s1">&#39;user&#39;</span><span class="p">:</span> <span class="s1">&#39;root&#39;</span><span class="p">,</span>
    <span class="s1">&#39;passwd&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;charset&#39;</span><span class="p">:</span> <span class="s1">&#39;utf8&#39;</span><span class="p">,</span>
    <span class="s1">&#39;cursorclass&#39;</span><span class="p">:</span> <span class="n">pymysql</span><span class="o">.</span><span class="n">cursors</span><span class="o">.</span><span class="n">DictCursor</span>
<span class="p">}</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">pymysql</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">**</span><span class="n">config</span><span class="p">)</span>
<span class="n">conn</span><span class="o">.</span><span class="n">autocommit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<span class="k">try</span><span class="p">:</span>
    <span class="c1"># 创建数据库</span>
    <span class="n">DB_NAME</span> <span class="o">=</span> <span class="s1">&#39;test&#39;</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;DROP DATABASE IF EXISTS </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">DB_NAME</span><span class="p">)</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;CREATE DATABASE IF NOT EXISTS </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">DB_NAME</span><span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">select_db</span><span class="p">(</span><span class="n">DB_NAME</span><span class="p">)</span>

    <span class="c1"># 创建表</span>
    <span class="n">TABLE_NAME</span> <span class="o">=</span> <span class="s1">&#39;user&#39;</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE </span><span class="si">%s</span><span class="s1">(id int primary key,name varchar(30))&#39;</span> <span class="o">%</span> <span class="n">TABLE_NAME</span><span class="p">)</span>

    <span class="c1"># 批量插入纪录</span>
    <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">):</span>
        <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;kk&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)))</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">executemany</span><span class="p">(</span><span class="s1">&#39;INSERT INTO user values(</span><span class="si">%s</span><span class="s1">,</span><span class="si">%s</span><span class="s1">)&#39;</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>

    <span class="c1"># 查询数据条目</span>
    <span class="n">count</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">TABLE_NAME</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;total records:&#39;</span><span class="p">,</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span><span class="p">)</span>

    <span class="c1"># 获取表名信息</span>
    <span class="n">desc</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">description</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%3s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">desc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">desc</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>

    <span class="n">cursor</span><span class="o">.</span><span class="n">scroll</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;absolute&#39;</span><span class="p">)</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

<span class="k">except</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">traceback</span>

    <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
    <span class="c1"># 发生错误时会滚</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="c1"># 关闭游标连接</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="c1"># 关闭数据库连接</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="redis">
<h1>50、Redis数据库学习<a class="headerlink" href="#redis" title="永久链接至标题">¶</a></h1>
<p>&#64;Author：Runsen
&#64;Date：2019/03/19</p>
<div class="section" id="id254">
<h2>Redis<a class="headerlink" href="#id254" title="永久链接至标题">¶</a></h2>
<p>Redis是一个开源的使用ANSI C语言编写、支持网络、可基于内存亦可持久化的日志型、Key-Value数据库，并提供多种语言的API。从2010年3月15日起，Redis的开发工作由VMware主持。从2013年5月开始，Redis的开发由Pivotal赞助。</p>
<p>Redis特性</p>
<ul class="simple">
<li>Redis支持数据的持久化，可以将内存中的数据保存在磁盘中，重启的时候可以再次加载进行使用。</li>
<li>Redis不仅仅支持简单的key-value类型的数据，同时还把value分为list，set，zset，hash等数据结构存储。</li>
<li>因为Redis交换数据快，所以在服务器中常用来存储一些需要频繁调取的数据，提高效率。</li>
</ul>
</div>
<div class="section" id="id255">
<h2>redis安装<a class="headerlink" href="#id255" title="永久链接至标题">¶</a></h2>
<p>检查是否安装gcc环境</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span>[root@VM_0_16_centos ~]# rpm -qa|grep gcc*
//无则安装。
[root@VM_0_16_centos ~]# yum install gcc-c++
</pre></div>
</div>
<p>创建目录，下载源码（通过华为镜像），解压源码</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span>[root@VM_0_16_centos redis]# mkdir /usr/lib/redis
[root@VM_0_16_centos redis]# cd /usr/lib/redis/
[root@VM_0_16_centos redis]# wget https://mirrors.huaweicloud.com/redis/redis-5.0.5.tar.gz
[root@VM_0_16_centos redis]# tar -zxvf redis-5.0.5.tar.gz 
</pre></div>
</div>
<p>进入文件夹，编译</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span>[root@VM_0_16_centos redis]# cd ./redis-5.0.5/
[root@VM_0_16_centos redis-5.0.5]# make
</pre></div>
</div>
<p>编译成功</p>
<p>安装，并检查是否安装了服务</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span>[root@VM_0_16_centos redis-5.0.5]# make PREFIX=/usr/local/redis install
//查看是否有此服务
[root@VM_0_16_centos bin]# ls /usr/local/redis/bin
redis-benchmark  redis-check-aof  redis-check-rdb  redis-cli  redis-sentinel  redis-server
把解压目录下配置文件复制到安装路径下

[root@VM_0_16_centos usr]# cp /usr/lib/redis/redis-5.0.5/redis.conf  /usr/local/redis/
由于前端启动模式启动后不可以随意关闭（进程断开），所以需要配置后端模式启动
</pre></div>
</div>
<p>修改后端启动（即守护进程开启），取消ip绑定</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span>[root@VM_0_16_centos ~]# vim /usr/local/redis/redis.conf
注释掉bind 127.0.0.1
#bind 127.0.0.1
更改protected-mode yes为
protected-mode no

更改daemonize no为
daemonize yes
</pre></div>
</div>
<p>设置密码
requirepass 要很长的密码</p>
<p>启动，并指定配置文件</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span>[root@VM_0_16_centos ~]# cd /usr/local/redis/

[root@VM_0_16_centos redis]# ./bin/redis-server ./redis.conf

1675:C 15 Sep 2019 22:50:52.157 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo

1675:C 15 Sep 2019 22:50:52.157 # Redis version=5.0.5, bits=64, commit=00000000, modified=0, pid=1675, just started
1675:C 15 Sep 2019 22:50:52.157 # Configuration loaded
通过端口（6379）查看服务是否启动
[root@VM_0_16_centos redis]# ps -ef|grep redis
root     1676     1  0 22:50 ?        00:00:00 ./bin/redis-server *:6379
root      1900  1219  0 22:52 pts/6    00:00:00 grep –color=auto redis
本地客户端连接和redis服务关闭
[root@VM_0_16_centos redis]# ./bin/redis-cli
127.0.0.1:6379&gt; eixt
[root@VM_0_16_centos redis]# ./bin/redis-cli shutdown
通过外部（ip）连接,(需要开放云服务器相应端口)
[root@VM_0_16_centos redis]# ./bin/redis-cli -h 49.ip.ip.2 -p 6379 -a 密码
Warning: Using a password with ‘-a’ or ‘-u’ option on the command line interface may not be safe.
49.ip.ip.2:6379&gt; 
</pre></div>
</div>
</div>
<div class="section" id="id256">
<h2>Redis数据模型<a class="headerlink" href="#id256" title="永久链接至标题">¶</a></h2>
<p>Redis支持五种数据类型：string（字符串），hash（哈希），list（列表），set（集合）及zset(sorted set：有序集合)。</p>
<ol class="simple">
<li>String   ——&gt;  字符串</li>
<li>Hash     ——&gt;  哈希</li>
<li>List        ——&gt;  列表</li>
<li>set         ——&gt;  集合</li>
<li>Zset       ——&gt;  有序集合</li>
</ol>
<p><img alt="https://img-blog.csdnimg.cn/20190319160041710.png" src="https://img-blog.csdnimg.cn/20190319160041710.png" /></p>
</div>
<div class="section" id="id257">
<h2>Redis基本使用<a class="headerlink" href="#id257" title="永久链接至标题">¶</a></h2>
<p><img alt="https://img-blog.csdnimg.cn/20190319160059375.png" src="https://img-blog.csdnimg.cn/20190319160059375.png" /></p>
<ul class="simple">
<li>连接redis：<code class="docutils literal notranslate"><span class="pre">redis-cli</span></code></li>
<li>退出：<code class="docutils literal notranslate"><span class="pre">exit</span></code></li>
<li>操作服务端：<code class="docutils literal notranslate"><span class="pre">service</span> <span class="pre">redis</span> <span class="pre">start/stop/restart</span></code></li>
<li>切换数据库：select n</li>
</ul>
<p><img alt="https://img-blog.csdnimg.cn/2019031916011549.png" src="https://img-blog.csdnimg.cn/2019031916011549.png" /></p>
<div class="section" id="key">
<h3>全局key操作<a class="headerlink" href="#key" title="永久链接至标题">¶</a></h3>
<p>对5 个数据类型都使用的命令</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>查看所有的key：keys *
删除键值对：del key
改名：rename  key  new_key
设置过期时间：expire key seconds
</pre></div>
</div>
</div>
<div class="section" id="string">
<h3>String类型<a class="headerlink" href="#string" title="永久链接至标题">¶</a></h3>
<p>strings是redis最基本的数据类型，一个key对应一个value</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>设置数据：set  key  value
查看数据：get  key
追加数据：append  key  value
删除数据：del key<span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="list">
<h3>List类型<a class="headerlink" href="#list" title="永久链接至标题">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>添加数据：rpush key value <span class="o">[</span>value…<span class="o">]</span>
lpush key value <span class="o">[</span>value…<span class="o">]</span>     头部添加数据

查看数据：lrange key start stop
lindex key index      查看某个数据 

修改数据：lset key index value
删除数据：rpop key
lpop key 头部删除数据 
</pre></div>
</div>
</div>
<div class="section" id="hash">
<h3>Hash类型<a class="headerlink" href="#hash" title="永久链接至标题">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>添加数据：hset key field value 
查看域值：hget key field
hgetall key  查看所有的field和value
查看所有的value：hvals key
查看所有的field：hkeys key
</pre></div>
</div>
</div>
<div class="section" id="set">
<h3>Set类型<a class="headerlink" href="#set" title="永久链接至标题">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>添加数据：sadd key member <span class="o">[</span>member …<span class="o">]</span>
查看数据：smembers key
随机删除：spop key
指定删除：srem key member <span class="o">[</span>member …<span class="o">]</span>
</pre></div>
</div>
</div>
<div class="section" id="sorted-set">
<h3>Sorted Set类型<a class="headerlink" href="#sorted-set" title="永久链接至标题">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>添加数据： zadd key score member <span class="o">[</span>score2 member2 …<span class="o">]</span> 
查看数据： zrange key start stop 
zrangebyscore key min max 通过scores值查看
删除数据：zrem key member <span class="o">[</span>member …<span class="o">]</span>
通过索引删除多个数据：zremrangebyrank key min max
zremrangebyscore key min max  -- 通过scores值删除
</pre></div>
</div>
<p><strong>flushall 删除所有数据</strong></p>
</div>
</div>
</div>
<div class="section" id="mongodb">
<h1>51、学会MongoDB数据库<a class="headerlink" href="#mongodb" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen
&#64;Date：2019/03/19</p>
<div class="section" id="id258">
<h2>MongoDB简介<a class="headerlink" href="#id258" title="永久链接至标题">¶</a></h2>
<p>安装</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="p">-</span><span class="k">get</span> <span class="n">install</span> <span class="n">mongodb</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">MongoDB</span></code>是一个介于关系数据库和非关系数据库之间的产品，是非关系数据库当中功能最丰富，最像关系数据库的。它支持的数据结构非常松散，是类似<code class="docutils literal notranslate"><span class="pre">json</span></code>的<code class="docutils literal notranslate"><span class="pre">bson</span></code>格式，因此可以存储比较复杂的数据类型。<code class="docutils literal notranslate"><span class="pre">Mongo</span></code>最大的特点是它支持的查询语言非常强大，其语法有点类似于面向对象的查询语言，几乎可以实现类似关系数据库单表查询的绝大部分功能，而且还支持对数据建立索引。</p>
<p>将数据存储为一个文档，文档类似与Json格式，</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>{
    name:&quot;毛利&quot;,
    age:18，
    address: {city:&quot;东莞&quot;， country:&quot;china&quot;}
}
</pre></div>
</div>
</div>
<div class="section" id="id259">
<h2>MongoDB数据模型<a class="headerlink" href="#id259" title="永久链接至标题">¶</a></h2>
<p><img alt="https://img-blog.csdnimg.cn/20190319104459695.png" src="https://img-blog.csdnimg.cn/20190319104459695.png" />
<strong>如何进入和退出mongo</strong>
<img alt="https://img-blog.csdnimg.cn/20190319104516430.png" src="https://img-blog.csdnimg.cn/20190319104516430.png" /></p>
<div class="section" id="id260">
<h3>库级操作语句<a class="headerlink" href="#id260" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li>显示所有库： <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">dbs</span></code></li>
<li>切换/创建数据库：<code class="docutils literal notranslate"><span class="pre">use</span> <span class="pre">数据库名称</span></code></li>
<li>查看所在库： <code class="docutils literal notranslate"><span class="pre">db</span></code></li>
<li>删除库：<code class="docutils literal notranslate"><span class="pre">db.dropDatabase()</span>&#160; </code></li>
</ul>
</div>
<div class="section" id="id261">
<h3>集合操作语句<a class="headerlink" href="#id261" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li>显示当前数据库的集合：<code class="docutils literal notranslate"> <span class="pre">show</span> <span class="pre">collections</span></code></li>
<li>创建集合： <code class="docutils literal notranslate"><span class="pre">db.createCollection(name)</span></code></li>
</ul>
<p><img alt="https://img-blog.csdnimg.cn/20190319104539962.png" src="https://img-blog.csdnimg.cn/20190319104539962.png" /></p>
<ul class="simple">
<li>删除集合：<code class="docutils literal notranslate"> <span class="pre">db.集合名称.drop()</span></code></li>
</ul>
</div>
</div>
<div class="section" id="id262">
<h2>文档操作<a class="headerlink" href="#id262" title="永久链接至标题">¶</a></h2>
<div class="section" id="id263">
<h3>添加文档（数据）<a class="headerlink" href="#id263" title="永久链接至标题">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">db.集合名称.insert(document)</span></code></p>
<p>每一条数据，就是一个<code class="docutils literal notranslate"><span class="pre">document</span></code>，就是一条<code class="docutils literal notranslate"><span class="pre">json</span></code></p>
<p>例：<code class="docutils literal notranslate"> <span class="pre">db.student.insert({name:'毛利',</span> <span class="pre">age:18})</span></code></p>
<blockquote>
<div>注意点：</div></blockquote>
<p>添加文档时，如果不指定_id参数
MongoDB会为文档分配一个唯一的ObjectId</p>
<p>给定 <code class="docutils literal notranslate"><span class="pre">_id</span></code>
例： <code class="docutils literal notranslate"><span class="pre">db.student.insert({'_id':1,</span> <span class="pre">name:'毛利',</span> <span class="pre">age:18})</span></code></p>
<ul class="simple">
<li>添加多条文档</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>db.student.insert([
    {name:&#39;毛利, sex:&#39;男&#39;, age:18},
    {name:’毛利的爸爸&#39;, sex:&#39;男&#39;, age:47},
    {name:’毛利的姐姐&#39;, sex:&#39;女&#39;, age:23},
    {name:’毛利的妈妈‘, sex:’女&#39;, age:44},
])
</pre></div>
</div>
</div>
<div class="section" id="id264">
<h3>查询文档（数据）<a class="headerlink" href="#id264" title="永久链接至标题">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">db.集合名称.find([conditions])</span></code></p>
<p>查看集合中全部数据： <code class="docutils literal notranslate"><span class="pre">db.student.find()</span></code></p>
<p>格式化显示： <code class="docutils literal notranslate"><span class="pre">db.student.find().pretty()</span> </code></p>
<p>查看满足条件的数据： <code class="docutils literal notranslate"><span class="pre">db.student.find({name:'毛利'})</span></code></p>
</div>
<div class="section" id="id265">
<h3>条件<a class="headerlink" href="#id265" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li>and条件  <code class="docutils literal notranslate"><span class="pre">{$and:[{expression1},</span> <span class="pre">{expression1},</span> <span class="pre">...]</span>&#160;&#160; <span class="pre">}</span></code></li>
<li>or条件 <code class="docutils literal notranslate"><span class="pre">{$or:[{expression1},</span> <span class="pre">{expression1},</span> <span class="pre">...]</span>&#160;&#160; <span class="pre">}</span></code></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">db.student.find({$or:[{$and:[{sex:'女'},</span> <span class="pre">{age:23}]},{$and:[{sex:'男'},</span> <span class="pre">{age:{$gte:18}}]}]})</span></code></p>
<p><img alt="https://img-blog.csdnimg.cn/20190319104553439.png" src="https://img-blog.csdnimg.cn/20190319104553439.png" /></p>
</div>
<div class="section" id="id266">
<h3>修改文档（数据）<a class="headerlink" href="#id266" title="永久链接至标题">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">db.集合名称.update(&lt;query&gt;,</span> <span class="pre">&lt;update&gt;,</span> <span class="pre">{multi:&lt;boolean&gt;})</span></code></p>
<ul class="simple">
<li>修改一条数据： <code class="docutils literal notranslate"><span class="pre">db.student.update({sex:'男'},</span> <span class="pre">{age:20})</span></code></li>
</ul>
<p>把表中的男的<code class="docutils literal notranslate"><span class="pre">age</span></code>改为<code class="docutils literal notranslate"><span class="pre">20</span></code></p>
<ul class="simple">
<li>指定属性修改：<code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">$set:</span> <span class="pre">{age:20}</span> <span class="pre">}</span></code></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">db.student.update({name:'毛利'},</span> <span class="pre">{$set:</span> <span class="pre">{age:666,</span> <span class="pre">sex:</span> <span class="pre">'不告诉你'}}</span> <span class="pre">)</span></code></p>
<p>把毛利的<code class="docutils literal notranslate"><span class="pre">age</span></code>改为<code class="docutils literal notranslate"><span class="pre">666</span></code>，<code class="docutils literal notranslate"><span class="pre">sex</span></code>改为不告诉你</p>
<ul class="simple">
<li>更新集合中所有满足条件的文档： <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">multi:</span> <span class="pre">true</span> <span class="pre">}</span> </code></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>db.student.update({sex:&#39;男&#39;}, {$set:{sex:&#39;女&#39;}}, { multi:true} )
</pre></div>
</div>
<p>把所有按的改为女的</p>
</div>
<div class="section" id="id267">
<h3>删除文档（数据）<a class="headerlink" href="#id267" title="永久链接至标题">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">db.集合名称.remove(&lt;query&gt;,</span>&#160; <span class="pre">{justOne:&lt;boolean&gt;})</span></code></p>
<ul class="simple">
<li>删除集合中所有的文档：
<code class="docutils literal notranslate"><span class="pre">db.student.remove({})</span></code></li>
<li>删除集合中满足条件的所有文档
<code class="docutils literal notranslate"><span class="pre">db.student.remove({sex:</span> <span class="pre">'男'})</span></code></li>
<li>只删除集合中满足条件的第一条文档： <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">justOne:</span> <span class="pre">true</span> <span class="pre">}</span> </code></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">db.student.remove({sex:'男'},</span> <span class="pre">{</span> <span class="pre">justOne:true}</span> <span class="pre">)</span></code></p>
</div>
</div>
<div class="section" id="pythonmongodb">
<h2>在Python程序中操作MongoDB<a class="headerlink" href="#pythonmongodb" title="永久链接至标题">¶</a></h2>
<p>可以通过pip安装pymongo来实现对MongoDB的操作。<code class="docutils literal notranslate"><span class="pre">pip3</span> <span class="pre">install</span> <span class="pre">pymongo</span></code></p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; from pymongo import MongoClient
&gt;&gt;&gt; <span class="nv">client</span> <span class="o">=</span> MongoClient<span class="o">(</span><span class="s1">&#39;mongodb://192.168.92.92:27017&#39;</span><span class="o">)</span> 
&gt;&gt;&gt; <span class="nv">db</span> <span class="o">=</span> client.school
&gt;&gt;&gt; <span class="k">for</span> student in db.students.find<span class="o">()</span>:
...     print<span class="o">(</span><span class="s1">&#39;姓名:&#39;</span>, student<span class="o">[</span><span class="s1">&#39;name&#39;</span><span class="o">])</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="vim">
<h1>52、ViM的使用<a class="headerlink" href="#vim" title="永久链接至标题">¶</a></h1>
<p>&#64;Author：Runsen</p>
<p>&#64;Date：2020/04/03</p>
<div class="section" id="linux">
<h2>linux介绍<a class="headerlink" href="#linux" title="永久链接至标题">¶</a></h2>
<p><img alt="https://img-blog.csdnimg.cn/20190318121644669.png" src="https://img-blog.csdnimg.cn/20190318121644669.png" /></p>
<p>Linux是一套免费使用和自由传播的类Unix操作系统，是一个基于POSIX和UNIX的多用户、多任务、支持多线程和多CPU的操作系统。它能运行主要的UNIX工具软件、应用程序和网络协议。它支持32位和64位硬件。Linux继承了Unix以网络为核心的设计思想，是一个性能稳定的多用户网络操作系统。</p>
</div>
<div class="section" id="id268">
<h2>Linux系统发行版本<a class="headerlink" href="#id268" title="永久链接至标题">¶</a></h2>
<ol class="simple">
<li><a class="reference external" href="https://www.redhat.com/en">Redhat</a></li>
<li><a class="reference external" href="https://www.ubuntu.com/">Ubuntu</a></li>
<li><a class="reference external" href="https://www.centos.org/">CentOS</a></li>
<li><a class="reference external" href="https://getfedora.org/">Fedora</a></li>
<li><a class="reference external" href="https://www.debian.org/">Debian</a></li>
<li><a class="reference external" href="https://www.opensuse.org/">openSUSE</a></li>
</ol>
</div>
<div class="section" id="id269">
<h2>Linux常用命令<a class="headerlink" href="#id269" title="永久链接至标题">¶</a></h2>
<p>| 基本必知 | 作用         | 示例                                                 |
| ——– | ———— | —————————————————- |
| cd       | 切换工作目录 | cd ~ 回到主目录 cd .. 回到上级路径 cd - 回到上次路径 |
| pwd      | 显示工作路径 | pwd                                                  |
| ls       | 显示文件列表 | ls                                                   |
| mkdir    | 创建文件夹   | mkdir test                                           |
| rmdir    | 删除文件夹   | rmdir test                                           |
| cp       | 复制         | cp a.txt b.txt                                       |
| mv       | 移动和重命名 | mv b.txt ../                                         |
| cat      | 查看文件内容 | cat a.txt                                            |
| touch    | 创建文件     | touch  c.txt                                         |
| rm       | 删除文件     | rm c.txt                                             |
| help     | 帮助         | help cd                                              |</p>
</div>
<div class="section" id="vimpy">
<h2>Vim编辑py文件<a class="headerlink" href="#vimpy" title="永久链接至标题">¶</a></h2>
<p><img alt="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS9hM2MxNmEwZC1iN2E0LTQ1ZGItOTVkMy00NjA3ZGIwOGFjMTAucG5n?x-oss-process=image/format,png" src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS9hM2MxNmEwZC1iN2E0LTQ1ZGItOTVkMy00NjA3ZGIwOGFjMTAucG5n?x-oss-process=image/format,png" /></p>
<p><code class="docutils literal notranslate"><span class="pre">VIM</span></code> （Unix及类Unix系统文本编辑器）</p>
<p><code class="docutils literal notranslate"><span class="pre">Vim</span></code> 是一个类似于Vi的著名的功能强大、高度可定制的文本编辑器，在Vi的基础上改进和增加了很多特性。</p>
<p>重点</p>
<p>在Vim中，有命令模式，输入模式 和 末行模式三种模式。</p>
<p><img alt="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS9jMjZmZTJkMi02ZmQyLTQ1YTAtYTA1Ni1lMzk4ZDE3OTZkMzkucG5n?x-oss-process=image/format,png" src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS9jMjZmZTJkMi02ZmQyLTQ1YTAtYTA1Ni1lMzk4ZDE3OTZkMzkucG5n?x-oss-process=image/format,png" /></p>
<ul class="simple">
<li>按 ESC 进入命令模式</li>
<li>输入 Shift + ； 进入末行模式</li>
<li>输入插入命令，如(i,a,o) 进入插入模式</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">注意点</span> <span class="pre">进入末行模式的前提一定是要命令模式，也就是输入完指令，必须先回到命令模式</span></code></p>
<p>进入<code class="docutils literal notranslate"><span class="pre">vim</span>&#160;&#160; <span class="pre">filename</span> </code></p>
</div>
<div class="section" id="id270">
<h2>退出<a class="headerlink" href="#id270" title="永久链接至标题">¶</a></h2>
<ul class="simple">
<li>:wq    末行模式，wq 保存退出</li>
<li>:q     末行模式，q 直接退出</li>
</ul>
<ul class="simple">
<li>:q!    末行模式，q! 强制退出，不保存</li>
</ul>
</div>
<div class="section" id="id271">
<h2>移动光标<a class="headerlink" href="#id271" title="永久链接至标题">¶</a></h2>
<ul class="simple">
<li>gg    到文件第一行</li>
<li>G      到文件最后一行   (Shift + g)</li>
<li>^      非空格行首</li>
<li>0       行首(数字0)</li>
<li>$       行尾</li>
</ul>
</div>
<div class="section" id="id272">
<h2>输入模式<a class="headerlink" href="#id272" title="永久链接至标题">¶</a></h2>
<ul class="simple">
<li>i    从光标所在位置前面开始插入</li>
<li>I    在当前行首插入</li>
<li>a   从光标所在位置后面开始输入</li>
<li>A   在当前行尾插入</li>
<li>o   在光标所在行下方新增一行并进入输入模式</li>
<li>O  在当前上面一行插入</li>
<li>进入输入模式后，在最后一行会出现–INSERT—的字</li>
</ul>
<p>这些命令都是在命令模式下的
复制和粘贴(必须灵活使用)</p>
<ul class="simple">
<li>yy    复制整行内容</li>
<li>3yy  复制3行内容</li>
<li>yw   复制当前光标到单词尾内容</li>
<li>p      粘贴</li>
</ul>
</div>
<div class="section" id="id273">
<h2>删除<a class="headerlink" href="#id273" title="永久链接至标题">¶</a></h2>
<ul class="simple">
<li>dd  删除光标所在行</li>
<li>dw  删除一个单词</li>
<li>x     删除光标所在字符</li>
<li>u    撤销上一次操作</li>
<li>ctrl + r    撤销   u</li>
</ul>
</div>
<div class="section" id="id274">
<h2>块操作<a class="headerlink" href="#id274" title="永久链接至标题">¶</a></h2>
<ul class="simple">
<li>v    块选择</li>
<li>ctrl + v   列块选择</li>
</ul>
</div>
<div class="section" id="id275">
<h2>查找<a class="headerlink" href="#id275" title="永久链接至标题">¶</a></h2>
<ul class="simple">
<li>/    命令模式下输入：/   向前搜索</li>
<li>?    命令模式下输入：?   向后搜索</li>
<li>n    向下查找</li>
<li>N    向上查找</li>
</ul>
</div>
<div class="section" id="id276">
<h2>替换 末行模式<a class="headerlink" href="#id276" title="永久链接至标题">¶</a></h2>
<ul class="simple">
<li>:s/s1/s2 替换当前行第一个s1为s2</li>
<li>:s/s1/s2/g 替换当前行中所有s1为s2</li>
<li>:%s/s1/s2/g  替换文中所有s1为 s2</li>
</ul>
<p>关键是要多练</p>
<p><img alt="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS9lNzdmMDhhZS1mYWI4LTQ4MWQtYjNhNy1lNjJkOWNhMDFlYjEucG5n?x-oss-process=image/format,png" src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS9lNzdmMDhhZS1mYWI4LTQ4MWQtYjNhNy1lNjJkOWNhMDFlYjEucG5n?x-oss-process=image/format,png" /></p>
</div>
</div>
<div class="section" id="id277">
<h1>53、Linux基础命令，用户管理和文件系统总结（上篇）<a class="headerlink" href="#id277" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen</p>
<p>&#64;Date：2020/5/27</p>
<p>这次内容是总结极客时间的Linux课程的知识点。耗时一天</p>
<div class="section" id="id278">
<h2>基础命令<a class="headerlink" href="#id278" title="永久链接至标题">¶</a></h2>
<p>Linux系统的命令通常都是如下所示的格式：</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>命令名称 <span class="o">[</span>命名参数<span class="o">]</span> <span class="o">[</span>命令对象<span class="o">]</span>
</pre></div>
</div>
</div>
<div class="section" id="id279">
<h2>获取登录信息<a class="headerlink" href="#id279" title="永久链接至标题">¶</a></h2>
<p>获取登录信息 - <strong>w</strong> / <strong>who</strong> / <strong>last</strong>/ <strong>lastb</strong>。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ w
<span class="m">08</span>:07:38 up <span class="m">2</span> min,  <span class="m">1</span> user,  load average: <span class="m">0</span>.83, <span class="m">0</span>.64, <span class="m">0</span>.27
USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
maoli    tty7     :0               <span class="m">08</span>:06    <span class="m">2</span>:38   <span class="m">2</span>.29s  <span class="m">0</span>.31s /sbin/upstart -
maoli@ubuntu:~$ who
maoli    tty7         <span class="m">2020</span>-05-28 <span class="m">08</span>:06 <span class="o">(</span>:0<span class="o">)</span>
maoli@ubuntu:~$ last
maoli    tty7         :0               Thu May <span class="m">28</span> <span class="m">08</span>:06    gone - no <span class="nb">logout</span>
reboot   system boot  <span class="m">4</span>.15.0-99-generi Thu May <span class="m">28</span> <span class="m">08</span>:04   still running
maoli    tty7         :0               Fri May  <span class="m">1</span> <span class="m">15</span>:20 - down   <span class="o">(</span><span class="m">01</span>:26<span class="o">)</span>
reboot   system boot  <span class="m">4</span>.15.0-99-generi Fri May  <span class="m">1</span> <span class="m">15</span>:20 - <span class="m">16</span>:47  <span class="o">(</span><span class="m">01</span>:26<span class="o">)</span>
maoli    tty7         :0               Fri May  <span class="m">1</span> <span class="m">10</span>:12 - crash  <span class="o">(</span><span class="m">05</span>:08<span class="o">)</span>
wtmp begins Fri May  <span class="m">1</span> <span class="m">10</span>:12:22 <span class="m">2020</span>
maoli@ubuntu:~$ sudo lastb
<span class="o">[</span>sudo<span class="o">]</span> maoli 的密码： 

btmp begins Fri May  <span class="m">1</span> <span class="m">15</span>:20:29 <span class="m">2020</span>
</pre></div>
</div>
</div>
<div class="section" id="shell">
<h2>查看自己使用的Shell<a class="headerlink" href="#shell" title="永久链接至标题">¶</a></h2>
<p>查看自己使用的Shell - <strong>ps</strong>。</p>
<p>Shell也被称为“壳”或“壳程序”，它是用户与操作系统内核交流的翻译官，简单的说就是人与计算机交互的界面和接口。目前很多Linux系统默认的Shell都是bash（<u>B</u>ourne <u>A</u>gain <u>SH</u>ell），因为它可以使用tab键进行命令和路径补全、可以保存历史命令、可以方便的配置环境变量以及执行批处理操作。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ ps
  PID TTY          TIME CMD
 <span class="m">3621</span> pts/1    <span class="m">00</span>:00:00 bash
 <span class="m">5082</span> pts/1    <span class="m">00</span>:00:00 ps
</pre></div>
</div>
</div>
<div class="section" id="id280">
<h2>查看命令的说明和位置<a class="headerlink" href="#id280" title="永久链接至标题">¶</a></h2>
<p>查看命令的说明和位置 - <strong>whatis</strong> / <strong>which</strong> / <strong>whereis</strong>。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ whatis ps
ps <span class="o">(</span><span class="m">1</span><span class="o">)</span>               - report a snapshot of the current processes.
maoli@ubuntu:~$ whatis python
python <span class="o">(</span><span class="m">1</span><span class="o">)</span>           - an interpreted, interactive, object-oriented programmi...
maoli@ubuntu:~$ whereis ps
ps: /bin/ps /usr/share/man/man1/ps.1.gz
maoli@ubuntu:~$ whereis python
python: /usr/bin/python3.5m-config /usr/bin/python /usr/bin/python3.5 /usr/bin/python3.5m /usr/bin/python2.7 /usr/bin/python3.5-config /usr/lib/python3.5 /usr/lib/python2.7 /etc/python /etc/python3.5 /etc/python2.7 /usr/local/lib/python3.5 /usr/local/lib/python2.7 /usr/include/python3.5 /usr/include/python3.5m /usr/share/python /usr/share/man/man1/python.1.gz
maoli@ubuntu:~$ which ps
/bin/ps
maoli@ubuntu:~$ which python
/usr/bin/python
</pre></div>
</div>
</div>
<div class="section" id="id281">
<h2>清除屏幕上显示的内容<a class="headerlink" href="#id281" title="永久链接至标题">¶</a></h2>
<p>清除屏幕上显示的内容 - <strong>clear</strong>。</p>
</div>
<div class="section" id="id282">
<h2>查看帮助文档<a class="headerlink" href="#id282" title="永久链接至标题">¶</a></h2>
<p>查看帮助文档 - <strong>man</strong> / <strong>info</strong> / <strong>help</strong> / <strong>apropos</strong>。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ ps --help

Usage:
ps <span class="o">[</span>options<span class="o">]</span>

Try <span class="s1">&#39;ps --help &lt;simple|list|output|threads|misc|all&gt;&#39;</span>
 or <span class="s1">&#39;ps --help &lt;s|l|o|t|m|a&gt;&#39;</span>
<span class="k">for</span> additional <span class="nb">help</span> text.

For more details see ps<span class="o">(</span><span class="m">1</span><span class="o">)</span>.
maoli@ubuntu:~$ man ps

PS<span class="o">(</span><span class="m">1</span><span class="o">)</span>                                User Commands                                PS<span class="o">(</span><span class="m">1</span><span class="o">)</span>
NAME
       ps - report a snapshot of the current processes.
SYNOPSIS
       ps <span class="o">[</span>options<span class="o">]</span>
DESCRIPTION
...
</pre></div>
</div>
</div>
<div class="section" id="id283">
<h2>查看系统和主机名<a class="headerlink" href="#id283" title="永久链接至标题">¶</a></h2>
<p>查看系统和主机名 - <strong>uname</strong> / <strong>hostname</strong>。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ uname
Linux
maoli@ubuntu:~$ hostname
ubuntu
</pre></div>
</div>
</div>
<div class="section" id="id284">
<h2>时间和日期<a class="headerlink" href="#id284" title="永久链接至标题">¶</a></h2>
<p>时间和日期 - <strong>date</strong> / <strong>cal</strong>。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ date
2020年 05月 28日 星期四 <span class="m">08</span>:13:25 CST
maoli@ubuntu:~$ cal
     五月 <span class="m">2020</span>         
日 一 二 三 四 五 六  
               <span class="m">1</span>  <span class="m">2</span>  
<span class="m">3</span>  <span class="m">4</span>  <span class="m">5</span>  <span class="m">6</span>  <span class="m">7</span>  <span class="m">8</span>  <span class="m">9</span>  
<span class="m">10</span> <span class="m">11</span> <span class="m">12</span> <span class="m">13</span> <span class="m">14</span> <span class="m">15</span> <span class="m">16</span>  
<span class="m">17</span> <span class="m">18</span> <span class="m">19</span> <span class="m">20</span> <span class="m">21</span> <span class="m">22</span> <span class="m">23</span>  
<span class="m">24</span> <span class="m">25</span> <span class="m">26</span> <span class="m">27</span> <span class="m">28</span> <span class="m">29</span> <span class="m">30</span>  
<span class="m">31</span>                    
maoli@ubuntu:~$ cal <span class="m">5</span> <span class="m">2020</span>
     五月 <span class="m">2020</span>         
日 一 二 三 四 五 六  
               <span class="m">1</span>  <span class="m">2</span>  
<span class="m">3</span>  <span class="m">4</span>  <span class="m">5</span>  <span class="m">6</span>  <span class="m">7</span>  <span class="m">8</span>  <span class="m">9</span>  
<span class="m">10</span> <span class="m">11</span> <span class="m">12</span> <span class="m">13</span> <span class="m">14</span> <span class="m">15</span> <span class="m">16</span>  
<span class="m">17</span> <span class="m">18</span> <span class="m">19</span> <span class="m">20</span> <span class="m">21</span> <span class="m">22</span> <span class="m">23</span>  
<span class="m">24</span> <span class="m">25</span> <span class="m">26</span> <span class="m">27</span> <span class="m">28</span> <span class="m">29</span> <span class="m">30</span>  
<span class="m">31</span>        
</pre></div>
</div>
</div>
<div class="section" id="id285">
<h2>重启和关机<a class="headerlink" href="#id285" title="永久链接至标题">¶</a></h2>
<ol class="simple">
<li>重启和关机 - <strong>reboot</strong> / <strong>shutdown</strong>。</li>
</ol>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$  shutdown -h +5   <span class="c1">#五分钟关机</span>
Shutdown scheduled <span class="k">for</span> 四 <span class="m">2020</span>-05-28 <span class="m">08</span>:19:24 CST, use <span class="s1">&#39;shutdown -c&#39;</span> to cancel. <span class="o">[</span>root ~<span class="o">]</span><span class="c1"># </span>
maoli@ubuntu:~$ shutdown -c
maoli@ubuntu:~$ shutdown -r <span class="m">12</span>:00
Shutdown scheduled <span class="k">for</span> 四 <span class="m">2020</span>-05-28 <span class="m">12</span>:00:00 CST, use <span class="s1">&#39;shutdown -c&#39;</span> to cancel
maoli@ubuntu:~$ shutdown -c
</pre></div>
</div>
<p>说明：在执行<code class="docutils literal notranslate"><span class="pre">shutdown</span></code>命令时会向登录系统的用户发出警告，可以在命令后面跟上警告消息来替换默认的警告消息，也可以在<code class="docutils literal notranslate"><span class="pre">-h</span></code>参数后通过<code class="docutils literal notranslate"><span class="pre">now</span></code>来表示立刻关机。</p>
</div>
<div class="section" id="id286">
<h2>退出登录<a class="headerlink" href="#id286" title="永久链接至标题">¶</a></h2>
<p>退出登录 -  <strong>exit</strong> / <strong>logout</strong>。</p>
</div>
<div class="section" id="id287">
<h2>查看历史命令<a class="headerlink" href="#id287" title="永久链接至标题">¶</a></h2>
<p>查看历史命令 - <strong>history</strong>。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ <span class="nb">history</span>
...
  <span class="m">625</span>  date
  <span class="m">626</span>  cal
  <span class="m">627</span>  cal <span class="m">5</span> <span class="m">2020</span>
  <span class="m">628</span>  shutdown -c
  <span class="m">629</span>  shutdown -r <span class="m">12</span>:00
  <span class="m">630</span>  shutdown -c
  <span class="m">631</span>  <span class="nb">history</span>

maoli@ubuntu:~$ !631  
</pre></div>
</div>
<p>说明：查看到历史命令之后，可以用<code class="docutils literal notranslate"><span class="pre">!历史命令编号</span></code>来重新执行该命令；通过<code class="docutils literal notranslate"><span class="pre">history</span> <span class="pre">-c</span></code>可以清除历史命令。</p>
</div>
<div class="section" id="id288">
<h2>文件和文件夹操作<a class="headerlink" href="#id288" title="永久链接至标题">¶</a></h2>
<div class="section" id="id289">
<h3>创建/删除空目录<a class="headerlink" href="#id289" title="永久链接至标题">¶</a></h3>
<p>创建/删除空目录 - <strong>mkdir</strong> / <strong>rmdir</strong>。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root ~<span class="o">]</span><span class="c1"># mkdir runsen</span>
<span class="o">[</span>root ~<span class="o">]</span><span class="c1"># mkdir -p abc/runsen</span>
<span class="o">[</span>root ~<span class="o">]</span><span class="c1"># rmdir runsen</span>
</pre></div>
</div>
</div>
<div class="section" id="id290">
<h3>创建/删除文件<a class="headerlink" href="#id290" title="永久链接至标题">¶</a></h3>
<p>创建/删除文件 - <strong>touch</strong> / <strong>rm</strong>。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ touch readme.txt
maoli@ubuntu:~$  rm readme.txt 
rm: remove regular empty file ‘readme.txt ’? y
<span class="o">[</span>root ~<span class="o">]</span><span class="c1"># rm -rf xyz</span>
</pre></div>
</div>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">touch</span></code>命令用于创建空白文件或修改文件时间。在Linux系统中一个文件有三种时间：<ul>
<li>更改内容的时间 - mtime。</li>
<li>更改权限的时间 - ctime。</li>
<li>最后访问时间 - atime。</li>
</ul>
</li>
<li><code class="docutils literal notranslate"><span class="pre">rm</span></code>的几个重要参数：<ul>
<li><code class="docutils literal notranslate"><span class="pre">-i</span></code>：交互式删除，每个删除项都会进行询问。</li>
<li><code class="docutils literal notranslate"><span class="pre">-r</span></code>：删除目录并递归的删除目录中的文件和目录。</li>
<li><code class="docutils literal notranslate"><span class="pre">-f</span></code>：强制删除，忽略不存在的文件，没有任何提示。</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id291">
<h3>切换和查看当前工作目录<a class="headerlink" href="#id291" title="永久链接至标题">¶</a></h3>
<ol class="simple">
<li>切换和查看当前工作目录 - <strong>cd</strong> / <strong>pwd</strong>。</li>
</ol>
<p>说明：<code class="docutils literal notranslate"><span class="pre">cd</span></code>命令后面可以跟相对路径（以当前路径作为参照）或绝对路径（以<code class="docutils literal notranslate"><span class="pre">/</span></code>开头）来切换到指定的目录，也可以用<code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">..</span></code>来返回上一级目录。返回到上上一级目录应该给<code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">../../</span></code>命令。</p>
</div>
<div class="section" id="id292">
<h3>查看目录内容<a class="headerlink" href="#id292" title="永久链接至标题">¶</a></h3>
<p>查看目录内容 - <strong>ls</strong>。</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">-l</span></code>：以长格式查看文件和目录。</li>
<li><code class="docutils literal notranslate"><span class="pre">-a</span></code>：显示以点开头的文件和目录（隐藏文件）。</li>
<li><code class="docutils literal notranslate"><span class="pre">-R</span></code>：遇到目录要进行递归展开（继续列出目录下面的文件和目录）。</li>
<li><code class="docutils literal notranslate"><span class="pre">-d</span></code>：只列出目录，不列出其他内容。</li>
<li><code class="docutils literal notranslate"><span class="pre">-S</span></code> / <code class="docutils literal notranslate"><span class="pre">-t</span></code>：按大小/时间排序。</li>
</ul>
</div>
<div class="section" id="id293">
<h3>查看文件内容<a class="headerlink" href="#id293" title="永久链接至标题">¶</a></h3>
<p>查看文件内容 - <strong>cat</strong> / <strong>tac</strong> / <strong>head</strong> / <strong>tail</strong> / <strong>more</strong> / <strong>less</strong> / <strong>rev</strong> / <strong>od</strong>。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$  wget https://www.csdn.net/
--2020-05-28 <span class="m">08</span>:25:01--  https://www.csdn.net/
正在解析主机 www.csdn.net <span class="o">(</span>www.csdn.net<span class="o">)</span>... <span class="m">47</span>.95.164.112
正在连接 www.csdn.net <span class="o">(</span>www.csdn.net<span class="o">)</span><span class="p">|</span><span class="m">47</span>.95.164.112<span class="p">|</span>:443... 已连接。
已发出 HTTP 请求，正在等待回应... <span class="m">200</span> OK
长度： 未指定 <span class="o">[</span>text/html<span class="o">]</span>
正在保存至: “index.html”

index.html              <span class="o">[</span>  &lt;<span class="o">=</span>&gt;               <span class="o">]</span> <span class="m">420</span>.39K  <span class="m">1</span>.53MB/s    in <span class="m">0</span>.3s    

<span class="m">2020</span>-05-28 <span class="m">08</span>:25:02 <span class="o">(</span><span class="m">1</span>.53 MB/s<span class="o">)</span> - “index.html” 已保存 <span class="o">[</span><span class="m">430482</span><span class="o">]</span>
maoli@ubuntu:~$ cat index.html
&lt;!DOCTYPE html&gt;
...
maoli@ubuntu:~$ head -10 index.html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
   &lt;meta <span class="nv">charset</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span>&gt;
   &lt;meta http-equiv<span class="o">=</span><span class="s2">&quot;X-UA-Compatible&quot;</span> <span class="nv">content</span><span class="o">=</span><span class="s2">&quot;IE=Edge&quot;</span>&gt;
   &lt;meta <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;viewport&quot;</span> <span class="nv">content</span><span class="o">=</span><span class="s2">&quot;width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no&quot;</span>&gt;
   &lt;meta <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;apple-mobile-web-app-status-bar-style&quot;</span> <span class="nv">content</span><span class="o">=</span><span class="s2">&quot;black&quot;</span>&gt;
   &lt;meta <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;referrer&quot;</span><span class="nv">content</span><span class="o">=</span><span class="s2">&quot;always&quot;</span>&gt;
   &lt;meta <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;msvalidate.01&quot;</span> <span class="nv">content</span><span class="o">=</span><span class="s2">&quot;3189512127C34C46BC74BED5852D45E4&quot;</span> /&gt;
   &lt;title&gt;CSDN-专业IT技术社区&lt;/title&gt;
maoli@ubuntu:~$ tail -2 index.html 
&lt;script <span class="nv">src</span><span class="o">=</span><span class="s2">&quot;https://g.csdnimg.cn/side-toolbar/2.0/side-toolbar.js&quot;</span>&gt;&lt;/script&gt;
&lt;/html&gt;
maoli@ubuntu:~$ less index.html  <span class="c1">#相当于cat</span>
maoli@ubuntu:~$ cat -n index.html <span class="p">|</span>more
...
</pre></div>
</div>
<p>说明：上面用到了一个名为<code class="docutils literal notranslate"><span class="pre">wget</span></code>的命令，它是一个网络下载器程序，可以从指定的URL下载资源。</p>
</div>
<div class="section" id="id294">
<h3>拷贝/移动文件<a class="headerlink" href="#id294" title="永久链接至标题">¶</a></h3>
<p>拷贝/移动文件 - <strong>cp</strong> / <strong>mv</strong>。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ mkdir backup
maoli@ubuntu:~$ cp index.html backup/
maoli@ubuntu:~$ <span class="nb">cd</span> backup/
maoli@ubuntu:~/backup$ ls
index.html
maoli@ubuntu:~/backup$ mv index.html csdn.html
maoli@ubuntu:~/backup$ ls
csdn.html
</pre></div>
</div>
</div>
<div class="section" id="id295">
<h3>文件重命名<a class="headerlink" href="#id295" title="永久链接至标题">¶</a></h3>
<p>文件重命名 - <strong>rename</strong>。</p>
</div>
<div class="section" id="id296">
<h3>查找文件和查找内容<a class="headerlink" href="#id296" title="永久链接至标题">¶</a></h3>
<p>查找文件和查找内容 - <strong>find</strong> / <strong>grep</strong>。</p>
<div class="highlight-Shell‘ notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~/backup$ find ./ -name &quot;*.html&quot;
./csdn.html
maoli@ubuntu:~/backup$ find / -name &quot;*.html&quot;
/usr/local/java/jdk-11.0.6/README.html
/usr/local/python3/lib/python3.6/idlelib/help.html
/usr/local/python3/lib/python3.6/test/sgml_input.html
/usr/local/python3/lib/python3.6/test/test_difflib_expect.html
...
maoli@ubuntu:~/backup$  find . -type f -size +2k
./csdn.html
maoli@ubuntu:~/backup$ find . -type f -name &quot;*.swp&quot; -delete
maoli@ubuntu:~/backup$ grep &quot;&lt;script&gt;&quot; csdn.html -n
3192:        &lt;script&gt;
maoli@ubuntu:~/backup$ grep -E \&lt;\/?script.*\&gt; csdn.html -n
12:    &lt;script src=&#39;//g.csdnimg.cn/tingyun/1.8.3/www.js&#39; type=&#39;text/javascript&#39;&gt;&lt;/script&gt;
18:    &lt;script src=&quot;//csdnimg.cn/public/common/libs/jquery/jquery-1.9.1.min.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;
19:    &lt;script src=&quot;//g.csdnimg.cn/??login-box/1.0.7/login-box.js,login-box/1.0.7/login-auto.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;
...
</pre></div>
</div>
<p>说明：<code class="docutils literal notranslate"><span class="pre">grep</span></code>在搜索字符串时可以使用正则表达式，如果需要使用正则表达式可以用<code class="docutils literal notranslate"><span class="pre">grep</span> <span class="pre">-E</span></code>或者直接使用<code class="docutils literal notranslate"><span class="pre">egrep</span></code>。</p>
</div>
<div class="section" id="id297">
<h3>创建链接和查看链接<a class="headerlink" href="#id297" title="永久链接至标题">¶</a></h3>
<p>创建链接和查看链接 - <strong>ln</strong> / <strong>readlink</strong>。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~/backup$ ls -l csdn.html
-rw-rw-r-- <span class="m">1</span> maoli maoli <span class="m">430482</span> 5月  <span class="m">28</span> <span class="m">08</span>:30 csdn.html
maoli@ubuntu:~/backup$ ln /home/maoli/backup/csdn.html /home/maoli/csdn
maoli@ubuntu:~/backup$ ls -l csdn.html
-rw-rw-r-- <span class="m">2</span> maoli maoli <span class="m">430482</span> 5月  <span class="m">28</span> <span class="m">08</span>:30 csdn.html
</pre></div>
</div>
<p>说明：链接可以分为硬链接和软链接（符号链接）。硬链接可以认为是一个指向文件数据的指针，就像Python中对象的引用计数，每添加一个硬链接，文件的对应链接数就增加1，只有当文件的链接数为0时，文件所对应的存储空间才有可能被其他文件覆盖。我们平常删除文件时其实并没有删除硬盘上的数据，我们删除的只是一个指针，或者说是数据的一条使用记录，所以类似于“文件粉碎机”之类的软件在“粉碎”文件时除了删除文件指针，还会在文件对应的存储区域填入数据来保证文件无法再恢复。软链接类似于Windows系统下的快捷方式，当软链接链接的文件被删除时，软链接也就失效了。</p>
</div>
<div class="section" id="id298">
<h3>压缩/解压缩和归档/解归档<a class="headerlink" href="#id298" title="永久链接至标题">¶</a></h3>
<p>.压缩/解压缩和归档/解归档 - <strong>gzip</strong> / <strong>gunzip</strong> / <strong>xz</strong>。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ ls
 redis-4.0.10.tar.tar.gz
maoli@ubuntu:~$ gunzip  redis-4.0.10.tar.tar.gz
maoli@ubuntu:~$ ls
 redis-4.0.10.tar.tar
</pre></div>
</div>
</div>
<div class="section" id="id299">
<h3>归档和解归档<a class="headerlink" href="#id299" title="永久链接至标题">¶</a></h3>
<p>归档和解归档 - <strong>tar</strong>。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$  tar -xvf redis-4.0.10.tar
redis-4.0.10/
redis-4.0.10/.gitignore
redis-4.0.10/00-RELEASENOTES
redis-4.0.10/BUGS
redis-4.0.10/CONTRIBUTING
redis-4.0.10/COPYING
redis-4.0.10/INSTALL
redis-4.0.10/MANIFESTO
redis-4.0.10/Makefile
redis-4.0.10/README.md
redis-4.0.10/deps/
redis-4.0.10/deps/Makefile
redis-4.0.10/deps/README.md
...
</pre></div>
</div>
<p>说明：归档（也称为创建归档）和解归档都使用<code class="docutils literal notranslate"><span class="pre">tar</span></code>命令，通常创建归档需要<code class="docutils literal notranslate"><span class="pre">-cvf</span></code>三个参数，其中<code class="docutils literal notranslate"><span class="pre">c</span></code>表示创建（create），<code class="docutils literal notranslate"><span class="pre">v</span></code>表示显示创建归档详情（verbose），<code class="docutils literal notranslate"><span class="pre">f</span></code>表示指定归档的文件（file）；解归档需要加上<code class="docutils literal notranslate"><span class="pre">-xvf</span></code>参数，其中<code class="docutils literal notranslate"><span class="pre">x</span></code>表示抽取（extract），其他两个参数跟创建归档相同。</p>
</div>
<div class="section" id="id300">
<h3>将标准输入转成命令行参数<a class="headerlink" href="#id300" title="永久链接至标题">¶</a></h3>
<p>将标准输入转成命令行参数 - <strong>xargs</strong>。</p>
<p>下面的命令会将查找当前路径下的html文件，然后通过<code class="docutils literal notranslate"><span class="pre">xargs</span></code>将这些文件作为参数传给<code class="docutils literal notranslate"><span class="pre">rm</span></code>命令，实现查找并删除文件的操作。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$   find . -type f -name <span class="s2">&quot;*.html&quot;</span> <span class="p">|</span> xargs rm -f
</pre></div>
</div>
<p>下面的命令将a.txt文件中的多行内容变成一行输出到b.txt文件中，其中<code class="docutils literal notranslate"><span class="pre">&lt;</span></code>表示从a.txt中读取输入，<code class="docutils literal notranslate"><span class="pre">&gt;</span></code>表示将命令的执行结果输出到b.txt中。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ xargs &lt; a.txt &gt; b.txt
</pre></div>
</div>
</div>
<div class="section" id="id301">
<h3>显示文件或目录<a class="headerlink" href="#id301" title="永久链接至标题">¶</a></h3>
<p>显示文件或目录 - <strong>basename</strong> / <strong>dirname</strong>。</p>
</div>
<div class="section" id="id302">
<h3>其他相关工具<a class="headerlink" href="#id302" title="永久链接至标题">¶</a></h3>
<p>其他相关工具。</p>
<ul class="simple">
<li><strong>sort</strong> - 对内容排序</li>
<li><strong>uniq</strong> - 去掉相邻重复内容</li>
<li><strong>tr</strong> - 替换指定内容为新内容</li>
<li><strong>cut</strong> / <strong>paste</strong> - 剪切/黏贴内容</li>
<li><strong>split</strong> - 拆分文件</li>
<li><strong>file</strong> - 判断文件类型</li>
<li><strong>wc</strong> - 统计文件行数、单词数、字节数</li>
<li><strong>iconv</strong> - 编码转换</li>
</ul>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ cat foo.txt
grape
apple
pitaya
maoli@ubuntu:~$ cat bar.txt
<span class="m">100</span>
<span class="m">200</span>
<span class="m">300</span>
<span class="m">400</span>
maoli@ubuntu:~$ paste foo.txt bar.txt
grape   <span class="m">100</span>
apple   <span class="m">200</span>
pitaya  <span class="m">300</span>
        <span class="m">400</span>
maoli@ubuntu:~$ paste foo.txt bar.txt &gt; hello.txt
maoli@ubuntu:~$ cut -b <span class="m">4</span>-8 hello.txt
pe      <span class="m">10</span>
le      <span class="m">20</span>
aya     <span class="m">3</span>
<span class="m">0</span>
maoli@ubuntu:~$ cat hello.txt <span class="p">|</span> tr <span class="s1">&#39;\t&#39;</span> <span class="s1">&#39;,&#39;</span>
grape,100
apple,200
pitaya,300
,400
maoli@ubuntu:~$ split -l <span class="m">100</span> sohu.html hello
maoli@ubuntu:~$ wget https://www.baidu.com/img/bd_logo1.png
maoli@ubuntu:~$ file bd_logo1.png
bd_logo1.png: PNG image data, <span class="m">540</span> x <span class="m">258</span>, <span class="m">8</span>-bit colormap, non-interlaced
maoli@ubuntu:~$ wc index.html 
 <span class="m">3820</span>  <span class="m">18696</span> <span class="m">430482</span> index.html
maoli@ubuntu wget http://www.qq.com -O qq.html
maoli@ubuntu iconv -f gb2312 -t utf-8 qq.html
</pre></div>
</div>
</div>
</div>
<div class="section" id="id303">
<h2>管道和重定向<a class="headerlink" href="#id303" title="永久链接至标题">¶</a></h2>
<div class="section" id="id304">
<h3>管道的使用<a class="headerlink" href="#id304" title="永久链接至标题">¶</a></h3>
<p>管道的使用 - <strong>|</strong>。</p>
<p>例子：查找当前目录下文件个数。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ find ./ <span class="p">|</span> wc -l
<span class="m">80801</span>
</pre></div>
</div>
<p>例子：列出当前路径下的文件和文件夹，给每一项加一个编号。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$  ls <span class="p">|</span> cat -n
    <span class="m">1</span>	abc
    <span class="m">2</span>	backup
</pre></div>
</div>
<p>例子：查找record.log中包含AAA，但不包含BBB的记录的总数</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ cat record.log <span class="p">|</span> grep AAA <span class="p">|</span> grep -v BBB <span class="p">|</span> wc -l
</pre></div>
</div>
</div>
<div class="section" id="id305">
<h3>输出重定向<a class="headerlink" href="#id305" title="永久链接至标题">¶</a></h3>
<p>输出重定向和错误重定向 - <strong>&gt;</strong> / <strong>&gt;&gt;</strong> / <strong>2&gt;</strong>。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ cat readme.txt
banana
apple
grape
apple
grape
watermelon
pear
pitaya
maoli@ubuntu:~$ cat readme.txt <span class="p">|</span> sort <span class="p">|</span> uniq &gt; result.txt
maoli@ubuntu:~$ cat result.txt
apple
banana
grape
pear
pitaya
watermelon
</pre></div>
</div>
</div>
<div class="section" id="id306">
<h3>输入重定向<a class="headerlink" href="#id306" title="永久链接至标题">¶</a></h3>
<p>输入重定向 - <strong>&lt;</strong>。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ <span class="nb">echo</span> <span class="s1">&#39;hello, world!&#39;</span> &gt; hello.txt
maoli@ubuntu:~$ <span class="nb">echo</span> <span class="s1">&#39;I will show you some code.&#39;</span> &gt;&gt; hello.txt
maoli@ubuntu:~$ cat hello.txt
hello, world!
I will show you some code.
</pre></div>
</div>
</div>
<div class="section" id="id307">
<h3>多重定向<a class="headerlink" href="#id307" title="永久链接至标题">¶</a></h3>
<p>多重定向 - <strong>tee</strong>。</p>
<p>下面的命令除了在终端显示命令<code class="docutils literal notranslate"><span class="pre">ls</span></code>的结果之外，还会追加输出到<code class="docutils literal notranslate"><span class="pre">ls.txt</span></code>文件中。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$  ls <span class="p">|</span> tee -a ls.txt
maoli@ubuntu:~$ cat ls.txt 
abc
backup
</pre></div>
</div>
</div>
<div class="section" id="id308">
<h3>别名<a class="headerlink" href="#id308" title="永久链接至标题">¶</a></h3>
<p><strong>alias</strong>创建别名</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ <span class="nb">alias</span> <span class="nv">ll</span><span class="o">=</span><span class="s1">&#39;ls -l&#39;</span>
maoli@ubuntu:~$ <span class="nb">alias</span> <span class="nv">frm</span><span class="o">=</span><span class="s1">&#39;rm -rf&#39;</span>
maoli@ubuntu:~$ ll
量 <span class="m">144920</span>
drwxrwxr-x  <span class="m">3</span> maoli maoli      <span class="m">4096</span> 5月  <span class="m">28</span> <span class="m">08</span>:20 abc
maoli@ubuntu:~<span class="nv">$frm</span> abc
</pre></div>
</div>
<p><strong>unalias</strong>删除别名</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ funalias frm
maoli@ubuntu:~$ frm index.html
-bash: frm: <span class="nb">command</span> not found
</pre></div>
</div>
</div>
</div>
<div class="section" id="id309">
<h2>文本处理<a class="headerlink" href="#id309" title="永久链接至标题">¶</a></h2>
<div class="section" id="id310">
<h3>字符流编辑器<a class="headerlink" href="#id310" title="永久链接至标题">¶</a></h3>
<p>字符流编辑器 - <strong>sed</strong>。</p>
<p>sed是操作、过滤和转换文本内容的工具。假设有一个名为fruit.txt的文件，内容如下所示。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ cat -n fruit.txt 
     <span class="m">1</span>  banana
     <span class="m">2</span>  grape
     <span class="m">3</span>  apple
     <span class="m">4</span>  watermelon
     <span class="m">5</span>  orange
</pre></div>
</div>
<p>接下来，我们在第2行后面添加一个pitaya。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$  sed <span class="s1">&#39;2a pitaya&#39;</span> fruit.txt 
banana
grape
pitaya
apple
watermelon
orange
</pre></div>
</div>
<p>在第2行前面插入一个waxberry。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ sed <span class="s1">&#39;2i waxberry&#39;</span> fruit.txt
banana
waxberry
grape
apple
watermelon
orange
</pre></div>
</div>
<p>删除第3行。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ sed <span class="s1">&#39;3d&#39;</span> fruit.txt
banana
grape
watermelon
orange
</pre></div>
</div>
<p>删除第2行到第4行。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ sed <span class="s1">&#39;2,4d&#39;</span> fruit.txt
banana
orange
</pre></div>
</div>
<p>将文本中的字符a替换为&#64;。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ sed <span class="s1">&#39;s#a#@#&#39;</span> fruit.txt 
b@nana
gr@pe
@pple
w@termelon
or@nge
</pre></div>
</div>
<p>将文本中的字符a替换为&#64;，使用全局模式。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ sed <span class="s1">&#39;s#a#@#g&#39;</span> fruit.txt 
b@n@n@
gr@pe
@pple
w@termelon
or@nge
</pre></div>
</div>
</div>
<div class="section" id="id311">
<h3>模式匹配和处理语言<a class="headerlink" href="#id311" title="永久链接至标题">¶</a></h3>
<p>模式匹配和处理语言 - <strong>awk</strong>。</p>
<p>awk是一种编程语言，也是Linux系统中处理文本最为强大的工具，它的作者之一和现在的维护者就是之前提到过的Brian Kernighan（ken和dmr最亲密的伙伴）。通过该命令可以从文本中提取出指定的列、用正则表达式从文本中取出我们想要的内容、显示指定的行以及进行统计和运算，总之它非常强大。</p>
<p>假设有一个名为fruit2.txt的文件，内容如下所示。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span><span class="se">\m</span>aoli@ubuntu:~$ cat fruit2.txt 
<span class="m">1</span>       banana      <span class="m">120</span>
<span class="m">2</span>       grape       <span class="m">500</span>
<span class="m">3</span>       apple       <span class="m">1230</span>
<span class="m">4</span>       watermelon  <span class="m">80</span>
<span class="m">5</span>       orange      <span class="m">400</span>
</pre></div>
</div>
<p>显示文件的第3行。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ awk <span class="s1">&#39;NR==3&#39;</span> fruit2.txt 
<span class="m">3</span>       apple       <span class="m">1230</span>
</pre></div>
</div>
<p>显示文件的第2列。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~<span class="nv">$awk</span> <span class="s1">&#39;{print $2}&#39;</span> fruit2.txt 
banana
grape
apple
watermelon
orange
</pre></div>
</div>
<p>显示文件的最后一列。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ awk <span class="s1">&#39;{print $NF}&#39;</span> fruit2.txt 
<span class="m">120</span>
<span class="m">500</span>
<span class="m">1230</span>
<span class="m">80</span>
<span class="m">400</span>
</pre></div>
</div>
<p>输出末尾数字大于等于300的行。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ awk <span class="s1">&#39;{if($3 &gt;= 300) {print $0}}&#39;</span> fruit2.txt 
<span class="m">2</span>       grape       <span class="m">500</span>
<span class="m">3</span>       apple       <span class="m">1230</span>
<span class="m">5</span>       orange      <span class="m">400</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id312">
<h2>用户管理<a class="headerlink" href="#id312" title="永久链接至标题">¶</a></h2>
</div>
<div class="section" id="id313">
<h2>创建和删除用户<a class="headerlink" href="#id313" title="永久链接至标题">¶</a></h2>
<p>创建和删除用户 - <strong>useradd</strong> / <strong>userdel</strong>。需要用root账号创建</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ su root
密码： 
root@ubuntu:/home/maoli# useradd Runsen
root@ubuntu:/home/maoli#  userdel Runsen
</pre></div>
</div>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">-d</span></code> - 创建用户时为用户指定用户主目录</li>
<li><code class="docutils literal notranslate"><span class="pre">-g</span></code> - 创建用户时指定用户所属的用户组</li>
</ul>
</div>
<div class="section" id="id314">
<h2>创建和删除用户组<a class="headerlink" href="#id314" title="永久链接至标题">¶</a></h2>
<p>创建和删除用户组 - <strong>groupadd</strong> / <strong>groupdel</strong>。</p>
<p>用户组主要是为了方便对一个组里面所有用户的管理。</p>
</div>
<div class="section" id="id315">
<h2>修改密码<a class="headerlink" href="#id315" title="永久链接至标题">¶</a></h2>
<p>修改密码 - <strong>passwd</strong>。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>root@ubuntu:/home/maoli# passwd maoli
New password: 
Retype new password: 
passwd: all authentication tokens updated successfully.
</pre></div>
</div>
<p>如果使用<code class="docutils literal notranslate"><span class="pre">passwd</span></code>命令时没有指定命令作用的对象，则表示要修改当前用户的密码。如果想批量修改用户密码，可以使用<code class="docutils literal notranslate"><span class="pre">chpasswd</span></code>命令。</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">-l</span></code> / <code class="docutils literal notranslate"><span class="pre">-u</span></code> - 锁定/解锁用户。</li>
<li><code class="docutils literal notranslate"><span class="pre">-d</span></code> - 清除用户密码。</li>
<li><code class="docutils literal notranslate"><span class="pre">-e</span></code> - 设置密码立即过期，用户登录时会强制要求修改密码。</li>
<li><code class="docutils literal notranslate"><span class="pre">-i</span></code> - 设置密码过期多少天以后禁用该用户。</li>
</ul>
</div>
<div class="section" id="id316">
<h2>查看和修改密码有效期<a class="headerlink" href="#id316" title="永久链接至标题">¶</a></h2>
<p>查看和修改密码有效期 - <strong>chage</strong>。</p>
<p>设置maoli用户100天后必须修改密码，过期前15天通知该用户，过期后15天禁用该用户。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>root@ubuntu:/home/maoli# chage -M <span class="m">100</span> -W <span class="m">15</span> -I <span class="m">15</span> maoli
</pre></div>
</div>
<ol class="simple">
<li>切换用户 - <strong>su</strong>。</li>
</ol>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>root@ubuntu:/home/maoli#  su maoli
maoli@ubuntu:~$ 
</pre></div>
</div>
</div>
<div class="section" id="id317">
<h2>以管理员身份执行命令<a class="headerlink" href="#id317" title="永久链接至标题">¶</a></h2>
<p>以管理员身份执行命令 - <strong>sudo</strong>。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$  ls /root
ls: cannot open directory /root: Permission denied
maoli@ubuntu:~$ 
sudo ls /root
<span class="o">[</span>sudo<span class="o">]</span> password <span class="k">for</span> maoli:
</pre></div>
</div>
<p><strong>说明</strong>：如果希望用户能够以管理员身份执行命令，用户必须要出现在sudoers名单中，sudoers文件在 <code class="docutils literal notranslate"><span class="pre">/etc</span></code>目录下，如果希望直接编辑该文件也可以使用下面的命令。</p>
</div>
<div class="section" id="sudoers">
<h2>编辑sudoers文件<a class="headerlink" href="#sudoers" title="永久链接至标题">¶</a></h2>
<p>编辑sudoers文件 - <strong>visudo</strong>。</p>
<p>这里使用的编辑器是vim，关于vim的知识在前面有讲解。</p>
<p>该文件的部分内容如下所示：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">## Allow root to run any commands anywhere </span>
<span class="n">root</span>    <span class="n">ALL</span><span class="o">=</span><span class="p">(</span><span class="n">ALL</span><span class="p">)</span>   <span class="n">ALL</span>

<span class="c1">## Allows members of the &#39;sys&#39; group to run networking, software, </span>
<span class="c1">## service management apps and more.</span>
<span class="c1"># %sys ALL = NETWORKING, SOFTWARE, SERVICES, STORAGE, DELEGATING, PROCESSES, LOCATE, DRIVERS</span>
<span class="c1">## Allows people in group wheel to run all commands</span>
<span class="o">%</span><span class="n">wheel</span>  <span class="n">ALL</span><span class="o">=</span><span class="p">(</span><span class="n">ALL</span><span class="p">)</span>   <span class="n">ALL</span>

<span class="c1">## Same thing without a password</span>
<span class="c1"># %wheel    ALL=(ALL)   NOPASSWD: ALL</span>

<span class="c1">## Allows members of the users group to mount and unmount the</span>
<span class="c1">## cdrom as root</span>
<span class="c1"># %users  ALL=/sbin/mount /mnt/cdrom, /sbin/umount /mnt/cdrom</span>

<span class="c1">## Allows members of the users group to shutdown this system</span>
<span class="c1"># %users  localhost=/sbin/shutdown -h now</span>
</pre></div>
</div>
</div>
<div class="section" id="id318">
<h2>显示用户与用户组的信息<a class="headerlink" href="#id318" title="永久链接至标题">¶</a></h2>
<p>显示用户与用户组的信息 - <strong>id</strong>。</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span>root@ubuntu:/home/maoli# id
uid=0(root) gid=0(root) 组=0(root)
</pre></div>
</div>
</div>
<div class="section" id="id319">
<h2>给其他用户发消息<a class="headerlink" href="#id319" title="永久链接至标题">¶</a></h2>
<p>给其他用户发消息 -<strong>write</strong> / <strong>wall</strong>。</p>
<p>发送方：</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>root@ubuntu# write maoli
Hello Maoli
EOF
</pre></div>
</div>
<p>键入EOF表示信息结束，用Crtl+D组合键发送信息。输入内容会出现在用户的屏幕上，同时通信中止。
接收方：</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$  
Message from root on pts/0 at <span class="m">9</span>:41 ...
Hello Maoli
EOF
</pre></div>
</div>
<ol class="simple">
<li>查看/设置是否接收其他用户发送的消息 - <strong>mesg</strong>。</li>
</ol>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$   mesg
is y 
maoli@ubuntu:~$   mesg n
maoli@ubuntu:~$ mesg
is n
</pre></div>
</div>
<p>如果想要发送一条信息给系统中所有用户，可以使用wall命令，wall表示：write all。输入wall，然后编辑信息，如果shell支持可以使用中文。然后使用Crtl+D组合键发送信息。这样系统所有登录用户的桌面会收到信息。如 果在网络上，可以使用rwall命令把信息发送到局域网上所有的用户。</p>
</div>
<div class="section" id="id320">
<h2>文件系统<a class="headerlink" href="#id320" title="永久链接至标题">¶</a></h2>
</div>
<div class="section" id="id321">
<h2>文件和路径<a class="headerlink" href="#id321" title="永久链接至标题">¶</a></h2>
<ol class="simple">
<li>命名规则：文件名的最大长度与文件系统类型有关，一般情况下，文件名不应该超过255个字符，虽然绝大多数的字符都可以用于文件名，但是最好使用英文大小写字母、数字、下划线、点这样的符号。文件名中虽然可以使用空格，但应该尽可能避免使用空格，否则在输入文件名时需要用将文件名放在双引号中或者通过<code class="docutils literal notranslate"><span class="pre">\</span></code>对空格进行转义。</li>
<li>扩展名：在Linux系统下文件的扩展名是可选的，但是使用扩展名有助于对文件内容的理解。有些应用程序要通过扩展名来识别文件，但是更多的应用程序并不依赖文件的扩展名，就像<code class="docutils literal notranslate"><span class="pre">file</span></code>命令在识别文件时并不是依据扩展名来判定文件的类型。</li>
<li>隐藏文件：以点开头的文件在Linux系统中是隐藏文件（不可见文件）。</li>
</ol>
</div>
<div class="section" id="id322">
<h2>目录结构<a class="headerlink" href="#id322" title="永久链接至标题">¶</a></h2>
<ol class="simple">
<li>/bin - 基本命令的二进制文件。</li>
<li>/boot - 引导加载程序的静态文件。</li>
<li>/dev - 设备文件。</li>
<li><strong>/etc</strong> - 配置文件。</li>
<li>/home - 普通用户主目录的父目录。</li>
<li>/lib - 共享库文件。</li>
<li>/lib64 - 共享64位库文件。</li>
<li>/lost+found - 存放未链接文件。</li>
<li>/media - 自动识别设备的挂载目录。</li>
<li>/mnt - 临时挂载文件系统的挂载点。</li>
<li>/opt - 可选插件软件包安装位置。</li>
<li>/proc -  内核和进程信息。</li>
<li><strong>/root</strong> - 超级管理员用户主目录。</li>
<li>/run - 存放系统运行时需要的东西。</li>
<li>/sbin - 超级用户的二进制文件。</li>
<li>/sys - 设备的伪文件系统。</li>
<li>/tmp - 临时文件夹。</li>
<li><strong>/usr</strong> - 用户应用目录。</li>
<li>/var - 变量数据目录。</li>
</ol>
</div>
<div class="section" id="id323">
<h2>访问权限<a class="headerlink" href="#id323" title="永久链接至标题">¶</a></h2>
<div class="section" id="id324">
<h3>改变文件模式<a class="headerlink" href="#id324" title="永久链接至标题">¶</a></h3>
<ol class="simple">
<li><strong>chmod</strong> - 改变文件模式比特。</li>
</ol>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~/backup$ ls -l
总用量 <span class="m">424</span>
-rw-rw-r-- <span class="m">2</span> maoli maoli <span class="m">430482</span> 5月  <span class="m">28</span> <span class="m">08</span>:30 csdn.html
maoli@ubuntu:~/backup$ chmod g+w,o+w csdn.html
maoli@ubuntu:~/backup$ ls -l
总用量 <span class="m">424</span>
-rw-rw-rw- <span class="m">2</span> maoli maoli <span class="m">430482</span> 5月  <span class="m">28</span> <span class="m">08</span>:30 csdn.html
maoli@ubuntu:~/backup$ chmod <span class="m">644</span> csdn.html 
maoli@ubuntu:~/backup$ ls -l
总用量 <span class="m">424</span>
-rw-r--r-- <span class="m">2</span> maoli maoli <span class="m">430482</span> 5月  <span class="m">28</span> <span class="m">08</span>:30 csdn.html
</pre></div>
</div>
<p>说明：通过上面的例子可以看出，用<code class="docutils literal notranslate"><span class="pre">chmod</span></code>改变文件模式比特有两种方式：一种是字符设定法，另一种是数字设定法。除了<code class="docutils literal notranslate"><span class="pre">chmod</span></code>之外，可以通过<code class="docutils literal notranslate"><span class="pre">umask</span></code>来设定哪些权限将在新文件的默认权限中被删除。
<img alt="https://img-blog.csdnimg.cn/20200528094237104.png" src="https://img-blog.csdnimg.cn/20200528094237104.png" /></p>
</div>
<div class="section" id="id325">
<h3>改变文件所有者<a class="headerlink" href="#id325" title="永久链接至标题">¶</a></h3>
<ol class="simple">
<li><strong>chown</strong> - 改变文件所有者。</li>
</ol>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~/backup$ ls -l
总用量 <span class="m">424</span>
-rw-r--r-- <span class="m">2</span> maoli maoli <span class="m">430482</span> 5月  <span class="m">28</span> <span class="m">08</span>:30 csdn.html
maoli@ubuntu:~/backup$ sudo chown root csdn.html
<span class="o">[</span>sudo<span class="o">]</span> maoli 的密码： 
maoli@ubuntu:~/backup$ ls -l
总用量 <span class="m">424</span>
-rw-r--r-- <span class="m">2</span> root maoli <span class="m">430482</span> 5月  <span class="m">28</span> <span class="m">08</span>:30 csdn.html
</pre></div>
</div>
<ol class="simple">
<li><strong>chgrp</strong> - 改变用户组。</li>
</ol>
</div>
</div>
</div>
<div class="section" id="id326">
<h1>54、Linux网络管理，软件安装，进程管理总结（中篇）<a class="headerlink" href="#id326" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author ：By Runsen</p>
<p>今天的笔记主要是关于Linux操作系统基础的相关知识。</p>
<div class="section" id="id327">
<h2>1、⽹络管理<a class="headerlink" href="#id327" title="永久链接至标题">¶</a></h2>
<div class="section" id="id328">
<h3>1.1 网络状态查看<a class="headerlink" href="#id328" title="永久链接至标题">¶</a></h3>
<p>在Linux中经常使用ifconfig，route和netstat查看网络状态，它们就是. net-tools工具，下面我来使用下。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200429184929377.png" src="https://img-blog.csdnimg.cn/20200429184929377.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20200429185022370.png" src="https://img-blog.csdnimg.cn/20200429185022370.png" /></p>
<p>我就说下ifconfig和route</p>
<p>在我们的linux中有很多网卡接口，比如eth0第一块网卡网络接口，eno1板载⽹网卡， ens33 PCI-E⽹网卡 。CentOS 7 使⽤用了⼀致性⽹络设备命名，以上都不匹配，则使⽤ eth0</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># ifconfig eth0</span>
eth0: error fetching interface information: Device not found
<span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># ifconfig ens33</span>
ens33: <span class="nv">flags</span><span class="o">=</span><span class="m">4163</span>&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu <span class="m">1500</span>
        inet <span class="m">192</span>.168.92.90  netmask <span class="m">255</span>.255.255.0  broadcast <span class="m">192</span>.168.92.255
        inet6 fe80::b889:1772:c306:ef8f  prefixlen <span class="m">64</span>  scopeid 0x20&lt;link&gt;
        ether <span class="m">00</span>:0c:29:07:43:5a  txqueuelen <span class="m">1000</span>  <span class="o">(</span>Ethernet<span class="o">)</span>
        RX packets <span class="m">910</span>  bytes <span class="m">954985</span> <span class="o">(</span><span class="m">932</span>.6 KiB<span class="o">)</span>
        RX errors <span class="m">0</span>  dropped <span class="m">0</span>  overruns <span class="m">0</span>  frame <span class="m">0</span>
        TX packets <span class="m">450</span>  bytes <span class="m">38942</span> <span class="o">(</span><span class="m">38</span>.0 KiB<span class="o">)</span>
        TX errors <span class="m">0</span>  dropped <span class="m">0</span> overruns <span class="m">0</span>  carrier <span class="m">0</span>  collisions <span class="m">0</span>
</pre></div>
</div>
</div>
<div class="section" id="id329">
<h3>1.2 网络配置文件<a class="headerlink" href="#id329" title="永久链接至标题">¶</a></h3>
<p>ifcfg-eth0，/etc/hosts</p>
<p>在配置hadoop，elasticsearch集群的时候需要在/etc/hosts配置集群IP和主机名，有时候你ping不了百度，可能域名解析不了，需要在/etc/sysconfig/network-scripts/ifcfg-eth0配置</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># vim /etc/sysconfig/network</span>
<span class="c1">#########</span>
<span class="nv">HOSTNAME</span><span class="o">=</span>node01
<span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># vim /etc/hosts</span>
<span class="c1">#########</span>
<span class="m">192</span>.168.92.90 node01
<span class="m">192</span>.168.92.91 node02
<span class="m">192</span>.168.92.92 node03

<span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># 配置DNS，域名解析服务</span>
<span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># vim /etc/sysconfig/network-scripts/ifcfg-eth0</span>
<span class="nv">DNS1</span><span class="o">=</span><span class="m">202</span>.106.0.20
<span class="nv">DNS2</span><span class="o">=</span><span class="m">8</span>.8.8.8
</pre></div>
</div>
</div>
<div class="section" id="id330">
<h3>1.3 ⽹络故障排除命令<a class="headerlink" href="#id330" title="永久链接至标题">¶</a></h3>
<p>第一，ping百度：查看目标机器的网络是否可通</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ ping baidu.com
PING baidu.com <span class="o">(</span><span class="m">220</span>.181.38.148<span class="o">)</span> <span class="m">56</span><span class="o">(</span><span class="m">84</span><span class="o">)</span> bytes of data.
<span class="m">64</span> bytes from <span class="m">220</span>.181.38.148: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">1</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">128</span> <span class="nv">time</span><span class="o">=</span><span class="m">49</span>.6 ms
<span class="m">64</span> bytes from <span class="m">220</span>.181.38.148: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">2</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">128</span> <span class="nv">time</span><span class="o">=</span><span class="m">48</span>.2 ms
^C
--- baidu.com ping statistics ---
<span class="m">2</span> packets transmitted, <span class="m">2</span> received, <span class="m">0</span>% packet loss, <span class="nb">time</span> 1001ms
rtt min/avg/max/mdev <span class="o">=</span> <span class="m">48</span>.223/48.948/49.673/0.725 ms
</pre></div>
</div>
<p>traceroute</p>
<p>nslookup：nslookup www.baidu.com     Server即为域名对应的ip</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ nslookup www.baidu.com
Server:		<span class="m">127</span>.0.1.1
Address:	<span class="m">127</span>.0.1.1#53

Non-authoritative answer:
www.baidu.com	canonical <span class="nv">name</span> <span class="o">=</span> www.a.shifen.com.
Name:	www.a.shifen.com
Address: <span class="m">182</span>.61.200.6
Name:	www.a.shifen.com
Address: <span class="m">182</span>.61.200.7
</pre></div>
</div>
<p>telnet：如果ip是可达的，但是服务仍有然有问题，则可以通过telnet去查看服务端口状态</p>
<p>tcpdump：</p>
<p>tcpdump -i any -n port 80 # 抓取所有网卡（any）80端口数据包，并且以ip形式显示（-n）</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ sudo tcpdump -i any -n port <span class="m">80</span> -n
tcpdump: verbose output suppressed, use -v or -vv <span class="k">for</span> full protocol decode
listening on any, link-type LINUX_SLL <span class="o">(</span>Linux cooked<span class="o">)</span>, capture size <span class="m">262144</span> bytes
<span class="m">10</span>:28:11.003675 IP <span class="m">192</span>.168.92.1.53951 &gt; <span class="m">192</span>.168.92.135.80: Flags <span class="o">[</span>S<span class="o">]</span>, seq <span class="m">185886164</span>, win <span class="m">64240</span>, options <span class="o">[</span>mss <span class="m">1460</span>,nop,wscale <span class="m">8</span>,nop,nop,sackOK<span class="o">]</span>, length <span class="m">0</span>
<span class="m">10</span>:28:11.003875 IP <span class="m">192</span>.168.92.135.80 &gt; <span class="m">192</span>.168.92.1.53951: Flags <span class="o">[</span>S.<span class="o">]</span>, seq <span class="m">2863640054</span>, ack <span class="m">185886165</span>, win <span class="m">64240</span>, options <span class="o">[</span>mss <span class="m">1460</span>,nop,nop,sackOK,nop,wscale <span class="m">7</span><span class="o">]</span>, length <span class="m">0</span>
<span class="m">10</span>:28:11.004114 IP <span class="m">192</span>.168.92.1.53951 &gt; <span class="m">192</span>.168.92.135.80: Flags <span class="o">[</span>.<span class="o">]</span>, ack <span class="m">1</span>, win <span class="m">4106</span>, length <span class="m">0</span>
<span class="m">10</span>:28:11.010472 IP <span class="m">192</span>.168.92.1.53951 &gt; <span class="m">192</span>.168.92.135.80: Flags <span class="o">[</span>P.<span class="o">]</span>, seq <span class="m">1</span>:476, ack <span class="m">1</span>, win <span class="m">4106</span>, length <span class="m">475</span>: HTTP: GET /sqli-labs/ HTTP/1.1
</pre></div>
</div>
<p>tcpdump -i any -n host 10.0.0.1 and port 80# 抓取所有网卡的80端口和10.0.0.1之间的数据包，并且以ip形式显示</p>
<p>netstat 查看服务监听端口状态是否正确
-n 显示ip地址
-t tcp协议
-p 显示端口对应的进程
-l tcp的监听状态（listen）
-ntpl 查看端口开放情况</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ sudo netstat -ntlp
激活Internet连接 <span class="o">(</span>仅服务器<span class="o">)</span>
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
tcp        <span class="m">0</span>      <span class="m">0</span> <span class="m">0</span>.0.0.0:22              <span class="m">0</span>.0.0.0:*               LISTEN      <span class="m">1111</span>/sshd       
tcp        <span class="m">0</span>      <span class="m">0</span> <span class="m">127</span>.0.0.1:631           <span class="m">0</span>.0.0.0:*               LISTEN      <span class="m">14200</span>/cupsd     
tcp        <span class="m">0</span>      <span class="m">0</span> <span class="m">127</span>.0.0.1:3306          <span class="m">0</span>.0.0.0:*               LISTEN      <span class="m">1148</span>/mysqld     
tcp        <span class="m">0</span>      <span class="m">0</span> <span class="m">127</span>.0.0.1:6379          <span class="m">0</span>.0.0.0:*               LISTEN      <span class="m">1165</span>/redis-server <span class="m">1</span>
tcp        <span class="m">0</span>      <span class="m">0</span> <span class="m">127</span>.0.1.1:53            <span class="m">0</span>.0.0.0:*               LISTEN      <span class="m">1285</span>/dnsmasq    
tcp6       <span class="m">0</span>      <span class="m">0</span> :::22                   :::*                    LISTEN      <span class="m">1111</span>/sshd       
tcp6       <span class="m">0</span>      <span class="m">0</span> ::1:631                 :::*                    LISTEN      <span class="m">14200</span>/cupsd     
tcp6       <span class="m">0</span>      <span class="m">0</span> :::9000                 :::*                    LISTEN      <span class="m">2234</span>/docker-proxy
tcp6       <span class="m">0</span>      <span class="m">0</span> :::80                   :::*                    LISTEN      <span class="m">1842</span>/apache2 
</pre></div>
</div>
</div>
<div class="section" id="id331">
<h3>1.4 ⽹络服务管理<a class="headerlink" href="#id331" title="永久链接至标题">¶</a></h3>
<p>⽹络服务管理程序分为两种，分别为SysV和systemd。现在Systemd已经基本取代了SysV的Init。</p>
<table>
<thead>
<tr>
<th>命令用途</th>
<th>SysVInit命令</th>
<th>Systemd命令</th>
</tr>
</thead>
<tbody>
<tr>
<td>服务启动</td>
<td>service 服务名 start</td>
<td>systemd start 服务名.service (.service可省略，后同）</td>
</tr>
<tr>
<td>服务停止</td>
<td>service 服务名 stop</td>
<td>systemctl stop 服务名</td>
</tr>
<tr>
<td>服务重启</td>
<td>service 服务名 restart</td>
<td>systemctl restart 服务名</td>
</tr>
<tr>
<td>服务重新加载</td>
<td>service 服务名 reload</td>
<td>systemctl reload 服务名</td>
</tr>
<tr>
<td>服务状态确认</td>
<td>service 服务名 status</td>
<td>systemctl status 服务名</td>
</tr>
<tr>
<td>服务开机启动设定</td>
<td>chkconfig 服务名 on</td>
<td>systemctl enable 服务名</td>
</tr>
<tr>
<td>取消服务开机启动设定</td>
<td>chkconfig service off</td>
<td>systemctl disable 服务名</td>
</tr>
<tr>
<td>确认服务开机启动设定状态</td>
<td>chkconfig 服务名</td>
<td>systemctl is-enabled 服务名</td>
</tr>
<tr>
<td>加载服务配置文件</td>
<td>chkconfig 服务名 -add</td>
<td>systemctl deamon-reload</td>
</tr>
<tr>
<td>关机</td>
<td>halt</td>
<td>systemctl halt</td>
</tr>
<tr>
<td>关机（电源）</td>
<td>poweroff</td>
<td>systemctl poweroff</td>
</tr>
<tr>
<td>重启</td>
<td>reboot</td>
<td>systemctl reboot</td>
</tr>
<tr>
<td>休眠</td>
<td>pm-hibernate</td>
<td>systemctl hibernate</td>
</tr>
<tr>
<td>挂起</td>
<td>pm-suspend</td>
<td>systemctl suspend</td>
</tr>
</tbody>
</table></div>
<div class="section" id="ip">
<h3>1.5 设置静态ip<a class="headerlink" href="#ip" title="永久链接至标题">¶</a></h3>
<p>在搭建任何集群，都是要设置静态ip的。</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@node01<span class="o">]</span><span class="c1"># vim /etc/sysconfig/network-scripts/ifcfg-ens33</span>

<span class="c1">################</span>
<span class="nv">BOOTPROTO</span><span class="o">=</span>static
<span class="nv">ONBOOT</span><span class="o">=</span><span class="s2">&quot;yes&quot;</span>
<span class="c1"># 网关地址根据系统的网络而定</span>
<span class="nv">GATEWAY</span><span class="o">=</span><span class="m">192</span>.168.92.2
<span class="c1"># 设置的静态ip</span>
<span class="nv">IPADDR</span><span class="o">=</span><span class="m">192</span>.168.92.92
<span class="nv">NETMASK</span><span class="o">=</span><span class="m">255</span>.255.255.0
<span class="c1"># 配置DNS服务器</span>
<span class="nv">DNS1</span><span class="o">=</span><span class="m">8</span>.8.8.8
<span class="nv">DNS2</span><span class="o">=</span><span class="m">8</span>.8.4.4
</pre></div>
</div>
</div>
</div>
<div class="section" id="id332">
<h2>2. 软件安装<a class="headerlink" href="#id332" title="永久链接至标题">¶</a></h2>
<div class="section" id="rpm">
<h3>2.1 rpm安装<a class="headerlink" href="#rpm" title="永久链接至标题">¶</a></h3>
<p>在 Linux 操作系统下，几乎所有的软件均通过RPM 进行安装、卸载及管理等操作。RPM 的全称为Redhat Package Manager ，是由Redhat 公司提出的，用于管理Linux 下软件包的软件，主要用于CentOS、RedHat等linux系统，软件安装包格式为 rpm。</p>
<p>比如一个vim的rpm叫：vim-common-7.4.10-5.el7.x86_64.rpm 。vim-common是软件名称，7.4.10-5软件版本，el7Red Hat Enterprise Linux 指的是centos7系统版本，x86_64指的是系统平台x86</p>
<p>rpm 命令常⽤参数，-q 查询软件包，-i 安装软件包和-e 卸载软件包</p>
</div>
<div class="section" id="yum">
<h3>2.2 yum 包管理器<a class="headerlink" href="#yum" title="永久链接至标题">¶</a></h3>
<p>yum（全称 Yellow dog Updater, Modified）是一个前端软件包管理器，基于RPM包管理，能够从指定的服务器自动下载RPM包并且安装，可以自动处理依赖性关系。</p>
<p>下载阿里云的yum源到了/etc/yum.repos.d中</p>
<p>备份yum源</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup
</pre></div>
</div>
<p>下载新的CentOS-Base.repo 到/etc/yum.repos.d/，这里指的是centos7</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo
<span class="c1"># 运行yum makecache生成缓存</span>
yum clean all
yum makecache
</pre></div>
</div>
<p>这时候可以查看yum的base</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># vim /etc/yum.repos.d/CentOS-Base.repo </span>
<span class="o">[</span>base<span class="o">]</span>
<span class="nv">name</span><span class="o">=</span>CentOS-<span class="nv">$releasever</span> - Base - mirrors.aliyun.com
<span class="nv">failovermethod</span><span class="o">=</span>priority
<span class="nv">baseurl</span><span class="o">=</span>http://mirrors.aliyun.com/centos/<span class="nv">$releasever</span>/os/<span class="nv">$basearch</span>/
        http://mirrors.aliyuncs.com/centos/<span class="nv">$releasever</span>/os/<span class="nv">$basearch</span>/
        http://mirrors.cloud.aliyuncs.com/centos/<span class="nv">$releasever</span>/os/<span class="nv">$basearch</span>/
<span class="nv">gpgcheck</span><span class="o">=</span><span class="m">1</span>
<span class="nv">gpgkey</span><span class="o">=</span>http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7
</pre></div>
</div>
<p>由于yum中有的mirror速度是非常慢的。对此，我可以下载fastestmirror插件。</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># yum install yum-fastestmirror -y</span>
<span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># cat  /etc/yum/pluginconf.d/fastestmirror.conf</span>
<span class="o">[</span>main<span class="o">]</span>
<span class="nv">enabled</span><span class="o">=</span><span class="m">1</span>
<span class="nv">verbose</span><span class="o">=</span><span class="m">0</span>
<span class="nv">always_print_best_host</span> <span class="o">=</span> <span class="nb">true</span>
<span class="nv">socket_timeout</span><span class="o">=</span><span class="m">3</span>
<span class="c1">#  Relative paths are relative to the cachedir (and so works for users as well</span>
<span class="c1"># as root).</span>
<span class="nv">hostfilepath</span><span class="o">=</span>timedhosts.txt
<span class="nv">maxhostfileage</span><span class="o">=</span><span class="m">10</span>
<span class="nv">maxthreads</span><span class="o">=</span><span class="m">15</span>
<span class="c1">#exclude=.gov, facebook</span>
<span class="c1">#include_only=.nl,.de,.uk,.ie</span>
</pre></div>
</div>
<p>yum常用命令install 安装软件包，remove 卸载软件包，list| grouplist 查看软件包，update 升级软件包</p>
</div>
<div class="section" id="apt">
<h3>2.3 apt安装<a class="headerlink" href="#apt" title="永久链接至标题">¶</a></h3>
<p>Ubuntu的高级打包工具（APT，Advanced Packaging Tool ），Debian、Ubuntu 使⽤ apt 包管理器，软件安装包格式为 deb。</p>
<p>apt安装一个nginx</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ sudo apt-get install nginx
/usr/sbin/nginx：主程序
/etc/nginx：存放配置文件
/usr/share/nginx：存放静态文件
/var/log/nginx：存放日志
</pre></div>
</div>
</div>
<div class="section" id="make-install">
<h3>2.4 make install编译源码安装<a class="headerlink" href="#make-install" title="永久链接至标题">¶</a></h3>
<p>源码的安装一般由3个步骤组成：配置(configure)、编译(make)、安装(make install)。</p>
<p>configure文件是一个可执行的脚本文件，它有很多选项，在待安装的源码目录下使用命令./configure –help可以输出详细的选项列表。</p>
<p>其中–prefix选项是配置安装目录，如果不配置该选项，安装后可执行文件默认放在/usr /local/bin，库文件默认放在/usr/local/lib，配置文件默认放在/usr/local/etc，其它的资源文件放在/usr /local/share，比较凌乱。</p>
<p>如果配置了–prefix，如：./configure –prefix=/usr/local/python3</p>
<p>安装后的所有资源文件都会被放在/usr/local/python3目录中，不会分散到其他目录。如果删除直接删除这个文件就可以了。</p>
<p>比如centos7安装Python3.6</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># yum install yum-utils</span>
<span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># yum install openssl-devel -y </span>
<span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># mkdir -p  /usr/local/python3</span>
<span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># cd /usr/local/python3/</span>
<span class="o">[</span>root@node01 python3<span class="o">]</span><span class="c1"># wget https://www.python.org/ftp/python/3.6.7/Python-3.6.7.tgz</span>
<span class="o">[</span>root@node01 python3<span class="o">]</span><span class="c1"># tar -zxvf Python-3.6.7.tgz</span>
<span class="o">[</span>root@node01 python3<span class="o">]</span><span class="c1"># cd Python-3.6.7</span>
<span class="o">[</span>root@node01 python3.6.7<span class="o">]</span><span class="c1"># ./configure --prefix=/usr/local/python3 --with-ssl </span>
<span class="o">[</span>root@node01 python3.6.7<span class="o">]</span><span class="c1"># make &amp;&amp; make install</span>
Installing collected packages: setuptools, pip
Successfully installed pip-10.0.1 setuptools-39.0.
<span class="o">[</span>root@node01 python3.6.7<span class="o">]</span><span class="c1"># cd ..</span>
<span class="o">[</span>root@node01 Python3<span class="o">]</span><span class="c1"># ln -s /usr/local/python3/bin/python3 /usr/bin/python3</span>
<span class="o">[</span>root@node01 Python3<span class="o">]</span><span class="c1"># ln -s /usr/local/python3/bin/pip3 /usr/bin/pip3</span>
<span class="o">[</span>root@node01 Python3<span class="o">]</span><span class="c1"># python3 -V</span>
Python <span class="m">3</span>.6.7
<span class="o">[</span>root@node01 Python3<span class="o">]</span><span class="c1"># python3</span>
Python <span class="m">3</span>.6.7 <span class="o">(</span>default, Mar  <span class="m">5</span> <span class="m">2020</span>, <span class="m">11</span>:00:15<span class="o">)</span> 
<span class="o">[</span>GCC <span class="m">4</span>.8.5 <span class="m">20150623</span> <span class="o">(</span>Red Hat <span class="m">4</span>.8.5-39<span class="o">)]</span> on linux
Type <span class="s2">&quot;help&quot;</span>, <span class="s2">&quot;copyright&quot;</span>, <span class="s2">&quot;credits&quot;</span> or <span class="s2">&quot;license&quot;</span> <span class="k">for</span> more information.
&gt;&gt;&gt; exit<span class="o">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id333">
<h2>3. 进程管理<a class="headerlink" href="#id333" title="永久链接至标题">¶</a></h2>
<p>进程 是 Unix 和 Linux 系统中对正在运行中的应用程序的抽象，通过它可以管理和监视程序对内存、处理器时间和 I / O 资源的使用。</p>
<div class="section" id="id334">
<h3>3.1 杀进程<a class="headerlink" href="#id334" title="永久链接至标题">¶</a></h3>
<p>很多时候需要杀进程，ps -ef可以查看所有的进程，ps -ef|grep 查看具体的任务的进程，</p>
<p>比如查看Mysql进程</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># ps -ef|grep mysql</span>
clouder+   <span class="m">1726</span>      <span class="m">1</span> <span class="m">38</span> <span class="m">15</span>:16 ?        <span class="m">00</span>:04:34 /usr/java/jdk1.8.0_241/bin/java -cp .:/usr/share/java/mysql-connector-java.jar:/usr/share/java/oracle-connector-java.jar:/usr/share/java/postgresql-connector-java.jar:lib/* -server -Dlog4j.configuration<span class="o">=</span>file:/etc/cloudera-scm-server/log4j.properties -Dfile.encoding<span class="o">=</span>UTF-8 -Dcmf.root.logger<span class="o">=</span>INFO,LOGFILE -Dcmf.log.dir<span class="o">=</span>/var/log/cloudera-scm-server -Dcmf.log.file<span class="o">=</span>cloudera-scm-server.log -Dcmf.jetty.threshhold<span class="o">=</span>WARN -Dcmf.schema.dir<span class="o">=</span>/opt/cloudera/cm/schema -Djava.awt.headless<span class="o">=</span><span class="nb">true</span> -Djava.net.preferIPv4Stack<span class="o">=</span><span class="nb">true</span> -Dpython.home<span class="o">=</span>/opt/cloudera/cm/python -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+HeapDumpOnOutOfMemoryError -Xmx2G -XX:MaxPermSize<span class="o">=</span>256m -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath<span class="o">=</span>/tmp -XX:OnOutOfMemoryError<span class="o">=</span><span class="nb">kill</span> -9 %p com.cloudera.server.cmf.Main
mysql      <span class="m">2745</span>      <span class="m">1</span>  <span class="m">0</span> <span class="m">15</span>:16 ?        <span class="m">00</span>:00:04 /usr/sbin/mysqld --daemonize --pid-file<span class="o">=</span>/var/run/mysqld/mysqld.pid
root       <span class="m">9864</span>   <span class="m">4959</span>  <span class="m">0</span> <span class="m">15</span>:28 pts/0    <span class="m">00</span>:00:00 grep --color<span class="o">=</span>auto mysql
</pre></div>
</div>
<p>查找与指定条件匹配的进程 - <strong>pgrep</strong>,，就是其缩写</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root ~<span class="o">]</span>$ pgrep mysqld
<span class="m">3584</span>
</pre></div>
</div>
<p>查看端口的进程，比如mysql的端口是3306</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># lsof -i:3306</span>
COMMAND  PID         USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
java    <span class="m">1726</span> cloudera-scm  285u  IPv4  <span class="m">50625</span>      0t0  TCP localhost:58292-&gt;localhost:mysql <span class="o">(</span>ESTABLISHED<span class="o">)</span>
mysqld  <span class="m">2745</span>        mysql   27u  IPv6  <span class="m">47164</span>      0t0  TCP *:mysql <span class="o">(</span>LISTEN<span class="o">)</span>
mysqld  <span class="m">2745</span>        mysql   40u  IPv6  <span class="m">54060</span>      0t0  TCP localhost:mysql-&gt;localhost:58296 <span class="o">(</span>E
</pre></div>
</div>
<p>杀进程使用kill -9命令，比如 kill -9 1726，就是杀Mysql进程</p>
</div>
<div class="section" id="id335">
<h3>3.2 守护进程<a class="headerlink" href="#id335" title="永久链接至标题">¶</a></h3>
<p>守护进程就是通常说的daemon进程，是linux后台执行的一种进程，不会随着终端的关闭而停止运行，开Linux系统的会自动打开。</p>
<p>不挂断地运行命令。no hangup的缩写，意即“不挂断”。和&amp;联用</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># tail -f /var/log/messages</span>
May  <span class="m">1</span> <span class="m">16</span>:01:10 node01 kubelet: I0501 <span class="m">16</span>:01:10.344757   <span class="m">26130</span> server.go:837<span class="o">]</span> Client rotation is on, will bootstrap in background

<span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># ps -ef|grep tail</span>
root      <span class="m">26210</span>  <span class="m">25353</span>  <span class="m">0</span> <span class="m">16</span>:01 pts/1    <span class="m">00</span>:00:00 tail -f /var/log/messages
root      <span class="m">26555</span>  <span class="m">25310</span>  <span class="m">0</span> <span class="m">16</span>:01 pts/0    <span class="m">00</span>:00:00 grep --color<span class="o">=</span>auto tail

关闭上面的tail -f /var/log/messages

<span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># ps -ef|grep tail</span>
<span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># ps -ef|grep tail</span>
root      <span class="m">27353</span>  <span class="m">25310</span>  <span class="m">0</span> <span class="m">16</span>:03 pts/0    <span class="m">00</span>:00:00 grep --color<span class="o">=</span>auto tail
</pre></div>
</div>
<p>nohup和 &amp;连用</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># nohup tail -f /var/log/messages &amp;</span>
<span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="m">27718</span>
nohup: 忽略输入并把输出追加到<span class="s2">&quot;nohup.out&quot;</span>

<span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># ps -ef|grep tail</span>
root      <span class="m">27718</span>  <span class="m">25353</span>  <span class="m">0</span> <span class="m">16</span>:04 pts/1    <span class="m">00</span>:00:00 tail -f /var/log/messages
root      <span class="m">29444</span>  <span class="m">25310</span>  <span class="m">0</span> <span class="m">16</span>:07 pts/0    <span class="m">00</span>:00:00 grep --color<span class="o">=</span>auto tail
关闭上面的nohup tail -f /var/log/messages <span class="p">&amp;</span>

<span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># ps -ef|grep tail</span>
root      <span class="m">27718</span>      <span class="m">1</span>  <span class="m">0</span> <span class="m">16</span>:04 ?        <span class="m">00</span>:00:00 tail -f /var/log/messages
root      <span class="m">29946</span>  <span class="m">25310</span>  <span class="m">0</span> <span class="m">16</span>:08 pts/0    <span class="m">00</span>:00:00 grep --color<span class="o">=</span>auto tail
</pre></div>
</div>
</div>
<div class="section" id="id336">
<h3>3.3 查看进程<a class="headerlink" href="#id336" title="永久链接至标题">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">-</span> <span class="pre">**ps**。</span></code></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root ~<span class="o">]</span><span class="c1"># ps -ef</span>
UID        PID  PPID  C STIME TTY          TIME CMD
root         <span class="m">1</span>     <span class="m">0</span>  <span class="m">0</span> Jun23 ?        <span class="m">00</span>:00:05 /usr/lib/systemd/systemd --switched-root --system --deserialize <span class="m">21</span>
root         <span class="m">2</span>     <span class="m">0</span>  <span class="m">0</span> Jun23 ?        <span class="m">00</span>:00:00 <span class="o">[</span>kthreadd<span class="o">]</span>
...
<span class="o">[</span>root ~<span class="o">]</span><span class="c1"># ps -ef | grep mysqld</span>
root      <span class="m">4943</span>  <span class="m">4581</span>  <span class="m">0</span> <span class="m">22</span>:45 pts/0    <span class="m">00</span>:00:00 grep --color<span class="o">=</span>auto mysqld
mysql    <span class="m">25257</span>     <span class="m">1</span>  <span class="m">0</span> Jun25 ?        <span class="m">00</span>:00:39 /usr/sbin/mysqld --daemonize --pid-file<span class="o">=</span>/var/run/mysqld/mysqld.pid
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="linuxshell">
<h1>55、Linux磁盘管理和Shell编程（下篇）<a class="headerlink" href="#linuxshell" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen
&#64;Date：2020/5/27</p>
<div class="section" id="id337">
<h2>磁盘管理<a class="headerlink" href="#id337" title="永久链接至标题">¶</a></h2>
<p>Linux磁盘管理常用三个命令为df、du和fdisk。</p>
<div class="section" id="id338">
<h3>列出文件系统的磁盘使用状况<a class="headerlink" href="#id338" title="永久链接至标题">¶</a></h3>
<p>列出文件系统的磁盘使用状况 - <strong>df</strong>。</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>文件系统        容量  已用  可用 已用% 挂载点
udev            <span class="m">1</span>.9G     <span class="m">0</span>  <span class="m">1</span>.9G    <span class="m">0</span>% /dev
tmpfs           393M  <span class="m">6</span>.3M  386M    <span class="m">2</span>% /run
/dev/sda1        19G   13G  <span class="m">5</span>.5G   <span class="m">69</span>% /
tmpfs           <span class="m">2</span>.0G  300K  <span class="m">2</span>.0G    <span class="m">1</span>% /dev/shm
tmpfs           <span class="m">5</span>.0M  <span class="m">4</span>.0K  <span class="m">5</span>.0M    <span class="m">1</span>% /run/lock
tmpfs           <span class="m">2</span>.0G     <span class="m">0</span>  <span class="m">2</span>.0G    <span class="m">0</span>% /sys/fs/cgroup
tmpfs           393M  <span class="m">4</span>.0K  393M    <span class="m">1</span>% /run/user/108
tmpfs           393M   60K  393M    <span class="m">1</span>% /run/user/1000
/dev/sr0        <span class="m">1</span>.6G  <span class="m">1</span>.6G     <span class="m">0</span>  <span class="m">100</span>% /media/maoli/Ubuntu <span class="m">16</span>.04.6 LTS amd64
</pre></div>
</div>
</div>
<div class="section" id="id339">
<h3>磁盘分区表操作<a class="headerlink" href="#id339" title="永久链接至标题">¶</a></h3>
<p>磁盘分区表操作 - <strong>fdisk</strong>。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ sudo fdisk -l
<span class="o">[</span>sudo<span class="o">]</span> maoli 的密码： 

Disk /dev/sda: <span class="m">20</span> GiB, <span class="m">21474836480</span> bytes, <span class="m">41943040</span> sectors
Units: sectors of <span class="m">1</span> * <span class="nv">512</span> <span class="o">=</span> <span class="m">512</span> bytes
Sector size <span class="o">(</span>logical/physical<span class="o">)</span>: <span class="m">512</span> bytes / <span class="m">512</span> bytes
I/O size <span class="o">(</span>minimum/optimal<span class="o">)</span>: <span class="m">512</span> bytes / <span class="m">512</span> bytes
Disklabel type: dos
Disk identifier: 0xdc219461

设备       启动    Start   末尾   扇区  Size Id 类型
/dev/sda1  *        <span class="m">2048</span> <span class="m">39942143</span> <span class="m">39940096</span>   19G <span class="m">83</span> Linux
/dev/sda2       <span class="m">39944190</span> <span class="m">41940991</span>  <span class="m">1996802</span>  975M  <span class="m">5</span> 扩展
/dev/sda5       <span class="m">39944192</span> <span class="m">41940991</span>  <span class="m">1996800</span>  975M <span class="m">82</span> Linux 交换 / Solaris
</pre></div>
</div>
</div>
<div class="section" id="id340">
<h3>磁盘分区工具<a class="headerlink" href="#id340" title="永久链接至标题">¶</a></h3>
<p>. 磁盘分区工具 - <strong>parted</strong>。</p>
</div>
<div class="section" id="id341">
<h3>格式化文件系统<a class="headerlink" href="#id341" title="永久链接至标题">¶</a></h3>
<p>格式化文件系统 - <strong>mkfs</strong>。</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ mkfs -t ext4 -v /dev/sdb
</pre></div>
</div>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">-t</span></code> - 指定文件系统的类型。</li>
<li><code class="docutils literal notranslate"><span class="pre">-c</span></code> - 创建文件系统时检查磁盘损坏情况。</li>
<li><code class="docutils literal notranslate"><span class="pre">-v</span></code> - 显示详细信息。</li>
</ul>
</div>
<div class="section" id="id342">
<h3>文件系统检查<a class="headerlink" href="#id342" title="永久链接至标题">¶</a></h3>
<p>文件系统检查 - <strong>fsck</strong>。</p>
</div>
<div class="section" id="id343">
<h3>转换或拷贝文件<a class="headerlink" href="#id343" title="永久链接至标题">¶</a></h3>
<p>转换或拷贝文件 - <strong>dd</strong>。</p>
</div>
<div class="section" id="id344">
<h3>挂载/卸载<a class="headerlink" href="#id344" title="永久链接至标题">¶</a></h3>
<p>挂载/卸载 - <strong>mount</strong> / <strong>umount</strong>。</p>
</div>
<div class="section" id="id345">
<h3>创建/激活/关闭交换分区<a class="headerlink" href="#id345" title="永久链接至标题">¶</a></h3>
<p>创建/激活/关闭交换分区 - <strong>mkswap</strong> / <strong>swapon</strong> / <strong>swapoff</strong>。</p>
<p>参考<a class="reference external" href="https://www.runoob.com/linux/linux-filesystem.html">菜鸟教程</a></p>
</div>
</div>
<div class="section" id="id346">
<h2>Shell<a class="headerlink" href="#id346" title="永久链接至标题">¶</a></h2>
<p>Shell是一个连接用户和操作系统的应用程序，它提供了人机交互的界面（接口），用户通过这个界面访问操作系统内核的服务。Shell脚本是一种为Shell编写的脚本程序，我们可以通过Shell脚本来进行系统管理，同时也可以通过它进行文件操作。</p>
<p>互联网上有大量关于Shell脚本的相关知识，我不打算再此对Shell脚本做一个全面系统的讲解，我们通过下面的代码来感性的认识下Shell脚本就行了。</p>
<div class="section" id="id347">
<h3>新建Shell脚本<a class="headerlink" href="#id347" title="永久链接至标题">¶</a></h3>
<p>打开文本编辑器(可以使用 vi/vim 命令来创建文件)，新建一个文件 test.sh，扩展名为 sh（sh代表shell）。</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ vim test.sh

<span class="c1">#!/bin/bash</span>
<span class="nb">echo</span> <span class="s2">&quot;Hello World !&quot;</span>
</pre></div>
</div>
<p>输入一个<code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">&quot;Hello</span> <span class="pre">World</span> <span class="pre">!&quot;</span></code>，这个语法和php很相似。运行一个sh需用 <code class="docutils literal notranslate"><span class="pre">chmod</span> <span class="pre">+x</span> </code>脚本具有执行权限</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ chmod +x ./test.sh
maoli@ubuntu:~$ ./test.sh 
Hello World !
</pre></div>
</div>
</div>
<div class="section" id="id348">
<h3>变量<a class="headerlink" href="#id348" title="永久链接至标题">¶</a></h3>
<p>变量名不加美元符号（$，PHP语言中变量需要）。比如在shell中 定义变量<code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">=</span> <span class="pre">Runsen</span></code>，而在php就是<code class="docutils literal notranslate"><span class="pre">$name</span> <span class="pre">=</span> <span class="pre">Runsen</span></code></p>
<p>使用一个定义过的变量，只要在变量名前面加美元符号即可，如：<code class="docutils literal notranslate"><span class="pre">$name</span></code>或者<code class="docutils literal notranslate"><span class="pre">${name}</span></code>。变量名外面的花括号是可选的，加不加都行。</p>
<p>变量支持字符串类型，浮点等类型，常见有这 3 个前缀：</p>
<ul class="simple">
<li>unset：删除变量</li>
<li>readonly：标记只读变量</li>
<li>export：指定全局变量</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash </span>

<span class="c1"># 定义普通变量，没有特殊字符或者空格，可以不用引号</span>
<span class="nv">CITY</span><span class="o">=</span>Dongguan

<span class="c1"># 定义全局变量</span>
<span class="nb">export</span> <span class="nv">NAME</span><span class="o">=</span>Runsen

<span class="c1"># 定义只读变量</span>
<span class="nb">readonly</span> <span class="nv">AGE</span><span class="o">=</span><span class="m">20</span>

<span class="c1"># 打印变量的值</span>
<span class="nb">echo</span> <span class="nv">$CITY</span>
<span class="nb">echo</span> <span class="nv">$NAME</span>
<span class="nb">echo</span> <span class="nv">$AGE</span>

<span class="c1"># 删除 CITY 变量</span>
<span class="nb">unset</span> CITY
<span class="c1"># 不会输出 Dongguan</span>
<span class="nb">echo</span> <span class="nv">$CITY</span>
</pre></div>
</div>
</div>
<div class="section" id="id349">
<h3>预定义变量<a class="headerlink" href="#id349" title="永久链接至标题">¶</a></h3>
<p>预定义变量常用来获取命令行的输入，有下面这些：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nv">$0</span> ：脚本文件名
<span class="nv">$1</span>-9 ：第 <span class="m">1</span>-9 个命令行参数名
<span class="nv">$#</span> ：命令行参数个数
<span class="nv">$@</span> ：所有命令行参数
<span class="nv">$*</span> ：所有命令行参数
<span class="nv">$?</span> ：前一个命令的退出状态，可用于获取函数返回值
<span class="nv">$$</span> ：执行的进程 ID
</pre></div>
</div>
<p>一个例子：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash </span>
<span class="nb">echo</span> <span class="s2">&quot;\$0 = </span><span class="nv">$0</span><span class="s2">&quot;</span>
<span class="nb">echo</span> <span class="s2">&quot;\$1 = </span><span class="nv">$1</span><span class="s2">&quot;</span>
<span class="nb">echo</span> <span class="s2">&quot;\$2 = </span><span class="nv">$2</span><span class="s2">&quot;</span>
<span class="nb">echo</span> <span class="s2">&quot;\$# = </span><span class="nv">$#</span><span class="s2">&quot;</span>
<span class="nb">echo</span> <span class="s2">&quot;\$@ = </span><span class="nv">$@</span><span class="s2">&quot;</span>
<span class="nb">echo</span> <span class="s2">&quot;\$* = </span><span class="nv">$*</span><span class="s2">&quot;</span>
<span class="nb">echo</span> <span class="s2">&quot;\$</span>$<span class="s2"> = </span><span class="nv">$$</span><span class="s2">&quot;</span>
<span class="nb">echo</span> <span class="s2">&quot;\$? = </span><span class="nv">$?</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>执行./hello.sh 1 2 3 4 5 的结果：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># 程序名</span>
<span class="nv">$0</span> <span class="o">=</span> ./hello.sh
<span class="c1"># 第一个参数</span>
<span class="nv">$1</span> <span class="o">=</span> <span class="m">1</span>
<span class="c1"># 第二个参数</span>
<span class="nv">$2</span> <span class="o">=</span> <span class="m">2</span>
<span class="c1"># 一共有 5 个参数</span>
<span class="nv">$#</span> <span class="o">=</span> <span class="m">5</span>
<span class="c1"># 打印出所有参数</span>
<span class="nv">$@</span> <span class="o">=</span> <span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span> <span class="m">5</span>
<span class="c1"># 打印出所有参数</span>
<span class="nv">$*</span> <span class="o">=</span> <span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span> <span class="m">5</span>
<span class="c1"># 进程 ID</span>
<span class="nv">$$</span> <span class="o">=</span> <span class="m">9450</span>
<span class="c1"># 之前没有执行其他命令或者函数</span>
<span class="nv">$?</span> <span class="o">=</span> <span class="m">0</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id350">
<h2>语句<a class="headerlink" href="#id350" title="永久链接至标题">¶</a></h2>
<div class="section" id="id351">
<h3>if<a class="headerlink" href="#id351" title="永久链接至标题">¶</a></h3>
<p><strong>sh的流程控制不可为空</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash </span>
<span class="nb">read</span> VAR
<span class="c1"># 下面这两种判断方法都可以，使用 [] 注意左右加空格</span>
<span class="c1">#if test $VAR -eq 10</span>
<span class="k">if</span> <span class="o">[</span> <span class="nv">$VART</span> -eq <span class="m">10</span> <span class="o">]</span>
<span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;true&quot;</span>
<span class="k">else</span>
    <span class="nb">echo</span> <span class="s2">&quot;false&quot;</span>
<span class="k">fi</span>
</pre></div>
</div>
<p>read 的方法就python中的input，写成一行（适用于终端命令提示符）：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="o">[</span> <span class="nv">$VART</span> -eq <span class="m">10</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;true&quot;</span><span class="p">;</span> <span class="k">else</span> <span class="nb">echo</span> <span class="s2">&quot;false&quot;</span><span class="p">;</span><span class="k">fi</span>
</pre></div>
</div>
</div>
<div class="section" id="for">
<h3>for 循环<a class="headerlink" href="#for" title="永久链接至标题">¶</a></h3>
<p>for 循环和Python没有什么区别，挺简单的</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># 普通 for 循环</span>
<span class="k">for</span> <span class="o">((</span><span class="nv">i</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span> i &lt;<span class="o">=</span> <span class="m">3</span><span class="p">;</span> i++<span class="o">))</span>
<span class="k">do</span>
    <span class="nb">echo</span> <span class="nv">$i</span>
<span class="k">done</span>

<span class="c1"># loop 依次代表每个元素 </span>
<span class="k">for</span> loop in <span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span> <span class="m">5</span>
<span class="k">do</span>
    <span class="nb">echo</span> <span class="s2">&quot;The value is: </span><span class="nv">$loop</span><span class="s2">&quot;</span>
<span class="k">done</span>

<span class="c1"># VAR 依次代表每个元素 ，{}产生连续数字</span>
<span class="k">for</span> VAR in <span class="o">{</span><span class="m">1</span>..3<span class="o">}</span>
<span class="k">do</span>
    <span class="nb">echo</span> <span class="nv">$VAR</span>
<span class="k">done</span>

<span class="c1">#也可以写成一行，方便在命令行直接运行，注意空格和;号：</span>
maoli@ubuntu:~$ <span class="k">for</span> VAR in <span class="o">{</span><span class="m">1</span>..3<span class="o">}</span><span class="p">;</span> <span class="k">do</span>  <span class="nb">echo</span> <span class="nv">$VAR</span><span class="p">;</span> <span class="k">done</span>
<span class="m">1</span>
<span class="m">2</span>
<span class="m">3</span>
</pre></div>
</div>
</div>
<div class="section" id="id352">
<h3>打印<a class="headerlink" href="#id352" title="永久链接至标题">¶</a></h3>
<p>printf 命令模仿 C 程序库（library）里的 printf() 程序， 这里补充<code class="docutils literal notranslate"><span class="pre">-e</span> </code>开启转义<code class="docutils literal notranslate"><span class="pre">\c</span></code>不换行，其他和Python一样。</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>maoli@ubuntu:~$ <span class="nb">echo</span> <span class="s2">&quot;It is a test&quot;</span>
It is a <span class="nb">test</span>
maoli@ubuntu:~$ <span class="nb">echo</span> -e <span class="s2">&quot;OK! \n&quot;</span>
OK! 

maoli@ubuntu:~$ <span class="nb">printf</span> <span class="s2">&quot;%-10s %-8s %-4s\n&quot;</span> 姓名 性别 体重kg  
姓名     性别   体重kg
maoli@ubuntu:~$ <span class="nb">printf</span> <span class="s2">&quot;%-10s %-8s %-4.2f\n&quot;</span> Runsen 男 <span class="m">65</span>
Runsen     男      <span class="m">65</span>.00
</pre></div>
</div>
</div>
<div class="section" id="test">
<h3>test<a class="headerlink" href="#test" title="永久链接至标题">¶</a></h3>
<p>Shell中的 test 命令用于检查某个条件是否成立，它可以进行数值、字符和文件三个方面的测试。</p>
<p>| 参数 | 说明           |
| —- | ————– |
| -eq  | 等于则为真     |
| -ne  | 不等于则为真   |
| -gt  | 大于则为真     |
| -ge  | 大于等于则为真 |
| -lt  | 小于则为真     |
| -le  | 小于等于则为真 |</p>
<p>比如下判断两个字符串是否相同t</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nv">num1</span><span class="o">=</span><span class="s2">&quot;Runsen&quot;</span>
<span class="nv">num2</span><span class="o">=</span><span class="s2">&quot;Runsen&quot;</span>
<span class="k">if</span> <span class="nb">test</span> <span class="nv">$num1</span> <span class="o">=</span> <span class="nv">$num2</span>
<span class="k">then</span>
    <span class="nb">echo</span> <span class="s1">&#39;两个字符串相等!&#39;</span>
<span class="k">else</span>
    <span class="nb">echo</span> <span class="s1">&#39;两个字符串不相等!&#39;</span>
<span class="k">fi</span>
两个字符串相等!
</pre></div>
</div>
</div>
</div>
<div class="section" id="id353">
<h2>Shell 函数<a class="headerlink" href="#id353" title="永久链接至标题">¶</a></h2>
<p>shell中函数的定义格式如下：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>


demoFun<span class="o">(){</span>
    <span class="nb">echo</span> <span class="s2">&quot;这是我的第一个 shell 函数!&quot;</span>
<span class="o">}</span>
<span class="nb">echo</span> <span class="s2">&quot;-----函数开始执行-----&quot;</span>
demoFun
<span class="nb">echo</span> <span class="s2">&quot;-----函数执行完毕-----&quot;</span>

-----函数开始执行-----
这是我的第一个 shell 函数!
-----函数执行完毕-----
</pre></div>
</div>
</div>
<div class="section" id="id354">
<h2>shell实例<a class="headerlink" href="#id354" title="永久链接至标题">¶</a></h2>
<div class="section" id="id355">
<h3>求和<a class="headerlink" href="#id355" title="永久链接至标题">¶</a></h3>
<p>例子1：输入两个整数m和n，计算从m到n的整数求和的结果。</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/bash</span>
<span class="nb">printf</span> <span class="s1">&#39;m = &#39;</span>
<span class="nb">read</span> m
<span class="nb">printf</span> <span class="s1">&#39;n = &#39;</span>
<span class="nb">read</span> n
<span class="nv">a</span><span class="o">=</span><span class="nv">$m</span>
<span class="nv">sum</span><span class="o">=</span><span class="m">0</span>
<span class="k">while</span> <span class="o">[</span> <span class="nv">$a</span> -le <span class="nv">$n</span> <span class="o">]</span>
<span class="k">do</span>
    <span class="nv">sum</span><span class="o">=</span>$<span class="o">[</span> sum + a <span class="o">]</span>
    <span class="nv">a</span><span class="o">=</span>$<span class="o">[</span> a + <span class="m">1</span> <span class="o">]</span>
<span class="k">done</span>
<span class="nb">echo</span> <span class="s1">&#39;结果: &#39;</span><span class="nv">$sum</span>
</pre></div>
</div>
</div>
<div class="section" id="id356">
<h3>创建文件夹和文件<a class="headerlink" href="#id356" title="永久链接至标题">¶</a></h3>
<p>例子2：自动创建文件夹和指定数量的文件。</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/bash</span>
<span class="nb">printf</span> <span class="s1">&#39;输入文件名: &#39;</span>
<span class="nb">read</span> file
<span class="nb">printf</span> <span class="s1">&#39;输入文件数量(&lt;1000): &#39;</span>
<span class="nb">read</span> num
<span class="k">if</span> <span class="o">[</span> <span class="nv">$num</span> -ge <span class="m">1000</span> <span class="o">]</span>
<span class="k">then</span>
    <span class="nb">echo</span> <span class="s1">&#39;文件数量不能超过1000&#39;</span>
<span class="k">else</span>
    <span class="k">if</span> <span class="o">[</span> -e <span class="nv">$dir</span> -a -d <span class="nv">$dir</span> <span class="o">]</span>
    <span class="k">then</span>
        rm -rf <span class="nv">$dir</span>
    <span class="k">else</span>
        <span class="k">if</span> <span class="o">[</span> -e <span class="nv">$dir</span> -a -f <span class="nv">$dir</span> <span class="o">]</span>
        <span class="k">then</span>
            rm -f <span class="nv">$dir</span>
        <span class="k">fi</span>
    <span class="k">fi</span>
    mkdir -p <span class="nv">$dir</span>
    <span class="nv">index</span><span class="o">=</span><span class="m">1</span>
    <span class="k">while</span> <span class="o">[</span> <span class="nv">$index</span> -le <span class="nv">$num</span> <span class="o">]</span>
    <span class="k">do</span>
        <span class="k">if</span> <span class="o">[</span> <span class="nv">$index</span> -lt <span class="m">10</span> <span class="o">]</span>
        <span class="k">then</span>
            <span class="nv">pre</span><span class="o">=</span><span class="s1">&#39;00&#39;</span>
        <span class="k">elif</span> <span class="o">[</span> <span class="nv">$index</span> -lt <span class="m">100</span> <span class="o">]</span>
        <span class="k">then</span>
            <span class="nv">pre</span><span class="o">=</span><span class="s1">&#39;0&#39;</span>
        <span class="k">else</span>
            <span class="nv">pre</span><span class="o">=</span><span class="s1">&#39;&#39;</span>
        <span class="k">fi</span>
        touch <span class="nv">$dir</span><span class="s1">&#39;/&#39;</span><span class="nv">$file</span><span class="s1">&#39;_&#39;</span><span class="nv">$pre$index</span>
        <span class="nv">index</span><span class="o">=</span>$<span class="o">[</span> index + <span class="m">1</span> <span class="o">]</span>
    <span class="k">done</span>
<span class="k">fi</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="pythonturtle">
<h1>56、教用Python中的turtle海龟画图（上篇）<a class="headerlink" href="#pythonturtle" title="永久链接至标题">¶</a></h1>
<p>&#64;Author：Runsen</p>
<p>在Python中的turtle海龟画图，我相信大家都有了解，我在之前也写过这类的博文，但是我发现真的不行，今天就重写，保留好的地方，添加更多的要点</p>
<p>我觉得没有什么东西可以写，就是需要不断地实践。</p>
<div class="section" id="id357">
<h2>画一条线<a class="headerlink" href="#id357" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">turtle</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">turtle</span><span class="o">.</span><span class="n">Pen</span><span class="p">()</span>
<span class="n">t</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
<p>t = turtle.Pen()告诉计算机我们使用t表示海龟的钢笔，
forward(distance) ：别名  turtle.fd( distance ) 沿着当前方向前进指定距离，这里的距离的单位是像素。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200529111800162.png" src="https://img-blog.csdnimg.cn/20200529111800162.png" />
黑色的小三角就是我们的小海龟。三角后面的直线，就是小海龟“前进100步”所留下的痕迹</p>
</div>
<div class="section" id="id358">
<h2>画一个正方形<a class="headerlink" href="#id358" title="永久链接至标题">¶</a></h2>
<p>如果一直前进而不转弯，画出的图也会相当单调。这不是我们所希望的，我们需要“转弯语句”。我们可以“向右转90度”，使用“t.right(90)”，或“向左转90度”，使用“t.left(90)”。这里我们选向右转吧。将“t.right(90)”加入代码，运行：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">turtle</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">turtle</span><span class="o">.</span><span class="n">Pen</span><span class="p">()</span>
<span class="n">t</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200529112333480.png" src="https://img-blog.csdnimg.cn/20200529112333480.png" /></p>
</div>
<div class="section" id="id359">
<h2>画一个三角形<a class="headerlink" href="#id359" title="永久链接至标题">¶</a></h2>
<p>我们使用turtle.setup(400,400)来设置画布的大小，设置一个400 * 400的窗口大小。
t.left(120)以箭头的方向向左旋转120角度。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">turtle</span>
<span class="n">turtle</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span><span class="mi">400</span><span class="p">)</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">turtle</span><span class="o">.</span><span class="n">Pen</span><span class="p">()</span>
<span class="n">t</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">left</span><span class="p">(</span><span class="mi">120</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">left</span><span class="p">(</span><span class="mi">120</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">left</span><span class="p">(</span><span class="mi">120</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200529112754795.png" src="https://img-blog.csdnimg.cn/20200529112754795.png" /></p>
</div>
<div class="section" id="id360">
<h2>画一个圆<a class="headerlink" href="#id360" title="永久链接至标题">¶</a></h2>
<p>t.circle(50)，就是画一个半径为50的圆。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">turtle</span>
<span class="n">turtle</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span><span class="mi">400</span><span class="p">)</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">turtle</span><span class="o">.</span><span class="n">Pen</span><span class="p">()</span>
<span class="n">t</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
<span class="n">turtle</span><span class="o">.</span><span class="n">done</span><span class="p">()</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200529113224314.png" src="https://img-blog.csdnimg.cn/20200529113224314.png" /></p>
<p>turtle.done()就是画完的时候停下来，不要马上关闭。</p>
</div>
<div class="section" id="id361">
<h2>绘制梯形<a class="headerlink" href="#id361" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">turtle</span>
<span class="n">turtle</span><span class="o">.</span><span class="n">up</span><span class="p">()</span>
<span class="n">turtle</span><span class="o">.</span><span class="n">fillcolor</span><span class="p">(</span><span class="s1">&#39;yellow&#39;</span><span class="p">)</span>
<span class="n">turtle</span><span class="o">.</span><span class="n">begin_fill</span><span class="p">()</span>
<span class="n">turtle</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="o">-</span><span class="mi">100</span><span class="p">)</span>
<span class="n">turtle</span><span class="o">.</span><span class="n">down</span><span class="p">()</span>
<span class="n">turtle</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="o">-</span><span class="mi">100</span><span class="p">)</span>
<span class="n">turtle</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span><span class="o">-</span><span class="mi">200</span><span class="p">)</span>
<span class="n">turtle</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="o">-</span><span class="mi">200</span><span class="p">)</span>
<span class="n">turtle</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="o">-</span><span class="mi">100</span><span class="p">)</span>
<span class="n">turtle</span><span class="o">.</span><span class="n">end_fill</span><span class="p">()</span>
<span class="n">turtle</span><span class="o">.</span><span class="n">done</span><span class="p">()</span>

</pre></div>
</div>
<p>此梯形绘制在第四象限，所以梯形形每个顶点的坐标中，x坐标为正,y坐标为负。四个点的坐标分别选择为(100,-100)、(200,-100)、(250,-200)、(50,-200)。goto也是画的意思，goto（x，y）就是以x和y坐标定位画线。down就是停下来。end_fill就是给封闭图形添加颜色。
<img alt="https://img-blog.csdnimg.cn/20200529113621144.png" src="https://img-blog.csdnimg.cn/20200529113621144.png" /></p>
</div>
<div class="section" id="id362">
<h2>画一个星星<a class="headerlink" href="#id362" title="永久链接至标题">¶</a></h2>
<p>星星就是四个圆弧组成，转弯是180度</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">turtle</span>
<span class="n">turtle</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">600</span><span class="p">)</span>  <span class="c1"># 创建绘图窗口</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>   <span class="c1"># 循环四次</span>
    <span class="n">turtle</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span><span class="mi">90</span><span class="p">)</span>   <span class="c1"># 顺时针画一个半径90，90度对应的圆弧 顺时针是正</span>
    <span class="n">turtle</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="mi">180</span><span class="p">)</span>       <span class="c1"># 右转180度</span>

<span class="n">turtle</span><span class="o">.</span><span class="n">done</span><span class="p">()</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200529114831673.gif" src="https://img-blog.csdnimg.cn/20200529114831673.gif" /></p>
</div>
<div class="section" id="id363">
<h2>画一个五角星<a class="headerlink" href="#id363" title="永久链接至标题">¶</a></h2>
<p>五角星是边数最少多角形。最简单的画法是先画一个正五边形，把各角用直线相连并擦去原来的五边形或者延长原五边形的各边直到它们相交，从而得到一个大的五角星。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">turtle</span>
 <span class="n">turtle</span><span class="o">.</span><span class="n">color</span><span class="p">(</span><span class="s1">&#39;black&#39;</span><span class="p">,</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
 <span class="n">turtle</span><span class="o">.</span><span class="n">begin_fill</span><span class="p">()</span>
 <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
     <span class="n">turtle</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
     <span class="n">turtle</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="mi">144</span><span class="p">)</span>
 <span class="n">turtle</span><span class="o">.</span><span class="n">end_fill</span><span class="p">()</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200529115402257.png" src="https://img-blog.csdnimg.cn/20200529115402257.png" /></p>
</div>
<div class="section" id="id364">
<h2>画一个图案<a class="headerlink" href="#id364" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">turtle</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">turtle</span><span class="o">.</span><span class="n">Pen</span><span class="p">()</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
    <span class="n">t</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">t</span><span class="o">.</span><span class="n">left</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
<span class="n">turtle</span><span class="o">.</span><span class="n">done</span><span class="p">()</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200529115602232.gif" src="https://img-blog.csdnimg.cn/20200529115602232.gif" /></p>
</div>
<div class="section" id="id365">
<h2>方法总结<a class="headerlink" href="#id365" title="永久链接至标题">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>turtle.fd(d)、
turtle.forward(d)：以当前方向，往前行进d像素。
turtle.bk(d)、
turtle.backword(d)：保持当前方向不变，往后退行d像素。
turtle.circle(r,angle,steps=)：从当前位置以r为半径圆的angle角度旋转。
turtle.seth(angle)：以x轴方向为起点将方向偏转为angle度，逆时针为正。只改变行进方向但不行进。
turtle.left(angle)：在当前行进方向的基础上，向左旋转angle度。
turtle.right(angle)：在当前行进方向的基础上，向右旋转angle度。
</pre></div>
</div>
</div>
</div>
<div class="section" id="id366">
<h1>57、教用Python中的turtle海龟画图（下篇）<a class="headerlink" href="#id366" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen</p>
<p>在Python中的turtle海龟画图，我相信大家都有了解，我在之前也写过这类的博文，但是我发现真的不行，今天就重写，保留好的地方，添加更多的要点</p>
<p>我觉得没有什么东西可以写，就是需要不断地实践。</p>
<div class="section" id="id367">
<h2>画一个朵花<a class="headerlink" href="#id367" title="永久链接至标题">¶</a></h2>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">import</span> <span class="n">turtle</span>
<span class="n">t</span> <span class="p">=</span> <span class="n">turtle</span><span class="p">.</span><span class="n">Pen</span><span class="p">()</span>
<span class="n">def</span> <span class="nf">draw_leaf</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="nf">range</span><span class="p">(</span><span class="m">2</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="k">in</span> <span class="nf">range</span><span class="p">(</span><span class="m">15</span><span class="p">):</span>
            <span class="n">t</span><span class="p">.</span><span class="n">forward</span><span class="p">(</span><span class="m">5</span><span class="p">)</span>
            <span class="n">t</span><span class="p">.</span><span class="n">right</span><span class="p">(</span><span class="m">6</span><span class="p">)</span>
        <span class="n">t</span><span class="p">.</span><span class="n">right</span><span class="p">(</span><span class="m">90</span><span class="p">)</span>
<span class="n">t</span><span class="p">.</span><span class="k">goto</span><span class="p">(</span><span class="m">0</span><span class="p">,-</span><span class="m">150</span><span class="p">)</span>
<span class="n">t</span><span class="p">.</span><span class="n">left</span><span class="p">(</span><span class="m">90</span><span class="p">)</span>
<span class="n">t</span><span class="p">.</span><span class="n">forward</span><span class="p">(</span><span class="m">50</span><span class="p">)</span>
<span class="n">draw_leaf</span><span class="p">()</span>
<span class="n">t</span><span class="p">.</span><span class="n">forward</span><span class="p">(</span><span class="m">150</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="nf">range</span><span class="p">(</span><span class="m">6</span><span class="p">):</span>
    <span class="n">draw_leaf</span><span class="p">()</span>
    <span class="n">t</span><span class="p">.</span><span class="n">right</span><span class="p">(</span><span class="m">60</span><span class="p">)</span>
<span class="n">t</span><span class="p">.</span><span class="n">down</span><span class="p">()</span>
</pre></div>
</div>
<p>上图是画一朵花的程序，使用了函数来定义drawleaf，每一掰叶子由两条弧线组成，每一条弧线重复画15次，每次前进5步，右转6度。</p>
<p>看不懂看下步骤</p>
<p><img alt="https://img-blog.csdnimg.cn/20200529120443382.png" src="https://img-blog.csdnimg.cn/20200529120443382.png" /></p>
<p>这朵花由4部分组成，一个向上长50步的直线，一片叶子，长150步的直线和6片叶子组成的花。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200529120855841.gif" src="https://img-blog.csdnimg.cn/20200529120855841.gif" /></p>
<p>最后给叶子填充颜色，给花朵填充颜色。</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">import</span> <span class="n">turtle</span>
<span class="n">t</span> <span class="p">=</span> <span class="n">turtle</span><span class="p">.</span><span class="n">Pen</span><span class="p">()</span>
<span class="n">def</span> <span class="nf">draw_leaf</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="nf">range</span><span class="p">(</span><span class="m">2</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="k">in</span> <span class="nf">range</span><span class="p">(</span><span class="m">15</span><span class="p">):</span>
            <span class="n">t</span><span class="p">.</span><span class="n">forward</span><span class="p">(</span><span class="m">5</span><span class="p">)</span>
            <span class="n">t</span><span class="p">.</span><span class="n">right</span><span class="p">(</span><span class="m">6</span><span class="p">)</span>
        <span class="n">t</span><span class="p">.</span><span class="n">right</span><span class="p">(</span><span class="m">90</span><span class="p">)</span>
<span class="n">t</span><span class="p">.</span><span class="k">goto</span><span class="p">(</span><span class="m">0</span><span class="p">,-</span><span class="m">150</span><span class="p">)</span>
<span class="n">t</span><span class="p">.</span><span class="n">left</span><span class="p">(</span><span class="m">90</span><span class="p">)</span>
<span class="n">t</span><span class="p">.</span><span class="n">forward</span><span class="p">(</span><span class="m">50</span><span class="p">)</span>
<span class="n">t</span><span class="p">.</span><span class="n">fillcolor</span><span class="p">(</span><span class="s">&quot;green&quot;</span><span class="p">)</span>
<span class="n">t</span><span class="p">.</span><span class="n">begin_fill</span><span class="p">()</span>
<span class="n">draw_leaf</span><span class="p">()</span>
<span class="n">t</span><span class="p">.</span><span class="n">end_fill</span><span class="p">()</span>
<span class="n">t</span><span class="p">.</span><span class="n">forward</span><span class="p">(</span><span class="m">50</span><span class="p">)</span>
<span class="n">t</span><span class="p">.</span><span class="n">right</span><span class="p">(</span><span class="m">270</span><span class="p">)</span>
<span class="n">t</span><span class="p">.</span><span class="n">fillcolor</span><span class="p">(</span><span class="s">&quot;green&quot;</span><span class="p">)</span>
<span class="n">t</span><span class="p">.</span><span class="n">begin_fill</span><span class="p">()</span>
<span class="n">draw_leaf</span><span class="p">()</span>
<span class="n">t</span><span class="p">.</span><span class="n">end_fill</span><span class="p">()</span>
<span class="n">t</span><span class="p">.</span><span class="n">right</span><span class="p">(</span><span class="m">90</span><span class="p">)</span>
<span class="n">t</span><span class="p">.</span><span class="n">forward</span><span class="p">(</span><span class="m">130</span><span class="p">)</span>
<span class="n">t</span><span class="p">.</span><span class="n">fillcolor</span><span class="p">(</span><span class="s">&quot;red&quot;</span><span class="p">)</span>
<span class="n">t</span><span class="p">.</span><span class="n">begin_fill</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="nf">range</span><span class="p">(</span><span class="m">6</span><span class="p">):</span>
    <span class="n">draw_leaf</span><span class="p">()</span>
    <span class="n">t</span><span class="p">.</span><span class="n">right</span><span class="p">(</span><span class="m">60</span><span class="p">)</span>
<span class="n">t</span><span class="p">.</span><span class="n">end_fill</span><span class="p">()</span>
<span class="n">t</span><span class="p">.</span><span class="n">down</span><span class="p">()</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200529121458717.gif" src="https://img-blog.csdnimg.cn/20200529121458717.gif" /></p>
</div>
<div class="section" id="id368">
<h2>酷炫的图形<a class="headerlink" href="#id368" title="永久链接至标题">¶</a></h2>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">import</span> <span class="n">turtle</span>

<span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="nf">range</span><span class="p">(</span><span class="m">360</span><span class="p">):</span>
   <span class="n">turtle</span><span class="p">.</span><span class="n">rt</span><span class="p">(</span><span class="m">1</span><span class="p">)</span>
   <span class="n">turtle</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="m">100</span><span class="p">,</span><span class="n">None</span><span class="p">,</span><span class="m">4</span><span class="p">)</span>
<span class="n">turtle</span><span class="p">.</span><span class="n">exitonclick</span><span class="p">()</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200529122206413.gif" src="https://img-blog.csdnimg.cn/20200529122206413.gif" /></p>
</div>
<div class="section" id="id369">
<h2>画时钟<a class="headerlink" href="#id369" title="永久链接至标题">¶</a></h2>
<p><img alt="https://img-blog.csdnimg.cn/20190419230504599.png" src="https://img-blog.csdnimg.cn/20190419230504599.png" />
<img alt="https://img-blog.csdnimg.cn/20190419230608390.png?0" src="https://img-blog.csdnimg.cn/20190419230608390.png?0" />
<img alt="https://img-blog.csdnimg.cn/20190419230646596.png" src="https://img-blog.csdnimg.cn/20190419230646596.png" /></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># -*- coding：utf-8 -*-</span>
<span class="c1"># time ：2019/4/19 22:53</span>
<span class="c1"># author: 毛利</span>

<span class="kn">import</span> <span class="nn">turtle</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="c1"># 移动一段距离</span>
<span class="k">def</span> <span class="nf">skip</span><span class="p">(</span><span class="n">distance</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    移动乌龟一段距离，不留痕迹</span>
<span class="sd">    :param distance: 像素</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">turtle</span><span class="o">.</span><span class="n">penup</span><span class="p">()</span>
    <span class="n">turtle</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">distance</span><span class="p">)</span>
    <span class="n">turtle</span><span class="o">.</span><span class="n">pendown</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">draw_clock</span><span class="p">():</span>
    <span class="c1"># 先画表盘</span>
    <span class="c1"># 先画点</span>
    <span class="c1"># 移动一段距离，画一个点，然后退回</span>
    <span class="c1"># 转动6°，再移动一段距离，画一个点，然后退回</span>
    <span class="c1"># 循环 60次</span>
    <span class="c1"># 让乌龟的方向默认向上</span>
    <span class="n">turtle</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
    <span class="n">turtle</span><span class="o">.</span><span class="n">hideturtle</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">60</span><span class="p">):</span>

        <span class="n">skip</span><span class="p">(</span><span class="mi">160</span><span class="p">)</span>
        <span class="c1"># 根据 5格一个时钟</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">turtle</span><span class="o">.</span><span class="n">pensize</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
            <span class="c1"># 画时钟</span>
            <span class="n">turtle</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">turtle</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Courier&#39;</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="s1">&#39;bold&#39;</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">25</span> <span class="ow">or</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">30</span> <span class="ow">or</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">35</span><span class="p">:</span>
                <span class="n">skip</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
                <span class="n">turtle</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="o">/</span><span class="mi">5</span><span class="p">),</span> <span class="n">align</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Courier&#39;</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="s1">&#39;bold&#39;</span><span class="p">))</span>
                <span class="n">skip</span><span class="p">(</span><span class="o">-</span><span class="mi">25</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">turtle</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="o">/</span><span class="mi">5</span><span class="p">),</span> <span class="n">align</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Courier&#39;</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="s1">&#39;bold&#39;</span><span class="p">))</span>
            <span class="n">skip</span><span class="p">(</span><span class="o">-</span><span class="mi">20</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">turtle</span><span class="o">.</span><span class="n">pensize</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">turtle</span><span class="o">.</span><span class="n">dot</span><span class="p">()</span>
        <span class="n">skip</span><span class="p">(</span><span class="o">-</span><span class="mi">160</span><span class="p">)</span>
        <span class="n">turtle</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">get_week</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
    <span class="n">week</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;星期一&#39;</span><span class="p">,</span> <span class="s1">&#39;星期二&#39;</span><span class="p">,</span> <span class="s1">&#39;星期三&#39;</span><span class="p">,</span> <span class="s1">&#39;星期四&#39;</span><span class="p">,</span> <span class="s1">&#39;星期五&#39;</span><span class="p">,</span> <span class="s1">&#39;星期六&#39;</span><span class="p">,</span> <span class="s1">&#39;星期日&#39;</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">week</span><span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">weekday</span><span class="p">()]</span>


<span class="k">def</span> <span class="nf">create_hand</span><span class="p">(</span><span class="n">length</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="n">turtle</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
    <span class="n">skip</span><span class="p">(</span><span class="o">-</span><span class="n">length</span> <span class="o">*</span> <span class="mf">0.1</span><span class="p">)</span>
    <span class="n">turtle</span><span class="o">.</span><span class="n">begin_poly</span><span class="p">()</span>
    <span class="n">turtle</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">length</span> <span class="o">*</span> <span class="mf">1.1</span><span class="p">)</span>
    <span class="n">turtle</span><span class="o">.</span><span class="n">end_poly</span><span class="p">()</span>
    <span class="c1"># 注册</span>
    <span class="n">turtle</span><span class="o">.</span><span class="n">register_shape</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">turtle</span><span class="o">.</span><span class="n">get_poly</span><span class="p">())</span>
    <span class="n">hand</span> <span class="o">=</span> <span class="n">turtle</span><span class="o">.</span><span class="n">Turtle</span><span class="p">()</span>
    <span class="n">hand</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="n">hand</span><span class="o">.</span><span class="n">shapesize</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">hand</span>

<span class="k">def</span> <span class="nf">run</span><span class="p">():</span>
    <span class="c1"># 不停的获取时间</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
    <span class="n">bob</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">65</span><span class="p">)</span>
    <span class="n">bob</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">get_week</span><span class="p">(</span><span class="n">t</span><span class="p">),</span> <span class="n">align</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Courier&#39;</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="s1">&#39;bold&#39;</span><span class="p">))</span>
    <span class="n">bob</span><span class="o">.</span><span class="n">back</span><span class="p">(</span><span class="mi">130</span><span class="p">)</span>
    <span class="n">bob</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">),</span> <span class="n">align</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Courier&#39;</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="s1">&#39;bold&#39;</span><span class="p">))</span>
    <span class="n">bob</span><span class="o">.</span><span class="n">home</span><span class="p">()</span>
    <span class="c1"># 指针移动</span>
    <span class="n">second</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">second</span> <span class="o">+</span> <span class="n">t</span><span class="o">.</span><span class="n">microsecond</span> <span class="o">*</span> <span class="mf">0.000001</span>
    <span class="n">minute</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">minute</span> <span class="o">+</span> <span class="n">second</span><span class="o">/</span><span class="mi">60</span>
    <span class="n">hour</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">hour</span> <span class="o">+</span> <span class="n">minute</span><span class="o">/</span><span class="mi">60</span>
    <span class="n">turtle</span><span class="o">.</span><span class="n">tracer</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">second_hand</span><span class="o">.</span><span class="n">setheading</span><span class="p">(</span><span class="mi">6</span><span class="o">*</span><span class="n">second</span><span class="p">)</span>
    <span class="n">minute_hand</span><span class="o">.</span><span class="n">setheading</span><span class="p">(</span><span class="mi">6</span><span class="o">*</span><span class="n">minute</span><span class="p">)</span>
    <span class="n">hour_hand</span><span class="o">.</span><span class="n">setheading</span><span class="p">(</span><span class="mi">30</span><span class="o">*</span><span class="n">hour</span><span class="p">)</span>
    <span class="n">turtle</span><span class="o">.</span><span class="n">ontimer</span><span class="p">(</span><span class="n">run</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="c1"># 画秒针,分针，时针</span>
    <span class="n">turtle</span><span class="o">.</span><span class="n">mode</span><span class="p">(</span><span class="s1">&#39;logo&#39;</span><span class="p">)</span>
    <span class="n">turtle</span><span class="o">.</span><span class="n">hideturtle</span><span class="p">()</span>
    <span class="k">global</span> <span class="n">second_hand</span><span class="p">,</span> <span class="n">minute_hand</span><span class="p">,</span> <span class="n">hour_hand</span><span class="p">,</span> <span class="n">bob</span>

    <span class="n">second_hand</span> <span class="o">=</span> <span class="n">create_hand</span><span class="p">(</span><span class="mi">135</span><span class="p">,</span> <span class="s1">&#39;second_hand&#39;</span><span class="p">)</span>
    <span class="n">minute_hand</span> <span class="o">=</span> <span class="n">create_hand</span><span class="p">(</span><span class="mi">125</span><span class="p">,</span> <span class="s1">&#39;minute_hand&#39;</span><span class="p">)</span>
    <span class="n">hour_hand</span> <span class="o">=</span> <span class="n">create_hand</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="s1">&#39;hour_hand&#39;</span><span class="p">)</span>
    <span class="c1"># 创建一个新的turtle对象，去循环的操作</span>
    <span class="n">bob</span> <span class="o">=</span> <span class="n">turtle</span><span class="o">.</span><span class="n">Turtle</span><span class="p">()</span>
    <span class="n">bob</span><span class="o">.</span><span class="n">hideturtle</span><span class="p">()</span>
    <span class="n">bob</span><span class="o">.</span><span class="n">penup</span><span class="p">()</span>

    <span class="n">turtle</span><span class="o">.</span><span class="n">tracer</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">draw_clock</span><span class="p">()</span>
    <span class="n">run</span><span class="p">()</span>

    <span class="n">turtle</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20190419230020836.gif" src="https://img-blog.csdnimg.cn/20190419230020836.gif" /></p>
<p>对于urtle海龟画图，没必要研究这么深，就是小孩子的玩意，学习下，以后教下儿子就可以了。</p>
</div>
</div>
<div class="section" id="id370">
<h1>58、Python中的正则表达式<a class="headerlink" href="#id370" title="永久链接至标题">¶</a></h1>
<p>&#64;Author：Runsen</p>
<div class="section" id="id371">
<h2>正则表达式<a class="headerlink" href="#id371" title="永久链接至标题">¶</a></h2>
<p>正则表达式是一个特殊的字符序列，由普通字符和元字符组成。元字符能帮助你方便的检查一个字符串是否与某种模式匹配。</p>
<p>正则表达式应用的场景也非常多。常见的比如：搜索引擎的搜索、爬虫结果的匹配、文本数据的提取等等都会用到，所以掌握甚至精通正则表达式是一个硬性技能，非常必要。</p>
<p>Python中则提供了强大的正则表达式处理模块，即 re 模块， 为Python的内置模块。</p>
<p>下面，我带大家来一个入门demo例子，代码如下：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
<span class="n">reg_string</span> <span class="o">=</span> <span class="s2">&quot;hello9527python@wangcai.@!:xiaoqiang&quot;</span>
<span class="n">reg</span> <span class="o">=</span> <span class="s2">&quot;hello&quot;</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">reg</span><span class="p">,</span><span class="n">reg_string</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
<p>这里reg_string就是我们的普通字符，reg就是我们的元字符。</p>
<p>我们使用 re 模块中的findall函数，进行匹配，返回的结果是列表数据类型。
<img alt="https://img-blog.csdnimg.cn/20200529153902631.png" src="https://img-blog.csdnimg.cn/20200529153902631.png" /></p>
<p>我们使用正则表达式，就是为了在很长的字符串中，找到我们需要的字符串片段。</p>
</div>
<div class="section" id="id372">
<h2>元字符<a class="headerlink" href="#id372" title="永久链接至标题">¶</a></h2>
<p>Python中常见元字符及其含义如下：</p>
<p>| 元字符 | 含义                       |
| —— | ————————– |
| .      | 匹配除换行符以外的任意字符 |
| \w     | 匹配数字字母下划线汉字     |
| \s     | 匹配任意空白符             |
| \d     | 匹配所有的数字             |
| \b     | 匹配单词的开始或结束       |
| ^      | 匹配字符串的开始           |
| $      | 匹配字符串的开始结束       |</p>
<p>下面，我们具体使用下Python中的常见的元字符。</p>
<p>我们还是使用上次的例子，这次我们需要在reg_string匹配出我们的数字，只需要将reg换成\d，代码如下图所示。</p>
<p><img alt="https://img-blog.csdnimg.cn/2020052915403186.png" src="https://img-blog.csdnimg.cn/2020052915403186.png" />
比如，我们在之前的reg的hello前面加上一个^，意味着我们 匹配字符串的开始的hello，那么结果就是一个，就是我们开头的hello。</p>
<p>如果，我们把reg换成\w，代码如下图所示。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200529154055218.png" src="https://img-blog.csdnimg.cn/20200529154055218.png" /></p>
<p>这样就是匹配数字字母下划线，包括我们的汉字。</p>
</div>
<div class="section" id="id373">
<h2>反义代码<a class="headerlink" href="#id373" title="永久链接至标题">¶</a></h2>
<p>Python中常见反义代码 及其含义如下：</p>
<p>| 反义代码 | 含义                                 |
| ——– | ———————————— |
| \W       | 匹配任意不是数字字母下划线汉字的字符 |
| \S       | 匹配任意不是空白符的字符             |
| \D       | 匹配非数字                           |
| \B       | 匹配不是单词的开始或结束             |
| [^a]     | 匹配除了a以外的任意字符              |
| [^abcd]  | 匹配除了abcd以外的任意字符           |</p>
<p>其实，记忆很简单，我们是不是知道\d匹配数字，那么\d的大写\D就是匹配非数字，元字符[a]匹配a任意字符，那么[^a]就是匹配除了a以外的任意字符。</p>
<p>下面是具体例子</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">re</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reg_string</span> <span class="o">=</span> <span class="s2">&quot;hello9527python@wangcai.@!:xiaoqiang&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reg</span> <span class="o">=</span> <span class="s2">&quot;\D&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">reg</span><span class="p">,</span><span class="n">reg_string</span><span class="p">)</span>
<span class="go">[&#39;h&#39;, &#39;e&#39;, &#39;l&#39;, &#39;l&#39;, &#39;o&#39;, &#39;p&#39;, &#39;y&#39;, &#39;t&#39;, &#39;h&#39;, &#39;o&#39;, &#39;n&#39;, &#39;@&#39;, &#39;w&#39;, &#39;a&#39;, &#39;n&#39;, &#39;g&#39;, &#39;c&#39;, &#39;a&#39;, &#39;i&#39;, &#39;.&#39;, &#39;@&#39;, &#39;!&#39;, &#39;:&#39;, &#39;x&#39;, &#39;i&#39;, &#39;a&#39;, &#39;o&#39;, &#39;q&#39;, &#39;i&#39;, &#39;a&#39;, &#39;n&#39;, &#39;g&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reg</span> <span class="o">=</span> <span class="s2">&quot;[^a-p]&quot;</span>
<span class="go">[&#39;9&#39;, &#39;5&#39;, &#39;2&#39;, &#39;7&#39;, &#39;y&#39;, &#39;t&#39;, &#39;@&#39;, &#39;w&#39;, &#39;.&#39;, &#39;@&#39;, &#39;!&#39;, &#39;:&#39;, &#39;x&#39;, &#39;q&#39;]</span>
</pre></div>
</div>
</div>
<div class="section" id="id374">
<h2>限定符<a class="headerlink" href="#id374" title="永久链接至标题">¶</a></h2>
<p>什么是限定符？就是限定我们匹配的个数的东西。</p>
<p>Python中常见限定符 及其含义如下：</p>
<p>| 限定符 | 含义                |
| —— | ——————- |
| *      | 重复零次或多次      |
| +      | 重复一次或多次      |
| ？     | 重复零次或一次      |
| {n}    | 重复n次             |
| {n,}   | 重复n次或更多次     |
| {n,m}  | 重复n次到m次 {1，3} |</p>
<p>我们还是用我们之前的reg_string，这次我们限定了元字符为\d{4}，也就是我们的匹配的数字必须是4个。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200529154430919.png" src="https://img-blog.csdnimg.cn/20200529154430919.png" /></p>
<p>下面，我们来提高难度，匹配字母和数字，限定个数为4个。</p>
<p>这样我们可以使用[0-9a-z]{4}，作为我们的元字符，[0-9a-z]代表了0到9的十个数字和a到z的小写26个英文字母。[0-9a-z]{4}限定了个数为4个。</p>
<p>我们打印输出下。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200529154456336.png" src="https://img-blog.csdnimg.cn/20200529154456336.png" /></p>
<p>如果遇到了不是在[0-9a-z]范围内，就会跳过，直到后面的4个都是在[0-9a-z]范围内就打印输出。</p>
</div>
<div class="section" id="id375">
<h2>匹配ip地址<a class="headerlink" href="#id375" title="永久链接至标题">¶</a></h2>
<p>在互联网中，一台主机只有一个IP地址。IP地址用于在TCP/IP通信协议中标记每台计算机的地址，通常用于十进制来表示，如192.168.1.100。</p>
<p>在window系统中，我们可以通过ipconfig查看我们的ip。在linux系统中，我们可以通过ifconfig查看我们的ip。</p>
<p>我们的ip字符串是这样子的：<code class="docutils literal notranslate"><span class="pre">ip</span> <span class="pre">=</span> <span class="pre">&quot;this</span> <span class="pre">is</span> <span class="pre">ip:192.168.1.123</span> <span class="pre">:172.138.2.15&quot;</span></code></p>
<p>下面要求使用正则表达式，将ip匹配出来。</p>
<p>其实，我们主要编写元字符。比如：<code class="docutils literal notranslate"><span class="pre">reg</span> <span class="pre">=</span> <span class="pre">&quot;\d{3}.\d+.\d+.\d+&quot;，</span></code>因为第一个数字必须是三位数开头，我们可以设定<code class="docutils literal notranslate"><span class="pre">\d{3}</span></code>固定起来。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200529155054271.png" src="https://img-blog.csdnimg.cn/20200529155054271.png" />
我们除了可以使用findall，还可以使用search，我们把元字符<code class="docutils literal notranslate"><span class="pre">reg</span> <span class="pre">=</span> <span class="pre">&quot;(\d{1,3}.){3}\d{1,3}&quot;</span></code>。</p>
<p>这元字符中的<code class="docutils literal notranslate"><span class="pre">\d{1,3}</span></code>.指定是我们ip前三个数字，后面加<code class="docutils literal notranslate"><span class="pre">{3}</span></code>就是重复3次。<code class="docutils literal notranslate"><span class="pre">\d{1,3}</span></code>指的就是我们ip最后一个数字。</p>
<p>但是search和findall是有区别的，search只能匹配第一个，我们需要使用列表取出第一个，而findall匹配所有。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200529155110473.png" src="https://img-blog.csdnimg.cn/20200529155110473.png" /></p>
</div>
<div class="section" id="id376">
<h2>组匹配<a class="headerlink" href="#id376" title="永久链接至标题">¶</a></h2>
<p>什么是组匹配，比如说这里边我有一个字符串<code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">=</span> <span class="pre">this</span> <span class="pre">is</span> <span class="pre">phone:13888888888</span> <span class="pre">and</span> <span class="pre">this</span> <span class="pre">is</span> <span class="pre">my</span> <span class="pre">postcode:012345</span></code>，我需要你把手机号和验证码匹配出来。</p>
<p>因为，我们要匹配两个，而已每个的元字符都是不一样的。所以，我们需要分组匹配。</p>
<p>正则表达式的括号表示分组匹配，括号中的模式可以用来匹配分组的内容。</p>
<p>于是我们的元字符就变成：<code class="docutils literal notranslate"><span class="pre">reg</span> <span class="pre">=</span> <span class="pre">this</span> <span class="pre">is</span> <span class="pre">phone:(\d{11})</span> <span class="pre">and</span> <span class="pre">this</span> <span class="pre">is</span> <span class="pre">my</span> <span class="pre">postcode:(\d{6})</span></code></p>
<p>我们一般使用search进行分组匹配，上次我是不是说过search需要使用列表取出来，这里的组匹配也是一样，不过这里用的是<code class="docutils literal notranslate"><span class="pre">group()</span></code>方法。<code class="docutils literal notranslate"><span class="pre">group(1)</span></code>代表了我们的手机号，<code class="docutils literal notranslate"><span class="pre">group(2)</span></code>代表了我们的验证码，而<code class="docutils literal notranslate"><span class="pre">group(0)</span></code>代表了我们的手机号和验证码，代码如下图所示。</p>
<p><img alt="https://img-blog.csdnimg.cn/2020052915461790.png" src="https://img-blog.csdnimg.cn/2020052915461790.png" /></p>
<p>在正则表达式中，除了findall和search用法，还有一个match用法。</p>
<p>match用法只匹配开头的，也是需要group()取出来，下图match的例子。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200529154646890.png" src="https://img-blog.csdnimg.cn/20200529154646890.png" />
这是的re.I是忽略大小写的意思。</p>
</div>
<div class="section" id="id377">
<h2>贪婪与非贪婪<a class="headerlink" href="#id377" title="永久链接至标题">¶</a></h2>
<p>贪婪与非贪婪模式影响的是被量词修饰的子表达式的匹配行为，贪婪模式在整个表达式匹配成功的前提下，尽可能多的匹配，而非贪婪模式在整个表达式匹配成功的前提下，尽可能少的匹配。</p>
<p>贪婪和非贪婪有几个非常重要的操作符。</p>
<p>| 操作符 | 含义             |
| —— | —————- |
| *      | 重复零次或更多次 |
| +      | 重复一次或更多次 |
| ？     | 重复零次或一次   |</p>
<p>比如说这里边我有一个字符串<code class="docutils literal notranslate"><span class="pre">reg_string</span> <span class="pre">=</span> <span class="pre">pythonnnnnnnnnpythonHelloPytho</span></code>，我们先使用贪婪的模式下的元字符：<code class="docutils literal notranslate"><span class="pre">reg</span> <span class="pre">=</span> <span class="pre">&quot;python*&quot;</span></code>
<img alt="https://img-blog.csdnimg.cn/20200529154755550.png" src="https://img-blog.csdnimg.cn/20200529154755550.png" /></p>
<p>贪婪模式下的<code class="docutils literal notranslate"><span class="pre">reg</span> <span class="pre">=</span> <span class="pre">&quot;python*&quot;</span></code>，意味着n重复零次或更多次。所以我们看到了第一关结果的<code class="docutils literal notranslate"><span class="pre">pythonnnnnnnnn</span></code>尽可能多的匹配。</p>
<p>下面使用非贪婪的模式下的元字符：<code class="docutils literal notranslate"><span class="pre">reg</span> <span class="pre">=</span> <span class="pre">&quot;python*?&quot;</span></code>,<code class="docutils literal notranslate"><span class="pre">reg</span> <span class="pre">=</span> <span class="pre">&quot;python+?&quot;</span></code>,<code class="docutils literal notranslate"><span class="pre">reg</span> <span class="pre">=</span> <span class="pre">&quot;python??&quot;</span></code>。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200529154811523.png" src="https://img-blog.csdnimg.cn/20200529154811523.png" />
非贪婪模式下的<code class="docutils literal notranslate"><span class="pre">reg</span> <span class="pre">=</span> <span class="pre">&quot;python*&quot;</span></code>，意味着<code class="docutils literal notranslate"><span class="pre">n</span></code>零次或一次，所以我们没有看到<code class="docutils literal notranslate"><span class="pre">pythonnnnnnnnn</span></code>的结果。</p>
</div>
<div class="section" id="id378">
<h2>手机号码验证<a class="headerlink" href="#id378" title="永久链接至标题">¶</a></h2>
<p>首先，我们要知道我们的手机号码是什么开头的？</p>
<p>移动手机号码开头有16个号段：134、135、136、137、138、139、147、150、151、152、157、158、159、182、187、188。</p>
<p>联通手机号码开头有7种号段：130、131、132、155、156、185、186。</p>
<p>电信手机号码开头有4个号段：133、153、180、189。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200529155221294.png" src="https://img-blog.csdnimg.cn/20200529155221294.png" /></p>
<p>这样我们就可以在开头做事情了，先判断开头是不是上面的号段，<code class="docutils literal notranslate"> <span class="pre">regex</span> <span class="pre">=</span> <span class="pre">&quot;^((13[0-9])|(14[5|7])|(15([0-3]|[5-9]))|(18[0,5-9]))\d{8}$&quot;</span></code>，就是我们的元字符，代码如下：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>

<span class="k">def</span> <span class="nf">checkCellphone</span><span class="p">(</span><span class="n">cellphone</span><span class="p">):</span>
    <span class="n">regex</span> <span class="o">=</span> <span class="s2">&quot;^((13[0-9])|(14[5|7])|(15([0-3]|[5-9]))|(18[0,5-9]))\d{8}$&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">regex</span><span class="p">,</span><span class="n">cellphone</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;匹配成功&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;匹配失败&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
<span class="n">cellphone</span> <span class="o">=</span> <span class="s1">&#39;13717378202&#39;</span>
<span class="n">checkCellphone</span><span class="p">(</span><span class="n">cellphone</span><span class="p">)</span>


<span class="c1">#匹配成功</span>
<span class="c1">#True</span>
</pre></div>
</div>
</div>
<div class="section" id="id379">
<h2>匹配邮箱合法性<a class="headerlink" href="#id379" title="永久链接至标题">¶</a></h2>
<p>下面，我们进行一个作业，就是来匹配我们的邮箱号码。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200529155327327.png" src="https://img-blog.csdnimg.cn/20200529155327327.png" /></p>
<p>作业的答案如下：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>

<span class="k">def</span> <span class="nf">checkEmail</span><span class="p">(</span><span class="n">email</span><span class="p">):</span>

    <span class="n">regex_1</span> <span class="o">=</span> <span class="s1">&#39;^(\w+)@sina.com$&#39;</span>
    <span class="n">regex_2</span> <span class="o">=</span> <span class="s1">&#39;^(\w+)@sina.com.cn$&#39;</span>
    <span class="n">regex_3</span> <span class="o">=</span> <span class="s1">&#39;^(\w+)@163.com$&#39;</span>
    <span class="n">regex_4</span> <span class="o">=</span> <span class="s1">&#39;^(\w+)@126.com$&#39;</span>
    <span class="n">regex_5</span> <span class="o">=</span> <span class="s1">&#39;^[1-9][0,9]{4,}+@qq.com$&#39;</span>
    <span class="n">regex</span> <span class="o">=</span> <span class="p">[</span><span class="n">regex_1</span> <span class="p">,</span><span class="n">regex_2</span> <span class="p">,</span><span class="n">regex_3</span><span class="p">,</span> <span class="n">regex_4</span><span class="p">,</span> <span class="n">regex_5</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span>  <span class="n">regex</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">email</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;匹配成功&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;匹配失败&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">False</span>
<span class="n">email</span> <span class="o">=</span> <span class="s1">&#39;sdjflsdjkl@sina.com&#39;</span>
<span class="n">checkEmail</span><span class="p">(</span><span class="n">email</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id380">
<h2>正则表达式测试工具<a class="headerlink" href="#id380" title="永久链接至标题">¶</a></h2>
<p>打开开源中国提供的正则表达式测试工具 http://tool.oschina.net/regex/，输入待匹配的文本，然后选择常用的正则表达式，就可以得出相应的匹配结果了。</p>
<p>例如，输入下面这段待匹配的文本：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Hello</span><span class="p">,</span> <span class="n">my</span> <span class="n">phone</span> <span class="n">number</span> <span class="ow">is</span> <span class="mi">123455678</span> <span class="ow">and</span> <span class="n">email</span> <span class="ow">is</span> <span class="n">runsen</span><span class="nd">@qq</span><span class="o">.</span><span class="n">com</span><span class="p">,</span> <span class="ow">and</span> <span class="n">my</span> <span class="n">website</span> <span class="ow">is</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">blog</span><span class="o">.</span><span class="n">csdn</span><span class="o">.</span><span class="n">net</span><span class="o">/</span><span class="n">weixin_44510615</span><span class="o">.</span>
</pre></div>
</div>
<p>这段字符串中包含了一个电话号码和一个电子邮件，接下来就尝试用正则表达式提取出来，如图所示。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200529155805263.png" src="https://img-blog.csdnimg.cn/20200529155805263.png" /></p>
<p>在网页右侧选择 “匹配 Email 地址”，就可以看到下方出现了文本中的 E-mail。如果选择 “匹配网址 URL”，就可以看到下方出现了文本中的 URL。是不是非常神奇？</p>
<p><img alt="https://img-blog.csdnimg.cn/20200529155827219.png" src="https://img-blog.csdnimg.cn/20200529155827219.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20200529155916486.png" src="https://img-blog.csdnimg.cn/20200529155916486.png" /></p>
</div>
</div>
<div class="section" id="pythonsocket">
<h1>59、Python中的网络通信Socket<a class="headerlink" href="#pythonsocket" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen</p>
<p>今天，我要写的是Python中的网络通信Socket，写之前，先去<a class="reference external" href="https://www.runoob.com/python/python-socket.html">菜鸟教程</a>看看，偷窥学习一下Socket通讯的基本方式。</p>
<div class="section" id="tcp">
<h2>TCP<a class="headerlink" href="#tcp" title="永久链接至标题">¶</a></h2>
<p>我是化工专业的，TCP/IP这些怎么能不知道？在了解Socket前，我先给装个逼，介绍下TCP/IP。</p>
<p>计算机与网络设备两情侣要谈恋爱，相互通信，那么双方就必须有规则。基于相同的方法，不同的硬件、操作系统之间的通信，都需要一种规则。而我们就把这种规则称为协议(protocol)。</p>
<p>TCP/IP 是互联网相关各类协议族的总称。TCP/IP是指TCP和IP这两种协议。TCP/IP是在IP协议的通信过程中，使用到的协议族的统称。</p>
</div>
<div class="section" id="id381">
<h2>七层<a class="headerlink" href="#id381" title="永久链接至标题">¶</a></h2>
<p>TCP/IP协议族按层次分别为 应用层，传输层，网络层，数据链路层，物理层。可以按照不同的模型分4层或者是7层。</p>
<p>将TCP/IP分为5层，越靠下越接近硬件。</p>
<p>应用层，应用程序收到传输层的数据后，接下来就是要进行解读，解读必须要先规定好格式，而应用层就是规定应用程序的数据格式，主要协议有HTTP等。</p>
<p>传输层，该层为两台主机上的应用程序提供端到端的通信，传输层有两个传输协议为TCP（传输控制协议）和UDP（用户数据报协议），TCP是一个可靠的面向连接的协议，UDP是不可靠或者说无连接的协议。</p>
<p>网络层，决定如何将数据从发送方到接收方，是建立主机到主机的通信。</p>
<p>数据链路层，控制网络层与物理层之间的通信，主要功能是保证物理线路上进行可靠的数据传递。</p>
<p>物理层，该层负责物理传输，与链路有关，也与传输的介质有关。</p>
<p><img alt="https://img-blog.csdnimg.cn/2020052916170248.png" src="https://img-blog.csdnimg.cn/2020052916170248.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20200529161811896.png" src="https://img-blog.csdnimg.cn/20200529161811896.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20200529161821652.png" src="https://img-blog.csdnimg.cn/20200529161821652.png" /></p>
<p>别看我很牛逼，其实都是抄百度百科的，图片都是网络的，出自《图解HTTP》书籍的</p>
</div>
<div class="section" id="id382">
<h2>三次握手，四次挥手<a class="headerlink" href="#id382" title="永久链接至标题">¶</a></h2>
<p>TCP三次握手，四次挥手，Runsen也不会怎么说，就把网上最通俗的图放在下面 了，还是别看我很牛逼，牛逼的是做图的大佬。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200529162029248.png" src="https://img-blog.csdnimg.cn/20200529162029248.png" />
三次握手示意图：</p>
<p><img alt="https://img-blog.csdnimg.cn/2020052916222474.png" src="https://img-blog.csdnimg.cn/2020052916222474.png" /></p>
<p>三次握手过程：</p>
<p>第一次握手是在建立连接，客户端发送连接请求报文段，把标有SYN的数据包发给服务器端即为接收端。</p>
<p>第二次握手是服务器端即接收端收到客户端的SYN的报文段，同时发送标有SYN/ACK的数据包。</p>
<p>第三次握手是客户端收到服务器端的SYN/ACK的数据包后，向服务器端发送标有ACK的数据包。</p>
<p>四次握手其实就是把第二步变成了两步，所以就成了[四次握手」。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200529162851493.png" src="https://img-blog.csdnimg.cn/20200529162851493.png" /></p>
</div>
<div class="section" id="socket">
<h2>Socket<a class="headerlink" href="#socket" title="永久链接至标题">¶</a></h2>
<p>我是来偷窥Python中的网络通信Socket，不小心偷窥到了一个非常不错的Socket好图</p>
<p><img alt="https://img-blog.csdnimg.cn/20200529161222362.png" src="https://img-blog.csdnimg.cn/20200529161222362.png" /></p>
</div>
<div class="section" id="id383">
<h2>实现简单的通讯程序<a class="headerlink" href="#id383" title="永久链接至标题">¶</a></h2>
<p>服务端，server.py</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#导入socket模块</span>
<span class="kn">import</span> <span class="nn">socket</span>
<span class="c1">#创建套接字 或使用server = socket.socket()</span>
<span class="n">server</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
<span class="c1">#定义绑定的ip和端口，用元组定义</span>
<span class="n">ip_port</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="mi">8888</span><span class="p">)</span>
<span class="c1">#绑定监听:bind(address),在AF_INET下,以元组（ip,port）的形式表示地址</span>
<span class="n">server</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">ip_port</span><span class="p">)</span>
<span class="c1">#设置最大连接数，默认为1</span>
<span class="n">server</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="c1">#不断接受连接：one by one</span>
<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;等待数据连接中……&quot;</span><span class="p">)</span>
    <span class="c1">#接受客服端数据请求</span>
    <span class="n">conn</span><span class="p">,</span> <span class="n">address</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    向客服端返回信息</span>
<span class="sd">    (注意：python3.x以上，网络数据的发送接收都是byte类型，</span>
<span class="sd">    发送接收String类型数据时需要对数据进行编码(发送：messages.enconde()；接收后转为String类型:messages.deconde())，pyhon2.x则直接发送数据无须编码)</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">messages</span> <span class="o">=</span> <span class="s2">&quot;连接成功！&quot;</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">messages</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>
    <span class="c1">#计数信息条数</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1">#一个连接中，不断的接受客户端发来的数据</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
        <span class="c1">#打印客户端发来的数据信息</span>
        <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>
        <span class="c1">#判断是否退出当前连接,等在下一个连接</span>
        <span class="k">if</span> <span class="n">data</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;exit&#39;</span><span class="p">:</span>
          <span class="k">break</span>
        <span class="c1">#处理客户端数据（如：响应请求等）</span>
        <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;第&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">count</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;条信息：&quot;</span> <span class="o">+</span> <span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">string</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>
        <span class="c1">#主动关闭连接</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>客户端，client.py</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">socket</span>

<span class="c1">#创建套接字</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">()</span>
<span class="c1">#访问的服务器的ip和端口，用元组定义</span>
<span class="n">ip_port</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span> <span class="mi">8888</span><span class="p">)</span>
<span class="c1">#连接服务器主机</span>
<span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">ip_port</span><span class="p">)</span>
<span class="c1">#同一链接中，不断向服务器发生数据或请求</span>
<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="c1">#接收服务器发送或响应的数据</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
    <span class="c1">#打印接收的数据；python3.x以上数据要编码(发送：data.enconde()；接收后转为String类型:data.deconde())</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>
    <span class="n">messages</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;请输入发生或请求的数据(exit退出)：&quot;</span><span class="p">)</span>
    <span class="n">client</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">messages</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">messages</span> <span class="o">==</span> <span class="s1">&#39;exit&#39;</span><span class="p">:</span>
        <span class="k">break</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    #接收服务器发送或响应的数据</span>
<span class="sd">    data = client.recv(1024)</span>
<span class="sd">    #打印接收的数据；python3.x以上数据要编码，发送enconde()；接收deconde()</span>
<span class="sd">    print(data.decode())</span>
<span class="sd">    &#39;&#39;&#39;</span>
<span class="c1">#关闭连接</span>
<span class="n">client</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200529173904180.png" src="https://img-blog.csdnimg.cn/20200529173904180.png" /></p>
</div>
<div class="section" id="id384">
<h2>多线程通信<a class="headerlink" href="#id384" title="永久链接至标题">¶</a></h2>
<p>TCP服务器与多个TCP客户端同时进行连续通信，只需要通过threading创建多线程任务handle_client就可以了。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">socket</span>
<span class="kn">import</span> <span class="nn">threading</span>
<span class="kn">import</span> <span class="nn">random</span>


<span class="k">def</span> <span class="nf">handle_client</span><span class="p">():</span>
    <span class="c1"># 接受客户端请求链接</span>
    <span class="n">client</span><span class="p">,</span> <span class="n">address</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;[*] Accept connection from: </span><span class="si">%s</span><span class="s2">:</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">address</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">address</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
    <span class="n">messages</span> <span class="o">=</span> <span class="s2">&quot;Hello World!&quot;</span>
    <span class="n">client</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">messages</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>
    <span class="c1"># 连续与当前连接的客户端通信</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="c1"># 接受客户端数据</span>
        <span class="n">request</span> <span class="o">=</span> <span class="p">(</span><span class="n">client</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">))</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="c1"># 判断是否结束通信</span>
        <span class="k">if</span> <span class="n">request</span> <span class="o">==</span> <span class="s1">&#39;exit&#39;</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;[*] Received from </span><span class="si">%s</span><span class="s2">:</span><span class="si">%d</span><span class="s2"> : </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">address</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">address</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">request</span><span class="p">))</span>
        <span class="c1"># 发送响应信息给客户端</span>
        <span class="n">client</span><span class="o">.</span><span class="n">send</span><span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot;：&quot;</span> <span class="o">+</span> <span class="s2">&quot;ACK!&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>
    <span class="c1"># 关闭当前连接</span>
    <span class="n">client</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="c1"># 创建套接字</span>
    <span class="n">server</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
    <span class="c1"># 定义绑定ip和端口</span>
    <span class="n">ip</span> <span class="o">=</span> <span class="s1">&#39;127.0.0.1&#39;</span>
    <span class="n">port</span> <span class="o">=</span> <span class="mi">8888</span>
    <span class="c1"># 绑定监听</span>
    <span class="n">server</span><span class="o">.</span><span class="n">bind</span><span class="p">((</span><span class="n">ip</span><span class="p">,</span> <span class="n">port</span><span class="p">))</span>
    <span class="c1"># 设置最大连接数，默认为1</span>
    <span class="n">server</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;[*] Listening on </span><span class="si">%s</span><span class="s2">:</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ip</span><span class="p">,</span> <span class="n">port</span><span class="p">))</span>
    <span class="c1"># 循环开启线程，接受多个客户端的链接通信</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="c1"># 创建一个线程</span>
        <span class="n">client_handler</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">handle_client</span><span class="p">)</span>
        <span class="c1"># 开启线程</span>
        <span class="n">client_handler</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200529175334353.png" src="https://img-blog.csdnimg.cn/20200529175334353.png" /></p>
<p>python3.x以上，网络数据messages的发送接收都是byte类型，若要发送接收String类型数据时需要通过messages.enconde()对数据进行编码，接收后通过messages.deconde()转为String类型。pyhon2.x则直接发送数据无须编码。</p>
<p>代码来自：https://www.imooc.com/learn/1031</p>
</div>
</div>
<div class="section" id="id385">
<h1>60、网络通信Socket模块实现文件传输<a class="headerlink" href="#id385" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen</p>
<p>我预计写零基础学Python写到一百篇，这是第六十篇，还剩四十篇</p>
<p>实现的效果如下的Gif所示，就是网络通信Socket模块实现文件传输。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200530234705789.gif" src="https://img-blog.csdnimg.cn/20200530234705789.gif" /></p>
<div class="section" id="id386">
<h2>服务端<a class="headerlink" href="#id386" title="永久链接至标题">¶</a></h2>
<p>首先需要获取本机ip，这里服务端采用多线程的方法，就是定义一个函数，然后用threading创建任务。客户端连接成功，接收客户端的请求信息，就是下载的文件名。所以需要判断，有输出文件字节数。然后在问用户是不是要下载，得到信息就使用 while True: 读文件的内容，再一个send。就是这么简单，看代码是不是就是这么回事。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">socket</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">threading</span>

<span class="c1"># 获取本机ip</span>
<span class="k">def</span> <span class="nf">get_host_ip</span><span class="p">():</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_DGRAM</span><span class="p">)</span>
        <span class="n">s</span><span class="o">.</span><span class="n">connect</span><span class="p">((</span><span class="s1">&#39;8.8.8.8&#39;</span><span class="p">,</span> <span class="mi">80</span><span class="p">))</span>
        <span class="n">ip</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">getsockname</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">ip</span>

<span class="c1"># 处理客户端请求下载文件的操作（从主线程提出来的代码）</span>
<span class="k">def</span> <span class="nf">deal_client_request</span><span class="p">(</span><span class="n">ip_port</span><span class="p">,</span> <span class="n">service_client_socket</span><span class="p">):</span>
    <span class="c1"># 连接成功后，输出“客户端连接成功”和客户端的ip和端口</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;客户端连接成功&quot;</span><span class="p">,</span> <span class="n">ip_port</span><span class="p">)</span>
    <span class="c1"># 接收客户端的请求信息【recv】</span>
    <span class="n">file_name</span> <span class="o">=</span> <span class="n">service_client_socket</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
    <span class="c1"># 解码</span>
    <span class="n">file_name_data</span> <span class="o">=</span> <span class="n">file_name</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
    <span class="c1"># 判断文件是否存在</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">file_name_data</span><span class="p">):</span>
        <span class="c1">#输出文件字节数</span>
        <span class="n">fsize</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="n">file_name_data</span><span class="p">)</span>
        <span class="c1">#转化为兆单位</span>
        <span class="n">fmb</span> <span class="o">=</span> <span class="n">fsize</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="p">)</span>
        <span class="c1">#要传输的文件信息</span>
        <span class="n">senddata</span> <span class="o">=</span> <span class="s2">&quot;文件名：</span><span class="si">%s</span><span class="s2">  文件大小：</span><span class="si">%.2f</span><span class="s2">MB&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">file_name_data</span><span class="p">,</span><span class="n">fmb</span><span class="p">)</span>
        <span class="c1">#发送和打印文件信息【send】</span>
        <span class="n">service_client_socket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">senddata</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;请求文件名：</span><span class="si">%s</span><span class="s2">  文件大小：</span><span class="si">%.2f</span><span class="s2"> MB&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">file_name_data</span><span class="p">,</span><span class="n">fmb</span><span class="p">))</span>
        <span class="c1">#接受客户是否需要下载【recv】</span>
        <span class="n">options</span> <span class="o">=</span> <span class="n">service_client_socket</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">options</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span>
            <span class="c1"># 打开文件</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_name_data</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="c1">#　计算总数据包数目</span>
                <span class="n">nums</span> <span class="o">=</span> <span class="n">fsize</span><span class="o">/</span><span class="mi">1024</span>
                <span class="c1">#　当前传输的数据包数目</span>
                <span class="n">cnum</span> <span class="o">=</span> <span class="mi">0</span>

                <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
                    <span class="n">file_data</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
                    <span class="n">cnum</span> <span class="o">=</span> <span class="n">cnum</span> <span class="o">+</span> <span class="mi">1</span>
                    <span class="c1">#progress = cnum/nums*100</span>

                    <span class="c1">#print(&quot;当前已下载：%.2f%%&quot;%progress,end = &quot;\r&quot;)</span>
                    <span class="k">if</span> <span class="n">file_data</span><span class="p">:</span>
                        <span class="c1"># 只要读取到数据，就向客户端进行发送【send】</span>
                        <span class="n">service_client_socket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">file_data</span><span class="p">)</span>
                    <span class="c1"># 数据读完，退出循环</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;请求的文件数据发送完成&quot;</span><span class="p">)</span>
                        <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;下载取消！&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;下载的文件不存在！&quot;</span><span class="p">)</span>
    <span class="c1"># 关闭服务当前客户端的套接字【close】</span>
    <span class="n">service_client_socket</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="c1"># 获取本机ip</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;TCP文件传输服务器，本机IP:&quot;</span> <span class="o">+</span> <span class="n">get_host_ip</span><span class="p">())</span>
    
    <span class="c1"># 把工作目录切换到data目录下</span>
    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s2">&quot;./data&quot;</span><span class="p">)</span>
    <span class="c1"># 创建套接字【socket】</span>
    <span class="n">tcp_server_socket</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
    <span class="c1"># 绑定端口号【bind】</span>
    <span class="n">tcp_server_socket</span><span class="o">.</span><span class="n">bind</span><span class="p">((</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">3356</span><span class="p">))</span>
    <span class="c1"># 设置监听，将主动套接字变为被动套接字【listen】</span>
    <span class="n">tcp_server_socket</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">128</span><span class="p">)</span>

    <span class="c1"># 循环调用【accept】，可以支持多个客户端同时连接，和多个客户端同时下载文件</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">service_client_socket</span><span class="p">,</span> <span class="n">ip_port</span> <span class="o">=</span> <span class="n">tcp_server_socket</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
        <span class="c1"># 连接成功后打印套接字号</span>
        <span class="c1">#print(id(service_client_socket))</span>

        <span class="c1"># 创建子线程</span>
        <span class="n">sub_thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">deal_client_request</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">ip_port</span><span class="p">,</span> <span class="n">service_client_socket</span><span class="p">))</span>
        <span class="c1"># 启动子线程</span>
        <span class="n">sub_thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="id387">
<h2>客户端<a class="headerlink" href="#id387" title="永久链接至标题">¶</a></h2>
<p>客户端更简单，连接服务端，发送下载文件的请求，定义一个写入的文件夹，就是小儿科东西。不写了，看代码。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># -*- coding:utf-8 -*-</span>
<span class="c1"># 多任务文件下载器客户端</span>
<span class="kn">import</span> <span class="nn">socket</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="c1"># 创建套接字【socket】</span>
    <span class="n">tcp_client_socket</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
    <span class="c1"># 和服务端连接【connect】</span>
    <span class="n">server_ip</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;输入服务器IP：&quot;</span><span class="p">)</span>
    <span class="n">tcp_client_socket</span><span class="o">.</span><span class="n">connect</span><span class="p">((</span><span class="n">server_ip</span><span class="p">,</span> <span class="mi">3356</span><span class="p">))</span>
    <span class="c1"># 发送下载文件的请求</span>
    <span class="n">file_name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;请输入要下载的文件名：&quot;</span><span class="p">)</span>
    <span class="c1"># 编码</span>
    <span class="n">file_name_data</span> <span class="o">=</span> <span class="n">file_name</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
    <span class="c1"># 发送文件下载请求数据【send】</span>
    <span class="n">tcp_client_socket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">file_name_data</span><span class="p">)</span>
    <span class="c1"># 接收要下载的文件信息【recv】</span>
    <span class="n">file_info</span> <span class="o">=</span> <span class="n">tcp_client_socket</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
    <span class="c1"># 文件信息解码</span>
    <span class="n">info_decode</span> <span class="o">=</span> <span class="n">file_info</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">info_decode</span><span class="p">)</span>
    <span class="c1">#获取文件大小</span>
    <span class="n">fileszie</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">info_decode</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;：&#39;</span><span class="p">)[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;MB&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">fileszie2</span> <span class="o">=</span> <span class="n">fileszie</span><span class="o">*</span><span class="mi">1024</span>
    <span class="c1"># 是否下载？输入ｙ　确认　输入ｑ 取消</span>
    <span class="n">opts</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;是否下载？(y 确认　q 取消)&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">opts</span> <span class="o">==</span> <span class="s1">&#39;q&#39;</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;下载取消！程序退出&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;正在下载　&gt;&gt;&gt;&gt;&gt;&gt;&quot;</span><span class="p">)</span>
        <span class="c1">#向服务器确认正在下载【send】</span>
        <span class="n">tcp_client_socket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;y&#39;</span><span class="p">)</span>

        <span class="n">recvpath</span> <span class="o">=</span> <span class="s2">&quot;./receive/&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">recvpath</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">recvpath</span><span class="p">)</span> 
        
        <span class="c1"># 把数据写入到文件里</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">recvpath</span> <span class="o">+</span> <span class="n">file_name</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span>
            <span class="c1">#目前接收到的数据包数目</span>
            <span class="n">cnum</span> <span class="o">=</span> <span class="mi">0</span>

            <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
                <span class="c1"># 循环接收文件数据【recv】</span>
                <span class="n">file_data</span> <span class="o">=</span> <span class="n">tcp_client_socket</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
                <span class="c1"># 接收到数据</span>
                <span class="k">if</span> <span class="n">file_data</span><span class="p">:</span>
                    <span class="c1"># 写入数据</span>
                    <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">file_data</span><span class="p">)</span>
                    <span class="n">cnum</span> <span class="o">=</span> <span class="n">cnum</span><span class="o">+</span><span class="mi">1</span>
                    <span class="c1">#progress =cnum/fileszie2*100</span>
                    <span class="c1">#print(&quot;当前已下载：%.2f%%&quot;%progress,end = &quot;\r&quot;)</span>
                <span class="c1"># 接收完成</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;下载结束！&quot;</span><span class="p">)</span>
                    <span class="k">break</span>
    <span class="c1"># 关闭套接字【close】</span>
    <span class="n">tcp_client_socket</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="pythonsmtplibemail">
<h1>61、Python中的smtplib和email实现邮件发送<a class="headerlink" href="#pythonsmtplibemail" title="永久链接至标题">¶</a></h1>
<p>﻿<img alt="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS9mOGM0YjhmZC0zZGY5LTQ0NDktOGVhMi1lMWJhNjE5MGY3MTEucG5n?x-oss-process=image/format,png" src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS9mOGM0YjhmZC0zZGY5LTQ0NDktOGVhMi1lMWJhNjE5MGY3MTEucG5n?x-oss-process=image/format,png" /></p>
<p>&#64;Author ：  Runsen</p>
<p>在Python中分别有两个库实现发送邮件，分别是smtplib和email。</p>
<p>smtplib是用来发送邮件用的，email是用来构建邮件内容的。</p>
<p>下面是具体使用：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">smtplib</span>
 
<span class="n">server</span> <span class="o">=</span> <span class="n">smtplib</span><span class="o">.</span><span class="n">SMTP</span><span class="p">()</span>
<span class="n">server</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>


<span class="c1">#连接（connect）指定的服务器，host是指定连接的邮箱服务器，通过搜索“xx邮箱服务器地址”，就可以找到</span>
<span class="c1">#例如QQ邮箱的SMTP服务器地址是：smtp.qq.com。port是端口，一般情况下SMTP默认端口号为25</span>

<span class="n">server</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
<span class="c1">#username:登录邮箱的用户名</span>
<span class="c1">#password：授权码</span>
<span class="n">server</span><span class="o">.</span><span class="n">sendmail</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">to_addr</span><span class="p">,</span> <span class="n">msg</span><span class="o">.</span><span class="n">as_string</span><span class="p">())</span>

<span class="c1">#from_addr：邮件发送地址，就是上面的username</span>
<span class="c1">#to_addr：邮件收件人地址</span>
<span class="c1">#msg.as_string()：为一个字符串类型 ，as_string()是将发送的信息msg变为字符串类型。</span>
<span class="n">server</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
<span class="c1">#退出服务器，结束SMTP会话</span>
</pre></div>
</div>
<p>备注：SMTP 协议是由源服务器到目的地服务器传送邮件的一组规则。</p>
<p>email 模块：也就是用来写邮件内容的模块。这个内容可以是纯文本、HTML内容、图片、附件等多种形式。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">email</span>
<span class="kn">from</span> <span class="nn">email.mime.text</span> <span class="kn">import</span> <span class="n">MIMEText</span>
<span class="c1">#纯文本或HTML页面</span>
<span class="kn">from</span> <span class="nn">email.mime.image</span> <span class="kn">import</span> <span class="n">MIMEImage</span>
<span class="c1">#内容形式为图片</span>
<span class="kn">from</span> <span class="nn">email.mime.multipart</span> <span class="kn">import</span> <span class="n">MIMEMultipart</span>
<span class="c1">#多形式组合，可包含文本和附件</span>
 
<span class="c1">#MIMEText方法：</span>
<span class="c1"># MIMEText(msg,type,chartset)</span>
<span class="c1"># msg：文本内容，可自定义</span>
<span class="c1"># type：文本类型，默认为plain（纯文本）</span>
<span class="c1"># chartset：文本编码，中文为“utf-8”</span>
</pre></div>
</div>
<div class="section" id="demo">
<h2>测试Demo<a class="headerlink" href="#demo" title="永久链接至标题">¶</a></h2>
<p>这是我把自己的username和password省略了</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 测试</span>
<span class="kn">import</span> <span class="nn">smtplib</span>
<span class="kn">from</span> <span class="nn">email.mime.textimport</span> <span class="nn">MIMEText</span>
 
<span class="n">username</span><span class="o">=</span><span class="s1">&#39;你的@qq.com&#39;</span>
<span class="n">password</span><span class="o">=</span><span class="s1">&#39;XXXXXXXXX&#39;</span>
<span class="n">sender</span><span class="o">=</span><span class="s1">&#39;发给谁@qq.com&#39;</span>
<span class="n">to_addr</span><span class="o">=</span><span class="s1">&#39;run24118cajie@163.com&#39;</span>
<span class="n">msg</span><span class="o">=</span><span class="n">MIMEText</span><span class="p">(</span><span class="s1">&#39;你好这是用python发的一封邮件&#39;</span><span class="p">,</span><span class="s1">&#39;plain&#39;</span><span class="p">,</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
 
<span class="n">server</span> <span class="o">=</span><span class="n">smtplib</span><span class="o">.</span><span class="n">SMTP</span><span class="p">()</span>
<span class="n">server</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;smtp.qq.com&#39;</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
<span class="n">server</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">username</span><span class="p">,</span><span class="n">password</span><span class="p">)</span>
<span class="n">server</span><span class="o">.</span><span class="n">sendmail</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span><span class="n">to_addr</span><span class="p">,</span> <span class="n">msg</span><span class="o">.</span><span class="n">as_string</span><span class="p">())</span>
<span class="n">server</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
</pre></div>
</div>
<p>发送成功</p>
<p><img alt="https://img-blog.csdnimg.cn/20190505234114734.png" src="https://img-blog.csdnimg.cn/20190505234114734.png" /></p>
</div>
<div class="section" id="id388">
<h2>标准发邮件的格式<a class="headerlink" href="#id388" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 首先，主送、抄送就是两个用逗号分割的字符串，subject是标题，正文是context，支持html。</span>
<span class="kn">from</span> <span class="nn">email</span> <span class="kn">import</span> <span class="n">encoders</span>
<span class="kn">from</span> <span class="nn">email.header</span> <span class="kn">import</span> <span class="n">Header</span>
<span class="kn">from</span> <span class="nn">email.mime.text</span> <span class="kn">import</span> <span class="n">MIMEText</span>
<span class="kn">from</span> <span class="nn">email.mime.base</span> <span class="kn">import</span> <span class="n">MIMEBase</span>
<span class="kn">from</span> <span class="nn">email.mime.multipart</span> <span class="kn">import</span> <span class="n">MIMEMultipart</span>
<span class="kn">import</span> <span class="nn">smtplib</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="n">from_addr</span> <span class="o">=</span> <span class="s1">&#39;xxxxx@qq.com&#39;</span>
<span class="n">password</span> <span class="o">=</span> <span class="s1">&#39;xxxxx&#39;</span>
<span class="n">smtp_server</span> <span class="o">=</span> <span class="s1">&#39;smtp.qq.com&#39;</span>
<span class="k">def</span> <span class="nf">sendmail</span><span class="p">(</span><span class="n">to_addr</span><span class="p">,</span> <span class="n">cc_addr</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">attach_full_path</span><span class="p">):</span>
    <span class="c1"># create a message</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">MIMEMultipart</span><span class="p">()</span>
    <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;From&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">from_addr</span>
    <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;To&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">to_addr</span>
    <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;Cc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cc_addr</span>
    <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;Subject&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Header</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
    <span class="c1"># 正文:</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">MIMEText</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="s1">&#39;html&#39;</span><span class="p">,</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
    <span class="c1"># 附件</span>
    <span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="nb">file</span><span class="p">)</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">attach_full_path</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">attach_full_path</span> <span class="o">+</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="c1"># 设置附件的MIME和文件名:</span>
        <span class="n">mime</span> <span class="o">=</span> <span class="n">MIMEBase</span><span class="p">(</span><span class="s1">&#39;application&#39;</span><span class="p">,</span> <span class="s1">&#39;octet-stream&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="nb">file</span><span class="p">)</span>
        <span class="c1"># 加上必要的头信息:</span>
        <span class="n">mime</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span><span class="s1">&#39;Content-Disposition&#39;</span><span class="p">,</span> <span class="s1">&#39;attachment&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="nb">file</span><span class="p">)</span>
        <span class="c1"># 把附件的内容读进来:</span>
        <span class="n">mime</span><span class="o">.</span><span class="n">set_payload</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="c1"># 用Base64编码:</span>
        <span class="n">encoders</span><span class="o">.</span><span class="n">encode_base64</span><span class="p">(</span><span class="n">mime</span><span class="p">)</span>
        <span class="c1"># 添加到MIMEMultipart:</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">mime</span><span class="p">)</span>
    <span class="c1"># 发送邮件</span>
    <span class="n">server</span> <span class="o">=</span> <span class="n">smtplib</span><span class="o">.</span><span class="n">SMTP</span><span class="p">(</span><span class="n">smtp_server</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
    <span class="n">server</span><span class="o">.</span><span class="n">set_debuglevel</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">server</span><span class="o">.</span><span class="n">starttls</span><span class="p">()</span>
    <span class="n">server</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">from_addr</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
    <span class="n">server</span><span class="o">.</span><span class="n">sendmail</span><span class="p">(</span><span class="n">from_addr</span><span class="p">,</span> <span class="n">to_addr</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">cc_addr</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">),</span> <span class="n">msg</span><span class="o">.</span><span class="n">as_string</span><span class="p">())</span>
    <span class="n">server</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
  
</pre></div>
</div>
</div>
</div>
<div class="section" id="pythongil">
<h1>62、多线程真的比单线程快？那是因为你不知道Python中的全局解释器锁GIL<a class="headerlink" href="#pythongil" title="永久链接至标题">¶</a></h1>
<p>&#64;Author：Runsen</p>
<p>今日，我决定继续更新Python教程，介绍的是Python 中的全局解释器锁GIL。已经到了六十二，还剩下区区三十八篇。长得帅就是我的动力，不对，明明就是太穷了才是我的动力。</p>
<div class="section" id="id389">
<h2>多线程比单线程快？<a class="headerlink" href="#id389" title="永久链接至标题">¶</a></h2>
<p>在Python中，可以通过多进程、多线程和多协程来实现多任务。这个不清楚，看看我之前的文章，难道多线程比单线程快？</p>
<p>你竟然敢质疑我，我太开心了。我得用一个例子证明我自己得观点。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">@Author： Runsen</span>
<span class="sd">@微信公众号： Python之王</span>
<span class="sd">@博客： https://blog.csdn.net/weixin_44510615</span>
<span class="sd">@Date： 2020/6/4</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="kn">import</span> <span class="nn">threading</span><span class="o">,</span> <span class="nn">time</span>
<span class="k">def</span> <span class="nf">my_counter</span><span class="p">():</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100000000</span><span class="p">):</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span>
    <span class="k">return</span> <span class="bp">True</span>

<span class="k">def</span> <span class="nf">main1</span><span class="p">():</span>
    <span class="n">thread_ary</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">tid</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">my_counter</span><span class="p">)</span>
        <span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="n">t</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>  <span class="c1"># 第一次循环的时候join方法引起主线程阻塞，但第二个线程并没有启动，所以两个线程是顺序执行的</span>

    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;单线程顺序执行total_time: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">main2</span><span class="p">():</span>
    <span class="n">thread_ary</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">tid</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">my_counter</span><span class="p">)</span>
        <span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="n">thread_ary</span><span class="p">[</span><span class="n">tid</span><span class="p">]</span> <span class="o">=</span> <span class="n">t</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
        <span class="n">thread_ary</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>  <span class="c1"># 两个线程均已启动，所以两个线程是并发的</span>

    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;多线程执行total_time: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">))</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main1</span><span class="p">()</span>
    <span class="n">main2</span><span class="p">()</span>
</pre></div>
</div>
<p>运行结果</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">单线程顺序执行total_time</span><span class="p">:</span> <span class="mf">17.754502773284912</span>
<span class="n">多线程执行total_time</span><span class="p">:</span> <span class="mf">20.01178550720215</span>
</pre></div>
</div>
<p>我怕你说我乱得出来得结果，我还是截个图看清楚点</p>
<p><img alt="https://img-blog.csdnimg.cn/20200604114813483.png" src="https://img-blog.csdnimg.cn/20200604114813483.png" /></p>
<p>没错， Python 的线程失效了，没有起到并行计算的作用。</p>
<p>Python 的线程，的确封装了底层的操作系统线程，在 Linux 系统里是 Pthread（全称为 POSIX Thread），而在 Windows 系统里是 Windows Thread。另外，Python 的线程，也完全受操作系统管理，比如协调何时执行、管理内存资源、管理中断等等。所以，虽然 Python 的线程和 C++ 的线程本质上是不同的</p>
</div>
<div class="section" id="gilpython">
<h2>GIL并不是Python的特性<a class="headerlink" href="#gilpython" title="永久链接至标题">¶</a></h2>
<p>GIL 的概念用简单的一句话来解释，就是**「任一时刻，无论线程多少，单一 CPython 解释器只能执行一条字节码」**。这个定义需要注意的点：</p>
<p>首先需要明确的一点是<strong>GIL并不是Python的特性</strong>，它是在实现Python解析器(CPython)时所引入的一个概念。</p>
<p>C++是一套语言（语法）标准，但是可以用不同的编译器来编译成可执行代码。有名的编译器例如GCC，INTEL C++，Visual C++等。</p>
<p>Python也一样，同样一段代码可以通过CPython，PyPy，Psyco等不同的Python执行环境来执行。</p>
<p><strong>其他 Python 解释器不一定有 GIL</strong>。例如 Jython (JVM) 和 IronPython (CLR) 没有 GIL，而 CPython，PyPy 有 GIL；</p>
<p>因为CPython是大部分环境下默认的Python执行环境。所以在很多人的概念里CPython就是Python，也就想当然的把GIL归结为Python语言的缺陷。所以这里要先明确一点：<strong>GIL并不是Python的特性，Python完全可以不依赖于GIL</strong></p>
</div>
<div class="section" id="gil">
<h2>GIL本质就是一把互斥锁<a class="headerlink" href="#gil" title="永久链接至标题">¶</a></h2>
<p>GIL本质就是一把互斥锁，既然是互斥锁，所有互斥锁的本质都一样，都是将并发运行变成串行，以此来控制同一时间内共享数据只能被一个任务所修改，进而保证数据安全。</p>
<p>可以肯定的一点是：保护不同的数据的安全，就应该加不同的锁。</p>
<p>GIL 是工作原理：下面这张图，就是一个 GIL 在 Python 程序的工作示例。其中，Thread 1、2、3 轮流执行，每一个线程在开始执行时，都会锁住 GIL，以阻止别的线程执行；同样的，每一个线程执行完一段后，会释放 GIL，以允许别的线程开始利用资源。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200604115658938.png" src="https://img-blog.csdnimg.cn/20200604115658938.png" /></p>
<p>细心的你可能会发现一个问题：为什么 Python 线程会去主动释放 GIL 呢？毕竟，如果仅仅是要求 Python</p>
<p>CPython 使用引用计数来管理内存，所有 Python 脚本中创建的实例，都会有一个引用计数，来记录有多少个指针指向它。当引用计数只有 0 时，则会自动释放内存。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">getrefcount</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">3</span>
</pre></div>
</div>
<p>这个例子中，a 的引用计数是 3，因为有 a、b 和作为参数传递的 getrefcount 这三个地方，都引用了一个空列表。这样一来，如果有两个 Python 线程同时引用了 a，就会造成引用计数的 race condition，引用计数可能最终只增加 1，这样就会造成内存被污染。因为第一个线程结束时，会把引用计数减少 1，这时可能达到条件释放内存，当第二个线程再试图访问 a 时，就找不到有效的内存了。</p>
</div>
<div class="section" id="id390">
<h2>计算密集型<a class="headerlink" href="#id390" title="永久链接至标题">¶</a></h2>
<p>我们先来看一个简单的计算密集型示例：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="n">COUNT</span> <span class="o">=</span> <span class="mi">50</span><span class="n">_000_000</span>

<span class="k">def</span> <span class="nf">count_down</span><span class="p">():</span>
   <span class="k">global</span> <span class="n">COUNT</span>
   <span class="k">while</span> <span class="n">COUNT</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
       <span class="n">COUNT</span> <span class="o">-=</span> <span class="mi">1</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
<span class="n">count_down</span><span class="p">()</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span> <span class="o">-</span> <span class="n">s</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;time taken in seconds - &gt;:&#39;</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>

<span class="c1"># time taken in seconds - &gt;: 9.2957003</span>
</pre></div>
</div>
<p>这个是单线程， 时间是9s， 下面我们用两个线程看看结果又如何：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">threading</span> <span class="kn">import</span> <span class="n">Thread</span>

<span class="n">COUNT</span> <span class="o">=</span> <span class="mi">50</span><span class="n">_000_000</span>

<span class="k">def</span> <span class="nf">count_down</span><span class="p">():</span>
   <span class="k">global</span> <span class="n">COUNT</span>
   <span class="k">while</span> <span class="n">COUNT</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
       <span class="n">COUNT</span> <span class="o">-=</span> <span class="mi">1</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
<span class="n">t1</span> <span class="o">=</span> <span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">count_down</span><span class="p">)</span>
<span class="n">t2</span> <span class="o">=</span> <span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">count_down</span><span class="p">)</span>
<span class="n">t1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">t2</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">t1</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
<span class="n">t2</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span> <span class="o">-</span> <span class="n">s</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;time taken in seconds - &gt;:&#39;</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>

<span class="c1"># time taken in seconds - &gt;: 17.110625</span>
</pre></div>
</div>
<p>其实结果一点也不奇怪， 我们程序主要的操作就是在计算， cpu没有等待， 而改为多线程后， 增加了线程后， 在线程之间频繁的切换，增大了时间开销， 时间当然会增加了。</p>
<p><strong>对于io密集型工作（爬虫），多线程可以大幅提高代码效率。对CPU计算密集型（数据分析），多线程的效率可能比单线程还略低。</strong></p>
</div>
</div>
<div class="section" id="id391">
<h1>63、面试最常见的问题：Python的垃圾回收机制到底是怎么样的？<a class="headerlink" href="#id391" title="永久链接至标题">¶</a></h1>
<p>&#64;Author：Runsen</p>
<p>今日，我决定继续更新Python教程，介绍的是Python的垃圾回收机制。已经到了六十三，还剩下区区三十七篇。长得帅就是我的动力，不对，明明就是太穷了才是我的动力。
<img alt="https://img-blog.csdnimg.cn/2020060418232457.png" src="https://img-blog.csdnimg.cn/2020060418232457.png" /></p>
<p>参考：<a class="reference external" href="https://time.geekbang.org/column/article/104265">极客时间Python专栏</a></p>
<p>在这篇文章，带着这个问题来一直往下看：怎么知道一个对象，是否永远都不能被调用了呢？</p>
<div class="section" id="id392">
<h2>引用计数<a class="headerlink" href="#id392" title="永久链接至标题">¶</a></h2>
<p>在一些代码中，如果存在一些变量但是没有用，会造成内存空间，因此叫做垃圾，所以要回收。</p>
<p>引用计数也是一种最直观，最简单的垃圾收集技术。原理非常简单，每一个对象都包含了两个头部信息，一个是类型标志符，标识这个对象的类型；另一个是计数器，记录当前指向该对象的引用数目，表示这个对象被多少个变量名所引用。</p>
<p>用来记录对象被引用的次数，每当对象被创建或者被引用时将该对象的引用次数加一，当对象的引用被销毁时该对象的引用次数减一，当对象的引用次数减到零时说明程序中已经没有任何对象持有该对象的引用，换言之就是在以后的程序运行中不会再次使用到该对象了，那么其所占用的空间也就可以被释放了了。</p>
<p>下面是查看引用计数的方法，</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">getrefcount</span><span class="p">())</span>
</pre></div>
</div>
<p>注意调用getrefcount()函数会临时增加一次引用计数，得到的结果比预期的多一次。</p>
<p>我们通过一些例子来看下，可以使python对象的引用计数增加或减少的场景，代码来自专栏。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
<span class="c1"># 两次引用，一次来自 a，一次来自 getrefcount</span>
<span class="k">print</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">getrefcount</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="c1"># 四次引用，a，python 的函数调用栈，函数参数，和 getrefcount</span>
    <span class="k">print</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">getrefcount</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>

<span class="n">func</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="c1"># 两次引用，一次来自 a，一次来自 getrefcount，函数 func 调用已经不存在</span>
<span class="k">print</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">getrefcount</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>

<span class="c1">########## 输出 ##########</span>
<span class="mi">2</span>
<span class="mi">4</span>
<span class="mi">2</span>
</pre></div>
</div>
<p>我认为这个代码是这篇文章最容易看懂的代码</p>
</div>
<div class="section" id="id393">
<h2>内存空间<a class="headerlink" href="#id393" title="永久链接至标题">¶</a></h2>
<p>我们来看看下面的例子。代码来自专栏</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">psutil</span>


<span class="c1"># 显示当前 python 程序占用的内存大小</span>
<span class="k">def</span> <span class="nf">show_memory_info</span><span class="p">(</span><span class="n">hint</span><span class="p">):</span>
    <span class="n">pid</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getpid</span><span class="p">()</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">Process</span><span class="p">(</span><span class="n">pid</span><span class="p">)</span>

    <span class="n">info</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">memory_full_info</span><span class="p">()</span>
    <span class="n">memory</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">uss</span> <span class="o">/</span> <span class="mf">1024.</span> <span class="o">/</span> <span class="mi">1024</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;{} memory used: {} MB&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">hint</span><span class="p">,</span> <span class="n">memory</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="n">show_memory_info</span><span class="p">(</span><span class="s1">&#39;initial&#39;</span><span class="p">)</span>
    <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10000000</span><span class="p">)]</span>
    <span class="n">show_memory_info</span><span class="p">(</span><span class="s1">&#39;after a created&#39;</span><span class="p">)</span>

<span class="n">func</span><span class="p">()</span>
<span class="n">show_memory_info</span><span class="p">(</span><span class="s1">&#39;finished&#39;</span><span class="p">)</span>

<span class="c1">########## 输出 ##########</span>

<span class="n">initial</span> <span class="n">memory</span> <span class="n">used</span><span class="p">:</span> <span class="mf">20.82421875</span> <span class="n">MB</span>
<span class="n">after</span> <span class="n">a</span> <span class="n">created</span> <span class="n">memory</span> <span class="n">used</span><span class="p">:</span> <span class="mf">408.125</span> <span class="n">MB</span>
<span class="n">finished</span> <span class="n">memory</span> <span class="n">used</span><span class="p">:</span> <span class="mf">21.10546875</span> <span class="n">MB</span>
</pre></div>
</div>
<p>如果代码运行遇到psutil.AccessDenied: psutil.AccessDenied (pid=14204)，解决的方法就是用管理员身份打开。</p>
<p>函数 show_memory_info用来获取程序占用的内存空间大小，在 func函数中创建一个包含一百万个整数的列表。从打印结果我们可以看出，创建完列表之后程序耗用的内存空间上升到了 408.125  MB。而当函数 foo 调用完毕之后内存消耗又恢复正常。</p>
<p>这是因为我们在函数 func中创建的 list 变量是局部变量，其作用域是当前函数内部，一旦函数执行完毕，局部变量的引用会被自动销毁，即其引用次数会变为零，所占用的内存空间也会被回收。（代码来自专栏，但是领悟来自于Runsen）</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="n">show_memory_info</span><span class="p">(</span><span class="s1">&#39;initial&#39;</span><span class="p">)</span>
    <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">derange</span><span class="p">(</span><span class="mi">10000000</span><span class="p">)]</span>
    <span class="n">show_memory_info</span><span class="p">(</span><span class="s1">&#39;after a created&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">a</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">func</span><span class="p">()</span>
<span class="n">show_memory_info</span><span class="p">(</span><span class="s1">&#39;finished&#39;</span><span class="p">)</span>

<span class="c1">########## 输出 ##########</span>
<span class="n">initial</span> <span class="n">memory</span> <span class="n">used</span><span class="p">:</span> <span class="mf">20.8515625</span> <span class="n">MB</span>
<span class="n">after</span> <span class="n">a</span> <span class="n">created</span> <span class="n">memory</span> <span class="n">used</span><span class="p">:</span> <span class="mf">408.1484375</span> <span class="n">MB</span>
<span class="n">finished</span> <span class="n">memory</span> <span class="n">used</span><span class="p">:</span> <span class="mf">408.1484375</span> <span class="n">MB</span>
</pre></div>
</div>
<p>稍加改造之后，即使 func函数调用结束其所消耗的内存也未被释放。</p>
<p>主要是因为我们将函数 func内部产生的列表返回并在主程序中接收之后，这样就会导致该列表的引用依然存在，该对象后续仍有可能被使用到，垃圾回收便不会回收该对象。</p>
</div>
<div class="section" id="id394">
<h2>计数增加和减少<a class="headerlink" href="#id394" title="永久链接至标题">¶</a></h2>
<p>下面引用计数增加的场景：</p>
<ul class="simple">
<li>对象被创建并赋值给某个变量，比如：a = ‘ABC’</li>
<li>变量间的相互引用（相当于变量指向了同一个对象），比如：b=a</li>
<li>变量作为参数传到函数中。比如：ref_method(a)，</li>
<li>将对象放到某个容器对象中(列表、元组、字典)。比如：c = [1, a, ‘abc’]</li>
</ul>
<p>引用计数减少的场景：</p>
<ul class="simple">
<li>当一个变量离开了作用域，比如：函数执行完成时，执行方法前后的引用计数保持不变，这就是因为方法执行完后，对象的引用计数也会减少，如果在方法内打印，则能看到引用计数增加的效果。</li>
<li>对象的引用变量被销毁时，比如del a 或者 del b。注意如果del a，再去获取a的引用计数会直接报错。</li>
<li>对象被从容器对象中移除，比如：c.remove(a)</li>
<li>直接将整个容器销毁，比如：del c</li>
<li><ul class="first">
<li>对象的引用被赋值给其他对象，相当于变量不指向之前的对象，而是指向了一个新的对象，这种情况，引用计数肯定会发生改变。(排除两个对象默认引用计一致的场景)。</li>
</ul>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>import sys

def ref_method(str):
    print(sys.getrefcount(str))
    print(&quot;我调用了{}&quot;.format(str))
    print(&#39;方法执行完了&#39;)

def ref_count():
    # 引用计数增加的场景
    print(&#39;测试引用计数增加&#39;)
    a = &#39;ABC&#39;
    print(sys.getrefcount(a))
    b = a
    print(sys.getrefcount(a))
    ref_method(a)
    print(sys.getrefcount(a))
    c = [1, a, &#39;abc&#39;]
    print(sys.getrefcount(a))

    # 引用计数减少的场景
    print(&#39;测试引用计数减少&#39;)
    del b
    print(sys.getrefcount(a))
    c.remove(a)
    print(sys.getrefcount(a))
    del c
    print(sys.getrefcount(a))
    a = 783
    print(sys.getrefcount(a))

if __name__ == &#39;__main__&#39;:
    ref_count()

测试引用计数增加
7
8
10
我调用了ABC
方法执行完了
8
9
测试引用计数减少
8
7
7
4
</pre></div>
</div>
</div>
<div class="section" id="id395">
<h2>释放内存<a class="headerlink" href="#id395" title="永久链接至标题">¶</a></h2>
<p>python给我们提供了手动释放内存的方法 gc.collect()</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">gc</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">psutil</span>
<span class="c1"># 显示当前 python 程序占用的内存大小</span>
<span class="k">def</span> <span class="nf">show_memory_info</span><span class="p">(</span><span class="n">hint</span><span class="p">):</span>
    <span class="n">pid</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getpid</span><span class="p">()</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">Process</span><span class="p">(</span><span class="n">pid</span><span class="p">)</span>

    <span class="n">info</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">memory_full_info</span><span class="p">()</span>
    <span class="n">memory</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">uss</span> <span class="o">/</span> <span class="mf">1024.</span> <span class="o">/</span> <span class="mi">1024</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;{} memory used: {} MB&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">hint</span><span class="p">,</span> <span class="n">memory</span><span class="p">))</span>



<span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="n">show_memory_info</span><span class="p">(</span><span class="s1">&#39;initial&#39;</span><span class="p">)</span>
    <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10000000</span><span class="p">)]</span>
    <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10000000</span><span class="p">)]</span>
    <span class="n">show_memory_info</span><span class="p">(</span><span class="s1">&#39;after a, b created&#39;</span><span class="p">)</span>
    <span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
    <span class="n">b</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

<span class="n">func</span><span class="p">()</span>
<span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
<span class="n">show_memory_info</span><span class="p">(</span><span class="s1">&#39;finished&#39;</span><span class="p">)</span>

<span class="c1">########## 输出 ##########</span>
<span class="n">initial</span> <span class="n">memory</span> <span class="n">used</span><span class="p">:</span> <span class="mf">26.16796875</span> <span class="n">MB</span>
<span class="n">after</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="n">created</span> <span class="n">memory</span> <span class="n">used</span><span class="p">:</span> <span class="mf">802.03515625</span> <span class="n">MB</span>
<span class="n">finished</span> <span class="n">memory</span> <span class="n">used</span><span class="p">:</span> <span class="mf">27.5</span> <span class="n">MB</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="leetcode-python">
<h1>64、开始刷Leetcode之旅（Python版本）<a class="headerlink" href="#leetcode-python" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen</p>
<p>从大一写Python文章，到现在其都有上百篇，现在到了六十四，我觉得这个时候应该去刷题了，其实很多学Python的都不是专科的，都是给培训机构宣传牛逼，其实在编程语言中，Python是最简单，最没有难度的编程语言。我在之后的文章都更新数据结构和Leetcode。都用Python解决的方法。其实Leetcode上的一部分题我都基本刷过，那么我就开始吧。</p>
<div class="section" id="leetcode">
<h2>注册Leetcode账号<a class="headerlink" href="#leetcode" title="永久链接至标题">¶</a></h2>
<p>目前Leetcod有国际和中文的两个版本，下图就是我的中文版本，刷的不够，其实我也挺菜的。这个是中文的网址：https://leetcode-cn.com/problemset/all/
<img alt="https://img-blog.csdnimg.cn/20200605154056199.png" src="https://img-blog.csdnimg.cn/20200605154056199.png" /></p>
<p>下图就是我的国际版本，其实我主要在国际版混日子，刷了100多题，其实我很菜的。这是它的官网，https://leetcode.com。
<img alt="https://img-blog.csdnimg.cn/20200605154019683.png" src="https://img-blog.csdnimg.cn/20200605154019683.png" /></p>
<p>不同点，非中国区的人多点，做完了也可以参考下老外是用什么思路做的，挺好的。所以你比要到非中国区，看看老外是怎么干的。</p>
</div>
<div class="section" id="pycharmleetcode">
<h2>Pycharm装Leetcode插件<a class="headerlink" href="#pycharmleetcode" title="永久链接至标题">¶</a></h2>
<p>直接打开Pycharm，依次点击File-Settings-Plugins-Maketplace ，然后在搜索框输入leetcode，就会显示我们的leetcode editor插件,点击Install，跳出的界面点检accept,之后等待安装好就行了</p>
<p>我这个是安装好的了。
<img alt="https://img-blog.csdnimg.cn/20200605155930517.png" src="https://img-blog.csdnimg.cn/20200605155930517.png" /></p>
<p>如果你用vscode也是一样，给我装vscode插件。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200605160057766.png" src="https://img-blog.csdnimg.cn/20200605160057766.png" /></p>
<p>因为，我习惯Python用Pycharm，Java用IDEA，前端用vscode。所以这Runsen使用Pycharm。</p>
<p>然后就是登陆我的Leetcode账号。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200605160401821.png" src="https://img-blog.csdnimg.cn/20200605160401821.png" /></p>
<p>然后就是登录你的账号。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200605160506779.png" src="https://img-blog.csdnimg.cn/20200605160506779.png" /></p>
<p>点击右下角，选择刷新或者加载按钮，就可以获取到leetcode中题库了，根据颜色可以区分题目的难易程度:
绿色-中等；
黄色-简单;
红色-困难</p>
<p><img alt="https://img-blog.csdnimg.cn/20200605160638614.png" src="https://img-blog.csdnimg.cn/20200605160638614.png" /></p>
<p>更详细的使用说明参考文档:https://github.com/shuzijun/leetcode-editor</p>
</div>
<div class="section" id="id396">
<h2>怎么刷Leetcode<a class="headerlink" href="#id396" title="永久链接至标题">¶</a></h2>
<div class="section" id="id397">
<h3>以前菜鸡的我做法<a class="headerlink" href="#id397" title="永久链接至标题">¶</a></h3>
<p>以前Runsen的做法：</p>
<ol class="simple">
<li>打开leetcode</li>
<li>启动Pycharm</li>
<li>开始思考，冷静分析</li>
<li>打开leetcode官网的评论区答案，寻找跟我一样的菜逼</li>
<li>满意离开评论区</li>
</ol>
<p>上面其实都是像之前的我，都是菜鸡，其实现在我还是菜鸡。</p>
</div>
<div class="section" id="id398">
<h3>分类归纳/总结<a class="headerlink" href="#id398" title="永久链接至标题">¶</a></h3>
<p>刷Leetcode，必须分类归纳/总结</p>
<p>（1）、数组和相关题型</p>
<p>对于算法题，还是有很多种题型需要去总结的，如果你懂这个题型，以后遇到类似的题，相信很快就能做出来的。有哪些题型可以总结呢？答是非常多，例如：</p>
<p>（1）、给你一个非负数的数组，求最大子数组和的长度</p>
<p>这算是一个题型，关于这个题型，有很多种变形、拓展，这里建议一起归纳总结，例如：</p>
<p>（2）、刚才给的数组是非负数的，现在变一下，给的数组是可正可负。</p>
<p>还能继续拓展吗？答是可以的，例如：</p>
<p>（3）、给你个矩阵（即二维数组），求最大子矩阵和的面积</p>
<p>还有吗？有，例如刚才是求最大和，现在我改成求最大乘积。</p>
<p>我其实是想告诉你，对于前期的学习，我建议分类刷题，总结题型，像我上面举的这些例子，遇到相似的，就直接可以秒杀了，因为这类题，没啥边界或者规律。</p>
<p>关于题型的，还是很多的，我这里无法一一给你列举，只能靠你刷题的过程中，进行分类、总结。不过我可以给你推荐一些资料，后面推荐。下面我在说一些题型吧。</p>
</div>
<div class="section" id="id399">
<h3>三分学七分练<a class="headerlink" href="#id399" title="永久链接至标题">¶</a></h3>
<p>三分学七分练，这是我从极客时间的覃超，前Facebook工程师，传授的方法。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200605161852501.png" src="https://img-blog.csdnimg.cn/20200605161852501.png" /></p>
<p>俗话说：学钢琴，三分学，七分练。其中练习是最为重要的一个环节，想学好钢琴必须得时常练习且多多益善。</p>
<p>所以刷Leetcode的最大的弊端都是：缺乏练习。</p>
</div>
</div>
<div class="section" id="id400">
<h2>两数相加<a class="headerlink" href="#id400" title="永久链接至标题">¶</a></h2>
<p>那么我们就开始干他，Leetcode中的Hello World就是两数相加。</p>
<p>这个题是我2018年遇见了，现在2020年半，两年多时间。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#给定一个整数数组 nums 和一个目标值 target，请你在该数组中找出和为目标值的那 两个 整数，并返回他们的数组下标。 </span>
<span class="c1">#</span>
<span class="c1"># 你可以假设每种输入只会对应一个答案。但是，数组中同一个元素不能使用两遍。 </span>
<span class="c1">#</span>
<span class="c1"># 示例: </span>
<span class="c1">#</span>
<span class="c1"># 给定 nums = [2, 7, 11, 15], target = 9</span>
<span class="c1">#</span>
<span class="c1">#因为 nums[0] + nums[1] = 2 + 7 = 9</span>
<span class="c1">#所以返回 [0, 1]</span>
<span class="c1"># </span>
<span class="c1"># Related Topics 数组 哈希表</span>
</pre></div>
</div>
<p>其实这一题真的很简单，无非就是将“昂贵”的时间复杂度转换成“廉价”的空间复杂度，把双重遍历，变成一次遍历。</p>
<p>这里最佳的方法就是使用字典。下面是我去年的代码，就是三种的解决方法。</p>
<p>列表解法</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">twoSum_1</span><span class="p">(</span> <span class="n">nums</span><span class="p">,</span> <span class="n">target</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)):</span>
        <span class="n">onenum</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">twonum</span> <span class="o">=</span> <span class="n">target</span> <span class="o">-</span> <span class="n">onenum</span>
        <span class="k">if</span> <span class="n">twonum</span> <span class="ow">in</span> <span class="n">nums</span><span class="p">:</span>
            <span class="n">j</span> <span class="o">=</span> <span class="n">nums</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">twonum</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">j</span><span class="p">:</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">result</span>
</pre></div>
</div>
<p>字典解法</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">twoSum_2</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span><span class="n">target</span><span class="p">):</span>
    <span class="nb">dict</span><span class="o">=</span><span class="p">{}</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)):</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">target</span><span class="o">-</span><span class="n">m</span> <span class="ow">in</span> <span class="nb">dict</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="n">target</span><span class="o">-</span><span class="n">m</span><span class="p">],</span><span class="n">i</span><span class="p">]</span>
        <span class="nb">dict</span><span class="p">[</span><span class="n">m</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
</pre></div>
</div>
<p>字典推导式</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">twosum_3</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span><span class="n">target</span><span class="p">):</span>
    <span class="n">l</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
    <span class="nb">dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">l</span><span class="p">)}</span>
    <span class="nb">print</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">l</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">target</span> <span class="o">-</span> <span class="n">a</span>
        <span class="k">if</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">dict</span> <span class="ow">and</span> <span class="n">j</span> <span class="o">!=</span> <span class="nb">dict</span><span class="p">[</span><span class="n">b</span><span class="p">]:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">j</span><span class="p">,</span><span class="nb">dict</span><span class="p">[</span><span class="n">b</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="section" id="id401">
<h2>关于学习课程<a class="headerlink" href="#id401" title="永久链接至标题">¶</a></h2>
<p>在之前深入Leetcode，学了下面的课程</p>
<p><img alt="https://img-blog.csdnimg.cn/2020060516351882.png" src="https://img-blog.csdnimg.cn/2020060516351882.png" />
<img alt="https://img-blog.csdnimg.cn/20200605163542636.png" src="https://img-blog.csdnimg.cn/20200605163542636.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20200605163457240.png" src="https://img-blog.csdnimg.cn/20200605163457240.png" /></p>
<p>因此下面的文章主要是总结回顾之前学到东西，只有不断地反复学习，才有新的突破</p>
</div>
</div>
<div class="section" id="id402">
<h1>65、Leetcode数组系列（上篇）<a class="headerlink" href="#id402" title="永久链接至标题">¶</a></h1>
<p>&#64;Author：Runsen</p>
<p>从大一写Python文章，到现在其都有上百篇，现在到了六十五，今日主要写的是数据结构中的数组 Array</p>
<div class="section" id="array">
<h2>数组 Array<a class="headerlink" href="#array" title="永久链接至标题">¶</a></h2>
<p>在平时使用最多的恐怕就是数组了吧，它是使用最广泛的一种数据结构，它是相同数据类型（可以是基本类型也可以是自定义类型）的元素按一定顺序排列的集合，它们在内存中按照这个先后顺序连续存放在一起。有一维数组，二维数组，多维数组。 通俗的理解就是我们一般把一群羊或者一群牛放在一个圈里面，这个圈就相当于数组容器，每一个羊相当于一个元素。</p>
<p><img alt="https://img-blog.csdnimg.cn/20190315151507193.jpg" src="https://img-blog.csdnimg.cn/20190315151507193.jpg" /></p>
<ul class="simple">
<li>查询 Access: O(1)</li>
<li>插入 Insert: 平均 O(n)</li>
<li>删除 Delete: 平均 O(n)</li>
</ul>
<p>优点：</p>
<ol class="simple">
<li>有序</li>
<li>可以进行下标操作，随机访问效率很高，时间复杂度可以达到O(1)</li>
<li>添加速度快
缺点：</li>
<li>删除，删除第一个，删除最后一个，选择一个位置删除这些都不方便操作</li>
<li>在数组起始位置处，插入数据和删除数据效率低，时间复杂度平均 O(n)</li>
<li>内存空间要求高，必须有足够的连续的内存空间</li>
</ol>
<p>这是争哥的春节天天练，那时我太菜了。 没搞。
<img alt="https://img-blog.csdnimg.cn/20200605164322651.png" src="https://img-blog.csdnimg.cn/20200605164322651.png" /></p>
</div>
<div class="section" id="id403">
<h2>三数之和<a class="headerlink" href="#id403" title="永久链接至标题">¶</a></h2>
<p>leetcode 三数之和，这是Leecode的第十五道题目。</p>
<p>https://leetcode-cn.com/problems/3sum/Majority</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#给你一个包含 n 个整数的数组 nums，判断 nums 中是否存在三个元素 a，b，c ，使得 a + b + c = 0 ？请你找出所有满足条件且不重复的三元组。 </span>
<span class="c1">#</span>
<span class="c1"># 注意：答案中不可以包含重复的三元组。 </span>

<span class="c1"># 示例： </span>
<span class="c1">#</span>
<span class="c1"># 给定数组 nums = [-1, 0, 1, 2, -1, -4]，</span>
<span class="c1">#</span>
<span class="c1">#满足要求的三元组集合为：</span>
<span class="c1">#[</span>
<span class="c1">#  [-1, 0, 1],</span>
<span class="c1">#  [-1, -1, 2]</span>
<span class="c1">#]</span>
<span class="c1">#注意：答案中不可以包含重复的三元组。</span>
</pre></div>
</div>
<p>三数之和就当两数来干，两次遍历，判断第三个数在不在，就是时间复杂度$O(n^2)$。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">threeSum</span><span class="p">(</span><span class="n">nums</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">nums</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
    <span class="n">a</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
            <span class="k">if</span> <span class="o">-</span><span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="ow">in</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:]:</span>
                <span class="n">array</span> <span class="o">=</span> <span class="p">[</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="o">-</span><span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">])]</span>
                <span class="k">if</span> <span class="n">array</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
<span class="n">nums</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">threeSum</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">]))</span>
</pre></div>
</div>
<p>但是会超出时间，其实三数之和用的不是这样子的，做法是双指针。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200605170142310.png" src="https://img-blog.csdnimg.cn/20200605170142310.png" /></p>
<p>我们可以先把这个数组进行从小到大的排序，因为排序的复杂度$O(NlogN) $是远远小于$n^2$的，排序后，你会发现，由于三数之和是等于零，那么如果当前这个元素是大于零的话，而且，这个数组是按照从小到大排序的话，那么当前这个元素作为起点的集合是为空的，因为后面的元素都是比这个元素大的元素，是不可相加等于零。</p>
<p>由此我们可以节省一些复杂度，当然，我们进行排序的时候，是要经历一些复杂度的，但这远远小于n的平方，所以我们这个做法还是比较快的。</p>
<p>然后我们在确定起点之后，通过双指针去遍历其他两个元素。</p>
<p>看不懂看下面的图片
<img alt="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9waWMubGVldGNvZGUtY24uY29tL2UzZmE1OWNiZjNhYzEyMDBhMjZhNDM1ZDAwZTg3MmY3OGVjOTQwYWZkNGVlMTk3N2IwNGMxZjRkY2E0NWMxNGUtMi5naWY" src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9waWMubGVldGNvZGUtY24uY29tL2UzZmE1OWNiZjNhYzEyMDBhMjZhNDM1ZDAwZTg3MmY3OGVjOTQwYWZkNGVlMTk3N2IwNGMxZjRkY2E0NWMxNGUtMi5naWY" /></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">threeSum</span><span class="p">(</span><span class="n">nums</span><span class="p">):</span>
    <span class="n">nums</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
    <span class="c1"># [-4, -1, -1, 0, 1, 2]</span>
    <span class="n">res_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c1"># 头部循环查找</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]:</span>
            <span class="c1"># 最左端</span>
            <span class="n">l</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="c1"># 最右端</span>
            <span class="n">r</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
            <span class="k">while</span> <span class="n">l</span> <span class="o">&lt;</span> <span class="n">r</span><span class="p">:</span>  <span class="c1"># 正在查找</span>
                <span class="n">three_sum</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">nums</span><span class="p">[</span><span class="n">l</span><span class="p">]</span> <span class="o">+</span> <span class="n">nums</span><span class="p">[</span><span class="n">r</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">three_sum</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">res_list</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">nums</span><span class="p">[</span><span class="n">l</span><span class="p">],</span> <span class="n">nums</span><span class="p">[</span><span class="n">r</span><span class="p">]])</span>
                    <span class="n">l</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># 右移一位</span>
                    <span class="n">r</span> <span class="o">-=</span> <span class="mi">1</span>  <span class="c1"># 左移一位</span>
                    <span class="k">while</span> <span class="n">l</span> <span class="o">&lt;</span> <span class="n">r</span> <span class="ow">and</span> <span class="n">nums</span><span class="p">[</span><span class="n">l</span><span class="p">]</span> <span class="o">==</span> <span class="n">nums</span><span class="p">[</span><span class="n">l</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]:</span>
                        <span class="c1"># 从左往右，相同数值直接跳过</span>
                        <span class="n">l</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">while</span> <span class="n">r</span> <span class="o">&gt;</span> <span class="n">l</span> <span class="ow">and</span> <span class="n">nums</span><span class="p">[</span><span class="n">r</span><span class="p">]</span> <span class="o">==</span> <span class="n">nums</span><span class="p">[</span><span class="n">r</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]:</span>
                        <span class="c1"># 从右往左，相同数值直接跳过</span>
                        <span class="n">r</span> <span class="o">-=</span> <span class="mi">1</span>
                <span class="k">elif</span> <span class="n">three_sum</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="c1"># 大于零，右边数值大，左移</span>
                    <span class="n">r</span> <span class="o">-=</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># 小于零，左边数值小，右移</span>
                    <span class="n">l</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">res_list</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200605171410159.png" src="https://img-blog.csdnimg.cn/20200605171410159.png" /></p>
</div>
<div class="section" id="id404">
<h2>求众数<a class="headerlink" href="#id404" title="永久链接至标题">¶</a></h2>
<p>题目来源于 LeetCode 上第 169 号问题：求众数（求数组中超过一半的数字）。题目难度为 Easy</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#给定一个大小为 n 的数组，找到其中的多数元素。多数元素是指在数组中出现次数大于 ⌊ n/2 ⌋ 的元素。 </span>
<span class="c1">#</span>
<span class="c1"># 你可以假设数组是非空的，并且给定的数组总是存在多数元素。 </span>
<span class="c1"># 示例 1: </span>
<span class="c1">#</span>
<span class="c1"># 输入: [3,2,3]</span>
<span class="c1">#输出: 3 </span>
<span class="c1">#</span>
<span class="c1"># 示例 2: </span>
<span class="c1">#</span>
<span class="c1"># 输入: [2,2,1,1,1,2,2]</span>
<span class="c1">#输出: 2</span>
<span class="c1"># </span>
<span class="c1"># Related Topics 位运算 数组 分治算法</span>
</pre></div>
</div>
<p>方法：遍历整个数组，出现次数比其他数字加起来出现次数还多的元素返回。</p>
<p>最简单的方法就排序，取出 ⌊ n/2 ⌋ 的元素</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">majorityElement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nums</span><span class="p">):</span>
    <span class="n">nums</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">nums</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)]</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200605172827746.png" src="https://img-blog.csdnimg.cn/20200605172827746.png" /></p>
<p>然后一种计数的方法，用字典来储存起来。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">majorityElement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nums</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :type nums: List[int]</span>
<span class="sd">        :rtype: int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">num</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">nums</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">num</span><span class="p">:</span>
                <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">num</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span><span class="n">key</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200605174037717.png" src="https://img-blog.csdnimg.cn/20200605174037717.png" /></p>
<p>还可以直接使用collections</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">collections</span>

<span class="k">def</span> <span class="nf">majorityElement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nums</span><span class="p">):</span>
     <span class="k">return</span>  <span class="n">collections</span><span class="o">.</span><span class="n">Counter</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span><span class="o">.</span><span class="n">most_common</span><span class="p">()[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200605174535675.png" src="https://img-blog.csdnimg.cn/20200605174535675.png" /></p>
</div>
<div class="section" id="id405">
<h2>求缺失的第一个正数<a class="headerlink" href="#id405" title="永久链接至标题">¶</a></h2>
<p>题目来源于 LeetCode 上第 41 号问题：求缺失的第一个正数</p>
<p>中文版：https://leetcode-cn.com/problems/first-missing-positive/</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#给你一个未排序的整数数组，请你找出其中没有出现的最小的正整数。 </span>
<span class="c1"># 示例 1: </span>
<span class="c1">#</span>
<span class="c1"># 输入: [1,2,0]</span>
<span class="c1">#输出: 3</span>
<span class="c1">#</span>
<span class="c1"># 示例 2: </span>
<span class="c1">#</span>
<span class="c1"># 输入: [3,4,-1,1]</span>
<span class="c1">#输出: 2</span>
<span class="c1"># </span>
<span class="c1"># 示例 3: </span>
<span class="c1">#</span>
<span class="c1"># 输入: [7,8,9,11,12]</span>
<span class="c1">#输出: 1</span>
<span class="c1"># 提示： </span>
<span class="c1">#</span>
<span class="c1"># 你的算法的时间复杂度应为O(n)，并且只能使用常数级别的额外空间。 </span>
<span class="c1"># Related Topics 数组</span>
</pre></div>
</div>
<p>这道题的难度在于时间和空间的限制。</p>
<p>若没有时间的限制，可以直接排序后遍历查找。</p>
<p>若没有空间的限制，可以创建辅助空间后记录。</p>
<p>最简单的做法就是出现就+1。</p>
<p>题目的要求是找到没有出现过的最小正整数，最小的正整数是1，如果1没出现过，那么答案就是1，否则，自增1，继续看2是否在列表中。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">firstMissingPositive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nums</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">res</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">while</span> <span class="n">res</span> <span class="ow">in</span> <span class="n">nums</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">res</span>

</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200605181200362.png" src="https://img-blog.csdnimg.cn/20200605181200362.png" /></p>
<p>把数组里 所有&gt;=1的元素 放在它该放的位置！
哪里是该放的位置? ：放在值减一的位置
例如，数组［4 1 5 -1 2］。
4应该放在下标为3(4-1)的位置，交换后
［-1 1 5 4 2］
1应该放在下标为0(1-0)的位置，交换后
［1 -1 5 4 2］
以此类推
［1 -1 2 4 5］
［1 2 -1 4 5］
最后遍历，第三个位置(下标为2) 本来应放3，但此时是-1，所以返回3，答案就是3。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">firstMissingPositive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nums</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">n</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
        <span class="n">res_list</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">n</span>
        <span class="c1"># print(res_list)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        	<span class="c1">#  要判断这个数是否可以被交换</span>
            <span class="k">if</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;=</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">&lt;=</span><span class="n">n</span><span class="p">:</span>
                <span class="n">res_list</span><span class="p">[</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="c1"># print(res_list)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">res_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span>
        <span class="k">return</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200605183017232.png" src="https://img-blog.csdnimg.cn/20200605183017232.png" /></p>
</div>
</div>
<div class="section" id="id406">
<h1>66、Leetcode数组系列（中篇）<a class="headerlink" href="#id406" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen</p>
<p>今日，我决定继续更新Python教程，今天就见识下刷Leetcode的快乐。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200610160923281.png" src="https://img-blog.csdnimg.cn/20200610160923281.png" /></p>
<p>Runsen先打开Pycharm，</p>
<div class="section" id="offer-03">
<h2>剑指 Offer 系列 面试题03.：数组中重复的数字<a class="headerlink" href="#offer-03" title="永久链接至标题">¶</a></h2>
<p>先来一个简单的，见面礼。题目来源于 LeetCode 上的剑指 Offer 系列 面试题03. 数组中重复的数字。</p>
<p>题目链接：https://leetcode-cn.com/problems/shu-zu-zhong-zhong-fu-de-shu-zi-lcof/</p>
<div class="highlight-go notranslate"><div class="highlight"><pre><span></span>#找出数组中重复的数字。 
#在一个长度为 n 的数组 nums 里的所有数字都在 0～n-1 的范围内。数组中某些数字是重复的，但不知道有几个数字重复了，也不知道每个数字重复了几次。请找出数组中任意一个重复的数字。 
#
# 示例 1： 
#
# 输入：
#[2, 3, 1, 0, 2, 5, 3]
#输出：2 或 3 
#
# 限制： 
# 2 &lt;= n &lt;= 100000 
# Related Topics 数组 哈希表
</pre></div>
</div>
<p>先进行数据的排序，然后看相邻元素是否有相同的，有直接return。 不过很慢，时间O(nlogn)了，空间O(1)，但是代码很简单。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">@Author： Runsen</span>
<span class="sd">@微信公众号： Python之王</span>
<span class="sd">@博客： https://blog.csdn.net/weixin_44510615</span>
<span class="sd">@Date： 2020/6/10</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="k">def</span> <span class="nf">findRepeatNumber</span><span class="p">(</span><span class="n">nums</span><span class="p">):</span>
    <span class="n">nums</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>  <span class="o">==</span>  <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]:</span>
            <span class="k">return</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
<span class="n">nums</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">findRepeatNumber</span><span class="p">(</span><span class="n">nums</span><span class="p">))</span>
<span class="mi">2</span>
</pre></div>
</div>
<p>如果用哈希表，就是字典，遍历整个数组,当这个数字没有出现过字典的时候将其加入进去,如果在哈希表中则直接返回即可。时间复杂度O(n)，空间复杂度O(n)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">findRepeatNumber1</span><span class="p">(</span><span class="n">nums</span><span class="p">):</span>
    <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">nums</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span>  <span class="ow">in</span> <span class="nb">dict</span><span class="p">:</span>
            <span class="nb">dict</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">i</span>
<span class="n">nums</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">findRepeatNumber1</span><span class="p">(</span><span class="n">nums</span><span class="p">))</span>
<span class="mi">2</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200610163602581.png" src="https://img-blog.csdnimg.cn/20200610163602581.png" /></p>
</div>
<div class="section" id="leetcode-5">
<h2>LeetCode 第 5 题：最长回文子串<a class="headerlink" href="#leetcode-5" title="永久链接至标题">¶</a></h2>
<p>题目链接：https://leetcode-cn.com/problems/longest-palindromic-substring/</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#给定一个字符串 s，找到 s 中最长的回文子串。你可以假设 s 的最大长度为 1000。 </span>
<span class="c1">#</span>
<span class="c1"># 示例 1： </span>
<span class="c1">#</span>
<span class="c1"># 输入: &quot;babad&quot;</span>
<span class="c1">#输出: &quot;bab&quot;</span>
<span class="c1">#注意: &quot;aba&quot; 也是一个有效答案。</span>
<span class="c1"># 示例 2： </span>
<span class="c1">#</span>
<span class="c1"># 输入: &quot;cbbd&quot;</span>
<span class="c1">#输出: &quot;bb&quot;</span>
</pre></div>
</div>
<p>定义一个判读回文子串的方法
遍历字符串比较回文子串的长度</p>
<p>比如说字符串abacd，反过来是dcaba，它俩的最长公共子串是aba，也就是最长回文子串。</p>
<p>但是这个思路是错误的，比如说字符串aacxycaa，反转之后是aacyxcaa，最长公共子串是aac，但是最长回文子串应该是aa。</p>
<p>算法一：枚举s所有子串，满足回文的同时，满足最长
结果：$O（N^3）$，同学请你出门右转</p>
<p>算法二：遍历s的每个字符，（奇数）以该字符为中心，向左向右同时遍历，（偶数）以两个字符为中心，向左向右同时遍历，当不满足回文时停止，最终筛选最长回文串
结果：$O（N^2）$，嗯，还可以，那你完整写出来吧</p>
<p>算法三：Manacher算法，为最长回文子串而生，O（N），了解一下就放弃。</p>
<p>回文中心的两侧互为镜像。因此，回文可以从他的中心展开，并且只有2n-1个这样的中心(一个元素为中心的情况有n个，两个元素为中心的情况有n-1个)。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 回文的长度是奇数还是偶数的情况，如果是奇数形回文，就以当前字符为中心左右两边寻找，例如回文&quot;bab&quot;；如果是偶数形回文，需要两个字符，并且这两个字符是相等的，则需要以当前字符和其相邻的字符为中心向左右两边寻找，例如回文&quot;abba&quot;。</span>
<span class="k">def</span> <span class="nf">longestPalindrome</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="n">res</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)):</span>
        <span class="c1"># 奇数形回文, like &quot;aba&quot;</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="n">helper</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tmp</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">res</span><span class="p">):</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">tmp</span>
        <span class="c1"># 偶数形回文, like &quot;abba&quot;</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="n">helper</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tmp</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">res</span><span class="p">):</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">tmp</span>
    <span class="k">return</span> <span class="n">res</span>

<span class="k">def</span> <span class="nf">helper</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
    <span class="c1"># 中心扩散</span>
    <span class="k">while</span> <span class="n">l</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">r</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="ow">and</span> <span class="n">s</span><span class="p">[</span><span class="n">l</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">r</span><span class="p">]:</span>
        <span class="n">l</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="n">r</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">s</span><span class="p">[</span><span class="n">l</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:</span><span class="n">r</span><span class="p">]</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">longestPalindrome</span><span class="p">(</span><span class="s1">&#39;abasfggttg&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200610172358702.png" src="https://img-blog.csdnimg.cn/20200610172358702.png" /></p>
</div>
<div class="section" id="leetcode-53">
<h2>LeetCode 第 53 题：最大子序和<a class="headerlink" href="#leetcode-53" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#给定一个整数数组 nums ，找到一个具有最大和的连续子数组（子数组最少包含一个元素），返回其最大和。 </span>
<span class="c1">#</span>
<span class="c1"># 示例: </span>
<span class="c1">#</span>
<span class="c1"># 输入: [-2,1,-3,4,-1,2,1,-5,4],</span>
<span class="c1">#输出: 6</span>
<span class="c1">#解释: 连续子数组 [4,-1,2,1] 的和最大，为 6。</span>
</pre></div>
</div>
<p>定义当前子序和以及最大子序和为数组的一个元素；</p>
<p>遍历整数数组，比较当前子序和的值及当前遍历的值，取较大值重置赋值给当前子序和 cur_sum；</p>
<p>同时比较当前子序和及最大子序和的值，取较大值重置赋值给最大子序和 max_sum；</p>
<p>遍历结束，返回最大子序和的值 max_sum。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">maxSubArray</span><span class="p">(</span> <span class="n">nums</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;查找连续子数组的最大和</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="c1"># 比较当前子序和，最大子序和，返回最大值</span>
    <span class="c1"># 定义当前子序和以及最大子序和为第一个元素</span>
    <span class="n">cur_sum</span> <span class="o">=</span> <span class="n">max_sum</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="c1"># 遍历整数数组</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)):</span>
        <span class="c1"># 比较当前值和当前子序和的值，取较大值</span>
        <span class="n">cur_sum</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">x</span><span class="p">],</span> <span class="n">cur_sum</span> <span class="o">+</span> <span class="n">nums</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
        <span class="c1"># 比较当前值和定义的最大子序和值，将最大值重置赋值给 max_sum</span>
        <span class="n">max_sum</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">cur_sum</span><span class="p">,</span> <span class="n">max_sum</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">max_sum</span>
<span class="k">print</span><span class="p">(</span><span class="n">maxSubArray</span><span class="p">([</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">]))</span>
<span class="mi">6</span>
</pre></div>
</div>
</div>
<div class="section" id="leetcode-88">
<h2>LeetCode 第88题 :合并两个有序数组<a class="headerlink" href="#leetcode-88" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#给你两个有序整数数组 nums1 和 nums2，请你将 nums2 合并到 nums1 中，使 nums1 成为一个有序数组。 </span>
<span class="c1"># 初始化 nums1 和 nums2 的元素数量分别为 m 和 n 。 </span>
<span class="c1"># 你可以假设 nums1 有足够的空间（空间大小大于或等于 m + n）来保存 nums2 中的元素。 </span>
<span class="c1"># 输入:</span>
<span class="c1">#nums1 = [1,2,3,0,0,0], m = 3</span>
<span class="c1">#nums2 = [2,5,6],       n = 3</span>
<span class="c1">#</span>
<span class="c1">#输出: [1,2,2,3,5,6] </span>



</pre></div>
</div>
<p>合并两个列表再排序，简单。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">merge</span><span class="p">(</span><span class="n">nums1</span><span class="p">,</span> <span class="n">nums2</span><span class="p">):</span>
    <span class="n">nums1</span><span class="p">[:]</span> <span class="o">=</span>  <span class="nb">sorted</span><span class="p">(</span><span class="n">nums1</span><span class="p">[:</span><span class="n">m</span><span class="p">]</span> <span class="o">+</span> <span class="n">nums2</span><span class="p">[:</span><span class="n">n</span><span class="p">])</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200610175523332.png" src="https://img-blog.csdnimg.cn/20200610175523332.png" /></p>
<p>因为本身就是有序，通过 双指针法 达到$O(n + m)$的时间复杂度。</p>
<p>最直接的算法实现是将指针p1 置为 nums1的开头， p2为 nums2的开头，在每一步将最小值放入输出数组中。</p>
<p>由于 nums1 是用于输出的数组，需要将nums1中的前m个元素放在其他地方，也就需要 $O(m)$的空间复杂度。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">merge</span><span class="p">(</span><span class="n">nums1</span><span class="p">,</span><span class="n">m</span><span class="p">,</span> <span class="n">nums2</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
    <span class="c1"># Make a copy of nums1.</span>
    <span class="n">nums1_copy</span> <span class="o">=</span> <span class="n">nums1</span><span class="p">[:</span><span class="n">m</span><span class="p">]</span>
    <span class="n">nums1</span><span class="p">[:]</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># Two get pointers for nums1_copy and nums2.</span>
    <span class="n">p1</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">p2</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># Compare elements from nums1_copy and nums2</span>
    <span class="c1"># and add the smallest one into nums1.</span>
    <span class="k">while</span> <span class="n">p1</span> <span class="o">&lt;</span> <span class="n">m</span> <span class="ow">and</span> <span class="n">p2</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">nums1_copy</span><span class="p">[</span><span class="n">p1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">nums2</span><span class="p">[</span><span class="n">p2</span><span class="p">]:</span>
            <span class="n">nums1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nums1_copy</span><span class="p">[</span><span class="n">p1</span><span class="p">])</span>
            <span class="n">p1</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">nums1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nums2</span><span class="p">[</span><span class="n">p2</span><span class="p">])</span>
            <span class="n">p2</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="c1"># if there are still elements to add</span>
    <span class="k">if</span> <span class="n">p1</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">:</span>
        <span class="n">nums1</span><span class="p">[</span><span class="n">p1</span> <span class="o">+</span> <span class="n">p2</span><span class="p">:]</span> <span class="o">=</span> <span class="n">nums1_copy</span><span class="p">[</span><span class="n">p1</span><span class="p">:]</span>
    <span class="k">if</span> <span class="n">p2</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
        <span class="n">nums1</span><span class="p">[</span><span class="n">p1</span> <span class="o">+</span> <span class="n">p2</span><span class="p">:]</span> <span class="o">=</span> <span class="n">nums2</span><span class="p">[</span><span class="n">p2</span><span class="p">:]</span>
    <span class="k">return</span> <span class="n">nums1</span>

<span class="n">nums1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="n">nums2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">merge</span><span class="p">(</span><span class="n">nums1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="n">nums2</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>

</pre></div>
</div>
</div>
<div class="section" id="leetcode-118">
<h2>LeetCode 第118题 :杨辉三角<a class="headerlink" href="#leetcode-118" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#给定一个非负整数 numRows，生成杨辉三角的前 numRows 行。 </span>
<span class="c1"># 在杨辉三角中，每个数是它左上方和右上方的数的和。 </span>
<span class="c1">#</span>
<span class="c1"># 示例: </span>
<span class="c1">#</span>
<span class="c1"># 输入: 5</span>
<span class="c1">#输出:</span>
<span class="c1">#[</span>
<span class="c1">#     [1],</span>
<span class="c1">#    [1,1],</span>
<span class="c1">#   [1,2,1],</span>
<span class="c1">#  [1,3,3,1],</span>
<span class="c1"># [1,4,6,4,1]</span>
<span class="c1">#] </span>
<span class="c1"># Related Topics 数组</span>
</pre></div>
</div>
<p>第一行第二行都是1，每行第一个和最后一个都为1，假设任意一个位置的数x，索引坐标是(m,n)，则x就是该数 正上方的数 和 左上方那个数 之和。即(m-1,n),(m-1,n-1)两数和。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">generate</span><span class="p">(</span><span class="n">numRows</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">numRows</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="p">[]</span>
    <span class="n">triangle</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">]]</span>
    <span class="k">if</span> <span class="n">numRows</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="k">return</span> <span class="n">triangle</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">numRows</span><span class="p">):</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
            <span class="n">tmp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">triangle</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">triangle</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="p">])</span>
        <span class="n">tmp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">triangle</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tmp</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">triangle</span>
<span class="k">print</span><span class="p">(</span><span class="n">generate</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>

</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200610182259721.png" src="https://img-blog.csdnimg.cn/20200610182259721.png" /></p>
<p>如果本文对你有帮助，大家可以点赞转发一波，有错误大家可以评论指出，感谢！</p>
</div>
</div>
<div class="section" id="id407">
<h1>67、Leetcode数组系列（下篇）<a class="headerlink" href="#id407" title="永久链接至标题">¶</a></h1>
<p>&#64;Author：Runsen</p>
<p>今日，我决定继续更新Python教程，今天就见识下刷Leetcode的快乐。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200610160923281.png" src="https://img-blog.csdnimg.cn/20200610160923281.png" /></p>
<p>Runsen先打开Pycharm，开始继续嗨起来</p>
<div class="section" id="offer-11">
<h2>剑指 Offer 系列 面试题11 - 旋转数组的最小数字<a class="headerlink" href="#offer-11" title="永久链接至标题">¶</a></h2>
<p>先来一个简单的，见面礼。题目来源于 LeetCode 上的面试题11：旋转数组的最小数字</p>
<p>题目链接：https://leetcode-cn.com/problems/xuan-zhuan-shu-zu-de-zui-xiao-shu-zi-lcof/</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#把一个数组最开始的若干个元素搬到数组的末尾，我们称之为数组的旋转。输入一个递增排序的数组的一个旋转，输出旋转数组的最小元素。例如，数组 [3,4,5,1,2] 为 [1,2,3,4,5] 的一个旋转，该数组的最小值为1。 </span>
<span class="c1"># 示例 1： </span>
<span class="c1"># 输入：[3,4,5,1,2]</span>
<span class="c1">#输出：1</span>
<span class="c1"># 示例 2： </span>
<span class="c1"># 输入：[2,2,2,0,1]</span>
<span class="c1">#输出：0</span>
<span class="c1"># 注意：本题与主站 154 题相同：https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array-ii/ </span>
<span class="c1"># Related Topics 二分查找</span>
</pre></div>
</div>
<p>初看题目最直观的解法并不难，直接寻找，我们不难写出如下代码。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">minArray</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">numbers</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span>
</pre></div>
</div>
<p>时间复杂度$O(n)$,空间复杂度$O(1)$。因此这样是不行的
<img alt="https://img-blog.csdnimg.cn/20200613121328523.png" src="https://img-blog.csdnimg.cn/20200613121328523.png" /></p>
<p>考的是：二分查找。二分法的分析我们知道，数组可以分为前后两个递增数组</p>
<ul class="simple">
<li>当<code class="docutils literal notranslate"><span class="pre">numbers[mid]</span> <span class="pre">&gt;</span> <span class="pre">numbers[high]</span></code>时，说明最小值在mid的右边，缩小范围<code class="docutils literal notranslate"><span class="pre">low</span> <span class="pre">=</span> <span class="pre">mid</span> <span class="pre">+</span> <span class="pre">1</span></code></li>
<li>当<code class="docutils literal notranslate"><span class="pre">numbers[mid]</span> <span class="pre">==</span> <span class="pre">numbers[high]</span></code>时，我们不知道最小值的范围，但是可以肯定的是去除<code class="docutils literal notranslate"><span class="pre">numbers[high]</span></code>是没有影响的,缩小范围<code class="docutils literal notranslate"><span class="pre">high</span> <span class="pre">-=</span> <span class="pre">1</span></code></li>
<li>当<code class="docutils literal notranslate"><span class="pre">numbers[mid]</span> <span class="pre">&lt;</span> <span class="pre">numbers[high]</span></code>时，我们知道最小值的不是<code class="docutils literal notranslate"><span class="pre">numbers[mid]]</span></code>就是在mid的左边，缩小范围high = mid</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">minArray</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">numbers</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">l</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">while</span> <span class="n">l</span> <span class="o">&lt;</span> <span class="n">r</span><span class="p">:</span>
            <span class="n">mid</span> <span class="o">=</span> <span class="p">(</span><span class="n">l</span> <span class="o">+</span> <span class="n">r</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
            <span class="k">if</span> <span class="n">numbers</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">numbers</span><span class="p">[</span><span class="n">r</span><span class="p">]:</span>
                <span class="n">l</span> <span class="o">=</span> <span class="n">mid</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">elif</span> <span class="n">numbers</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">numbers</span><span class="p">[</span><span class="n">r</span><span class="p">]:</span>
                <span class="n">r</span> <span class="o">=</span> <span class="n">mid</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">r</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">numbers</span><span class="p">[</span><span class="n">l</span><span class="p">]</span>

</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200613122819300.png" src="https://img-blog.csdnimg.cn/20200613122819300.png" /></p>
</div>
<div class="section" id="ii-0-n-1">
<h2>面试题53 - II. 0～n-1中缺失的数字<a class="headerlink" href="#ii-0-n-1" title="永久链接至标题">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>#一个长度为n-1的递增排序数组中的所有数字都是唯一的，并且每个数字都在范围0～n-1之内。在范围0～n-1内的n个数字中有且只有一个数字不在该数组中，请找出这个数字。 
# 示例 1: 
# 输入: [0,1,3]
#输出: 2
# 示例 2: 
# 输入: [0,1,2,3,4,5,6,7,9]
#输出: 8 
# 限制： 
# 1 &lt;= 数组长度 &lt;= 10000 
# Related Topics 数组 二分查找
</pre></div>
</div>
<p>对于有序数组或者多部分有序数组的查找问题99.999999%都是用二分查找，这道题其实考察的是二分查找的两个常见拓展之一，即查找目标序列的左边界，另一个常见拓展是查找目标序列的右边界。</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">Solution</span><span class="o">:</span>
    <span class="n">def</span> <span class="nf">missingNumber</span><span class="o">(</span><span class="n">self</span><span class="o">,</span> <span class="n">nums</span><span class="o">:</span> <span class="n">List</span><span class="o">[</span><span class="kt">int</span><span class="o">])</span> <span class="o">-&gt;</span> <span class="kt">int</span><span class="o">:</span>
        <span class="n">i</span><span class="o">,</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span> <span class="n">len</span><span class="o">(</span><span class="n">nums</span><span class="o">)</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">j</span><span class="o">:</span>
            <span class="n">m</span> <span class="o">=</span> <span class="o">(</span><span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="o">)</span> <span class="c1">// 2</span>
            <span class="k">if</span> <span class="n">nums</span><span class="o">[</span><span class="n">m</span><span class="o">]</span> <span class="o">==</span> <span class="n">m</span><span class="o">:</span> 
            	<span class="n">i</span> <span class="o">=</span> <span class="n">m</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">else</span><span class="o">:</span> 
            	<span class="n">j</span> <span class="o">=</span> <span class="n">m</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">i</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/2020061912141170.png" src="https://img-blog.csdnimg.cn/2020061912141170.png" /></p>
</div>
<div class="section" id="leetcode-66">
<h2>LeetCode 第 66题：加一<a class="headerlink" href="#leetcode-66" title="永久链接至标题">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>#给定一个由整数组成的非空数组所表示的非负整数，在该数的基础上加一。 
# 最高位数字存放在数组的首位， 数组中每个元素只存储单个数字。 
# 你可以假设除了整数 0 之外，这个整数不会以零开头。 
# 示例 1: 
# 输入: [1,2,3]
#输出: [1,2,4]
#解释: 输入数组表示数字 123。

# 示例 2: 
# 输入: [4,3,2,1]
#输出: [4,3,2,2]
#解释: 输入数组表示数字 4321。
</pre></div>
</div>
<p>一次for循环解决问题，从数组尾部遍历，如果遇到数字不是9就+1，并返回。如果是9，则将当前数字置0，并进入下一轮循环</p>
<p>考虑特殊情况：9999，此时需要检查最后一次for循环的数字是不是0，即digits[0]是否为0，如果是0，则遇到了特殊情况。此时需要在数组最前面加一个数字1，然后返回即可</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">plusOne</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">digits</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">digits</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">digits</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">9</span><span class="p">:</span>
                <span class="n">digits</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">return</span> <span class="n">digits</span>
            <span class="n">digits</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">digits</span>
</pre></div>
</div>
<p>先将数字列表数组转化为数字或者字符串，然后+1，最后将数字转化为数组，并返回</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">plusOne</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">digits</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
        <span class="c1">##先变成一个整的数字，然后做加法，然后转换成str,再转int加到新的list中</span>
        <span class="n">nums_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">digits</span><span class="p">:</span>
            <span class="n">nums_str</span> <span class="o">=</span><span class="n">nums_str</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    
        <span class="n">nums_int</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">nums_str</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span>
        <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">nums_int</span><span class="p">):</span>
            <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">res</span>

		 <span class="c1"># a = [i * 10 ** index for index, i in enumerate(digits[::-1])]</span>
		 <span class="c1"># num = sum(a) + 1</span>
		 <span class="c1"># print(num)</span>
		 <span class="c1"># return [int(x) for x in str(num)]</span>
</pre></div>
</div>
</div>
<div class="section" id="i-i">
<h2>面试题53 - I. 在排序数组中查找数字的次数 I<a class="headerlink" href="#i-i" title="永久链接至标题">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>#统计一个数字在排序数组中出现的次数。 
# 示例 1: 
# 输入: nums = [5,7,7,8,8,10], target = 8
#输出: 2 
# 示例 2: 
# 输入: nums = [5,7,7,8,8,10], target = 6
#输出: 0 
# 限制： 
# 0 &lt;= 数组长度 &lt;= 50000 
# 注意：本题与主站 34 题相同（仅返回值不同）：https://leetcode-cn.com/problems/find-first-and-last-position-of-element-in-sorted-array/ 
# Related Topics 数组 二分查找
</pre></div>
</div>
<p>python：首先为了达到目的，我们看使用python最容易实现的操作</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span> <span class="k">if</span> <span class="n">len</span><span class="o">(</span><span class="n">nums</span><span class="o">)</span> <span class="o">==</span><span class="mi">0</span><span class="o">:</span>
    <span class="k">return</span> <span class="mi">0</span>
 <span class="k">else</span><span class="o">:</span>
    <span class="k">return</span> <span class="n">nums</span><span class="o">.</span><span class="na">count</span><span class="o">(</span><span class="n">target</span><span class="o">)</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200619122355415.png" src="https://img-blog.csdnimg.cn/20200619122355415.png" />
更好的(根据二分法思想)实现下所示：</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>class Solution:
    def search(self, nums: List[int], target: int) -&gt; int:
        # 双指针
        l = 0
        r = len(nums) - 1
        while l &lt;= r:
            if nums[l] &lt; target:
                l += 1
            elif nums[r] &gt; target:
                r -= 1
            elif nums[l] == nums[r] == target:
                return r - l + 1
        return 0


</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200619121957229.png" src="https://img-blog.csdnimg.cn/20200619121957229.png" /></p>
</div>
<div class="section" id="leetcode977">
<h2>leetcode977：有序数组的平方<a class="headerlink" href="#leetcode977" title="永久链接至标题">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>#给定一个按非递减顺序排序的整数数组 A，返回每个数字的平方组成的新数组，要求也按非递减顺序排序。 
# 示例 1： 
# 输入：[-4,-1,0,3,10]
#输出：[0,1,9,16,100]
# 示例 2： 
# 输入：[-7,-3,2,3,11]
#输出：[4,9,9,49,121]
# 提示： 
# 1 &lt;= A.length &lt;= 10000 
# -10000 &lt;= A[i] &lt;= 10000 
# A 已按非递减顺序排序。 
# Related Topics 数组 双指针
</pre></div>
</div>
<p>利用python中的列表生成式生成求平方后的数组，利用python中的排序函数sorted()对求平方后的数组进行排序。</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="n">sorted</span><span class="o">([</span><span class="n">k</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">k</span> <span class="n">in</span> <span class="n">A</span><span class="o">])</span>
</pre></div>
</div>
<p>时间复杂度：利用列表生成式生成求平方后的数组，时间复杂度为$O(N)$,python中排序用的是蒂姆排序算法，时间复杂度为$O(NlogN)$，所以该算法的时间复杂为$O(NlogN)$。</p>
<p>空间复杂度：$O(N)$。利用列表生成式生成求平方后数组的时间复杂度为$O(N)$，蒂姆排序空间复杂度为$O(N)$,所以该算法空间复杂度为$O(N)$。</p>
<p>下面就是常见的双指针做法</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">Solution</span><span class="o">:</span>
    <span class="n">def</span> <span class="nf">sortedSquares</span><span class="o">(</span><span class="n">self</span><span class="o">,</span> <span class="n">A</span><span class="o">:</span> <span class="n">List</span><span class="o">[</span><span class="n">it</span><span class="o">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="o">[</span><span class="kt">int</span><span class="o">]:</span>
        <span class="n">left</span><span class="o">,</span><span class="n">right</span><span class="o">,</span><span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span> <span class="n">len</span><span class="o">(</span><span class="n">A</span><span class="o">)</span> <span class="o">-</span> <span class="mi">1</span><span class="o">,[]</span>
        <span class="k">while</span> <span class="n">left</span> <span class="o">&lt;=</span> <span class="n">right</span><span class="o">:</span>
            <span class="k">if</span> <span class="n">abs</span><span class="o">(</span><span class="n">A</span><span class="o">[</span><span class="n">left</span><span class="o">])</span> <span class="o">&gt;</span> <span class="n">abs</span><span class="o">(</span><span class="n">A</span><span class="o">[</span><span class="n">right</span><span class="o">]):</span>
                <span class="n">result</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">pow</span><span class="o">(</span><span class="n">A</span><span class="o">[</span><span class="n">left</span><span class="o">],</span><span class="mi">2</span><span class="o">))</span>
                <span class="n">left</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="o">:</span>
                <span class="n">result</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">pow</span><span class="o">(</span><span class="n">A</span><span class="o">[</span><span class="n">right</span><span class="o">],</span><span class="mi">2</span><span class="o">))</span>
                <span class="n">right</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">result</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="python-leetcode">
<h1>68、Python | Leetcode链表系列（上篇）<a class="headerlink" href="#python-leetcode" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen</p>
<p>今日，我决定继续更新Python教程，今天就开始了六十八、Python | Leetcode链表系列（上篇）。</p>
<div class="section" id="linked-list">
<h2>链表 Linked List<a class="headerlink" href="#linked-list" title="永久链接至标题">¶</a></h2>
<p>链表由许多结点(也可以叫节点或元素)组成，每一个结点有两个域，左边部份叫值域 data，用于存放用户数据；右边叫指针域 next，一般是存储着到下一个元素的指针。head结点(头节点)，head是一个特殊的结节，head结点永远指向第一个结点，tail结点(尾节点)，tail结点也是一个特殊的结点，tail结点永远指向最后一个节点，tail.next = None。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200619154620950.png" src="https://img-blog.csdnimg.cn/20200619154620950.png" /></p>
</div>
<div class="section" id="id408">
<h2>节点结构<a class="headerlink" href="#id408" title="永久链接至标题">¶</a></h2>
<p><img alt="https://img-blog.csdnimg.cn/20200619154648533.png" src="https://img-blog.csdnimg.cn/20200619154648533.png" />
上面四个节点 abcd 组成一个链表，每一个节点都包含 data 和 next，尾节点的 next 指向 None。</p>
<p>链表中的元素都会两个属性，一个是元素的值，另一个是指针，此指针标记了下一个元素的地址，每一个数据都会保存下一个数据的内存的地址，通过此地址可以找到下一个数据，任意位置插入元素和删除元素效率较高，时间复杂度为O(1)。</p>
<p>要需要访问某个位置的数据，需要从第一个数据开始找起，依次往后遍历，直到找到待查询的位置，故可能在查找某个元素时，时间复杂度达到O(N)</p>
<p>优点：
1.任意位置插入元素和删除元素的速度快，时间复杂度为O(1)
2.内存利用率高，不会浪费内存
缺点：</p>
<ol class="simple">
<li>随机访问效率低，时间复杂度为0(N)</li>
</ol>
</div>
<div class="section" id="doubly-linked-list">
<h2>双链表 Doubly Linked List<a class="headerlink" href="#doubly-linked-list" title="永久链接至标题">¶</a></h2>
<p>双向链表也叫双链表，是链表的一种，它的每个数据结点中都有两个指针，分别指向直接后继和直接前驱。所以，从双向链表中的任意一个结点开始，都可以很方便地访问它的前驱结点和后继结点。</p>
<p><img alt="https://img-blog.csdnimg.cn/2019031515160942.jpg" src="https://img-blog.csdnimg.cn/2019031515160942.jpg" /></p>
</div>
<div class="section" id="id409">
<h2>代码实现<a class="headerlink" href="#id409" title="永久链接至标题">¶</a></h2>
<p>下面以class类创建节点， 每个节点包含当前节点所要存的数据data，和指向下一节点的指针。</p>
<p>节点类的定义很简单，节点只有两个属性，data 和 next，next指向下一个节点。定义完节点类后，可以创建节点，但是还需要将节点连接在一起，构成链表才可以。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Node</span><span class="p">:</span>
    <span class="sd">&#39;&#39;&#39;定义节点类&#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>    <span class="c1">#值域，存储数据</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">next</span> <span class="o">=</span> <span class="bp">None</span>    <span class="c1">#指针域，存储下一元素的地址</span>

<span class="c1">#定义四个节点</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="mi">86</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="mi">19</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>
<span class="c1">#最简单的方法将四个节点连接</span>
<span class="n">a</span><span class="o">.</span><span class="n">next</span> <span class="o">=</span> <span class="n">b</span>
<span class="n">b</span><span class="o">.</span><span class="n">next</span> <span class="o">=</span> <span class="n">c</span>
<span class="n">c</span><span class="o">.</span><span class="n">next</span> <span class="o">=</span> <span class="n">d</span>
<span class="n">head</span> <span class="o">=</span> <span class="n">a</span>
<span class="c1">#依次输出节点的值</span>
<span class="k">while</span> <span class="n">head</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">head</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
    <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">.</span><span class="n">next</span>
<span class="c1">#输出为 86 19 4 12</span>
</pre></div>
</div>
</div>
<div class="section" id="id410">
<h2>链表的实现<a class="headerlink" href="#id410" title="永久链接至标题">¶</a></h2>
<p>定义一个链表类来实现链表，同时可以定义对链表的简单操作，比如对链表进行添加节点，移除节点，插入节点等方法。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">LinkedList</span><span class="p">:</span>
    <span class="sd">&#39;&#39;&#39;定义链表类&#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>    <span class="c1">#不需要参数，返回值是空链表</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">head</span> <span class="o">=</span> <span class="bp">None</span>   <span class="c1">#头节点</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tail</span> <span class="o">=</span> <span class="bp">None</span>   <span class="c1">#尾节点</span>
</pre></div>
</div>
<p>定义类方法，判断链表是否为空。</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">def</span> <span class="nf">is_empty</span><span class="o">(</span><span class="n">self</span><span class="o">):</span>    
    <span class="sc">&#39;&#39;&#39;</span><span class="n">判断链表是否为空</span><span class="sc">&#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="n">self</span><span class="o">.</span><span class="na">head</span> <span class="n">is</span> <span class="n">None</span>
</pre></div>
</div>
<p>定义类方法，向链表末尾新的节点。</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>def append(self, data):    
    &#39;&#39;&#39;向链表里添加节点&#39;&#39;&#39;
    node = Node(data)      #创建一个节点实例
    if self.head is None:  #判断链表是否为空
         self.head = node   #如果是空链表，添加一个节点，头节点就是尾节点
         self.tail = node
     else:
         self.tail.next = node  #tail为尾节点，在尾节点添加新节点，尾节点的指针域
         self.tail = node       #指向下一节点，这时新的尾节点就是node节点
</pre></div>
</div>
<p>定义类方法，实现遍历链表元素。</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>def iter(self):            
    &#39;&#39;&#39;遍历链表,函数返回的是一个生成器&#39;&#39;&#39;
    if not self.head:    #遍历从链表的头节点开始，如果不是，返回
        return
    current = self.head  #将head节点赋值给current,当前节点
    yield current.data   #包含yield语句的函数都被称为生成器。
    while current.next:
        current = current.next
        yield current.data
</pre></div>
</div>
<p>定义类方法，实现在链表指定位置插入新的节点。</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>def insert(self, index, vaule):    
    &#39;&#39;&#39;在链表的指定索引插入一个新的节点&#39;&#39;&#39;
    current = self.head
    current_index = 0        #head节点的索引为0
    if self.head is None:    #如果链表为空
        raise Exception(&quot;The list is an empty list&quot;)
    while current_index &lt; index -1:  #通过while循环找到指定索引的节点
        current = current.next
        if current is None:  #判断是否为尾节点
            raise Exception(&#39;......&#39;)
        current_index += 1
    node = Node(vaule)       #新建节点
    node.next = current.next #node的指针域指向原节点的下一节点
    current.next = node      #原节点的下一节点指向node
    if node.next is None:
        self.tail = node
</pre></div>
</div>
<p>要向 a 和 b节点之间插入一个新的节点 e ，需要将 <code class="docutils literal notranslate"><span class="pre">e.next</span> <span class="pre">=</span> <span class="pre">a.next</span> </code>，之后再将 <code class="docutils literal notranslate"><span class="pre">a.next</span> <span class="pre">=</span> <span class="pre">e</span></code>，这是插入一个新的节点的关键。</p>
<p>定义类方法，实现移除链表指定索引的节点。</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>def remove(self, index):
    &#39;&#39;&#39;移除链表指定索引元素&#39;&#39;&#39;
    current = self.head
    current_index = 0
    if self.head is None:  # 空链表时
        raise Exception(&#39;The list is an empty list&#39;)
    while current_index &lt; index-1:
        current = current.next
        if current is None:
            raise Exception(&#39;list length less than index&#39;)
        current_index += 1
    if index == 0:   # 当删除第一个节点时
        self.head = current.next
        current = current.next
        return
    if self.head is self.tail:   # 当只有一个节点的链表时
        self.head = None
        self.tail = None
        return 
    current.next = current.next.next
    if current.next is None:  # 当删除的节点是链表最后一个节点时
        self.tail = current
</pre></div>
</div>
<p>定义类方法，返回链表的长度(节点的数量)。</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>def size(self):
    &#39;&#39;&#39;返回链表长度&#39;&#39;&#39;
    current = self.head
    count = 0
    if current is None:
        return &#39;The list is an empty list&#39;
    while current is not None:
        count += 1
        current = current.next
    return count
</pre></div>
</div>
<p>最后，来实现一下链表的一些简单操作。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">l</span> <span class="o">=</span> <span class="n">LinkedList</span><span class="p">()</span>    <span class="c1">#创建一个链表对象，空链表</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span> <span class="c1">#向链表里添加节点</span>
        <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">l</span><span class="o">.</span><span class="n">iter</span><span class="p">()))</span>   <span class="c1">#遍历链表元素</span>
    <span class="c1">#输出为[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span>
    <span class="n">l</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>    <span class="c1">#在索引2处插入10</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">l</span><span class="o">.</span><span class="n">iter</span><span class="p">()))</span>   <span class="c1">#遍历链表元素</span>
    <span class="c1">#输出为[0, 1, 10, 2, 3, 4, 5, 6, 7, 8, 9]</span>
    <span class="n">l</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>       <span class="c1">#移除索引为0的节点</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">l</span><span class="o">.</span><span class="n">iter</span><span class="p">()))</span>   <span class="c1">#遍历链表元素</span>
    <span class="c1">#输出为[1, 2, 3, 4, 5, 6, 7, 8, 9]</span>
    <span class="k">print</span><span class="p">(</span><span class="n">l</span><span class="o">.</span><span class="n">size</span><span class="p">())</span>   <span class="c1">#输出链表的长度 输出为10</span>
</pre></div>
</div>
</div>
<div class="section" id="leetcode-2">
<h2>LeetCode 第 2题：两数相加<a class="headerlink" href="#leetcode-2" title="永久链接至标题">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>#给出两个 非空 的链表用来表示两个非负的整数。其中，它们各自的位数是按照 逆序 的方式存储的，并且它们的每个节点只能存储 一位 数字。 
# 如果，我们将这两个数相加起来，则会返回一个新的链表来表示它们的和。 
# 您可以假设除了数字 0 之外，这两个数都不会以 0 开头。 
# 示例： 
# 输入：(2 -&gt; 4 -&gt; 3) + (5 -&gt; 6 -&gt; 4)
#输出：7 -&gt; 0 -&gt; 8
#原因：342 + 465 = 807
# 
# Related Topics 链表 数学
</pre></div>
</div>
<p>思路一：将链表转化列表，反转列表 用join方法拼接数字 切片[::-1]，将sum转化成链表res</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># class ListNode:</span>
<span class="c1">#     def __init__(self, x):</span>
<span class="c1">#         self.val = x</span>
<span class="c1">#         self.next = None</span>


<span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">addTwoNumbers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">l1</span><span class="p">:</span> <span class="n">ListNode</span><span class="p">,</span> <span class="n">l2</span><span class="p">:</span> <span class="n">ListNode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ListNode</span><span class="p">:</span>
        <span class="c1"># 将链表转化列表</span>
        <span class="n">val1</span><span class="p">,</span> <span class="n">val2</span> <span class="o">=</span> <span class="p">[</span><span class="n">l1</span><span class="o">.</span><span class="n">val</span><span class="p">],</span> <span class="p">[</span><span class="n">l2</span><span class="o">.</span><span class="n">val</span><span class="p">]</span>

        <span class="k">while</span> <span class="n">l1</span><span class="o">.</span><span class="n">next</span><span class="p">:</span>
            <span class="n">val1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l1</span><span class="o">.</span><span class="n">next</span><span class="o">.</span><span class="n">val</span><span class="p">)</span>
            <span class="n">l1</span> <span class="o">=</span> <span class="n">l1</span><span class="o">.</span><span class="n">next</span>

        <span class="k">while</span> <span class="n">l2</span><span class="o">.</span><span class="n">next</span><span class="p">:</span>
            <span class="n">val2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l2</span><span class="o">.</span><span class="n">next</span><span class="o">.</span><span class="n">val</span><span class="p">)</span>
            <span class="n">l2</span> <span class="o">=</span> <span class="n">l2</span><span class="o">.</span><span class="n">next</span>

        <span class="c1"># 反转列表 用join方法拼接数字 切片[::-1]</span>


        <span class="n">num_1</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">val1</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]])</span>
        <span class="n">num_2</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">val2</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]])</span>

        <span class="n">sums</span> <span class="o">=</span>  <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">num_1</span><span class="p">)</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_2</span><span class="p">))[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="c1"># 将sum转化成链表res</span>

        <span class="c1"># 头节点</span>
        <span class="n">res</span>  <span class="o">=</span> <span class="n">head</span> <span class="o">=</span> <span class="n">ListNode</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">sums</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">sums</span><span class="p">)):</span>
            <span class="c1"># 拼接</span>
            <span class="n">head</span><span class="o">.</span><span class="n">next</span> <span class="o">=</span> <span class="n">ListNode</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">sums</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
            <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">.</span><span class="n">next</span>
        <span class="k">return</span> <span class="n">res</span>


</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200619160926309.png" src="https://img-blog.csdnimg.cn/20200619160926309.png" /></p>
<p>思路二：将结果保存在一个新的链表中，使用两个指针，一个指向头节点，用于返回结果，另一个指向当前节点，用于计算并保存结果。遍历两个输入链表，逐位进行相加，若某一个链表遍历到了结尾，则取 0 参与运算。每一位的数字为两个数字对应位以及进位之和除 10 的余数，而该位是否有进位则是这个和除 10 的商。</p>
<p>优化：不需要将整个数的和求出，只需要每一位对应相加，</p>
<p><img alt="https://img-blog.csdnimg.cn/20200619160405934.png" src="https://img-blog.csdnimg.cn/20200619160405934.png" /></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">addTwoNumbers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">l1</span><span class="p">:</span> <span class="n">ListNode</span><span class="p">,</span> <span class="n">l2</span><span class="p">:</span> <span class="n">ListNode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ListNode</span><span class="p">:</span>
       <span class="c1"># 判断0还是1</span>
        <span class="n">res</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">n</span> <span class="o">=</span> <span class="n">ListNode</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    
        <span class="k">while</span> <span class="n">l1</span> <span class="ow">or</span> <span class="n">l2</span> <span class="ow">or</span> <span class="n">res</span><span class="p">:</span>
            <span class="n">v1</span> <span class="o">=</span> <span class="n">v2</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">if</span> <span class="n">l1</span><span class="p">:</span>
                <span class="n">v1</span> <span class="o">=</span> <span class="n">l1</span><span class="o">.</span><span class="n">val</span>
                <span class="n">l1</span> <span class="o">=</span> <span class="n">l1</span><span class="o">.</span><span class="n">next</span>
            <span class="k">if</span> <span class="n">l2</span><span class="p">:</span>
                <span class="n">v2</span> <span class="o">=</span> <span class="n">l2</span><span class="o">.</span><span class="n">val</span>
                <span class="n">l2</span> <span class="o">=</span> <span class="n">l2</span><span class="o">.</span><span class="n">next</span>
            <span class="c1"># divmod() 函数把除数和余数运算结果结合起来，返回一个包含商和余数的元组(a // b, a % b)。</span>
            <span class="n">res</span><span class="p">,</span> <span class="n">val</span> <span class="o">=</span> <span class="nb">divmod</span><span class="p">(</span><span class="n">v1</span> <span class="o">+</span> <span class="n">v2</span> <span class="o">+</span> <span class="n">res</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
            <span class="n">n</span><span class="o">.</span><span class="n">next</span> <span class="o">=</span> <span class="n">ListNode</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">next</span>
            
        <span class="k">return</span> <span class="n">root</span><span class="o">.</span><span class="n">next</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200619161524801.png" src="https://img-blog.csdnimg.cn/20200619161524801.png" /></p>
</div>
</div>
<div class="section" id="id411">
<h1>69、Python | Leetcode链表系列（中篇）<a class="headerlink" href="#id411" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen</p>
<p>今日，我决定继续更新Python教程，今天就开始了六十九、Python | Leetcode链表系列（中篇）。</p>
<div class="section" id="leetcode-21">
<h2>LeetCode  第21题：合并两个有序链表<a class="headerlink" href="#leetcode-21" title="永久链接至标题">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>#将两个升序链表合并为一个新的 升序 链表并返回。新链表是通过拼接给定的两个链表的所有节点组成的。 
# 示例： 
#
# 输入：1-&gt;2-&gt;4, 1-&gt;3-&gt;4
#输出：1-&gt;1-&gt;2-&gt;3-&gt;4-&gt;4
# 
# Related Topics 链表
</pre></div>
</div>
<p>这个解决的方法使用递归，如果L1为空就返回L2，L2为空返回L1，L1的val&lt;=L2的val，那么继续递归</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span># Definition for singly-linked list.
# class ListNode:
#     def __init__(self, x):
#         self.val = x
#         self.next = None


class Solution(object):
	def mergeTwoLists(self, l1, l2):
		&quot;&quot;&quot;
		:type l1: ListNode
		:type l2: ListNode
		:rtype: ListNode
		&quot;&quot;&quot;
		#递归的结束点就是L1或者L2为空就返回
		#如果L1为空就返回L2，L2为空返回L1
		# if not (l1 and l2):
			# return l1 if l1 else l2
		if not l1:
            return l2
        elif not l2:
            return l1
		#L1的val&lt;=L2的val，那么继续递归
		#当前L1的next指向一个递归函数
		#意思是L1的下一个和L2哪个大，就作为当前L1的next
	    elif l1.val&lt;=l2.val:
			l1.next = self.mergeTwoLists(l1.next,l2)
			return l1
		else:
			l2.next = self.mergeTwoLists(l1,l2.next)
			return l2
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200628114647839.png" src="https://img-blog.csdnimg.cn/20200628114647839.png" /></p>
</div>
<div class="section" id="leetcode-23-k">
<h2>LeetCode 第 23 题：合并 k 个排序链表<a class="headerlink" href="#leetcode-23-k" title="永久链接至标题">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>#合并 k 个排序链表，返回合并后的排序链表。请分析和描述算法的复杂度。 
# 示例: 
# 输入:
#[
#  1-&gt;4-&gt;5,
#  1-&gt;3-&gt;4,
#  2-&gt;6
#]
#输出: 1-&gt;1-&gt;2-&gt;3-&gt;4-&gt;4-&gt;5-&gt;6 
# Related Topics 堆 链表 分治算法
</pre></div>
</div>
<p>第1种法就是常规思路，直接将所有的元素取出，然后排个序，再重组就达到了目的。</p>
<p>遍历所有链表，将所有节点的值放到一个数组中。将这个数组排序，然后遍历所有元素得到正确顺序的值。用遍历得到的值，创建一个新的有序链表。</p>
<p>时间复杂度：$O(N\log N)$ ，其中 N 是节点的总数目</p>
<p>空间复杂度：$O(N)$。</p>
<p>排序花费$O(N)$空间（这取决于你选择的算法）。
创建一个新的链表花费 $O(N)$的空间。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Definition for singly-linked list.</span>
<span class="c1"># class ListNode:</span>
<span class="c1">#     def __init__(self, x):</span>
<span class="c1">#         self.val = x</span>
<span class="c1">#         self.next = None</span>


<span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">mergeKLists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lists</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ListNode</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">ListNode</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :type lists: List[ListNode]</span>
<span class="sd">        :rtype: ListNode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">head</span> <span class="o">=</span> <span class="n">point</span> <span class="o">=</span> <span class="n">ListNode</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">lists</span><span class="p">:</span>
            <span class="k">while</span> <span class="n">l</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l</span><span class="o">.</span><span class="n">val</span><span class="p">)</span>
                <span class="n">l</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">next</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">):</span>
            <span class="n">point</span><span class="o">.</span><span class="n">next</span> <span class="o">=</span> <span class="n">ListNode</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="n">point</span> <span class="o">=</span> <span class="n">point</span><span class="o">.</span><span class="n">next</span>
        <span class="k">return</span> <span class="n">head</span><span class="o">.</span><span class="n">next</span>
</pre></div>
</div>
<p>时间复杂度：$O(N \log k)$，这里 N 是这 k 个链表的结点总数，每一次从一个优先队列中选出一个最小结点的时间复杂度是 $O(logk)$，故时间复杂度为	$O(N \log k)$。
空间复杂度：$O(k)$，使用优先队列需要 k 个空间，“穿针引线”需要常数个空间，因此空间复杂度为 $O(k)$。</p>
</div>
<div class="section" id="leetcode-141">
<h2>LeetCode 第 141 题：判断链表中是否有环<a class="headerlink" href="#leetcode-141" title="永久链接至标题">¶</a></h2>
<p><img alt="https://img-blog.csdnimg.cn/20191122154610446.png" src="https://img-blog.csdnimg.cn/20191122154610446.png" /></p>
<blockquote>
<div>你能用 O(1)（即，常量）内存解决此问题吗？</div></blockquote>
<p>遍历整个数组, 给出的数据包含在集合中则说明有环, 返回 True; 若遍历完毕, 则说明无环, 返回 False，如果用列表也是一样。</p>
<p><strong>暴力解法</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">hasCycle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">head</span><span class="p">:</span> <span class="n">ListNode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        暴力法：通过遍历链表，用set来存储访问的节点，如果在set出现一样的节点，说明有坏，时间复杂度O(n)</span>
<span class="sd">        :type head: ListNode</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">st</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">while</span> <span class="n">head</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">head</span> <span class="ow">in</span> <span class="n">st</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">True</span>
            <span class="n">st</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">head</span> <span class="p">)</span>
            <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">.</span><span class="n">next</span>
        <span class="k">return</span> <span class="bp">False</span>


		<span class="c1"># 下面是列表</span>
        <span class="n">l</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">while</span> <span class="n">head</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">head</span> <span class="ow">in</span> <span class="n">l</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">head</span><span class="p">)</span>
                <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">.</span><span class="n">next</span>
        <span class="k">return</span> <span class="bp">False</span>
        
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200628121724978.png" src="https://img-blog.csdnimg.cn/20200628121724978.png" /></p>
<p>暴力的时间空间复杂度都是O(n)</p>
<p>题目要求用 $O(1)$空间复杂度</p>
<p>这道题考的是<strong>快慢指针</strong> $O(1)$空间复杂度</p>
<p>通过使用具有 不同速度 的快、慢两个指针遍历链表，空间复杂度可以被降低至$O(1)$。慢指针每次移动一步，而快指针每次移动两步。</p>
<p>如果列表中不存在环，最终快指针将会最先到达尾部，此时我们可以返回 false。</p>
<p>进阶的要求是以 O(1) 的空间复杂度实现, 想象这样一个场景, 你和一个朋友一起散步, 你每次移动两步, 朋友每次一步, 如为单向定长道路, 你必然先到达重点. 若是环绕操场,则你们终将相遇.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nf">Solution</span><span class="o">(</span><span class="n">object</span><span class="o">):</span>
    <span class="n">def</span> <span class="nf">hasCycle</span><span class="o">(</span><span class="n">self</span><span class="o">,</span> <span class="n">head</span><span class="o">):</span>
        <span class="n">slow</span> <span class="o">=</span> <span class="n">fast</span> <span class="o">=</span> <span class="n">head</span>
        <span class="k">while</span> <span class="n">slow</span> <span class="n">and</span> <span class="n">fast</span> <span class="n">and</span> <span class="n">fast</span><span class="o">.</span><span class="na">next</span><span class="o">:</span>
            <span class="n">slow</span> <span class="o">=</span> <span class="n">slow</span><span class="o">.</span><span class="na">next</span>
            <span class="n">fast</span> <span class="o">=</span> <span class="n">fast</span><span class="o">.</span><span class="na">next</span><span class="o">.</span><span class="na">next</span>
            <span class="k">if</span> <span class="n">slow</span> <span class="o">==</span> <span class="n">fast</span><span class="o">:</span>
                <span class="k">return</span> <span class="n">True</span>
        <span class="k">return</span> <span class="n">False</span>
</pre></div>
</div>
</div>
<div class="section" id="leetcode-206">
<h2>LeetCode 第 206 题：反转链表<a class="headerlink" href="#leetcode-206" title="永久链接至标题">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>#反转一个单链表。 
# 示例: 
# 输入: 1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;NULL
#输出: 5-&gt;4-&gt;3-&gt;2-&gt;1-&gt;NULL 
# 进阶: 
#你可以迭代或递归地反转链表。你能否用两种方法解决这道题？ 
# Related Topics 链表
</pre></div>
</div>
<p>将当前节点的next指针指向前驱的节点，需要有2个指针来记录，一个记录当前节点，一个记录前驱节点，循环5次直到列表结束，三个简单复制语句</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">reverseList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">head</span><span class="p">):</span>
        <span class="n">cur</span><span class="p">,</span> <span class="n">prev</span> <span class="o">=</span> <span class="n">head</span><span class="p">,</span> <span class="bp">None</span>
        <span class="k">while</span> <span class="n">cur</span><span class="p">:</span>
            <span class="n">cur</span><span class="o">.</span><span class="n">next</span><span class="p">,</span> <span class="n">prev</span><span class="p">,</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">prev</span><span class="p">,</span> <span class="n">cur</span><span class="p">,</span> <span class="n">cur</span><span class="o">.</span><span class="n">next</span>
        <span class="k">return</span> <span class="n">prev</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id412">
<h1>70、Python | Leetcode链表系列（下篇）<a class="headerlink" href="#id412" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen</p>
<p>今日，我决定继续更新Python教程，今天就开始了七十、Python | Leetcode链表系列（下篇）。</p>
<div class="section" id="leetcode-24">
<h2>LeetCode  第24题：两两交换链表的节点<a class="headerlink" href="#leetcode-24" title="永久链接至标题">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>#给定一个链表，两两交换其中相邻的节点，并返回交换后的链表。 
#
# 你不能只是单纯的改变节点内部的值，而是需要实际的进行节点交换。
# 示例: 
#
# 给定 1-&gt;2-&gt;3-&gt;4, 你应该返回 2-&gt;1-&gt;4-&gt;3.
# 
# Related Topics 链表
</pre></div>
</div>
<p>思路：a,b,pre记录三个指针，相邻两个，相邻两个元素前面的一个，第一步将节点 2 指向节点 1，然后再将节点 1 指向节点三。这一步交换完毕后链表变为 2-&gt;1-&gt;3-&gt;4。在进行下一次交换，将节点 4 指向节点 3，节点3指向none 但是还要注意节点 1 的指向，节点 1 要指向节点 4。</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span># class ListNode:
#     def __init__(self, x):
#         self.val = x
#         self.next = None

class Solution:
	def swapPairs(self,head):
	    pre, pre.next = self, head
	    while pre.next and pre.next.next:
	        a = pre.next
	        b = a.next
	        pre.next,b.next ,a.next = b,a,b.next
	        pre = a
	        
	    return  self.next
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/2020070308012239.png" src="https://img-blog.csdnimg.cn/2020070308012239.png" /></p>
</div>
<div class="section" id="leetcode-83">
<h2>LeetCode  第83题：删除排序链表中的重复元素<a class="headerlink" href="#leetcode-83" title="永久链接至标题">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>#给定一个排序链表，删除所有重复的元素，使得每个元素只出现一次。 
# 示例 1: 
# 输入: 1-&gt;1-&gt;2
#输出: 1-&gt;2
# 示例 2: 
# 输入: 1-&gt;1-&gt;2-&gt;3-&gt;3
#输出: 1-&gt;2-&gt;3 
# Related Topics 链表
</pre></div>
</div>
<p>如果遇到cur.val和cur.next.val重复,让cur.next=cur.next.next</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Definition for singly-linked list.</span>
<span class="c1"># class ListNode:</span>
<span class="c1">#     def __init__(self, x):</span>
<span class="c1">#         self.val = x</span>
<span class="c1">#         self.next = None</span>

<span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">deleteDuplicates</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">head</span><span class="p">:</span> <span class="n">ListNode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ListNode</span><span class="p">:</span>
        <span class="n">h</span> <span class="o">=</span> <span class="n">head</span>
        <span class="k">while</span> <span class="n">head</span> <span class="ow">and</span> <span class="n">head</span><span class="o">.</span><span class="n">next</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">head</span><span class="o">.</span><span class="n">val</span> <span class="o">==</span> <span class="n">head</span><span class="o">.</span><span class="n">next</span><span class="o">.</span><span class="n">val</span><span class="p">:</span>
                <span class="n">head</span><span class="o">.</span><span class="n">next</span> <span class="o">=</span> <span class="n">head</span><span class="o">.</span><span class="n">next</span><span class="o">.</span><span class="n">next</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">.</span><span class="n">next</span>
                
        <span class="k">return</span> <span class="n">h</span>

<span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">deleteDuplicates</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">head</span><span class="p">):</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="n">root</span> <span class="o">=</span> <span class="n">head</span>
        <span class="k">while</span> <span class="n">head</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">head</span><span class="o">.</span><span class="n">val</span> <span class="o">!=</span> <span class="n">cur</span><span class="o">.</span><span class="n">val</span><span class="p">:</span>
                <span class="n">cur</span><span class="o">.</span><span class="n">next</span> <span class="o">=</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">head</span>
            <span class="n">head</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">next</span> <span class="o">=</span> <span class="n">head</span><span class="o">.</span><span class="n">next</span>
        <span class="k">return</span> <span class="n">root</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200703081419328.png" src="https://img-blog.csdnimg.cn/20200703081419328.png" /></p>
</div>
<div class="section" id="leetcode-148">
<h2>LeetCode 第148题： 排序链表（重要）<a class="headerlink" href="#leetcode-148" title="永久链接至标题">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>#在 O(n log n) 时间复杂度和常数级空间复杂度下，对链表进行排序。
# 示例 1:
# 输入: 4-&gt;2-&gt;1-&gt;3
#输出: 1-&gt;2-&gt;3-&gt;4
# 示例 2: 
#
# 输入: -1-&gt;5-&gt;3-&gt;4-&gt;0
#输出: -1-&gt;0-&gt;3-&gt;4-&gt;5 
# Related Topics 排序 链表
</pre></div>
</div>
<p>题目要求时间空间复杂度分别为$O(nlogn)$和$O(1)$，根据时间复杂度我们自然想到二分法，从而联想到归并排序；</p>
<p>利用归并的思想，递归地将当前链表分为两段，然后merge，分两段的方法是使用 fast-slow 法，用两个指针，一个每次走两步，一个走一步，直到快的走到了末尾，然后慢的所在位置就是中间位置，这样就分成了两段。</p>
<p>归并排序分为两步，1.找到待排序链表的中间节点（使用快慢指针法，leetcode 876题）2.合并两个有序链表（leetcode 21题），因此本题相当于结合这两步来实现链表排序。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Definition for singly-linked list.</span>
<span class="k">class</span> <span class="nc">ListNode</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">val</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">next</span> <span class="o">=</span> <span class="bp">None</span>
<span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">sortList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">head</span><span class="p">:</span> <span class="n">ListNode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ListNode</span><span class="p">:</span>
        <span class="c1"># if not head or not head.next:#</span>
        <span class="k">if</span> <span class="n">head</span> <span class="o">==</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">head</span><span class="o">.</span><span class="n">next</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">head</span> 
        <span class="n">slow</span>  <span class="o">=</span> <span class="n">head</span><span class="c1">#快慢指针法找到链表中点</span>
        <span class="n">fast</span> <span class="o">=</span> <span class="n">head</span>
        <span class="k">while</span> <span class="n">fast</span><span class="o">.</span><span class="n">next</span> <span class="ow">and</span> <span class="n">fast</span><span class="o">.</span><span class="n">next</span><span class="o">.</span><span class="n">next</span><span class="p">:</span>
            <span class="n">slow</span> <span class="o">=</span> <span class="n">slow</span><span class="o">.</span><span class="n">next</span>
            <span class="n">fast</span> <span class="o">=</span> <span class="n">fast</span><span class="o">.</span><span class="n">next</span><span class="o">.</span><span class="n">next</span>
        <span class="n">right</span> <span class="o">=</span> <span class="n">slow</span><span class="o">.</span><span class="n">next</span>
        <span class="c1"># print(right.val)</span>
        <span class="n">slow</span><span class="o">.</span><span class="n">next</span> <span class="o">=</span> <span class="bp">None</span> <span class="c1">#这一句的原因是 需要对中点前的链表进行割断处理</span>

        <span class="n">l1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sortList</span><span class="p">(</span><span class="n">head</span><span class="p">)</span><span class="c1">#递归保证l1和l2为有序链表</span>
        <span class="n">l2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sortList</span><span class="p">(</span><span class="n">right</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mergeTwoLists</span><span class="p">(</span><span class="n">l1</span><span class="p">,</span><span class="n">l2</span><span class="p">)</span>
	<span class="c1"># 合并两个有序链表</span>
    <span class="k">def</span> <span class="nf">mergeTwoLists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">l1</span><span class="p">:</span> <span class="n">ListNode</span><span class="p">,</span> <span class="n">l2</span><span class="p">:</span> <span class="n">ListNode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ListNode</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">l1</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">l2</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">l1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">l2</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">l2</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">l1</span>
        <span class="n">head</span> <span class="o">=</span> <span class="n">head1</span> <span class="o">=</span> <span class="n">ListNode</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">l1</span> <span class="ow">and</span> <span class="n">l2</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">l1</span><span class="o">.</span><span class="n">val</span> <span class="o">&lt;=</span> <span class="n">l2</span><span class="o">.</span><span class="n">val</span><span class="p">:</span>
                <span class="n">head</span><span class="o">.</span><span class="n">next</span> <span class="o">=</span> <span class="n">l1</span>
                <span class="n">l1</span> <span class="o">=</span> <span class="n">l1</span><span class="o">.</span><span class="n">next</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">head</span><span class="o">.</span><span class="n">next</span> <span class="o">=</span> <span class="n">l2</span>
                <span class="n">l2</span> <span class="o">=</span> <span class="n">l2</span><span class="o">.</span><span class="n">next</span>
            <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">.</span><span class="n">next</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">l1</span> <span class="p">:</span> <span class="n">head</span><span class="o">.</span><span class="n">next</span> <span class="o">=</span> <span class="n">l2</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">l2</span> <span class="p">:</span> <span class="n">head</span><span class="o">.</span><span class="n">next</span> <span class="o">=</span> <span class="n">l1</span>
        <span class="k">return</span> <span class="n">head1</span><span class="o">.</span><span class="n">next</span>
</pre></div>
</div>
<p>下面是测试代码</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>if __name__ == &quot;__main__&quot;:
    n1 = ListNode(4)
    n2 = ListNode(7)
    n3 = ListNode(6)
    n4 = ListNode(9)
    n5 = ListNode(12)
    m=n1
    n1.next=n2
    n2.next=n3
    n3.next=n4
    n4.next=n5
    print(&#39;原链表的节点：&#39;)    
    while m:
        print(&#39;节点%d的值:&#39;%(m.val),m.val)
        m=m.next
    print(&#39;\n排序之后的节点：&#39;)

    s=Solution()
    s.sortList(n1)
    while n1:
        print(&#39;节点%d的值:&#39;%(n1.val),n1.val)
        n1=n1.next
#result
原链表的节点：
节点4的值: 4
节点7的值: 7
节点6的值: 6
节点9的值: 9
节点12的值: 12

排序之后的节点：
节点4的值: 4
节点6的值: 6
节点7的值: 7
节点9的值: 9
节点12的值: 12
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200703082922110.png" src="https://img-blog.csdnimg.cn/20200703082922110.png" /></p>
</div>
<div class="section" id="leetcode-876">
<h2>LeetCode 第 876题： 链表的中间结点（重要）<a class="headerlink" href="#leetcode-876" title="永久链接至标题">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span># 输入：[1,2,3,4,5]
#输出：此列表中的结点 3 (序列化形式：[3,4,5])
#返回的结点值为 3 。 (测评系统对该结点序列化表述是 [3,4,5])。
#注意，我们返回了一个 ListNode 类型的对象 ans，这样：
#ans.val = 3, ans.next.val = 4, ans.next.next.val = 5, 以及 ans.next.next.next = NULL.
# 示例 2： 
# 输入：[1,2,3,4,5,6]
#输出：此列表中的结点 4 (序列化形式：[4,5,6])
#由于该列表有两个中间结点，值分别为 3 和 4，我们返回第二个结点。
# 提示： 
# 给定链表的结点数介于 1 和 100 之间。 
# Related Topics 链表
</pre></div>
</div>
<p><strong>思路</strong></p>
<ul class="simple">
<li>遍历两次。第一次遍历求导链表长度，找出中间结点的长度值，第二层遍历找到中间结点并返回；</li>
<li>快慢指针法。慢指针每次走一步，快指针每次走两步，快指针走到链表末尾时，慢指针刚好走到链表中间。方法２时间复杂度更低，只需遍历一次。</li>
</ul>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span># Definition for singly-linked list.
class ListNode:
    def __init__(self, x):
        self.val = x
        self.next = None

class Solution:
    def middleNode(self, head: ListNode) -&gt; ListNode:
        slow = head
        fast = head
        while  fast and fast.next:
            slow = slow.next
            fast = fast.next.next
        return slow
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200703083340934.png" src="https://img-blog.csdnimg.cn/20200703083340934.png" /></p>
</div>
</div>
<div class="section" id="id413">
<h1>71、Python | Leetcode字符串系列（上篇）<a class="headerlink" href="#id413" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen</p>
<p>今日，我决定继续更新Python教程，今天就开始了七十一、Python | Leetcode字符串系列（上篇）。</p>
<div class="section" id="id414">
<h2>字符串<a class="headerlink" href="#id414" title="永久链接至标题">¶</a></h2>
<p>首先我们先去<a class="reference external" href="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vZXhwbG9yZS9mZWF0dXJlZC9jYXJkL2FycmF5LWFuZC1zdHJpbmcvMjAwL2ludHJvZHVjdGlvbi10by1zdHJpbmcvNzc3Lw?x-oss-process=image/format,png">Leetcode字符串官网</a>，查看字符串相操作。</p>
<p>维基百科：字符串是由零个或多个字符组成的有限序列。一般记为 s = a1a2…an。它是编程语言中表示文本的数据类型。使用 <code class="docutils literal notranslate"><span class="pre">名称[下标]</span> </code>来得到一个字符</p>
<p>在某些语言（如 C ++）中，字符串是可变的。 也就是说，你可以像在数组中那样修改字符串。
在其他一些语言（如 Java、Python）中，字符串是不可变的。</p>
</div>
<div class="section" id="leetcode-3">
<h2>LeetCode 第3题：无重复字符的最长子串<a class="headerlink" href="#leetcode-3" title="永久链接至标题">¶</a></h2>
<p>该题目会涉及到一个概念“滑动窗口”。</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span># 示例 1:
# 输入: &quot;abcabcbb&quot;
# 输出: 3
#解释: 因为无重复字符的最长子串是 &quot;abc&quot;，所以其长度为 3。
# 示例 2:
# 输入: &quot;bbbbb&quot;
#输出: 1
#解释: 因为无重复字符的最长子串是 &quot;b&quot;，所以其长度为 1。
# 示例 3
# 输入: &quot;pwwkew&quot;
#输出: 3
#解释: 因为无重复字符的最长子串是 &quot;wke&quot;，所以其长度为 3。
#     请注意，你的答案必须是 子串 的长度，&quot;pwke&quot; 是一个子序列，不是子串。
# Related Topics 哈希表 双指针 字符串 Sliding Window
</pre></div>
</div>
<p>下面我们看看，“滑动窗口”如何进行字符串处理。结合题目中的例子“abcabcbb”这个字符串，我们来看看如何找它的无重复最长子串。</p>
<p>首先，我们定义窗口的两端：begin和end，分别表示要找的子串的开头和结尾。
<img alt="https://img-blog.csdnimg.cn/20200703085538169.png" src="https://img-blog.csdnimg.cn/20200703085538169.png" /></p>
<p>开始的时候，begin和end都指向0的位置即‘a’，然后end不断后移（窗口变宽），当遇到第二个‘a’时（遇见重复字符）就得到一个子串，其长度就是end和begin位置的差。</p>
<p>如何判断是否遇到了重复字符‘a’呢？需要一个字典作为辅助数据结构，把end从头开始遇到的每个字符及其索引位置都放到字典里面，end每次移动到新字符就查一下字典即可</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">lengthOfLongestSubstring</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="c1"># 定义两个变量res和start,res用于存储最长子字符串的长度，start存储无重复子串左边的起始位置。</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        然后创建一个哈希表，遍历整个字符串，如果字符串没有在哈希表中出现，说明没有遇到过该字符，则此时计算最长无重复子串，当哈希表中的值小于left，说明left位置更新了，需要重新计算最长无重复子串。每次在哈希表中将当前字符串对应的赋值加1。</span>
<span class="sd">        :param s:</span>
<span class="sd">        :return:</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">d</span><span class="p">,</span> <span class="n">res</span><span class="p">,</span> <span class="n">start</span> <span class="o">=</span> <span class="p">{},</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ch</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
                <span class="n">start</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">d</span><span class="p">[</span><span class="n">ch</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">res</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">i</span> <span class="o">-</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">d</span><span class="p">[</span><span class="n">ch</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
        <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200703085314693.png" src="https://img-blog.csdnimg.cn/20200703085314693.png" /></p>
<p>下面也是一个做法</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">lengthOfLongestSubstring</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="n">res</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">s</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">j</span><span class="p">]:</span>
                <span class="n">res</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">res</span><span class="p">,</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="o">-</span><span class="n">i</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">res</span>
</pre></div>
</div>
</div>
<div class="section" id="leetcode-8-atoi">
<h2>LeetCode 第8题：字符串转换整数 (atoi)<a class="headerlink" href="#leetcode-8-atoi" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#请你来实现一个 atoi 函数，使其能将字符串转换成整数。 </span>
<span class="c1"># 首先，该函数会根据需要丢弃无用的开头空格字符，直到寻找到第一个非空格的字符为止。接下来的转化规则如下： </span>
<span class="c1"># 如果第一个非空字符为正或者负号时，则将该符号与之后面尽可能多的连续数字字符组合起来，形成一个有符号整数。 </span>
<span class="c1"># 假如第一个非空字符是数字，则直接将其与之后连续的数字字符组合起来，形成一个整数。 </span>
<span class="c1"># 该字符串在有效的整数部分之后也可能会存在多余的字符，那么这些字符可以被忽略，它们对函数不应该造成影响。 </span>
<span class="c1"># 注意：假如该字符串中的第一个非空格字符不是一个有效整数字符、字符串为空或字符串仅包含空白字符时，则你的函数不需要进行转换，即无法进行有效转换。 </span>
<span class="c1"># 在任何情况下，若函数不能进行有效的转换时，请返回 0 。 </span>
<span class="c1"># 提示： </span>
<span class="c1"># 本题中的空白字符只包括空格字符 &#39; &#39; 。 </span>
<span class="c1"># 假设我们的环境只能存储 32 位大小的有符号整数，那么其数值范围为 [−231, 231 − 1]。如果数值超过这个范围，请返回 INT_MAX (231 − 1) 或 INT_MIN (−231) 。 </span>
<span class="c1"># 示例 1: </span>
<span class="c1"># 输入: &quot;42&quot;</span>
<span class="c1">#输出: 42</span>
<span class="c1"># 示例 2: </span>
<span class="c1">#</span>
<span class="c1"># 输入: &quot;   -42&quot;</span>
<span class="c1">#输出: -42</span>
<span class="c1">#解释: 第一个非空白字符为 &#39;-&#39;, 它是一个负号。</span>
<span class="c1">#     我们尽可能将负号与后面所有连续出现的数字组合起来，最后得到 -42 。</span>
<span class="c1"># 示例 3: </span>
<span class="c1"># 输入: &quot;4193 with words&quot;</span>
<span class="c1">#输出: 4193</span>
<span class="c1">#解释: 转换截止于数字 &#39;3&#39; ，因为它的下一个字符不为数字。</span>
<span class="c1"># 示例 4: </span>
<span class="c1"># 输入: &quot;words and 987&quot;</span>
<span class="c1">#输出: 0</span>
<span class="c1">#解释: 第一个非空字符是 &#39;w&#39;, 但它不是数字或正、负号。</span>
<span class="c1">#     因此无法执行有效的转换。 </span>
<span class="c1">#</span>
<span class="c1"># 示例 5: </span>
<span class="c1"># 输入: &quot;-91283472332&quot;</span>
<span class="c1">#输出: -2147483648</span>
<span class="c1">#解释: 数字 &quot;-91283472332&quot; 超过 32 位有符号整数范围。 </span>
<span class="c1">#     因此返回 INT_MIN (−231) 。</span>
<span class="c1"># Related Topics 数学 字符串</span>
</pre></div>
</div>
<p>最快的方法就是正则，re.find可以返回包含所有匹配字符串的列表，列表中只有一个字符串用于此问题，因为我们使用^来匹配开头。所以我们可以使用解压缩列表来获取它。[‘abc’] == ‘abc’</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">myAtoi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="o">*</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;^[\+\-]?\d+&#39;</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">lstrip</span><span class="p">())),</span> <span class="mi">2</span><span class="o">**</span><span class="mi">31</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span> <span class="o">-</span><span class="mi">2</span><span class="o">**</span><span class="mi">31</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">myAtoi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">str</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="nb">str</span> <span class="o">=</span> <span class="nb">str</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="mi">0</span>
        <span class="n">strlist</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">strlist</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">strlist</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="s1">&#39;0&#39;</span> <span class="ow">or</span> <span class="n">strlist</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="s1">&#39;9&#39;</span><span class="p">:</span>
                <span class="n">strlist</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span>
                <span class="k">break</span>
        <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">strlist</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>

        <span class="k">if</span> <span class="n">ret</span> <span class="o">&gt;</span> <span class="mi">2147483647</span><span class="p">:</span> <span class="k">return</span> <span class="mi">2147483647</span>
        <span class="k">elif</span> <span class="n">ret</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">2147483648</span><span class="p">:</span> <span class="k">return</span> <span class="o">-</span><span class="mi">2147483648</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="n">ret</span>
</pre></div>
</div>
</div>
<div class="section" id="leetcode-17">
<h2>LeetCode 第17题：电话号码的字母组合<a class="headerlink" href="#leetcode-17" title="永久链接至标题">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>&#39;&#39;&#39;
给定一个仅包含数字 2-9 的字符串，返回所有它能表示的字母组合。
给出数字到字母的映射如下（与电话按键相同）。注意 1 不对应任何字母。
示例:
输入：&quot;23&quot;
输出：[&quot;ad&quot;, &quot;ae&quot;, &quot;af&quot;, &quot;bd&quot;, &quot;be&quot;, &quot;bf&quot;, &quot;cd&quot;, &quot;ce&quot;, &quot;cf&quot;].
tb = [&#39;abc&#39;, &#39;def&#39;, &#39;ghi&#39;, &#39;jkl&#39;, &#39;mno&#39;, &#39;pqrs&#39;, &#39;tuv&#39;, &#39;wxyz&#39;]
&#39;&#39;&#39;
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200703094427404.png" src="https://img-blog.csdnimg.cn/20200703094427404.png" /></p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>class Solution(object):
    def letterCombinations(self, digits):
        &quot;&quot;&quot;
        :type digits: str
        :rtype: List[str]
        &quot;&quot;&quot;
        phone= {
            &#39;2&#39;:[&#39;a&#39;,&#39;b&#39;,&#39;c&#39;],
            &#39;3&#39;:[&#39;d&#39;,&#39;e&#39;,&#39;f&#39;],
            &#39;4&#39;:[&#39;g&#39;,&#39;h&#39;,&#39;i&#39;],
            &#39;5&#39;:[&#39;j&#39;,&#39;k&#39;,&#39;l&#39;],
            &#39;6&#39;:[&#39;m&#39;,&#39;n&#39;,&#39;o&#39;],
            &#39;7&#39;:[&#39;p&#39;,&#39;q&#39;,&#39;r&#39;,&#39;s&#39;],
            &#39;8&#39;:[&#39;t&#39;,&#39;u&#39;,&#39;v&#39;],
            &#39;9&#39;:[&#39;w&#39;,&#39;x&#39;,&#39;y&#39;,&#39;z&#39;]
        }
        def backtrack(combination,next_digits):
            if len(next_digits) == 0:
                return output.append(combination)
            else:
                for letter in phone[next_digits[0]]:
                    backtrack(combination+letter,next_digits[1:])
                
                
        output = []
        if digits:
            backtrack(&#39;&#39;,digits)
        return output


class Solution:
    def letterCombinations(self, digits: str) -&gt; List[str]:
        conversion={&#39;2&#39;:&#39;abc&#39;,&#39;3&#39;:&#39;def&#39;,&#39;4&#39;:&#39;ghi&#39;,&#39;5&#39;:&#39;jkl&#39;,&#39;6&#39;:&#39;mno&#39;,&#39;7&#39;:&#39;pqrs&#39;,&#39;8&#39;:&#39;tuv&#39;,&#39;9&#39;:&#39;wxyz&#39;}
        if len(digits)==0:
            return [] 
        product=[&#39;&#39;]
        for k in digits:
            product=[i+j for i in product for j in conversion[k]]
        return product
</pre></div>
</div>
</div>
<div class="section" id="leetcode-20">
<h2>LeetCode 第20题：有效的括号<a class="headerlink" href="#leetcode-20" title="永久链接至标题">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>&#39;&#39;&#39;
给定一个只包括 &#39;(&#39;，&#39;)&#39;，&#39;{&#39;，&#39;}&#39;，&#39;[&#39;，&#39;]&#39; 的字符串，判断字符串是否有效。
有效字符串需满足：
    左括号必须用相同类型的右括号闭合。
    左括号必须以正确的顺序闭合。
    注意空字符串可被认为是有效字符串。
输入: &quot;{[]}&quot;
输出: true
&#39;&#39;&#39;

def isValid(s):
    &quot;&quot;&quot;
    :type s: str
    :rtype: bool
    &quot;&quot;&quot;
    stack = []
    paren_map ={&#39;)&#39;:&#39;(&#39;,&#39;]&#39;:&#39;[&#39;,&#39;}&#39;:&#39;{&#39;}
    for c in s:
        if c not in paren_map:
            stack.append(c)
        elif not stack or paren_map[c] !=stack.pop():
            return False
    return not stack
s = input(&#39;输入括号字符:&#39;)
print(isValid(s))
</pre></div>
</div>
<p>也可以利用python种的replace函数将成对的可匹配括号用空字符代替 ，之后依次进行 ，若是有效的括号 ，必然经过有限次循环后 ，字符串为空 ，则最后判断字符串是否为空即可。思路简单 ，实现也很容易 ：</p>
<p><img alt="https://img-blog.csdnimg.cn/20200703095225329.png" src="https://img-blog.csdnimg.cn/20200703095225329.png" /></p>
</div>
<div class="section" id="leetcode-125">
<h2>LeetCode 第125题：验证回文串<a class="headerlink" href="#leetcode-125" title="永久链接至标题">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>#给定一个字符串，验证它是否是回文串，只考虑字母和数字字符，可以忽略字母的大小写。 
# 说明：本题中，我们将空字符串定义为有效的回文串。 
# 示例 1: 
# 输入: &quot;A man, a plan, a canal: Panama&quot;
#输出: true
# 示例 2: 
# 输入: &quot;race a car&quot;
#输出: false
# Related Topics 双指针 字符串
</pre></div>
</div>
<p>用正则表达式，将除字母、数字以外的字符全部去掉，然后判断是否对称</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>class Solution:
    def isPalindrome(self, s: str) -&gt; bool:
        s = re.sub(r&#39;[^a-z0-9]&#39;, &#39;&#39;, s.strip().lower())
        return s == s[::-1]

</pre></div>
</div>
<p>让字符串字母都变成小写，然后只保留字母和数字，翻转，比较得到结果</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>class Solution:
    def isPalindrome(self, s: str) -&gt; bool:
        s = &#39;&#39;.join(filter(str.isalnum, s.lower()))
        return s == s[::-1]
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200703095729397.png" src="https://img-blog.csdnimg.cn/20200703095729397.png" /></p>
</div>
</div>
<div class="section" id="id415">
<h1>72、Python | Leetcode字符串系列（下篇）<a class="headerlink" href="#id415" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen</p>
<p>今日，我决定继续更新Python教程，今天就开始了七十二、Python | Leetcode字符串系列（下篇）。</p>
<div class="section" id="leetcode-14">
<h2>LeetCode 第14题：最长公共前缀<a class="headerlink" href="#leetcode-14" title="永久链接至标题">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>#编写一个函数来查找字符串数组中的最长公共前缀。 
# 如果不存在公共前缀，返回空字符串 &quot;&quot;。 
# 示例 1: 
# 输入: [&quot;flower&quot;,&quot;flow&quot;,&quot;flight&quot;]
#输出: &quot;fl&quot;
# 示例 2: 
# 输入: [&quot;dog&quot;,&quot;racecar&quot;,&quot;car&quot;]
#输出: &quot;&quot;
#解释: 输入不存在公共前缀。
# 说明: 
# 所有输入只包含小写字母 a-z 。 
# Related Topics 字符串
</pre></div>
</div>
<p>解题思路：使用 zip 根据字符串下标合并成数组，判断合并后数组里元素是否都相同</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>class Solution(object):
    def longestCommonPrefix(self, strs):
        ans = &#39;&#39;
        for i in zip(*strs):
            if len(set(i)) == 1:
                ans += i[0]
            else:
                break
        return ans
</pre></div>
</div>
</div>
<div class="section" id="leetcode-28-strstr">
<h2>LeetCode 第28题：实现 strStr()<a class="headerlink" href="#leetcode-28-strstr" title="永久链接至标题">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>#实现 strStr() 函数。 
# 给定一个 haystack 字符串和一个 needle 字符串，在 haystack 字符串中找出 needle 字符串出现的第一个位置 (从0开始)。如果不存在，则返回 -1。 
# 示例 1: 
# 输入: haystack = &quot;hello&quot;, needle = &quot;ll&quot;
#输出: 2
# 示例 2: 
# 输入: haystack = &quot;aaaaa&quot;, needle = &quot;bba&quot;
#输出: -1
# 说明: 
# 当 needle 是空字符串时，我们应当返回什么值呢？这是一个在面试中很好的问题。 
# 对于本题而言，当 needle 是空字符串时我们应当返回 0 。这与C语言的 strstr() 以及 Java的 indexOf() 定义相符。 
# Related Topics 双指针 字符串
</pre></div>
</div>
<p>通过index进行needle数据查询，当不存在是index会报错，直接将其输出-1即可</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">strStr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">haystack</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">needle</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">needle</span> <span class="ow">in</span> <span class="n">haystack</span><span class="p">:</span>         
            <span class="n">num</span> <span class="o">=</span> <span class="n">haystack</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">needle</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">return</span> <span class="n">num</span>
</pre></div>
</div>
</div>
<div class="section" id="leetcode-67">
<h2>LeetCode 第67题： 二进制求和<a class="headerlink" href="#leetcode-67" title="永久链接至标题">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>#给你两个二进制字符串，返回它们的和（用二进制表示）。 
# 输入为 非空 字符串且只包含数字 1 和 0。 
# 示例 1: 
# 输入: a = &quot;11&quot;, b = &quot;1&quot;
#输出: &quot;100&quot; 
# 示例 2: 
# 输入: a = &quot;1010&quot;, b = &quot;1011&quot;
#输出: &quot;10101&quot; 
# 提示： 
# 每个字符串仅由字符 &#39;0&#39; 或 &#39;1&#39; 组成。 
# 1 &lt;= a.length, b.length &lt;= 10^4 
# 字符串如果不是 &quot;0&quot; ，就都不含前导零。 
# Related Topics 数学 字符串
</pre></div>
</div>
<p>用python在十进制与二进制之间进行转换，求和转化返回。</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>class Solution:
    def addBinary(self, a: str, b: str) -&gt; str:
        atmp = eval(&#39;0b&#39; + a) #a对应的10进制数
        btmp = eval(&#39;0b&#39; + b) #b对应的10进制数
        sumtmp = atmp + btmp #a+b对应的10进制数
        res = bin(sumtmp)  #10进制数转化为二进制数字符串
        return res[2:]   #返回结果字符串
</pre></div>
</div>
<p>位运算模拟二进制加法运算。异或运算的特点是a和b不一样才为1，与运算的特点是a和b同为1时才为1，否则为0，刚好可以逐步记录进位。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200703101705855.png" src="https://img-blog.csdnimg.cn/20200703101705855.png" /></p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>class Solution:
    def addBinary(self, a: str, b: str) -&gt; str:
        atmp = eval(&#39;0b&#39; + a)
        btmp = eval(&#39;0b&#39; + b)
        while btmp:
            ans = (atmp ^ btmp)
            btmp = (atmp &amp; btmp) &lt;&lt; 1
            atmp = ans
        return bin(atmp)[2:]
</pre></div>
</div>
</div>
<div class="section" id="leetcode-344">
<h2>LeetCode 第344题： 反转字符串<a class="headerlink" href="#leetcode-344" title="永久链接至标题">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>#编写一个函数，其作用是将输入的字符串反转过来。输入字符串以字符数组 char[] 的形式给出。 
# 不要给另外的数组分配额外的空间，你必须原地修改输入数组、使用 O(1) 的额外空间解决这一问题。 
# 你可以假设数组中的所有字符都是 ASCII 码表中的可打印字符。 
# 示例 1： 
# 输入：[&quot;h&quot;,&quot;e&quot;,&quot;l&quot;,&quot;l&quot;,&quot;o&quot;]
#输出：[&quot;o&quot;,&quot;l&quot;,&quot;l&quot;,&quot;e&quot;,&quot;h&quot;]
# 示例 2： 
# 输入：[&quot;H&quot;,&quot;a&quot;,&quot;n&quot;,&quot;n&quot;,&quot;a&quot;,&quot;h&quot;]
#输出：[&quot;h&quot;,&quot;a&quot;,&quot;n&quot;,&quot;n&quot;,&quot;a&quot;,&quot;H&quot;] 
# Related Topics 双指针 字符串
</pre></div>
</div>
<p>双指针思想，左右交换</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span> <span class="kd">class</span> <span class="nc">Solution</span><span class="o">:</span>
    <span class="n">def</span> <span class="nf">reverseString</span><span class="o">(</span><span class="n">self</span><span class="o">,</span> <span class="n">s</span><span class="o">:</span> <span class="n">List</span><span class="o">[</span><span class="n">str</span><span class="o">])</span> <span class="o">-&gt;</span> <span class="n">None</span><span class="o">:</span>
        <span class="s">&quot;&quot;&quot;</span>
<span class="s">        Do not return anything, modify s in-place instead.</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="n">i</span><span class="o">,</span><span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="o">,</span><span class="n">len</span><span class="o">(</span><span class="n">s</span><span class="o">)-</span><span class="mi">1</span>
        <span class="k">while</span> <span class="n">i</span><span class="o">&lt;=</span><span class="n">j</span><span class="o">:</span>
            <span class="n">s</span><span class="o">[</span><span class="n">i</span><span class="o">],</span><span class="n">s</span><span class="o">[</span><span class="n">j</span><span class="o">]=</span><span class="n">s</span><span class="o">[</span><span class="n">j</span><span class="o">],</span><span class="n">s</span><span class="o">[</span><span class="n">i</span><span class="o">]</span>
            <span class="n">i</span><span class="o">+=</span><span class="mi">1</span>
            <span class="n">j</span><span class="o">-=</span><span class="mi">1</span>


<span class="kd">class</span> <span class="nc">Solution</span><span class="o">:</span>
    <span class="n">def</span> <span class="nf">reverseString</span><span class="o">(</span><span class="n">self</span><span class="o">,</span> <span class="n">s</span><span class="o">:</span> <span class="n">List</span><span class="o">[</span><span class="n">str</span><span class="o">])</span> <span class="o">-&gt;</span> <span class="n">None</span><span class="o">:</span>
        <span class="s">&quot;&quot;&quot;</span>
<span class="s">        Do not return anything, modify s in-place instead.</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="n">s</span><span class="o">.</span><span class="na">reverse</span><span class="o">()</span>
</pre></div>
</div>
</div>
<div class="section" id="leetcode-557-iii">
<h2>LeetCode 第557题：  反转字符串中的单词 III<a class="headerlink" href="#leetcode-557-iii" title="永久链接至标题">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>#给定一个字符串，你需要反转字符串中每个单词的字符顺序，同时仍保留空格和单词的初始顺序。 
# 示例 1: 
#输入: &quot;Let&#39;s take LeetCode contest&quot;
#输出: &quot;s&#39;teL ekat edoCteeL tsetnoc&quot; 
# 注意：在字符串中，每个单词由单个空格分隔，并且字符串中不会有任何额外的空格。 
# Related Topics 字符串
</pre></div>
</div>
<p>将字符串分割成单词列表 然后把每个单词反转切片</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nf">Solution</span><span class="o">(</span><span class="n">object</span><span class="o">):</span>
    <span class="n">def</span> <span class="nf">reverseWords</span><span class="o">(</span><span class="n">self</span><span class="o">,</span> <span class="n">s</span><span class="o">):</span>
        <span class="k">return</span> <span class="s">&quot; &quot;</span><span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="n">word</span><span class="o">[::-</span><span class="mi">1</span><span class="o">]</span> <span class="k">for</span> <span class="n">word</span> <span class="n">in</span> <span class="n">s</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&quot; &quot;</span><span class="o">))</span>
</pre></div>
</div>
<p>先反转单词列表 再反转字符串</p>
<p>以字符串<code class="docutils literal notranslate"><span class="pre">“I</span> <span class="pre">love</span> <span class="pre">drag</span> <span class="pre">queen”</span></code>为例：</p>
<p><code class="docutils literal notranslate"><span class="pre">s.split(&quot;</span> <span class="pre">&quot;)</span> </code>将字符串分割成单词列表:</p>
<p><code class="docutils literal notranslate"><span class="pre">['I',</span> <span class="pre">'love',</span> <span class="pre">'drag',</span> <span class="pre">'queen']</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">s.split(&quot;</span> <span class="pre">&quot;)[::-1]</span> </code>将单词列表反转:</p>
<p><code class="docutils literal notranslate"><span class="pre">['queen',</span> <span class="pre">'drag',</span> <span class="pre">'love',</span> <span class="pre">'I']</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">&quot;</span> <span class="pre">&quot;.join(s.split(&quot;</span> <span class="pre">&quot;)[::-1])</span> </code>将单词列表转换为字符串，以空格分隔:</p>
<p><code class="docutils literal notranslate"><span class="pre">&quot;queen</span> <span class="pre">drag</span> <span class="pre">love</span> <span class="pre">I&quot;</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">&quot;</span> <span class="pre">&quot;.join(s.split(&quot;</span> <span class="pre">&quot;)[::-1])[::-1]</span> </code>将字符串反转：</p>
<p><code class="docutils literal notranslate"><span class="pre">”I</span> <span class="pre">evol</span> <span class="pre">gard</span> <span class="pre">neeuq“</span></code></p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nf">Solution</span><span class="o">(</span><span class="n">object</span><span class="o">):</span>
    <span class="n">def</span> <span class="nf">reverseWords</span><span class="o">(</span><span class="n">self</span><span class="o">,</span> <span class="n">s</span><span class="o">):</span>
        <span class="k">return</span> <span class="s">&quot; &quot;</span><span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&quot; &quot;</span><span class="o">)[::-</span><span class="mi">1</span><span class="o">])[::-</span><span class="mi">1</span><span class="o">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id416">
<h1>73、Python | Leetcode数字系列（上篇）<a class="headerlink" href="#id416" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen</p>
<p>今日，我决定继续更新Python教程，今天就开始了七十三、Python | Leetcode数字系列（上篇）。</p>
<p>这一部分是比较简单的，就当作Python编写代码的练习题。</p>
<div class="section" id="leetcode-9">
<h2>LeetCode 第9题： 回文数<a class="headerlink" href="#leetcode-9" title="永久链接至标题">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>#判断一个整数是否是回文数。回文数是指正序（从左向右）和倒序（从右向左）读都是一样的整数。 
# 示例 1: 
# 输入: 121
#输出: true
# 示例 2: 
# 输入: -121
#输出: false
#解释: 从左向右读, 为 -121 。 从右向左读, 为 121- 。因此它不是一个回文数。
# 示例 3: 
# 输入: 10
#输出: false
#解释: 从右向左读, 为 01 。因此它不是一个回文数。
# 进阶: 
# 你能不将整数转为字符串来解决这个问题吗？ 
# Related Topics 数学
</pre></div>
</div>
<p>最好理解的一种解法就是先将 整数转为字符串 ，然后将只需要循环每个字符进行判断对应元素是否相等即可。可以的话，还可以<code class="docutils literal notranslate"><span class="pre">return</span> <span class="pre">str(x)</span> <span class="pre">==</span> <span class="pre">str(x)[::-1]</span></code>简单粗暴。
`</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">Solution</span><span class="o">:</span>
    <span class="n">def</span> <span class="nf">isPalindrome</span><span class="o">(</span><span class="n">self</span><span class="o">,</span> <span class="n">x</span><span class="o">:</span> <span class="kt">int</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">bool</span><span class="o">:</span>
        <span class="k">if</span> <span class="n">not</span> <span class="n">x</span><span class="o">:</span>
            <span class="k">return</span> <span class="n">True</span>
        <span class="n">str_x</span> <span class="o">=</span> <span class="n">str</span><span class="o">(</span><span class="n">x</span><span class="o">)</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">len</span><span class="o">(</span><span class="n">str_x</span><span class="o">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="n">in</span> <span class="nf">range</span><span class="o">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="o">):</span>
            <span class="k">if</span> <span class="n">str_x</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">!=</span> <span class="n">str_x</span><span class="o">[</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="n">i</span><span class="o">]:</span>
                <span class="k">return</span> <span class="n">False</span>
        <span class="k">return</span> <span class="n">True</span>
</pre></div>
</div>
<p>不将整数转为字符串，那么算出对应的回文数在比较欧克。</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>class Solution:
    def isPalindrome(self, x: int) -&gt; bool:
        if x &lt; 0: # 如果为负数，直接返回 false
            return False
        num = x
        cur = 0
        while num !=0:
            cur = cur*10 + num%10
            num //=10
        return cur == x # 最后比较 数值反转前后是否相等
</pre></div>
</div>
</div>
<div class="section" id="leetcode-12">
<h2>LeetCode 第12题：整数转罗马数字<a class="headerlink" href="#leetcode-12" title="永久链接至标题">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>#罗马数字包含以下七种字符： I， V， X， L，C，D 和 M。 
# 字符          数值
#I             1
#V             5
#X             10
#L             50
#C             100
#D             500
#M             1000 
# 例如， 罗马数字 2 写做 II ，即为两个并列的 1。12 写做 XII ，即为 X + II 。 27 写做 XXVII, 即为 XX + V + II 。 
# 通常情况下，罗马数字中小的数字在大的数字的右边。但也存在特例，例如 4 不写做 IIII，而是 IV。数字 1 在数字 5 的左边，所表示的数等于大数 5 减小数 1 得到的数值 4 。同样地，数字 9 表示为 IX。这个特殊的规则只适用于以下六种情况： 
# I 可以放在 V (5) 和 X (10) 的左边，来表示 4 和 9。 
# X 可以放在 L (50) 和 C (100) 的左边，来表示 40 和 90。 
# C 可以放在 D (500) 和 M (1000) 的左边，来表示 400 和 900。 
# 给定一个整数，将其转为罗马数字。输入确保在 1 到 3999 的范围内。 
# 示例 1: 
# 输入: 3
#输出: &quot;III&quot; 
# 示例 2: 
# 输入: 4
#输出: &quot;IV&quot; 
# 示例 3: 
# 输入: 9
#输出: &quot;IX&quot;
# 示例 4: 
# 输入: 58
#输出: &quot;LVIII&quot;
#解释: L = 50, V = 5, III = 3.
# 示例 5: 
# 输入: 1994
#输出: &quot;MCMXCIV&quot;
#解释: M = 1000, CM = 900, XC = 90, IV = 4. 
# Related Topics 数学 字符串
</pre></div>
</div>
<p>使用哈希表解决.哈希表键为整数，值为罗马数字，且键从大到小排列；遍历整个哈希表，判断当前数值是否大于等于此刻的键：若能，则s加上整除的个数乘以值；若不能，则遍历下一个。</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>class Solution:
    def intToRoman(self, num: int) -&gt; str:
        d = {1000: &#39;M&#39;, 900: &#39;CM&#39;, 500: &#39;D&#39;, 400: &#39;CD&#39;, 100: &#39;C&#39;, 90: &#39;XC&#39;, 50: &#39;L&#39;, 40: &#39;XL&#39;, 10: &#39;X&#39;, 9: &#39;IX&#39;, 5: &#39;V&#39;, 4: &#39;IV&#39;, 1: &#39;I&#39;}
        res = &#39;&#39;
        for k in d:
            while num &gt;= k:
                res += d[k]
                num -= k
        return res
</pre></div>
</div>
</div>
<div class="section" id="leetcode-13">
<h2>LeetCode 第13题：整数转罗马数字<a class="headerlink" href="#leetcode-13" title="永久链接至标题">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>#罗马数字包含以下七种字符: I， V， X， L，C，D 和 M。 
# 字符          数值
#I             1
#V             5
#X             10
#L             50
#C             100
#D             500
#M             1000 
# 例如， 罗马数字 2 写做 II ，即为两个并列的 1。12 写做 XII ，即为 X + II 。 27 写做 XXVII, 即为 XX + V + II 。 
# 通常情况下，罗马数字中小的数字在大的数字的右边。但也存在特例，例如 4 不写做 IIII，而是 IV。数字 1 在数字 5 的左边，所表示的数等于大数 5 减小数 1 得到的数值 4 。同样地，数字 9 表示为 IX。这个特殊的规则只适用于以下六种情况： 
# I 可以放在 V (5) 和 X (10) 的左边，来表示 4 和 9。 
# X 可以放在 L (50) 和 C (100) 的左边，来表示 40 和 90。 
# C 可以放在 D (500) 和 M (1000) 的左边，来表示 400 和 900。 
# 给定一个罗马数字，将其转换成整数。输入确保在 1 到 3999 的范围内。 
# 示例 1: 
# 输入: &quot;III&quot;
#输出: 3 
# 示例 2: 
# 输入: &quot;IV&quot;
#输出: 4 
# 示例 3: 
# 输入: &quot;IX&quot;
#输出: 9 
# 示例 4: 
# 输入: &quot;LVIII&quot;
#输出: 58
#解释: L = 50, V= 5, III = 3.
# 示例 5: 
# 输入: &quot;MCMXCIV&quot;
#输出: 1994
#解释: M = 1000, CM = 900, XC = 90, IV = 4. 
# Related Topics 数学 字符串
</pre></div>
</div>
<p>思路：</p>
<ul class="simple">
<li>创建hashMap字典表映射罗马数字和整数。</li>
<li>.如果当前字符代表的值不小于其右边，就加上该值；否则就减去该值。</li>
</ul>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">Solution</span><span class="o">:</span>
    <span class="n">def</span> <span class="nf">romanToInt</span><span class="o">(</span><span class="n">self</span><span class="o">,</span> <span class="n">s</span><span class="o">:</span> <span class="n">str</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="kt">int</span><span class="o">:</span>
        <span class="n">a</span> <span class="o">=</span> <span class="o">{</span><span class="sc">&#39;I&#39;</span><span class="o">:</span><span class="mi">1</span><span class="o">,</span> <span class="sc">&#39;V&#39;</span><span class="o">:</span><span class="mi">5</span><span class="o">,</span> <span class="sc">&#39;X&#39;</span><span class="o">:</span><span class="mi">10</span><span class="o">,</span> <span class="sc">&#39;L&#39;</span><span class="o">:</span><span class="mi">50</span><span class="o">,</span> <span class="sc">&#39;C&#39;</span><span class="o">:</span><span class="mi">100</span><span class="o">,</span> <span class="sc">&#39;D&#39;</span><span class="o">:</span><span class="mi">500</span><span class="o">,</span> <span class="sc">&#39;M&#39;</span><span class="o">:</span><span class="mi">1000</span><span class="o">}</span>
        <span class="n">ans</span><span class="o">=</span><span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="n">in</span> <span class="nf">range</span><span class="o">(</span><span class="n">len</span><span class="o">(</span><span class="n">s</span><span class="o">)):</span>
            <span class="k">if</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">len</span><span class="o">(</span><span class="n">s</span><span class="o">)-</span><span class="mi">1</span> <span class="n">and</span> <span class="n">a</span><span class="o">[</span><span class="n">s</span><span class="o">[</span><span class="n">i</span><span class="o">]]&lt;</span><span class="n">a</span><span class="o">[</span><span class="n">s</span><span class="o">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="o">]]:</span>
                <span class="n">ans</span><span class="o">-=</span><span class="n">a</span><span class="o">[</span><span class="n">s</span><span class="o">[</span><span class="n">i</span><span class="o">]]</span>
            <span class="k">else</span><span class="o">:</span>
                <span class="n">ans</span><span class="o">+=</span><span class="n">a</span><span class="o">[</span><span class="n">s</span><span class="o">[</span><span class="n">i</span><span class="o">]]</span>
        <span class="k">return</span> <span class="n">ans</span>
</pre></div>
</div>
</div>
<div class="section" id="leetcode-29">
<h2>LeetCode 第29题： 两数相除<a class="headerlink" href="#leetcode-29" title="永久链接至标题">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>#给定两个整数，被除数 dividend 和除数 divisor。将两数相除，要求不使用乘法、除法和 mod 运算符。 
# 返回被除数 dividend 除以除数 divisor 得到的商。 
# 整数除法的结果应当截去（truncate）其小数部分，例如：truncate(8.345) = 8 以及 truncate(-2.7335) = -2 
# 示例 1: 
# 输入: dividend = 10, divisor = 3
#输出: 3
#解释: 10/3 = truncate(3.33333..) = truncate(3) = 3 
# 示例 2: 
# 输入: dividend = 7, divisor = -3
#输出: -2
#解释: 7/-3 = truncate(-2.33333..) = -2 
# 提示： 
# 被除数和除数均为 32 位有符号整数。 
# 除数不为 0。 
# 假设我们的环境只能存储 32 位有符号整数，其数值范围是 [−231, 231 − 1]。本题中，如果除法结果溢出，则返回 231 − 1。 
# Related Topics 数学 二分查找
</pre></div>
</div>
<p>乘除取余都不让用，那就位运算走起. 那问题是，如何设计位运算？<code class="docutils literal notranslate"><span class="pre">商*除数+余数=被除数</span></code>，这个式子大家肯定都清楚 在本题中， 余数是可以忽略的，当然， 余数肯定是小于 除数的 那么我们就可以理解为：商就是 被除数减去N多个 除数，直到 <code class="docutils literal notranslate"><span class="pre">被除数-N个除数变得小于</span> </code>除数最终就是 N这个 商了。</p>
<p>让我们先回顾一下小学时，怎么通过列竖式的方法计算两个整数的除法，以 45/2 为例：</p>
<p><img alt="https://img-blog.csdnimg.cn/20200703155803356.png" src="https://img-blog.csdnimg.cn/20200703155803356.png" />
仔细观察不难发现，这种算法是把除法化归成移位和减法两种运算方法。对于 10 进制数，移位运算就是乘（左移）除（右移）10，而我们都知道计算机中的移位运算是乘（左移）除（右移）2，因为计算机是通过二进制的方法存储数的。这样，类比十进制，二进制的除法（仍以 45/2 为例）可以写作（注意，这里我们并没有用到乘除法）</p>
<p><img alt="https://img-blog.csdnimg.cn/20200703155822378.png" src="https://img-blog.csdnimg.cn/20200703155822378.png" /></p>
<p>下面就是代码实现了</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>class Solution:
    def divide(self, dividend: int, divisor: int) -&gt; int:
        # 使用异或判断符号
        sign = (dividend&gt;0)^(divisor&gt;0)
        # 方便起见全部使用正数来做除法，最后加上符号
        dividend = abs(dividend)
        divisor = abs(divisor)
        count = 0

        while dividend &gt;= divisor:
            divisor &lt;&lt;= 1
            count += 1
        result = 0

        while count &gt; 0:
            count -= 1
            divisor &gt;&gt;= 1
            if divisor &lt;= dividend:
                dividend = dividend-divisor
                result += 1&lt;&lt;count
        if sign:
            result = -result

        return result if -(1&lt;&lt;31)&lt;=result&lt;=(1&lt;&lt;31)-1 else (1&lt;&lt;31)-1
</pre></div>
</div>
</div>
<div class="section" id="leetcode-50-pow-x-n">
<h2>LeetCode 第50题： Pow(x, n)<a class="headerlink" href="#leetcode-50-pow-x-n" title="永久链接至标题">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>#实现 pow(x, n) ，即计算 x 的 n 次幂函数。 
# 示例 1: 
# 输入: 2.00000, 10
#输出: 1024.00000
# 示例 2: 
# 输入: 2.10000, 3
#输出: 9.26100
# 示例 3: 
# 输入: 2.00000, -2
#输出: 0.25000
#解释: 2-2 = 1/22 = 1/4 = 0.25 
# 说明: 
# -100.0 &lt; x &lt; 100.0 
# n 是 32 位有符号整数，其数值范围是 [−231, 231 − 1] 。 
# Related Topics 数学 二分查找
</pre></div>
</div>
<p>主要是注意n的正负，这个题比较简单了，直接递归调用就行。</p>
<ul class="simple">
<li>如果 n 是负数，那么相当于求$ (1/x)^(-n)。</li>
<li>n 是正数 且 奇数，那么结果需要单独乘以 x</li>
<li>如果 n 是正数 且 偶数，求(x^2)^(n/2)，一直递归下去即可。</li>
</ul>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nf">Solution</span><span class="o">(</span><span class="n">object</span><span class="o">):</span>
    <span class="n">def</span> <span class="nf">myPow</span><span class="o">(</span><span class="n">self</span><span class="o">,</span> <span class="n">x</span><span class="o">,</span> <span class="n">n</span><span class="o">):</span>
        <span class="s">&quot;&quot;&quot;</span>
<span class="s">        :type x: float</span>
<span class="s">        :type n: int</span>
<span class="s">        :rtype: float</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="o">:</span>
            <span class="k">return</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">x</span>
            <span class="n">n</span> <span class="o">=</span> <span class="o">-</span><span class="n">n</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span><span class="o">:</span>
            <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">self</span><span class="o">.</span><span class="na">myPow</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span>
        <span class="k">return</span> <span class="n">self</span><span class="o">.</span><span class="na">myPow</span><span class="o">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">x</span><span class="o">,</span> <span class="n">n</span> <span class="o">/</span> <span class="mi">2</span><span class="o">)</span>
</pre></div>
</div>
<p>使用迭代的方法，这个方法叫做二分求幂。</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">Solution</span><span class="o">:</span>
    <span class="n">def</span> <span class="nf">myPow</span><span class="o">(</span><span class="n">self</span><span class="o">,</span> <span class="n">x</span><span class="o">:</span> <span class="kt">float</span><span class="o">,</span> <span class="n">n</span><span class="o">:</span> <span class="kt">int</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="kt">float</span><span class="o">:</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="o">:</span>
            <span class="k">return</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">x</span>
            <span class="n">n</span> <span class="o">=</span> <span class="o">-</span><span class="n">n</span>
        <span class="n">p</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">while</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="o">:</span>
            <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="o">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span>
                <span class="n">n</span> <span class="o">/=</span> <span class="mi">2</span>
            <span class="k">else</span><span class="o">:</span>
                <span class="n">p</span> <span class="o">*=</span> <span class="n">x</span>
                <span class="n">n</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="n">p</span> <span class="o">*=</span> <span class="n">x</span>        
        <span class="k">return</span> <span class="n">p</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id417">
<h1>74、Python | Leetcode数字系列（下篇）<a class="headerlink" href="#id417" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen</p>
<p>今日，我决定继续更新Python教程，今天就开始了七十四、Python | Leetcode数字系列（下篇）。</p>
<p>这一部分也是比较简单的，就当作Python编写代码的练习题。</p>
<div class="section" id="leetcode-69-x">
<h2>LeetCode 第 69题：x 的平方根<a class="headerlink" href="#leetcode-69-x" title="永久链接至标题">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#实现 int sqrt(int x) 函数。 </span>
<span class="cp"># 计算并返回 x 的平方根，其中 x 是非负整数。 </span>
<span class="cp"># 由于返回类型是整数，结果只保留整数的部分，小数部分将被舍去。 </span>
<span class="cp"># 示例 1: </span>
<span class="cp"># 输入: 4</span>
<span class="cp">#输出: 2</span>
<span class="cp"># 示例 2: </span>
<span class="cp"># 输入: 8</span>
<span class="cp">#输出: 2</span>
<span class="cp">#说明: 8 的平方根是 2.82842..., </span>
<span class="cp">#     由于返回类型是整数，小数部分将被舍去。</span>
<span class="cp"># Related Topics 数学 二分查找</span>
</pre></div>
</div>
<p>这个题目的话，使用二分查找，left是1，high是数字x。就是一个二分查找，不懂二分查找的自己去搜索。每次去计算mid*mid与数字x的大小，如果比x大，那么就令high去等于mid-1;比x小，就令low等于mid+1;等于x,那么直接返回mid;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">mySqrt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">l</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">x</span>
        <span class="k">while</span> <span class="n">l</span> <span class="o">&lt;=</span> <span class="n">r</span><span class="p">:</span>
            <span class="n">mid</span> <span class="o">=</span> <span class="n">l</span> <span class="o">+</span> <span class="p">(</span><span class="n">r</span><span class="o">-</span><span class="n">l</span><span class="p">)</span><span class="o">//</span><span class="mi">2</span>
            <span class="k">if</span> <span class="n">mid</span> <span class="o">*</span> <span class="n">mid</span> <span class="o">&lt;=</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">mid</span>
            <span class="k">elif</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">mid</span> <span class="o">*</span> <span class="n">mid</span><span class="p">:</span>
                <span class="n">r</span> <span class="o">=</span> <span class="n">mid</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">l</span> <span class="o">=</span> <span class="n">mid</span> <span class="o">+</span> <span class="mi">1</span>
</pre></div>
</div>
<p>还有一种方法是牛顿法, 利用一阶线性近似快速寻找最优点.。</p>
<p>$X_{k+1}=\frac{X_k-Y_k}{{f}’(X_k)}=\frac{1}{2}(X_k+\frac{a}{X_k})$</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="o">:</span>
    <span class="n">def</span> <span class="n">mySqrt</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="nl">x</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">int</span><span class="o">:</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="o">:</span>
            <span class="k">return</span> <span class="n">x</span>
        <span class="n">r0</span> <span class="o">=</span> <span class="n">x</span>
        <span class="n">r1</span> <span class="o">=</span> <span class="p">(</span><span class="n">r0</span> <span class="o">+</span> <span class="n">x</span> <span class="o">/</span> <span class="n">r0</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
        <span class="k">while</span> <span class="n">abs</span><span class="p">(</span><span class="n">r0</span> <span class="o">-</span> <span class="n">r1</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="o">:</span>
            <span class="n">r0</span> <span class="o">=</span> <span class="n">r1</span>
            <span class="n">r1</span> <span class="o">=</span> <span class="p">(</span><span class="n">r1</span> <span class="o">+</span> <span class="n">x</span> <span class="o">/</span> <span class="n">r1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
        <span class="k">return</span> <span class="kt">int</span><span class="p">(</span><span class="n">r1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="leetcode-169">
<h2>LeetCode 第 169题：多数元素<a class="headerlink" href="#leetcode-169" title="永久链接至标题">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#给定一个大小为 n 的数组，找到其中的多数元素。多数元素是指在数组中出现次数大于 ⌊ n/2 ⌋ 的元素。</span>
<span class="cp"># 你可以假设数组是非空的，并且给定的数组总是存在多数元素。</span>
<span class="cp"># 示例 1: </span>
<span class="cp"># 输入: [3,2,3]</span>
<span class="cp">#输出: 3 </span>
<span class="cp"># 示例 2: </span>
<span class="cp"># 输入: [2,2,1,1,1,2,2]</span>
<span class="cp">#输出: 2</span>
<span class="cp"># </span>
<span class="cp"># Related Topics 位运算 数组 分治算法</span>
</pre></div>
</div>
<p>利用集合的计数功能找到出现最多的元素并记录下来</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>import collections
class Solution(object):
    def majorityElement(self, nums):
        k=collections.Counter(nums)
        [(i,j)]=k.most_common(1)
        return i 
        # return sorted(nums)[len(nums)//2]

#哈希表
class Solution(object):
    def majorityElement(self, nums):
        &quot;&quot;&quot;
        :type nums: List[int]
        :rtype: int
        &quot;&quot;&quot;
        d = {}
        for i in nums:
            d[i] = d.get(i,0) + 1 
            if d[i] &gt;len(nums)/2:
                return i
</pre></div>
</div>
</div>
<div class="section" id="leetcode-171-excel">
<h2>LeetCode 第 171题：Excel表列序号<a class="headerlink" href="#leetcode-171-excel" title="永久链接至标题">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#给定一个Excel表格中的列名称，返回其相应的列序号。 </span>
<span class="cp"># 例如， </span>
<span class="cp">#     A -&gt; 1</span>
<span class="cp">#    B -&gt; 2</span>
<span class="cp">#    C -&gt; 3</span>
<span class="cp">#    ...</span>
<span class="cp">#    Z -&gt; 26</span>
<span class="cp">#    AA -&gt; 27</span>
<span class="cp">#    AB -&gt; 28 </span>
<span class="cp">#    ...</span>
<span class="cp"># 示例 1: </span>
<span class="cp"># 输入: &quot;A&quot;</span>
<span class="cp">#输出: 1</span>
<span class="cp"># 示例 2: </span>
<span class="cp"># 输入: &quot;AB&quot;</span>
<span class="cp">#输出: 28</span>
<span class="cp"># 示例 3: </span>
<span class="cp"># 输入: &quot;ZY&quot;</span>
<span class="cp">#输出: 701 </span>
<span class="cp"># Related Topics 数学</span>
</pre></div>
</div>
<p>这是26进制转换为10进制问题，有两点：</p>
<ul class="simple">
<li>就是进制转换的时候，最高位代表的是26的几次方以及其他的位</li>
<li>谁乘这个26的几次方，这个通过A-B算出该为的数值。</li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="o">:</span>
    <span class="n">def</span> <span class="n">titleToNumber</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="nl">s</span><span class="p">:</span> <span class="n">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">int</span><span class="o">:</span>
        <span class="n">dct</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;A&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&quot;B&quot;</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">&quot;C&quot;</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s">&quot;D&quot;</span><span class="o">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s">&quot;E&quot;</span><span class="o">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s">&quot;F&quot;</span><span class="o">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s">&quot;G&quot;</span><span class="o">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s">&quot;H&quot;</span><span class="o">:</span> <span class="mi">8</span><span class="p">,</span> <span class="s">&quot;I&quot;</span><span class="o">:</span> <span class="mi">9</span><span class="p">,</span> 
               <span class="s">&quot;J&quot;</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s">&quot;K&quot;</span><span class="o">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s">&quot;L&quot;</span><span class="o">:</span> <span class="mi">12</span><span class="p">,</span> <span class="s">&quot;M&quot;</span><span class="o">:</span> <span class="mi">13</span><span class="p">,</span> <span class="s">&quot;N&quot;</span><span class="o">:</span> <span class="mi">14</span><span class="p">,</span> <span class="s">&quot;O&quot;</span><span class="o">:</span> <span class="mi">15</span><span class="p">,</span> <span class="s">&quot;P&quot;</span><span class="o">:</span> <span class="mi">16</span><span class="p">,</span> <span class="s">&quot;Q&quot;</span><span class="o">:</span> <span class="mi">17</span><span class="p">,</span> 
               <span class="s">&quot;R&quot;</span><span class="o">:</span> <span class="mi">18</span><span class="p">,</span> <span class="s">&quot;S&quot;</span><span class="o">:</span> <span class="mi">19</span><span class="p">,</span> <span class="s">&quot;T&quot;</span><span class="o">:</span> <span class="mi">20</span><span class="p">,</span> <span class="s">&quot;U&quot;</span><span class="o">:</span> <span class="mi">21</span><span class="p">,</span> <span class="s">&quot;V&quot;</span><span class="o">:</span> <span class="mi">22</span><span class="p">,</span> <span class="s">&quot;W&quot;</span><span class="o">:</span> <span class="mi">23</span><span class="p">,</span> <span class="s">&quot;X&quot;</span><span class="o">:</span> <span class="mi">24</span><span class="p">,</span> <span class="s">&quot;Y&quot;</span><span class="o">:</span> <span class="mi">25</span><span class="p">,</span> <span class="s">&quot;Z&quot;</span><span class="o">:</span> <span class="mi">26</span><span class="p">}</span>
        <span class="k">return</span> <span class="n">sum</span><span class="p">([</span><span class="mi">26</span><span class="o">**</span><span class="n">i</span><span class="o">*</span><span class="n">dct</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="n">in</span> <span class="n">enumerate</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="o">::-</span><span class="mi">1</span><span class="p">])])</span>
</pre></div>
</div>
<p>将大写字母转成数字（差64），再按位置乘以26的次方（26个字母），累加。（相当于26进制数转十进制）也是一种做法。。</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="o">:</span>
    <span class="n">def</span> <span class="n">titleToNumber</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="nl">s</span><span class="p">:</span> <span class="n">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">int</span><span class="o">:</span>
        <span class="cp"># return ord(&quot;A&quot;)  # A = 65</span>
        <span class="k">return</span> <span class="n">sum</span><span class="p">(</span> <span class="p">[(</span><span class="n">ord</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">-</span><span class="mi">64</span><span class="p">)</span> <span class="o">*</span> <span class="mi">26</span> <span class="o">**</span> <span class="p">(</span><span class="n">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="n">in</span> <span class="n">range</span><span class="p">(</span><span class="n">len</span><span class="p">(</span><span class="n">s</span><span class="p">))])</span> 
</pre></div>
</div>
</div>
<div class="section" id="leetcode-231-2">
<h2>LeetCode 第 231题： 2的幂<a class="headerlink" href="#leetcode-231-2" title="永久链接至标题">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#给定一个整数，编写一个函数来判断它是否是 2 的幂次方。 </span>
<span class="cp"># 示例 1: </span>
<span class="cp"># 输入: 1</span>
<span class="cp">#输出: true</span>
<span class="cp">#解释: 2^0 = 1 </span>
<span class="cp"># 示例 2: </span>
<span class="cp"># 输入: 16</span>
<span class="cp">#输出: true</span>
<span class="cp">#解释: 2^4 = 16 </span>
<span class="cp"># 示例 3: </span>
<span class="cp"># 输入: 218</span>
<span class="cp">#输出: false </span>
<span class="cp"># Related Topics 位运算 数学</span>
</pre></div>
</div>
<p>若 $n = 2^x$,，且 $x$为自然数（即 n为 2 的幂），则一定满足以下条件：
恒有 <code class="docutils literal notranslate"><span class="pre">n&amp;(n</span> <span class="pre">-</span> <span class="pre">1)</span> <span class="pre">==</span> <span class="pre">0</span></code>，这是因为：n 二进制最高位为 1，其余所有位为 0；n - 1 二进制最高位为 0，其余所有位为 1；一定满足 n &gt; 0。因此，通过<code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">&gt;</span> <span class="pre">0</span></code>且 <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">&amp;</span> <span class="pre">(n</span> <span class="pre">-</span> <span class="pre">1)</span> <span class="pre">==</span> <span class="pre">0</span> </code>即可判定是否满足$n = 2^x$</p>
<p>2^x	|n|n - 1	|n &amp; (n - 1)
–|–|–|–
$2^0$|0001|0000	|(0001) &amp; (0000) == 0
$2^1$|0010|0001	|(0010) &amp; (0001) == 0
$2^2$|0100|0011	|(0100) &amp; (0011) == 0
$2^3$|1000|0111	|(1000) &amp; (0111) == 0</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="o">:</span>
    <span class="n">def</span> <span class="n">isPowerOfTwo</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="nl">n</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">bool</span><span class="o">:</span>
        <span class="k">return</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="n">and</span> <span class="n">n</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
</pre></div>
</div>
</div>
<div class="section" id="leetcode-279">
<h2>LeetCode 第 279题： 完全平方数<a class="headerlink" href="#leetcode-279" title="永久链接至标题">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#给定正整数 n，找到若干个完全平方数（比如 1, 4, 9, 16, ...）使得它们的和等于 n。你需要让组成和的完全平方数的个数最少。 </span>
<span class="cp"># 示例 1: </span>
<span class="cp"># 输入: n = 12</span>
<span class="cp">#输出: 3 </span>
<span class="cp">#解释: 12 = 4 + 4 + 4. </span>
<span class="cp"># 示例 2: </span>
<span class="cp"># 输入: n = 13</span>
<span class="cp">#输出: 2</span>
<span class="cp">#解释: 13 = 4 + 9. </span>
<span class="cp"># Related Topics 广度优先搜索 数学 动态规划</span>
</pre></div>
</div>
<p>下面是动态规划的做法：</p>
<p>动态规划：因为要求完全平方数个数最少，设i的最少完全平方数为dp[i]，用j表示完全平方数。那么dp[i]=dp[i-j]+1，因此可以使用动态规划。
问题的关键是n是由哪几个完全平方数组成最小，比如12：可以是dp[8]+dp[4]，也可以是dp[3]+dp[9],用square构建完全平方数列表，用j在里面循环输出dp[i]最小值。
代码</p>
<p>状态DP：dp[i]:组成和为i的完全平方数的最少个数。
状态转移：dp[i] = min(dp[i],dp[i-j*j]+1)
初始化：最坏的结果是:i=1+1+…+1,故初始化为：[i for i in range(n+1)]</p>
<p>动态规划代码简洁， 但时间长</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">def</span> <span class="n">numSquares</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="nl">n</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">int</span><span class="o">:</span>
     <span class="cp">#动态规划</span>
     <span class="n">dp</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="n">in</span> <span class="n">range</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span>
     
     <span class="k">for</span> <span class="n">i</span> <span class="n">in</span> <span class="n">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">:</span>
         <span class="k">for</span> <span class="n">j</span> <span class="n">in</span> <span class="n">range</span><span class="p">(</span><span class="kt">int</span><span class="p">(</span><span class="n">i</span><span class="o">**</span><span class="mf">0.5</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">:</span>
             <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="n">j</span><span class="o">*</span><span class="n">j</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
     <span class="k">return</span> <span class="n">dp</span><span class="p">[</span><span class="n">n</span><span class="p">]]</span>
</pre></div>
</div>
<p>还有一种方法是广度优先搜索，就是BFS 算法。这个算法在以后再说。</p>
</div>
</div>
<div class="section" id="id418">
<h1>75、Python | Leetcode哈希表系列<a class="headerlink" href="#id418" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen</p>
<p>今日，我决定继续更新Python教程，今天就开始了七十五、Python | Leetcode哈希表系列。</p>
<div class="section" id="id419">
<h2>哈希表<a class="headerlink" href="#id419" title="永久链接至标题">¶</a></h2>
<p>哈希表（散列表）的思想是将关键字 Key 映射到存放记录的散列表中从而进行快速访问，其中映射函数 f(key) 称为哈希函数（散列函数），依据哈希函数建立的查找表称为哈希表。</p>
<p>Hash，音译为哈希，是把任意长度的输入（又叫做预映射pre-image）通过散列算法变换成固定长度的输出，该输出就是散列值。这种转换是一种压缩映射，也就是，散列值的空间通常远小于输入的空间，不同的输入可能会散列成相同的输出，所以不可能从散列值来确定唯一的输入值。简单的说就是一种将任意长度的消息压缩到某一固定长度的消息摘要的函数。</p>
<p>假如班级里面有50个学生，都有各自的名字，我们想把学生的名字放在一个表上，同时便于很快的查找，你会毫无想到数组，但是查找的复杂度是<code class="docutils literal notranslate"><span class="pre">O(n)</span></code>,所以哈希表就是为了解决这问题，将查找的复杂度达到 <code class="docutils literal notranslate"><span class="pre">O(1)</span></code></p>
<p><img alt="https://img-blog.csdnimg.cn/20190319091629943.png" src="https://img-blog.csdnimg.cn/20190319091629943.png" /></p>
<p>假如有个学生的名字叫做<code class="docutils literal notranslate"><span class="pre">lies</span></code>,通过hash函数，得到下标<code class="docutils literal notranslate"><span class="pre">9</span></code> ，将<code class="docutils literal notranslate"><span class="pre">lies</span></code>的ASCII码加起来 <code class="docutils literal notranslate"><span class="pre">429%30</span> <span class="pre">=9</span></code> ,这样的过程就是<code class="docutils literal notranslate"><span class="pre">hash</span></code>函数。</p>
<p>但是又没有可能出现<code class="docutils literal notranslate"><span class="pre">hash</span></code>碰撞，就是出现了一样的<code class="docutils literal notranslate"><span class="pre">hash</span></code>值，当然有可能</p>
<p><img alt="https://img-blog.csdnimg.cn/20190319091548415.png" src="https://img-blog.csdnimg.cn/20190319091548415.png" /></p>
<p>假如有个人的名字叫做<code class="docutils literal notranslate"><span class="pre">foes</span></code>,那么如何查找呢？当然是将数据储存成链表，用链表的方式来查找。</p>
<p>其实，哈希表就是一个具备映射关系的表，我们可以通过映射关系由键找到值。下面是一个简单的哈希表：</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Map</span><span class="o">:</span>
    <span class="n">def</span> <span class="n">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">)</span><span class="o">:</span>
        <span class="n">self</span><span class="p">.</span><span class="n">items</span> <span class="o">=</span><span class="p">[</span><span class="n">None</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span>
    <span class="n">def</span> <span class="n">hash</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="n">a</span><span class="p">)</span><span class="o">:</span>
        <span class="k">return</span> <span class="n">a</span><span class="o">*</span><span class="mi">1</span><span class="o">+</span><span class="mi">0</span>
    <span class="n">def</span> <span class="n">put</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">)</span><span class="o">:</span>
        <span class="n">self</span><span class="p">.</span><span class="n">items</span><span class="p">[</span><span class="n">hash</span><span class="p">(</span><span class="n">k</span><span class="p">)]</span> <span class="o">=</span> <span class="n">v</span>
    <span class="n">def</span> <span class="n">get</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="n">k</span><span class="p">)</span><span class="o">:</span>
        <span class="n">hashcode</span><span class="o">=</span><span class="n">hash</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">items</span><span class="p">[</span><span class="n">hashcode</span><span class="p">]</span>
</pre></div>
</div>
<p>这个哈希函数十分简单，但简单不妨碍它成为一个哈希函数，事实上，它叫直接定址法，是一个线性函数：$hash(k)= a*k+b$</p>
<p>直接定址法的优点很明显，就是它不会产生重复的hash值。但由于它与键值本身有关系，所以当键值分布很散的时候，会浪费大量的存储空间。所以一般是不会用到直接定址法的。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200703231235952.png" src="https://img-blog.csdnimg.cn/20200703231235952.png" /></p>
</div>
<div class="section" id="leetcode-136">
<h2>LeetCode 第 136题：只出现一次的数字<a class="headerlink" href="#leetcode-136" title="永久链接至标题">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#给定一个非空整数数组，除了某个元素只出现一次以外，其余每个元素均出现两次。找出那个只出现了一次的元素。 </span>
<span class="cp"># 说明： </span>
<span class="cp"># 你的算法应该具有线性时间复杂度。 你可以不使用额外空间来实现吗？ </span>
<span class="cp"># 示例 1: </span>
<span class="cp"># 输入: [2,2,1]</span>
<span class="cp">#输出: 1</span>
<span class="cp"># 示例 2: </span>
<span class="cp"># 输入: [4,1,2,1,2]</span>
<span class="cp">#输出: 4 </span>
<span class="cp"># Related Topics 位运算 哈希表</span>
</pre></div>
</div>
<p>下面一行代码不做解释。</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="o">:</span>
    <span class="n">def</span> <span class="n">singleNumber</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="nl">nums</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="kt">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kt">int</span><span class="o">:</span>
        <span class="k">return</span> <span class="n">sum</span><span class="p">(</span><span class="n">set</span><span class="p">(</span><span class="n">nums</span><span class="p">))</span><span class="o">*</span><span class="mi">2</span><span class="o">-</span><span class="n">sum</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
</pre></div>
</div>
<p>一遍遍历，用哈希表计数；再遍历，返回个数是1的数。<code class="docutils literal notranslate"><span class="pre">{}</span></code>用于创建空字典，空集合用<code class="docutils literal notranslate"><span class="pre">set()</span></code>
dict的.get(a,b)中取出字典中键为a的值，如果不存在这样的键，则返回b。</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="o">:</span>
    <span class="n">def</span> <span class="n">singleNumber</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="nl">nums</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="kt">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kt">int</span><span class="o">:</span>
        <span class="n">dic</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">i</span> <span class="n">in</span> <span class="nl">nums</span><span class="p">:</span>
            <span class="n">dic</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">dic</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span>
            
        <span class="k">for</span> <span class="n">i</span> <span class="n">in</span> <span class="nl">nums</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">dic</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span><span class="o">:</span>
                <span class="k">return</span> <span class="n">i</span>
</pre></div>
</div>
</div>
<div class="section" id="leetcode-217">
<h2>LeetCode 第 217题：存在重复元素<a class="headerlink" href="#leetcode-217" title="永久链接至标题">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#给定一个整数数组，判断是否存在重复元素。 </span>
<span class="cp"># 如果任意一值在数组中出现至少两次，函数返回 true 。如果数组中每个元素都不相同，则返回 false 。 </span>
<span class="cp"># 示例 1: </span>
<span class="cp"># 输入: [1,2,3,1]</span>
<span class="cp">#输出: true </span>
<span class="cp"># 示例 2: </span>
<span class="cp"># 输入: [1,2,3,4]</span>
<span class="cp">#输出: false </span>
<span class="cp"># 示例 3: </span>
<span class="cp"># 输入: [1,1,1,3,3,4,3,2,4,2]</span>
<span class="cp">#输出: true </span>
<span class="cp"># Related Topics 数组 哈希表</span>
</pre></div>
</div>
<p>下面代码不解释</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="o">:</span>
    <span class="n">def</span> <span class="n">containsDuplicate</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="nl">nums</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="kt">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kt">bool</span><span class="o">:</span>
        <span class="k">if</span> <span class="n">len</span><span class="p">(</span><span class="n">set</span><span class="p">(</span><span class="n">nums</span><span class="p">))</span> <span class="o">==</span> <span class="n">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span><span class="o">:</span>
            <span class="k">return</span> <span class="n">False</span>
        <span class="k">else</span><span class="o">:</span> 
            <span class="k">return</span> <span class="n">True</span>
</pre></div>
</div>
<p>初试化哈希表<code class="docutils literal notranslate"><span class="pre">dic</span> <span class="pre">=</span> <span class="pre">{}</span></code>。遍历数组：若i不在hash中，则令<code class="docutils literal notranslate"><span class="pre">dic[i]</span> <span class="pre">=</span> <span class="pre">1</span></code>为key，1为value（随便什么都可以）。若已存在，则返回True。</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="o">:</span>
    <span class="n">def</span> <span class="n">containsDuplicate</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="nl">nums</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="kt">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kt">bool</span><span class="o">:</span>
        <span class="n">dic</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">i</span> <span class="n">in</span> <span class="nl">nums</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">dic</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">:</span>
                <span class="k">return</span> <span class="n">True</span>
            <span class="n">dic</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">False</span>
</pre></div>
</div>
</div>
<div class="section" id="offer-50">
<h2>剑指 Offer 50. 第一个只出现一次的字符<a class="headerlink" href="#offer-50" title="永久链接至标题">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#在字符串 s 中找出第一个只出现一次的字符。如果没有，返回一个单空格。 s 只包含小写字母。 </span>
<span class="cp"># 示例: </span>
<span class="cp"># s = &quot;abaccdeff&quot;</span>
<span class="cp">#返回 &quot;b&quot;</span>
<span class="cp">#s = &quot;&quot; </span>
<span class="cp">#返回 &quot; &quot;</span>
<span class="cp"># 限制： </span>
<span class="cp"># 0 &lt;= s 的长度 &lt;= 50000 </span>
<span class="cp"># Related Topics 哈希表</span>
</pre></div>
</div>
<p>遍历字符串 s ，使用哈希表统计 “各字符数量是否 &gt; 1 ”。
再遍历字符串 s ，在哈希表中找到首个 “数量为 1的字符”，并返回。</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="o">:</span>
    <span class="n">def</span> <span class="n">firstUniqChar</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="nl">s</span><span class="p">:</span> <span class="n">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nl">str</span><span class="p">:</span>
        <span class="n">dicts</span><span class="o">=</span><span class="p">{}</span>
        <span class="k">for</span> <span class="n">i</span> <span class="n">in</span> <span class="nl">s</span><span class="p">:</span>
            <span class="n">dicts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="n">dicts</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span>
        <span class="k">for</span> <span class="n">i</span> <span class="n">in</span> <span class="nl">s</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">dicts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="o">:</span>
                <span class="k">return</span> <span class="n">i</span>
        <span class="k">return</span> <span class="sc">&#39; &#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id420">
<h1>76、Python | Leetcode二分查找和分治算法系列<a class="headerlink" href="#id420" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen</p>
<p>今日，我决定继续更新Python教程，今天就开始了七十六、Python | Leetcode二分查找系列。</p>
<div class="section" id="id421">
<h2>分治算法<a class="headerlink" href="#id421" title="永久链接至标题">¶</a></h2>
<p>分治法是把一个复杂的问题分成两个或更多的相同或相似的子问题，再把子问题分成更小的子问题
直到最后子问题可以简单的直接求解，原问题的解即子问题的解的合并。（百度百科）</p>
<p>利用分治策略求解时，所需时间取决于分解后子问题的个数、子问题的规模大小等因素，而二分法，由于其划分的简单和均匀的特点，是经常采用的一种有效的方法，例如二分法检索。</p>
<p>分治算法的基本思想：是将一个规模为N的问题分解为K个规模较小的子问题，这些子问题相互独立且与原问题性质相同。求出子问题的解，就可得到原问题的解。即一种分目标完成程序算法，简单问题可用二分法完成。</p>
<p>分治法所能解决的问题一般具有以下几个特征：</p>
<ul class="simple">
<li>原问题于分解成的小问题具有相同的模式</li>
<li>原问题分解成的小问题可以独立求解，子问题之间没有相关性</li>
<li>具有分解终止条件，当问题足够小时，可以之间求解</li>
<li>分解出的子问题的解可以合并为该问题的解</li>
</ul>
<p>基本步骤</p>
<ul class="simple">
<li>分解，将要解决的问题划分成若干规模较小的同类问题；</li>
<li>求解，当子问题划分得足够小时，用较简单的方法解决；</li>
<li>合并，按原问题的要求，将子问题的解逐层合并构成原问题的解。</li>
</ul>
</div>
<div class="section" id="id422">
<h2>分治算法例子<a class="headerlink" href="#id422" title="永久链接至标题">¶</a></h2>
<p>给你一个装有1 6个硬币的袋子。1 6个硬币中有一个是伪造的，并且那个伪造的硬币比真的硬币要轻一些。你的任务是找出这个伪造的硬币。为了帮助你完成这一任务，将提供一台可用来比较两组硬币重量的仪器，利用这台仪器，可以知道两组硬币的重量是否相同。</p>
<p>把1 6硬币的例子看成一个大的问题。第一步，把这一问题分成两个小问题。随机选择8个硬币作为第一组称为A组，剩下的8个硬币作为第二组称为B组。这样，就把1 6个硬币的问题分成两个8硬币的问题来解决。第二步，判断A和B组中是否有伪币。可以利用仪器来比较A组硬币和B组硬币的重量。假如两组硬币重量相等，则可以判断伪币不存在。假如两组硬币重量不相等，则存在伪币，并且可以判断它位于较轻的那一组硬币中。最后，在第三步中，用第二步的结果得出原先1 6个硬币问题的答案。若仅仅判断硬币是否存在，则第三步非常简单。无论A组还是B组中有伪币，都可以推断这1 6个硬币中存在伪币。因此，仅仅通过一次重量的比较，就可以判断伪币是否存在。最终通过四次就可以找到。</p>
</div>
<div class="section" id="id423">
<h2>二分法查找<a class="headerlink" href="#id423" title="永久链接至标题">¶</a></h2>
<p>算法：当数据量很大适宜采用该方法。采用二分法查找时，数据需是“有序”不重复的。二分法查找本质上就是分治算法。</p>
<p>基本思想：假设数据是按升序排序的，对于给定值 x，从序列的中间位置开始比较，如果当前位置值等于 x，则查找成功；若 x 小于当前位置值，则在数列的前半段中查找；若 x 大于当前位置值则在数列的后半段中继续查找，直到找到为止。</p>
<p>二分法查找就是查找一个数组元素的下标。定义两个变量，一个<code class="docutils literal notranslate"><span class="pre">low</span></code>，一个<code class="docutils literal notranslate"><span class="pre">high</span></code>，则<code class="docutils literal notranslate"><span class="pre">mid=(low+high)/2</span></code>。</p>
<p>算法核心中有三种情况：</p>
<ul class="simple">
<li>如果<code class="docutils literal notranslate"><span class="pre">value==arr[mid]</span></code>，中间值正好要查找的值，则返回下标，<code class="docutils literal notranslate"><span class="pre">return</span> <span class="pre">mid</span></code>;</li>
<li>.如果value&lt;arr[mid]，要找的值的小于中间的值，则再往数组的小端找，<code class="docutils literal notranslate"><span class="pre">high=mid-1</span></code>;</li>
<li>.如果value&gt;arr[mid]，要找的值大于中间的值，则再往数组的大端找，<code class="docutils literal notranslate"><span class="pre">low=mid+1</span></code>;</li>
</ul>
<p>下面代码就是二分查找的Python代码表述。我注释写清楚了。</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>题目：给定n个元素，这些元素是有序的（假定为升序），使用二分法从中查找特定的元素。
要求：输入n个元素，输入某一个特定的值m，首先对n个元素进行排序（排序算法任选），输出m值的位置序号。

def binary_search(list, num):
    left = 0
    right = len(list) - 1  # 注意1 low和high用于跟踪在其中查找的列表部分
    while left &lt;= right:  # 注意2 只有服务还没有缩小到只有一个元素，就不停的检查
        mid = (left + right) // 2
        if list[mid] == num:
            return mid
        elif list[mid] &gt; num:
            right = mid - 1  # 注意3 猜的数字大了
        elif list[mid] &lt; num:
            left = mid + 1   # 注意4 猜的数字小了
    return mid


A = [1, 4, 2, 5, 3, 7, 8]
num = 5
A = sorted(A)  # python 内置排序是快速排序
print(A)
print(binary_search(A, num))
</pre></div>
</div>
<p>在不存在重复元素的有序数组中，查找值等于给定值的元素。最简单的二分查找写起来确实不难，但是，二分查找的变形问题就没那么好写了。</p>
</div>
<div class="section" id="id424">
<h2>二分查找的变形问题<a class="headerlink" href="#id424" title="永久链接至标题">¶</a></h2>
<p><img alt="https://img-blog.csdnimg.cn/20200704103152347.png" src="https://img-blog.csdnimg.cn/20200704103152347.png" /></p>
<p>上图是王争专栏的内容。那么我们就开始干活吧。</p>
</div>
<div class="section" id="leetcode-704">
<h2>LeetCode 第 704题：标准的二分查找<a class="headerlink" href="#leetcode-704" title="永久链接至标题">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>给定一个 n 个元素有序的（升序）整型数组 nums 和一个目标值 target  ，写一个函数搜索 nums 中的 target，如果目标值存在返回下标，否则返回 -1。
示例 1:
输入: nums = [-1,0,3,5,9,12], target = 9
输出: 4
解释: 9 出现在 nums 中并且下标为 4
示例 2:
输入: nums = [-1,0,3,5,9,12], target = 2
输出: -1
解释: 2 不存在 nums 中因此返回 -1
提示：
你可以假设 nums 中的所有元素是不重复的。
n 将在 [1, 10000]之间。
nums 的每个元素都将在 [-9999, 9999]之间。
</pre></div>
</div>
<p>这个代码不说了，就是一个标准的二分法。</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>class Solution:
    def search(self, nums: List[int], target: int) -&gt; int:
        # 确定查找的上下界
        low, high = 0, len(nums) - 1
        while low &lt;= high:  # 当low == high时还剩下最后一个值需要进行检验
            mid = (low + high) // 2
            if nums[mid] &lt; target:
                low = mid + 1  # +1是因为mid已经验证过不符合条件，新的区间又mid+1开始
            elif nums[mid] &gt; target:
                high = mid - 1 # 这里+1同上面原因相同
            else:
                return mid
        return -1  # 执行结束但是没有找到
</pre></div>
</div>
<p>下面找到排序数组中target第一次出现的位置为例，也是二分最常见的变形。查找第一个等于给定值的元素</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>nums= [1,2,2,3,3,3,4,4,5], target=4, return 6
确定返回值类型和查找范围
返回的是target在数组中的位置，即index。
查找范围：[start=0, end=len(nums)-1]

def findFirstIndex(nums, target):
    n = len(nums)
    if (nums is None or n == 0):
        return -1

    start = 0
    end = n - 1

    while (start + 1 &lt; end):
        # 相邻就退出
        mid = start + (end - start) // 2
        if nums[mid] == target:
            end = mid
        elif nums[mid] &gt; target:
            end = mid
        else:
            start = mid

    if nums[start] == target:
        return start

    if nums[end] == target:
        return end

    return -1

print(findFirstIndex(nums=[1, 2, 2, 3, 3, 3, 4, 4, 5], target=4))
6
</pre></div>
</div>
</div>
<div class="section" id="leetcode-34">
<h2>LeetCode 第 34题：在排序数组中查找元素的第一个和最后一个位置<a class="headerlink" href="#leetcode-34" title="永久链接至标题">¶</a></h2>
<p>查找第一个等于给定值的元素和查找最后一个等于给定值的元素</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#给定一个按照升序排列的整数数组 nums，和一个目标值 target。找出给定目标值在数组中的开始位置和结束位置。 </span>
<span class="cp"># 你的算法时间复杂度必须是 O(log n) 级别。 </span>
<span class="cp"># 如果数组中不存在目标值，返回 [-1, -1]</span>
<span class="cp"># 示例 1:</span>
<span class="cp"># 输入: nums = [5,7,7,8,8,10], target = 8</span>
<span class="cp">#输出: [3,4] </span>
<span class="cp"># 示例 2: </span>
<span class="cp"># 输入: nums = [5,7,7,8,8,10], target = 6</span>
<span class="cp">#输出: [-1,-1] </span>
<span class="cp"># Related Topics 数组 二分查找</span>
</pre></div>
</div>
<p>变形一：查找第一个等于给定值的元素
与原题区别在于，当a[mid] == value时，还需要确认是不是第一个值等于给定值的元素。</p>
<p>当遍历到数组第一个数，或者左边值不同时，必定是第一个，直接返回（此处同时做了溢出校验）</p>
<p>当不是第一个元素时，从右到左收缩区间，继续二分查找。</p>
<p>变形二：查找最后一个等于给定值的元素
类比变形一，变形一查找的第一个，此处查找的最后一个元素。即需要确认是不是最后一个值等于给定值的元素。</p>
<p>当遍历到数组最后一位，或者右边元素值不等时，必定是最后一个，返回下标。</p>
<p>如果不是最后一个元素，从左到右收缩区间，继续二分查找。</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="o">:</span>
    <span class="n">def</span> <span class="n">searchrightRange</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="nl">nums</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="kt">int</span><span class="p">],</span><span class="nl">target</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="o">-&gt;</span><span class="kt">int</span><span class="o">:</span>
        <span class="n">lefts</span><span class="p">,</span><span class="n">rights</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span><span class="n">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span>
        <span class="k">while</span>   <span class="n">lefts</span> <span class="o">&lt;=</span> <span class="nl">rights</span><span class="p">:</span>
            <span class="n">mid</span> <span class="o">=</span> <span class="p">(</span><span class="n">lefts</span><span class="o">+</span><span class="n">rights</span><span class="p">)</span><span class="c1">//2</span>
            <span class="k">if</span>  <span class="n">nums</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span> <span class="o">&gt;</span> <span class="nl">target</span><span class="p">:</span>
                <span class="n">rights</span> <span class="o">=</span> <span class="n">mid</span><span class="o">-</span><span class="mi">1</span>
            <span class="n">elif</span>    <span class="n">nums</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span> <span class="o">&lt;</span> <span class="nl">target</span><span class="p">:</span>
                <span class="n">lefts</span> <span class="o">=</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span>
            <span class="k">else</span><span class="o">:</span>
                <span class="n">lefts</span> <span class="o">=</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span>
        <span class="k">if</span>  <span class="n">lefts</span><span class="o">-</span><span class="mi">1</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="n">and</span> <span class="n">nums</span><span class="p">[</span><span class="n">lefts</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="nl">target</span><span class="p">:</span>
            <span class="k">return</span>  <span class="n">lefts</span><span class="o">-</span><span class="mi">1</span>
        <span class="k">else</span><span class="o">:</span>
            <span class="k">return</span>  <span class="o">-</span><span class="mi">1</span> 
    <span class="n">def</span> <span class="n">searchleftRange</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="nl">nums</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="kt">int</span><span class="p">],</span><span class="nl">target</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="o">-&gt;</span><span class="kt">int</span><span class="o">:</span>
        <span class="n">lefts</span><span class="p">,</span><span class="n">rights</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span><span class="n">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span>
        <span class="k">while</span>   <span class="n">lefts</span> <span class="o">&lt;=</span> <span class="nl">rights</span><span class="p">:</span>
            <span class="n">mid</span> <span class="o">=</span> <span class="p">(</span><span class="n">lefts</span><span class="o">+</span><span class="n">rights</span><span class="p">)</span><span class="c1">//2</span>
            <span class="k">if</span>  <span class="n">nums</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span> <span class="o">&gt;</span> <span class="nl">target</span><span class="p">:</span>
                <span class="n">rights</span> <span class="o">=</span> <span class="n">mid</span><span class="o">-</span><span class="mi">1</span>
            <span class="n">elif</span>  <span class="n">nums</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span> <span class="o">&lt;</span> <span class="nl">target</span><span class="p">:</span>
                <span class="n">lefts</span> <span class="o">=</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span>
            <span class="k">else</span><span class="o">:</span>
                <span class="n">rights</span> <span class="o">=</span> <span class="n">mid</span><span class="o">-</span><span class="mi">1</span>
        <span class="k">if</span>  <span class="n">rights</span><span class="o">+</span><span class="mi">1</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span> <span class="n">and</span> <span class="n">nums</span><span class="p">[</span><span class="n">rights</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="nl">target</span><span class="p">:</span>
            <span class="k">return</span>  <span class="n">rights</span><span class="o">+</span><span class="mi">1</span>
        <span class="k">else</span><span class="o">:</span>
            <span class="k">return</span>  <span class="o">-</span><span class="mi">1</span>
    <span class="n">def</span> <span class="n">searchRange</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="nl">nums</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="kt">int</span><span class="p">],</span> <span class="nl">target</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="kt">int</span><span class="p">]</span><span class="o">:</span>
        <span class="k">if</span>  <span class="n">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="o">:</span>
            <span class="k">return</span>  <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">rights</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">searchrightRange</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span><span class="n">target</span><span class="p">)</span>
        <span class="n">lefts</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">searchleftRange</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span><span class="n">target</span><span class="p">)</span>
        <span class="k">return</span>  <span class="p">[</span><span class="n">lefts</span><span class="p">,</span><span class="n">rights</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="id425">
<h2>查找排序数组中，第一个大于等于目标值的下标（数组中可能不存在目标值）<a class="headerlink" href="#id425" title="永久链接至标题">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>&#39;&#39;&#39;
查找第一个大于等于给定值的元素
* 如序列：3，4，6，7，19 查找第一个大于5的元素，即为6
* 第一个大于给定值，则说明上一个小于给定值，依次判断
&#39;&#39;&#39;
def bsearch(a,n):
    low = 0
    high = len(a) -1
    while(low&lt;=high):
        mid = low + ((high-low) &gt;&gt;1)
        if a[mid] &gt;= n:
            if mid == 0 or a[mid - 1] &lt; n:
                return mid
            else:
                high = mid - 1
        else:
            low = mid +1
    return -1
print(bsearch([3,4,6,7,19],5))
2
</pre></div>
</div>
</div>
<div class="section" id="id426">
<h2>查找排序数组中，最后一个小于等于目标值的下标（数组中可能不存在目标值）<a class="headerlink" href="#id426" title="永久链接至标题">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>&#39;&#39;&#39;
查找第一个小于给定值的元素
* 如序列：3，4，6，7，19 查找第一个小于5的元素，即为4
* 第一个大于给定值，则说明上一个小于给定值，依次判断
&#39;&#39;&#39;
def bsearch(a,n):
    low = 0
    high = len(a) -1
    while(low&lt;=high):
        mid = low + ((high-low) &gt;&gt;1)
        if a[mid] &gt; n:
            high = mid - 1
        else:
            if mid == n-1 or a[mid + 1] &gt; n:
                return mid
            else:
                low = mid +1
    return -1
print(bsearch([3,4,6,7,19],5))

1
</pre></div>
</div>
<p>四个变种到此结束，Runsen原创，耗时两个小时</p>
</div>
</div>
<div class="section" id="id427">
<h1>77、Python | Leetcode栈和队列系列<a class="headerlink" href="#id427" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen</p>
<p>今日，我决定继续更新Python教程，今天就开始了七十七、Python | Leetcode栈和队列系列。</p>
<div class="section" id="id428">
<h2>栈<a class="headerlink" href="#id428" title="永久链接至标题">¶</a></h2>
<p>栈 (Stack)是一种后进先出(last in first off，LIFO)的数据结构。线性表是用数组来实现的，对于栈这种只能一头插入删除的线性表来说，用数组下标为0（栈底不变，只需要跟踪栈顶的变化即可）的一端作为栈底比较合适。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200705084744639.png" src="https://img-blog.csdnimg.cn/20200705084744639.png" /></p>
<p>列表封装的这些方法，实现栈这个常用的数据结构比较容易。栈是一种只能在列表一端进出的特殊列表，pop方法正好完美实现：</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>In [1]: stack=[1,3,5]

In [2]: stack.append(0) # push元素0到尾端，不需要指定索引

In [3]: stack
Out[3]: [1, 3, 5, 0]

In [4]: stack.pop() # pop元素，不需指定索引，此时移出尾端元素
Out[4]: 0

In [5]: stack
Out[5]: [1, 3, 5]
</pre></div>
</div>
<p>由此可见Python的列表当做栈用，完全没有问题，push 和 pop 操作的时间复杂度都为 O(1)</p>
</div>
<div class="section" id="id429">
<h2>队列<a class="headerlink" href="#id429" title="永久链接至标题">¶</a></h2>
<p>队列(Queue)则是一种先进先出 (fisrt in first out，FIFO)的结构.。使用顺序表存储队列时，队列元素的出队是在队头，即下标为0的地方，当有元素出队时，出队元素后面的所有元素都需要向前移动，保证队列的队头始终处在下标为0的位置，此时会大大增加时间复杂度。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200705084819139.png" src="https://img-blog.csdnimg.cn/20200705084819139.png" /></p>
<p>使用列表模拟队列，需要借助Python的collections模块中的双端队列deque实现。如下模拟队列的先进先出，后进后出：</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>In [1]: from collections import deque

In [2]: queue = [1,3,5]

In [3]: deq = deque(queue)

In [4]: deq.append(0) 

In [5]: deq
Out[5]: deque([1, 3, 5, 0]) # 后进插入到队列尾部

In [6]: deq.popleft()  
Out[6]: 1

In [7]: deq
Out[7]: deque([3, 5, 0])# 先进的先出
</pre></div>
</div>
</div>
<div class="section" id="leetcode-155">
<h2>LeetCode 第 155题：最小栈<a class="headerlink" href="#leetcode-155" title="永久链接至标题">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#设计一个支持 push ，pop ，top 操作，并能在常数时间内检索到最小元素的栈。 </span>
<span class="cp"># push(x) —— 将元素 x 推入栈中。 </span>
<span class="cp"># pop() —— 删除栈顶的元素。 </span>
<span class="cp"># top() —— 获取栈顶元素。 </span>
<span class="cp"># getMin() —— 检索栈中的最小元素。 </span>
<span class="cp"># 示例: </span>
<span class="cp"># 输入：</span>
<span class="cp">#[&quot;MinStack&quot;,&quot;push&quot;,&quot;push&quot;,&quot;push&quot;,&quot;getMin&quot;,&quot;pop&quot;,&quot;top&quot;,&quot;getMin&quot;]</span>
<span class="cp">#[[],[-2],[0],[-3],[],[],[],[]]</span>
<span class="cp">#输出：</span>
<span class="cp">#[null,null,null,null,-3,null,0,-2]</span>
<span class="cp">#解释：</span>
<span class="cp">#MinStack minStack = new MinStack();</span>
<span class="cp">#minStack.push(-2);</span>
<span class="cp">#minStack.push(0);</span>
<span class="cp">#minStack.push(-3);</span>
<span class="cp">#minStack.getMin();   --&gt; 返回 -3.</span>
<span class="cp">#minStack.pop();</span>
<span class="cp">#minStack.top();      --&gt; 返回 0.</span>
<span class="cp">#minStack.getMin();   --&gt; 返回 -2.</span>
<span class="cp"># 提示： </span>
<span class="cp"># pop、top 和 getMin 操作总是在 非空栈 上调用。 </span>
<span class="cp"># Related Topics 栈 设计</span>
</pre></div>
</div>
<p>在本题中，我们考虑使用辅助栈与数据栈同步的做法来处理。</p>
<p>题目中提示，pop、top 和 getMin 操作总是在 非空栈 上调用。那么我们先定义一个数据栈来实现这些功能。</p>
<p>题目中还要求能在常数时间内检索到最小元素的栈。在这里，我们使用辅助栈，实现辅助栈中的栈顶一直保持当前的最小值，这样就能够实现常数时间复杂度的操作。</p>
<p><img alt="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9hc3NldHMubGVldGNvZGUtY24uY29tL3NvbHV0aW9uLXN0YXRpYy8xNTUvMTU1X2ZpZzEuZ2lm" src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9hc3NldHMubGVldGNvZGUtY24uY29tL3NvbHV0aW9uLXN0YXRpYy8xNTUvMTU1X2ZpZzEuZ2lm" /></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MinStack</span><span class="o">:</span>

    <span class="n">def</span> <span class="n">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">)</span><span class="o">:</span>
        <span class="s">&quot;&quot;&quot;</span>
        <span class="n">initialize</span> <span class="n">your</span> <span class="n">data</span> <span class="n">structure</span> <span class="n">here</span><span class="p">.</span>
        <span class="s">&quot;&quot;&quot;</span>
        <span class="n">self</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">self</span><span class="p">.</span><span class="n">tmp</span> <span class="o">=</span> <span class="p">[]</span>


    <span class="n">def</span> <span class="n">push</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="nl">x</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nl">None</span><span class="p">:</span>
        <span class="cp"># 入栈时，同时考虑数据栈和辅助栈</span>
        <span class="n">self</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="cp"># 如果辅助栈为空时，或者元素比辅助栈的最顶元素小或相等时，将该元素入栈</span>
        <span class="cp"># 否则，将辅助栈内最顶元素再次入栈</span>
        <span class="k">if</span> <span class="n">len</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">tmp</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="n">or</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">self</span><span class="p">.</span><span class="n">tmp</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">:</span>
            <span class="n">self</span><span class="p">.</span><span class="n">tmp</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">else</span><span class="o">:</span>
            <span class="n">self</span><span class="p">.</span><span class="n">tmp</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">tmp</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

    <span class="n">def</span> <span class="n">pop</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nl">None</span><span class="p">:</span>
        <span class="cp"># if self.data:</span>
        <span class="cp">#     self.data.pop()</span>
        <span class="cp">#     self.tmp.pop()</span>
        <span class="cp"># 题目要求这里是在非空栈，所以不做判断</span>
        <span class="cp"># 如果需判断，可如上</span>
        <span class="n">self</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="n">self</span><span class="p">.</span><span class="n">tmp</span><span class="p">.</span><span class="n">pop</span><span class="p">()</span>

    <span class="n">def</span> <span class="n">top</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">int</span><span class="o">:</span>
        <span class="cp"># 需判断同 pop()</span>
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">data</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>


    <span class="n">def</span> <span class="n">getMin</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">int</span><span class="o">:</span>
        <span class="cp"># 需判断同 pop()</span>
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">tmp</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

<span class="cp"># Your MinStack object will be instantiated and called as such:</span>
<span class="cp"># obj = MinStack()</span>
<span class="cp"># obj.push(x)</span>
<span class="cp"># obj.pop()</span>
<span class="cp"># param_3 = obj.top()</span>
<span class="cp"># param_4 = obj.getMin()</span>
</pre></div>
</div>
</div>
<div class="section" id="leetcode-225">
<h2>LeetCode 第 225题：用队列实现栈<a class="headerlink" href="#leetcode-225" title="永久链接至标题">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#使用队列实现栈的下列操作： </span>
<span class="cp"># push(x) -- 元素 x 入栈 </span>
<span class="cp"># pop() -- 移除栈顶元素 </span>
<span class="cp"># top() -- 获取栈顶元素 </span>
<span class="cp"># empty() -- 返回栈是否为空 </span>
<span class="cp"># 注意: </span>
<span class="cp"># 你只能使用队列的基本操作-- 也就是 push to back, peek/pop from front, size, 和 is empty 这些操作是合法的。 </span>
<span class="cp"># 你所使用的语言也许不支持队列。 你可以使用 list 或者 deque（双端队列）来模拟一个队列 , 只要是标准的队列操作即可。 </span>
<span class="cp"># 你可以假设所有操作都是有效的（例如, 对一个空的栈不会调用 pop 或者 top 操作）。 </span>
<span class="cp"># Related Topics 栈 设计</span>
</pre></div>
</div>
<p>根据题意，我们只能使用队列的基本操作，队列因为是先进先出，要实现先进后出的栈，常见的解法方法是使用两个队列。</p>
<p>假设有q1，q2两个队列，我们初始化队列。</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">from</span> <span class="n">collections</span> <span class="n">import</span> <span class="n">deque</span>
<span class="k">class</span> <span class="nc">MyStack</span><span class="o">:</span>
    <span class="n">def</span> <span class="n">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">)</span><span class="o">:</span>
        <span class="s">&quot;&quot;&quot;</span>
        <span class="n">Initialize</span> <span class="n">your</span> <span class="n">data</span> <span class="n">structure</span> <span class="n">here</span><span class="p">.</span>
        <span class="s">&quot;&quot;&quot;</span>
        <span class="n">self</span><span class="p">.</span><span class="n">q1</span> <span class="o">=</span> <span class="n">deque</span><span class="p">()</span>
        <span class="n">self</span><span class="p">.</span><span class="n">q2</span> <span class="o">=</span> <span class="n">deque</span><span class="p">()</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200705091105422.png" src="https://img-blog.csdnimg.cn/20200705091105422.png" /></p>
<p>压入栈时，加入到q1的末尾，那么q1末尾的元素就是栈顶元素</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">def</span> <span class="n">push</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="nl">x</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nl">None</span><span class="p">:</span>
    <span class="s">&quot;&quot;&quot;</span>
    <span class="n">Push</span> <span class="n">element</span> <span class="n">x</span> <span class="n">onto</span> <span class="n">stack</span><span class="p">.</span>
    <span class="s">&quot;&quot;&quot;</span>
    <span class="n">self</span><span class="p">.</span><span class="n">q1</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200705091145560.png" src="https://img-blog.csdnimg.cn/20200705091145560.png" />
我们需要弹出栈顶元素，也就是q1最后的元素，队列只能是先进先出，我们得用q2把q1出队的元素装着，最后一个出队元素就是栈顶元素。</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">def</span> <span class="n">pop</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">int</span><span class="o">:</span>
    <span class="s">&quot;&quot;&quot;</span>
    <span class="n">Removes</span> <span class="n">the</span> <span class="n">element</span> <span class="n">on</span> <span class="n">top</span> <span class="n">of</span> <span class="n">the</span> <span class="n">stack</span> <span class="n">and</span> <span class="n">returns</span> <span class="n">that</span> <span class="n">element</span><span class="p">.</span>
    <span class="s">&quot;&quot;&quot;</span>
    <span class="k">while</span> <span class="n">len</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">q1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="o">:</span>
        <span class="n">self</span><span class="p">.</span><span class="n">q2</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">q1</span><span class="p">.</span><span class="n">popleft</span><span class="p">())</span>
    <span class="n">tmp</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">q1</span><span class="p">.</span><span class="n">popleft</span><span class="p">()</span>
    <span class="n">self</span><span class="p">.</span><span class="n">q2</span><span class="p">,</span><span class="n">self</span><span class="p">.</span><span class="n">q1</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">q1</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">q2</span>
    <span class="k">return</span> <span class="n">tmp</span>
</pre></div>
</div>
<p>判断是否为空，只需要判断q1</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">def</span> <span class="n">empty</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">bool</span><span class="o">:</span>
    <span class="s">&quot;&quot;&quot;</span>
    <span class="n">Returns</span> <span class="n">whether</span> <span class="n">the</span> <span class="n">stack</span> <span class="n">is</span> <span class="n">empty</span><span class="p">.</span>
    <span class="s">&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">not</span> <span class="kt">bool</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">q1</span><span class="p">)</span>
</pre></div>
</div>
<p>取栈顶元素。这里其实可以优化，我们可以在pop时保留一个变量，不过记得在pop时需要加入栈顶元素。</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">def</span> <span class="n">top</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">int</span><span class="o">:</span>
    <span class="n">ans</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">pop</span><span class="p">()</span>
    <span class="n">self</span><span class="p">.</span><span class="n">q1</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">ans</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ans</span>
</pre></div>
</div>
<p>下面就是完整代码</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">from</span> <span class="n">collections</span> <span class="n">import</span> <span class="n">deque</span>
<span class="k">class</span> <span class="nc">MyStack</span><span class="o">:</span>
    <span class="n">def</span> <span class="n">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">)</span><span class="o">:</span>
        <span class="s">&quot;&quot;&quot;</span>
        <span class="n">Initialize</span> <span class="n">your</span> <span class="n">data</span> <span class="n">structure</span> <span class="n">here</span><span class="p">.</span>
        <span class="s">&quot;&quot;&quot;</span>
        <span class="n">self</span><span class="p">.</span><span class="n">q1</span> <span class="o">=</span> <span class="n">deque</span><span class="p">()</span>
        <span class="n">self</span><span class="p">.</span><span class="n">q2</span> <span class="o">=</span> <span class="n">deque</span><span class="p">()</span>


    <span class="n">def</span> <span class="n">push</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="nl">x</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nl">None</span><span class="p">:</span>
        <span class="s">&quot;&quot;&quot;</span>
        <span class="n">Push</span> <span class="n">element</span> <span class="n">x</span> <span class="n">onto</span> <span class="n">stack</span><span class="p">.</span>
        <span class="s">&quot;&quot;&quot;</span>
        <span class="n">self</span><span class="p">.</span><span class="n">q1</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>


    <span class="n">def</span> <span class="n">pop</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">int</span><span class="o">:</span>
        <span class="s">&quot;&quot;&quot;</span>
        <span class="n">Removes</span> <span class="n">the</span> <span class="n">element</span> <span class="n">on</span> <span class="n">top</span> <span class="n">of</span> <span class="n">the</span> <span class="n">stack</span> <span class="n">and</span> <span class="n">returns</span> <span class="n">that</span> <span class="n">element</span><span class="p">.</span>
        <span class="s">&quot;&quot;&quot;</span>
        <span class="k">while</span> <span class="n">len</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">q1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="o">:</span>
            <span class="n">self</span><span class="p">.</span><span class="n">q2</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">q1</span><span class="p">.</span><span class="n">popleft</span><span class="p">())</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">q1</span><span class="p">.</span><span class="n">popleft</span><span class="p">()</span>
        <span class="n">self</span><span class="p">.</span><span class="n">q2</span><span class="p">,</span><span class="n">self</span><span class="p">.</span><span class="n">q1</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">q1</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">q2</span>
        <span class="k">return</span> <span class="n">tmp</span>


    <span class="n">def</span> <span class="n">top</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">int</span><span class="o">:</span>
        <span class="s">&quot;&quot;&quot;</span>
        <span class="n">Get</span> <span class="n">the</span> <span class="n">top</span> <span class="n">element</span><span class="p">.</span>
        <span class="s">&quot;&quot;&quot;</span>
        <span class="n">ans</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="n">self</span><span class="p">.</span><span class="n">q1</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">ans</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ans</span>


    <span class="n">def</span> <span class="n">empty</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">bool</span><span class="o">:</span>
        <span class="s">&quot;&quot;&quot;</span>
        <span class="n">Returns</span> <span class="n">whether</span> <span class="n">the</span> <span class="n">stack</span> <span class="n">is</span> <span class="n">empty</span><span class="p">.</span>
        <span class="s">&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">not</span> <span class="kt">bool</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">q1</span><span class="p">)</span>



<span class="cp"># Your MyStack object will be instantiated and called as such:</span>
<span class="cp"># obj = MyStack()</span>
<span class="cp"># obj.push(x)</span>
<span class="cp"># param_2 = obj.pop()</span>
<span class="cp"># param_3 = obj.top()</span>
<span class="cp"># param_4 = obj.empty()</span>
</pre></div>
</div>
</div>
<div class="section" id="leetcode-232">
<h2>LeetCode 第232题：用栈实现队列<a class="headerlink" href="#leetcode-232" title="永久链接至标题">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#使用栈实现队列的下列操作：</span>
<span class="cp"># push(x) -- 将一个元素放入队列的尾部。 </span>
<span class="cp"># pop() -- 从队列首部移除元素。 </span>
<span class="cp"># peek() -- 返回队列首部的元素。 </span>
<span class="cp"># empty() -- 返回队列是否为空。</span>
<span class="cp"># 示例:</span>
<span class="cp"># MyQueue queue = new MyQueue();</span>
<span class="cp">#queue.push(1);</span>
<span class="cp">#queue.push(2);  </span>
<span class="cp">#queue.peek();  </span><span class="c1">// 返回 1</span>
<span class="cp">#queue.pop();   </span><span class="c1">// 返回 1</span>
<span class="cp">#queue.empty(); </span><span class="c1">// 返回 false</span>
<span class="cp"># 说明:</span>
<span class="cp"># 你只能使用标准的栈操作 -- 也就是只有 push to top, peek/pop from top, size, 和 is empty 操作是合法的。 </span>
<span class="cp"># 你所使用的语言也许不支持栈。你可以使用 list 或者 deque（双端队列）来模拟一个栈，只要是标准的栈操作即可。 </span>
<span class="cp"># 假设所有操作都是有效的 （例如，一个空的队列不会调用 pop 或者 peek 操作）。</span>
<span class="cp"># Related Topics 栈 设计</span>
</pre></div>
</div>
<p>使用list表示一个栈，只能使用栈的相关方法，如append()，pop()，s[-1]，分别是栈顶追加元素,删除栈顶元素,取出栈顶元素.。</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyQueue</span><span class="o">:</span>
    <span class="n">def</span> <span class="n">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">)</span><span class="o">:</span>
        <span class="n">self</span><span class="p">.</span><span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">def</span> <span class="n">push</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="nl">x</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nl">None</span><span class="p">:</span>
        <span class="n">self</span><span class="p">.</span><span class="n">s</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">def</span> <span class="n">pop</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">int</span><span class="o">:</span>    
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">s</span><span class="p">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">def</span> <span class="n">peek</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">int</span><span class="o">:</span>
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">def</span> <span class="n">empty</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">bool</span><span class="o">:</span>
        <span class="k">return</span> <span class="n">not</span> <span class="kt">bool</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
<p>当然如果使用两个栈，入队操作即追加元素，都在栈s1中操作。</p>
<p>出队操作首先判断缓存栈s2是否有元素，有的话直接取出s2栈顶元素；若s2为空并且s1中有元素，将s1中元素全部转移到s2中，再取出s2栈顶元素，即可模拟队列出队操作；本例中没有出现s2和s1都为空的情况。</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyQueue</span><span class="o">:</span>
    <span class="n">def</span> <span class="n">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">)</span><span class="o">:</span>
        <span class="s">&quot;&quot;&quot;</span>
        <span class="n">Initialize</span> <span class="n">your</span> <span class="n">data</span> <span class="n">structure</span> <span class="n">here</span><span class="p">.</span>
        <span class="s">&quot;&quot;&quot;</span>
        <span class="n">self</span><span class="p">.</span><span class="n">s1</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">self</span><span class="p">.</span><span class="n">s2</span> <span class="o">=</span> <span class="p">[]</span>
        
    <span class="n">def</span> <span class="n">push</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="nl">x</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nl">None</span><span class="p">:</span>
        <span class="s">&quot;&quot;&quot;</span>
        <span class="n">Push</span> <span class="n">element</span> <span class="n">x</span> <span class="n">to</span> <span class="n">the</span> <span class="n">back</span> <span class="n">of</span> <span class="n">queue</span><span class="p">.</span>
        <span class="s">&quot;&quot;&quot;</span>
        <span class="n">self</span><span class="p">.</span><span class="n">s1</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="n">def</span> <span class="n">pop</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">int</span><span class="o">:</span>
        <span class="s">&quot;&quot;&quot;</span>
        <span class="n">Removes</span> <span class="n">the</span> <span class="n">element</span> <span class="n">from</span> <span class="n">in</span> <span class="n">front</span> <span class="n">of</span> <span class="n">queue</span> <span class="n">and</span> <span class="n">returns</span> <span class="n">that</span> <span class="n">element</span><span class="p">.</span>
        <span class="s">&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="nl">s2</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">s2</span><span class="p">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="k">else</span><span class="o">:</span>
            <span class="k">if</span>  <span class="n">self</span><span class="p">.</span><span class="nl">s1</span> <span class="p">:</span>
                <span class="k">while</span> <span class="n">self</span><span class="p">.</span><span class="nl">s1</span><span class="p">:</span>
                    <span class="n">self</span><span class="p">.</span><span class="n">s2</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">s1</span><span class="p">.</span><span class="n">pop</span><span class="p">())</span>
                <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">s2</span><span class="p">.</span><span class="n">pop</span><span class="p">()</span>

    <span class="n">def</span> <span class="n">peek</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">int</span><span class="o">:</span>
        <span class="s">&quot;&quot;&quot;</span>
        <span class="n">Get</span> <span class="n">the</span> <span class="n">front</span> <span class="n">element</span><span class="p">.</span>
        <span class="s">&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="nl">s2</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">s2</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="o">:</span>
            <span class="k">if</span>  <span class="n">self</span><span class="p">.</span><span class="nl">s1</span> <span class="p">:</span>
                <span class="k">while</span> <span class="n">self</span><span class="p">.</span><span class="nl">s1</span><span class="p">:</span>
                    <span class="n">self</span><span class="p">.</span><span class="n">s2</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">s1</span><span class="p">.</span><span class="n">pop</span><span class="p">())</span>
                <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">s2</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="n">def</span> <span class="n">empty</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">bool</span><span class="o">:</span>
        <span class="s">&quot;&quot;&quot;</span>
        <span class="n">Returns</span> <span class="n">whether</span> <span class="n">the</span> <span class="n">queue</span> <span class="n">is</span> <span class="n">empty</span><span class="p">.</span>
        <span class="s">&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">s1</span> <span class="n">or</span> <span class="n">self</span><span class="p">.</span><span class="nl">s2</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">False</span>
        <span class="k">else</span><span class="o">:</span>
            <span class="k">return</span> <span class="n">True</span>

<span class="cp"># Your MyQueue object will be instantiated and called as such:</span>
<span class="cp"># obj = MyQueue()</span>
<span class="cp"># obj.push(x)</span>
<span class="cp"># param_2 = obj.pop()</span>
<span class="cp"># param_3 = obj.peek()</span>
<span class="cp"># param_4 = obj.empty()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id430">
<h1>78、Python | Leetcode位运算系列<a class="headerlink" href="#id430" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen</p>
<p>今日，我决定继续更新Python教程，今天就开始了七十八、Python | Leetcode位运算系列。</p>
<p>位运算，计算机内所有的数都以二进制存储，位运算是对二进制位的操作</p>
<div class="section" id="id431">
<h2>按位“与”运算<a class="headerlink" href="#id431" title="永久链接至标题">¶</a></h2>
<p>按位“与”运算的运算符是：&amp;。首先我声明一个变量i等于11，j等于2，然后我们计算i和j的按位“与”运算，也就是11&amp;2，得到的结果是2.‘</p>
<p><img alt="https://img-blog.csdnimg.cn/2020070510172472.png" src="https://img-blog.csdnimg.cn/2020070510172472.png" />
个2是怎么来的，首先我们要把这个11和这个2全部转换成二进制，我们从上图看出11的二进制是0b1011，2的二进制是0b10。0b这个它就是一个二进制的标识位，就是告诉我们这个是二进制。</p>
<p>按照位“与”运算的原则，如果两个值相应的位置都为1也就是上下都为1的时候，那么该结果就是1，如果有一个不是1，那么就是0</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="mi">1011</span>
<span class="mo">0010</span>
<span class="o">----</span>
<span class="mo">0010</span>
</pre></div>
</div>
<p>所以，1011和0010的按位“与”运算就是0010,然后将二进制的0010转化为十进制，就是我们的结果2。</p>
</div>
<div class="section" id="id432">
<h2>按位“或”运算<a class="headerlink" href="#id432" title="永久链接至标题">¶</a></h2>
<p>下面，我们介绍按位“或”运算。按位“或”运算的运算符是：|。我们同样计算11和2的按位“或”运算，得到的结果是11。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200705101810801.png" src="https://img-blog.csdnimg.cn/20200705101810801.png" /></p>
<p>这个结果2到底是怎么样来进行运算的？11的二进制是1011，而2的二进制是0010。</p>
<p>按照位“或”运算的原则，如果两个值相应的位置有一个是1,那么该结果就是1，也就是如果都是0，该结果就是0</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="mi">1011</span>
<span class="mo">0010</span>
<span class="o">----</span>
<span class="mi">1011</span>
</pre></div>
</div>
<p>所以，1011和0010的按位“与”运算就是1011,然后将二进制的1011转化为十进制，就是我们的结果11。</p>
</div>
<div class="section" id="id433">
<h2>按位“异或”运算<a class="headerlink" href="#id433" title="永久链接至标题">¶</a></h2>
<p>下面，我们介绍按位“异或”运算。按位“异或”运算的运算符是：^。我们同样计算11和2的 按位“异或”运算，得到的结果是9。</p>
<p><img alt="https://img-blog.csdnimg.cn/2020070510192190.png" src="https://img-blog.csdnimg.cn/2020070510192190.png" /></p>
<p>这个结果9到底是怎么样来进行运算的？11的二进制是1011，而2的二进制是0010。</p>
<p>按位“异或”运算的原则，如果两个值相应的位置相同1,那么该结果就是0，也就是如果都是0或者都是1，该结果就是0.同样只有是1和0，那些结果就是1</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="mi">1011</span>
<span class="mo">0010</span>
<span class="o">----</span>
<span class="mi">1001</span>
</pre></div>
</div>
<p>所以，1011和0010的按位“异或”运算就是1001,然后将二进制的1001转化为十进制，就是我们的结果9。</p>
</div>
<div class="section" id="id434">
<h2>按位取反运算<a class="headerlink" href="#id434" title="永久链接至标题">¶</a></h2>
<p>下面，我们介绍按位取反运算。按位“异或”运算的运算符是：~。我们计算11的按位取反运算，得到的结果是-12。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200705101955555.png" src="https://img-blog.csdnimg.cn/20200705101955555.png" /></p>
<p>这个结果-12到底是怎么样来进行运算的？按位取反的计算结论是：~n = -(n+1)</p>
<p>因此，11的按位取反运算 ：~11=-(11+1)=-12</p>
</div>
<div class="section" id="id435">
<h2>左移运算符<a class="headerlink" href="#id435" title="永久链接至标题">¶</a></h2>
<p>下面，我们介绍左移运算符。左移运算符是：&lt;&lt;。我们计算11的左移2位的运算，得到的结果是44。
<img alt="https://img-blog.csdnimg.cn/2020070510202930.png" src="https://img-blog.csdnimg.cn/2020070510202930.png" /></p>
<p>这个结果44到底是怎么样来进行运算的？左移2位，就是1011往左移动2位，然后用0来补充，变成了101100。本来在这里向左边移动，其实是后边舍弃掉2位</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="mi">1011</span>
<span class="o">----</span>
<span class="mi">101</span>
</pre></div>
</div>
<p>所以，1011的右移2位的”运算就是101100,然后将二进制的101100转化为十进制，就是我们的结果44。</p>
</div>
<div class="section" id="id436">
<h2>右移运算符<a class="headerlink" href="#id436" title="永久链接至标题">¶</a></h2>
<p>下面，我们介绍右移运算符。右移运算符是：&gt;&gt;。我们计算11的右移2位的运算，得到的结果是2。</p>
<p><img alt="https://img-blog.csdnimg.cn/2020070510212065.png" src="https://img-blog.csdnimg.cn/2020070510212065.png" /></p>
<p>这个结果2到底是怎么样来进行运算的？右移2位，就是1011往右移动2位，然后右边的11直接去除，变成了10。本来在这里向右边移动，其实是后边删除位数。</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="mi">1011</span>
<span class="o">----</span>
<span class="mi">10</span>
</pre></div>
</div>
<p>所以，1011和的左移2位的”运算就是10,然后将二进制的10转化为十进制，就是我们的结果2。下表就是总结。</p>
<p>| 符号 | 意义       | 示例 |
| —- | ———- | —- |
| ~    | 逻辑非运算 | ~a   |
| &amp;    | 逻辑与运算 | a&amp;b  |
| |   | 逻辑或运算 | a|b |
| &lt;&lt;   | 位左移运算 | a&lt;&lt;2 |
| &gt;&gt;   | 位右移运算 | a&gt;&gt;2 |</p>
</div>
<div class="section" id="id437">
<h2>判断奇数还是偶数<a class="headerlink" href="#id437" title="永久链接至标题">¶</a></h2>
<p>通常判断奇数还是偶数我们想到的办法就是除以2，看余数是否为0。
Python代码如下：</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">def</span> <span class="n">isodd</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">:</span>
    <span class="k">return</span> <span class="n">True</span> <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">&lt;&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">else</span> <span class="n">False</span>
</pre></div>
</div>
<p>如何使用位运算呢？</p>
<p>我们只需要使用&amp;运算，与1进行&amp;，如果为1，那么该数为奇数；如果为0，那么该数是偶数，Python代码如下：</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">def</span> <span class="n">isodd</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">:</span>
    <span class="k">return</span> <span class="n">True</span> <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">)</span> <span class="k">else</span> <span class="n">False</span>
</pre></div>
</div>
</div>
<div class="section" id="id438">
<h2>左移一位相当于乘以2，右移一位相当于除以2<a class="headerlink" href="#id438" title="永久链接至标题">¶</a></h2>
<p>在面试的过程中，通常会遇到的一个问题是写二分查找代码。
二分查找的代码如下：</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>def binary_search(list, item):
    &#39;&#39;&#39;
    :param list: 有序列表
    :param item: 要查找的元素
    :return: item在list中的索引，若不在list中返回None
    &#39;&#39;&#39;
    low = 0
    high = len(list) - 1
    while low &lt;= high:
        midpoint = (low + high) // 2
        if list[midpoint] == item:
            return midpoint
        elif list[midpoint] &lt; item:
            low = midpoint + 1
        elif list[midpoint] &gt; item:
            high = midpoint - 1
    return None
</pre></div>
</div>
<p>其中有一步是需要取最小小标和最大下标的中间值，若使用位运算符，midpoint = (low + high) &gt;&gt; 1，面试官肯定会对你刮目相看。</p>
</div>
<div class="section" id="id439">
<h2>数值交换<a class="headerlink" href="#id439" title="永久链接至标题">¶</a></h2>
<p>数值交换的代码相信大家都非常熟悉了，因为似乎是从学编程语言的最开始就一直用：</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">temp</span> <span class="o">=</span> <span class="n">b</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">temp</span>
<span class="cp"># a,b =b,a</span>
</pre></div>
</div>
<p>但是怎么使用位运算来完成此功能呢？</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">^=</span> <span class="n">b</span>
<span class="n">b</span> <span class="o">^=</span> <span class="n">a</span>
<span class="n">a</span> <span class="o">^=</span> <span class="n">b</span>
</pre></div>
</div>
<p>确实比较难理解，原理是什么呢？
第一行，a = a ^ b，很容易理解；
第二行， b = b ^ a = b ^ a ^ b，由于 b ^ b = 0，所以 b = a ^ 0，即 b = a;
第三行， a = a ^ b ,由于a在第一步重新赋值，所以，a =  a ^ b ^ a = b，完成了数值交换。</p>
<p>下面就是位运算常见用法总结</p>
<p><strong>判断x的奇偶数</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span> <span class="c1">// 常规写法</span>
<span class="n">x</span> <span class="o">&amp;</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">1</span> <span class="c1">// 为真奇数，为假偶数</span>
</pre></div>
</div>
<p><strong>计算中位数</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">mid</span> <span class="o">=</span> <span class="p">(</span><span class="n">left</span> <span class="o">+</span> <span class="n">right</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>  <span class="c1">// 常规写法</span>
<span class="n">mid</span>  <span class="o">=</span> <span class="p">(</span><span class="n">left</span> <span class="o">+</span> <span class="n">right</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span> <span class="c1">// 位运算</span>
</pre></div>
</div>
<p><strong>交换两个数</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">^=</span> <span class="n">b</span>
<span class="n">b</span> <span class="o">^=</span> <span class="n">a</span>
<span class="n">a</span> <span class="o">^=</span> <span class="n">b</span>
</pre></div>
</div>
</div>
<div class="section" id="leetcode-78">
<h2>LeetCode 第 78题：子集<a class="headerlink" href="#leetcode-78" title="永久链接至标题">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#给定一组不含重复元素的整数数组 nums，返回该数组所有可能的子集（幂集）。 </span>
<span class="cp"># 说明：解集不能包含重复的子集。 </span>
<span class="cp"># 示例: </span>
<span class="cp"># 输入: nums = [1,2,3]</span>
<span class="cp">#输出:</span>
<span class="cp">#[</span>
<span class="cp">#  [3],</span>
<span class="cp">#  [1],</span>
<span class="cp">#  [2],</span>
<span class="cp">#  [1,2,3],</span>
<span class="cp">#  [1,3],</span>
<span class="cp">#  [2,3],</span>
<span class="cp">#  [1,2],</span>
<span class="cp">#  []</span>
<span class="cp">#] </span>
<span class="cp"># Related Topics 位运算 数组 回溯算法</span>
</pre></div>
</div>
<p>既然这道题让我们求的是所有的子集，那么我们可以从子集的特点入手。我们之前学过，一个含有n个元素的子集的数量是$2^n$。</p>
<p>使用位运算，对每一位为1的表示这一位的数字存在，例如对于输入[1,2,3] 编码i=001，表示只含有3，编码i=101.表示含有1,3</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="o">:</span>
    <span class="n">def</span> <span class="n">subsets</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="nl">nums</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="kt">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="kt">int</span><span class="p">]]</span><span class="o">:</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
        <span class="cp"># 遍历所有的状态</span>
        <span class="cp"># 1左移n位相当于2的n次方</span>
        <span class="k">for</span> <span class="n">s</span> <span class="n">in</span> <span class="n">range</span><span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">n</span><span class="p">)</span><span class="o">:</span>
            <span class="n">cur</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="cp"># 通过位运算找到每一位是0还是1</span>
            <span class="k">for</span> <span class="n">i</span> <span class="n">in</span> <span class="n">range</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">:</span>
                <span class="cp"># 判断s状态在2的i次方上，也就是第i位上是0还是1</span>
                <span class="k">if</span> <span class="n">s</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">i</span><span class="p">)</span><span class="o">:</span>
                    <span class="n">cur</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">ret</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">cur</span><span class="p">[</span><span class="o">:</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">ret</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id440">
<h1>79、Python | Leetcode 二叉树系列（上篇）<a class="headerlink" href="#id440" title="永久链接至标题">¶</a></h1>
<p>&#64;Author：Runsen</p>
<p>今日，我决定继续更新Python教程，今天就开始了七十九、Python | Leetcode 二叉树系列（上篇）。作为一名 Python 程序员，如果把基础的数据结构与算法都自己亲自实现一遍，那么你已经比 90% 的 Python 程序员更优秀了。</p>
<div class="section" id="id441">
<h2>树<a class="headerlink" href="#id441" title="永久链接至标题">¶</a></h2>
<p>树形结构本身具有递归的性质(在其后的编程中体现的淋漓尽致)；树是一种非常重要的非线性结构。</p>
<p><img alt="https://img-blog.csdnimg.cn/20190528213911826.png" src="https://img-blog.csdnimg.cn/20190528213911826.png" /></p>
<p>看下图，A 节点就是 B 节点的父节点，B 节点是 A 节点的子节点.。B、C、D 这三个节点的父节点是同一个节点A，，没有父节点的叫做根节点，也就是 E 。</p>
<p><img alt="https://img-blog.csdnimg.cn/20190528214008172.png" src="https://img-blog.csdnimg.cn/20190528214008172.png" /></p>
<p>没有子节点的节点叫作叶子节点或者叶节点，图中的G，H，I，J，K，L</p>
<p>关于“树”，还有三个比较相似的概念：高度（Height）、深度（Depth），层（level）</p>
<p><img alt="https://img-blog.csdnimg.cn/20190528214548574.png" src="https://img-blog.csdnimg.cn/20190528214548574.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20190528214558681.png" src="https://img-blog.csdnimg.cn/20190528214558681.png" /></p>
</div>
<div class="section" id="binary-tree">
<h2>二叉树（binary Tree）<a class="headerlink" href="#binary-tree" title="永久链接至标题">¶</a></h2>
<p>二叉树是n(n&gt;=0)个结点的有限集合，该集合或者为空集（称为空二叉树），或者由一个根结点和两棵互不相交的、分别称为根结点的左子树和右子树组成。</p>
<p><img alt="https://img-blog.csdnimg.cn/2019052821483629.png" src="https://img-blog.csdnimg.cn/2019052821483629.png" /></p>
<p>上图中，有两个二叉树，分别是 编号2和 3。</p>
<p>编号2又是满二叉树</p>
<p>满二叉树：在一棵二叉树中。如果所有分支结点都存在左子树和右子树，并且所有叶子都在同一层上，这样的二叉树称为满二叉树。</p>
<p>满二叉树的特点有：</p>
<ul class="simple">
<li>叶子只能出现在最下一层。出现在其它层就不可能达成平衡。</li>
<li>非叶子结点的度一定是2。</li>
<li>在同样深度的二叉树中，满二叉树的结点个数最多，叶子数最多。</li>
</ul>
<p>编号3是完全二叉树</p>
<p><strong>对一颗具有n个结点的二叉树按层编号，如果编号为i(1&lt;=i&lt;=n)的结点与同样深度的满二叉树中编号为i的结点在二叉树中位置完全相同，则这棵二叉树称为完全二叉树。</strong></p>
<p>就是保证叶子节点的上面层都要达到最大，最低下两层，最后一层的叶子节点都靠左排列</p>
<p><img alt="https://img-blog.csdnimg.cn/20190528215115835.png" src="https://img-blog.csdnimg.cn/20190528215115835.png" /></p>
<p>存储二叉树的方法就是链表和数组，下图是通过链表的方法存储二叉树
<img alt="https://img-blog.csdnimg.cn/20190528215507935.png" src="https://img-blog.csdnimg.cn/20190528215507935.png" />
通过数组的方法也可以存储二叉树</p>
<p><img alt="https://img-blog.csdnimg.cn/20190528215553943.png" src="https://img-blog.csdnimg.cn/20190528215553943.png" /></p>
<p>对于非完全二叉树，其实用数组的方法会浪费存储空间</p>
<p><img alt="https://img-blog.csdnimg.cn/20190528215743499.png" src="https://img-blog.csdnimg.cn/20190528215743499.png" /></p>
<p>二叉树具备以下数学性质：</p>
<ul class="simple">
<li>在二叉树的第i层上至多有$2^(i-1)$个结点（i&gt;0）</li>
<li>深度为k的二叉树至多有$2^k - 1$个结点（k&gt;0）</li>
<li>对于任意一棵二叉树，如果其叶结点数为N0，而度数为2的结点总数为N2，则$N0=N2+1$;</li>
<li>具有n个结点的完全二叉树的深度必为 $log2(n+1)$</li>
</ul>
</div>
<div class="section" id="id442">
<h2>二叉树的遍历<a class="headerlink" href="#id442" title="永久链接至标题">¶</a></h2>
<p>二叉树的遍历是指从二叉树的根结点出发，按照某种次序依次访问二叉树中的所有结点，使得每个结点被访问一次，且仅被访问一次。</p>
<ul class="simple">
<li>中序遍历：先左子树，再根节点，最后右子树</li>
<li>前序遍历：先根节点，再左子树，最后右子树</li>
<li>后序遍历：先左子树，再右子树，最后根节点。</li>
</ul>
<p>前序遍历通俗的说就是从二叉树的根结点出发，当第一次到达结点时就输出结点数据，按照先向左在向右的方向访问。</p>
<p>中序遍历就是从二叉树的根结点出发，当第二次到达结点时就输出结点数据，按照先向左在向右的方向访问。</p>
<p>后序遍历就是从二叉树的根结点出发，当第三次到达结点时就输出结点数据，按照先向左在向右的方向访问。</p>
<p><img alt="https://img-blog.csdnimg.cn/20190528215926380.png" src="https://img-blog.csdnimg.cn/20190528215926380.png" /></p>
<p>删除共有三种情况</p>
<ul class="simple">
<li>被删除的节点是叶子节点，这时候只要把这个节点删除，再把指向这个节点的父节点指针置为空就行</li>
<li>被删除的节点有左子树，或者有右子树，而且只有其中一个，那么只要把当前删除节点的父节点指向被删除节点的左子树或者右子树就行。</li>
<li>如果要删除的节点有两个子节点，需要找到这个节点的右子树的最小节点，把它替换到要删除的节点上，然后再删除掉这个最小节点，因为最小节点肯定没有左子节点</li>
</ul>
<p><img alt="https://img-blog.csdnimg.cn/20190528221128581.png" src="https://img-blog.csdnimg.cn/20190528221128581.png" /></p>
</div>
<div class="section" id="id443">
<h2>实现二叉树<a class="headerlink" href="#id443" title="永久链接至标题">¶</a></h2>
<p>上面就是二叉树全部内容，下面用Pytho代码具体实现二叉树。</p>
<p>按下来就是编程实现了，请动手自己实现一把。</p>
<p>先实现一个 node 类：</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Node</span><span class="p">(</span><span class="n">object</span><span class="p">)</span><span class="o">:</span>
    <span class="n">def</span> <span class="n">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span><span class="o">:</span>
        <span class="n">self</span><span class="p">.</span><span class="n">item</span> <span class="o">=</span> <span class="n">item</span>
        <span class="n">self</span><span class="p">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">None</span>
        <span class="n">self</span><span class="p">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">None</span>

    <span class="n">def</span> <span class="n">__str__</span><span class="p">(</span><span class="n">self</span><span class="p">)</span><span class="o">:</span>
        <span class="k">return</span> <span class="n">str</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">item</span><span class="p">)</span>
</pre></div>
</div>
<p>这里的 <code class="docutils literal notranslate"><span class="pre">__str__</span></code> 方法是为了方便打印。在 print 一个 Node 类时会打印<code class="docutils literal notranslate"><span class="pre">__str__</span></code>的返回值,例如：print(Node(5)) 就会打印出字符串 5 。</p>
<p>实现一个二叉树类：</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>class Tree(object):
    def __init__(self):
        # 根节点定义为 root 永不删除，做为哨兵使用。
        self.root = Node(&#39;root&#39;)

    def add(self, item):
        node = Node(item)
        if self.root is None:
            self.root = node
        else:
            q = [self.root]

            while True:
                pop_node = q.pop(0)
                if pop_node.left is None:
                    pop_node.left = node
                    return
                elif pop_node.right is None:
                    pop_node.right = node
                    return
                else:
                    q.append(pop_node.left)
                    q.append(pop_node.right)

    def get_parent(self, item):
        &#39;&#39;&#39;
        找到 Item 的父节点
        &#39;&#39;&#39;
        if self.root.item == item:
            return None  # 根节点没有父节点
        tmp = [self.root]
        while tmp:
            pop_node = tmp.pop(0)
            if pop_node.left and pop_node.left.item == item:
                return pop_node
            if pop_node.right and pop_node.right.item == item:
                return pop_node
            if pop_node.left is not None:
                tmp.append(pop_node.left)
            if pop_node.right is not None:
                tmp.append(pop_node.right)
        return None

    def delete(self, item):
        &#39;&#39;&#39;
        从二叉树中删除一个元素
        先获取 待删除节点 item 的父节点
        如果父节点不为空，
            判断 item 的左右子树
            如果左子树为空，那么判断 item 是父节点的左孩子，还是右孩子，如果是左孩子，将父节点的左指针指向 item 的右子树，反之将父节点的右指针指向 item 的右子树
            如果右子树为空，那么判断 item 是父节点的左孩子，还是右孩子，如果是左孩子，将父节点的左指针指向 item 的左子树，反之将父节点的右指针指向 item 的左子树
            如果左右子树均不为空，寻找右子树中的最左叶子节点 x ，将 x 替代要删除的节点。
        删除成功，返回 True
        删除失败, 返回 False

        &#39;&#39;&#39;
        if self.root is None:  # 如果根为空，就什么也不做
            return False

        parent = self.get_parent(item)
        if parent:
            del_node = parent.left if parent.left.item == item else parent.right  # 待删除节点
            if del_node.left is None:
                if parent.left.item == item:
                    parent.left = del_node.right
                else:
                    parent.right = del_node.right
                del del_node
                return True
            elif del_node.right is None:
                if parent.left.item == item:
                    parent.left = del_node.left
                else:
                    parent.right = del_node.left
                del del_node
                return True
            else:  # 左右子树都不为空
                tmp_pre = del_node
                tmp_next = del_node.right
                if tmp_next.left is None:
                    # 替代
                    tmp_pre.right = tmp_next.right
                    tmp_next.left = del_node.left
                    tmp_next.right = del_node.right

                else:
                    while tmp_next.left:  # 让tmp指向右子树的最后一个叶子
                        tmp_pre = tmp_next
                        tmp_next = tmp_next.left
                    # 替代
                    tmp_pre.left = tmp_next.right
                    tmp_next.left = del_node.left
                    tmp_next.right = del_node.right
                if parent.left.item == item:
                    parent.left = tmp_next
                else:
                    parent.right = tmp_next
                del del_node
                return True
        else:
            return False

    def traverse(self):  # 层次遍历
        if self.root is None:
            return None
        q = [self.root]
        res = [self.root.item]
        while q != []:
            pop_node = q.pop(0)
            if pop_node.left is not None:
                q.append(pop_node.left)
                res.append(pop_node.left.item)

            if pop_node.right is not None:
                q.append(pop_node.right)
                res.append(pop_node.right.item)
        return res

    def preorder(self, root):  # 先序遍历
        if root is None:
            return []
        result = [root.item]
        left_item = self.preorder(root.left)
        right_item = self.preorder(root.right)
        return result + left_item + right_item

    def inorder(self, root):  # 中序序遍历
        if root is None:
            return []
        result = [root.item]
        left_item = self.inorder(root.left)
        right_item = self.inorder(root.right)
        return left_item + result + right_item

    def postorder(self, root):  # 后序遍历
        if root is None:
            return []
        result = [root.item]
        left_item = self.postorder(root.left)
        right_item = self.postorder(root.right)
        return left_item + right_item + result
</pre></div>
</div>
<p>运行测试：</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>if __name__ == &#39;__main__&#39;:
    t = Tree()
    for i in range(10):
        t.add(i)
    print(&#39;层序遍历:&#39;, t.traverse())
    print(&#39;先序遍历:&#39;, t.preorder(t.root))
    print(&#39;中序遍历:&#39;, t.inorder(t.root))
    print(&#39;后序遍历:&#39;, t.postorder(t.root))

    for i in range(10):
        print(i, &quot; 的父亲&quot;, t.get_parent(i))

    for i in range(0, 15, 3):
        print(f&quot;删除 {i}&quot;, &#39;成功&#39; if t.delete(i) else &#39;失败&#39;)
        print(&#39;层序遍历:&#39;, t.traverse())
        print(&#39;先序遍历:&#39;, t.preorder(t.root))
        print(&#39;中序遍历:&#39;, t.inorder(t.root))
        print(&#39;后序遍历:&#39;, t.postorder(t.root))
</pre></div>
</div>
<p>执行结果如下：</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>层序遍历: [&#39;root&#39;, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
先序遍历: [&#39;root&#39;, 0, 2, 6, 7, 3, 8, 9, 1, 4, 5]
中序遍历: [6, 2, 7, 0, 8, 3, 9, &#39;root&#39;, 4, 1, 5]
后序遍历: [6, 7, 2, 8, 9, 3, 0, 4, 5, 1, &#39;root&#39;]
0  的父亲 root
1  的父亲 root
2  的父亲 0
3  的父亲 0
4  的父亲 1
5  的父亲 1
6  的父亲 2
7  的父亲 2
8  的父亲 3
9  的父亲 3
删除 0 成功
层序遍历: [&#39;root&#39;, 8, 1, 2, 3, 4, 5, 6, 7, 9]
先序遍历: [&#39;root&#39;, 8, 2, 6, 7, 3, 9, 1, 4, 5]
中序遍历: [6, 2, 7, 8, 3, 9, &#39;root&#39;, 4, 1, 5]
后序遍历: [6, 7, 2, 9, 3, 8, 4, 5, 1, &#39;root&#39;]
删除 3 成功
层序遍历: [&#39;root&#39;, 8, 1, 2, 9, 4, 5, 6, 7]
先序遍历: [&#39;root&#39;, 8, 2, 6, 7, 9, 1, 4, 5]
中序遍历: [6, 2, 7, 8, 9, &#39;root&#39;, 4, 1, 5]
后序遍历: [6, 7, 2, 9, 8, 4, 5, 1, &#39;root&#39;]
删除 6 成功
层序遍历: [&#39;root&#39;, 8, 1, 2, 9, 4, 5, 7]
先序遍历: [&#39;root&#39;, 8, 2, 7, 9, 1, 4, 5]
中序遍历: [2, 7, 8, 9, &#39;root&#39;, 4, 1, 5]
后序遍历: [7, 2, 9, 8, 4, 5, 1, &#39;root&#39;]
删除 9 成功
层序遍历: [&#39;root&#39;, 8, 1, 2, 4, 5, 7]
先序遍历: [&#39;root&#39;, 8, 2, 7, 1, 4, 5]
中序遍历: [2, 7, 8, &#39;root&#39;, 4, 1, 5]
后序遍历: [7, 2, 8, 4, 5, 1, &#39;root&#39;]
删除 12 失败
层序遍历: [&#39;root&#39;, 8, 1, 2, 4, 5, 7]
先序遍历: [&#39;root&#39;, 8, 2, 7, 1, 4, 5]
中序遍历: [2, 7, 8, &#39;root&#39;, 4, 1, 5]
后序遍历: [7, 2, 8, 4, 5, 1, &#39;root&#39;]
</pre></div>
</div>
<p>Binarytree是一个Python库，它通过一个简单的API生成二叉树，可以进行检查和操作。Github：https://github.com/joowani/binarytree/releases。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200705112838888.png" src="https://img-blog.csdnimg.cn/20200705112838888.png" /></p>
</div>
</div>
<div class="section" id="id444">
<h1>80、Python _ Leetcode 二叉树系列（中篇）<a class="headerlink" href="#id444" title="永久链接至标题">¶</a></h1>
<p>&#64;Author：Runsen</p>
<p>今日，我决定继续更新Python教程，今天就开始了八十、Python | Leetcode 二叉树系列（中篇）。作为一名 Python 程序员，如果把基础的数据结构与算法都自己亲自实现一遍，那么你已经比 90% 的 Python 程序员更优秀了。</p>
<div class="section" id="leetcode-102">
<h2>LeetCode 第 102题：二叉树的层次遍历<a class="headerlink" href="#leetcode-102" title="永久链接至标题">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#给你一个二叉树，请你返回其按 层序遍历 得到的节点值。 （即逐层地，从左到右访问所有节点）。 </span>
<span class="cp"># 示例： </span>
<span class="cp">#二叉树：[3,9,20,null,null,15,7], </span>
<span class="cp">#     3</span>
<span class="cp">#   / \</span>
<span class="cp">#  9  20</span>
<span class="cp">#    /  \</span>
<span class="cp">#   15   7</span>
<span class="cp"># 返回其层次遍历结果： </span>
<span class="cp"># [</span>
<span class="cp">#  [3],</span>
<span class="cp">#  [9,20],</span>
<span class="cp">#  [15,7]</span>
<span class="cp">#]</span>
<span class="cp"># Related Topics 树 广度优先搜索</span>
</pre></div>
</div>
<p>对于这道二叉树题目，我们要遍历每一层的每一个节点，可以考虑分别用BFS（广度优先搜索）和DFS（深度优先搜索）来解决，下面先简单介绍BFS，后续文章继续深入。</p>
<p>BFS对二叉树按照层进行搜索，搜索逻辑如下图所示：</p>
<p><img alt="https://img-blog.csdnimg.cn/20200706111902741.png" src="https://img-blog.csdnimg.cn/20200706111902741.png" /></p>
<p>根据我们熟悉的BFS搜索方法，运用队列来实现，把每个没有搜索到的点依次放入队列，然后再弹出队列的头部元素作为当前遍历节点，并进行记录。接下来对此节点的所有相邻节点进行搜索，将所有有效且未被访问过的节点压入队列中。</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp"># Definition for a binary tree node.</span>
<span class="cp"># class TreeNode:</span>
<span class="cp">#     def __init__(self, x):</span>
<span class="cp">#         self.val = x</span>
<span class="cp">#         self.left = None</span>
<span class="cp">#         self.right = None</span>
<span class="n">from</span> <span class="n">collections</span> <span class="n">import</span> <span class="n">deque</span>

<span class="k">class</span> <span class="nc">Solution</span><span class="p">(</span><span class="n">object</span><span class="p">)</span><span class="o">:</span>
    <span class="n">def</span> <span class="n">levelOrder</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span><span class="o">:</span>
        <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">root</span> <span class="n">is</span> <span class="nl">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="n">q</span> <span class="o">=</span> <span class="n">deque</span><span class="p">([</span><span class="n">root</span><span class="p">])</span>
        <span class="n">res</span><span class="p">.</span><span class="n">append</span><span class="p">([</span><span class="n">root</span><span class="p">.</span><span class="n">val</span><span class="p">])</span>
        <span class="k">while</span> <span class="nl">q</span><span class="p">:</span>
            <span class="n">size</span> <span class="o">=</span> <span class="n">len</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
            <span class="n">level</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="n">in</span> <span class="n">range</span><span class="p">(</span><span class="n">size</span><span class="p">)</span><span class="o">:</span>
                <span class="n">node</span> <span class="o">=</span> <span class="n">q</span><span class="p">.</span><span class="n">popleft</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">node</span><span class="p">.</span><span class="n">left</span> <span class="o">!=</span> <span class="nl">None</span><span class="p">:</span>
                    <span class="n">q</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">left</span><span class="p">)</span>
                    <span class="n">level</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">left</span><span class="p">.</span><span class="n">val</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">node</span><span class="p">.</span><span class="n">right</span> <span class="o">!=</span> <span class="nl">None</span><span class="p">:</span>
                    <span class="n">q</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">right</span><span class="p">)</span>
                    <span class="n">level</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">right</span><span class="p">.</span><span class="n">val</span><span class="p">)</span>
            <span class="k">if</span> <span class="nl">level</span><span class="p">:</span>
                <span class="n">res</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
</pre></div>
</div>
</div>
<div class="section" id="leetcode-104">
<h2>LeetCode 第 104题：二叉树的最大深度<a class="headerlink" href="#leetcode-104" title="永久链接至标题">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#给定一个二叉树，找出其最大深度。 </span>
<span class="cp"># 二叉树的深度为根节点到最远叶子节点的最长路径上的节点数。 </span>
<span class="cp"># 说明: 叶子节点是指没有子节点的节点。 </span>
<span class="cp"># 示例： </span>
<span class="cp">#给定二叉树 [3,9,20,null,null,15,7]， </span>
<span class="cp">#     3</span>
<span class="cp">#   / \</span>
<span class="cp">#  9  20</span>
<span class="cp">#    /  \</span>
<span class="cp">#   15   7 </span>
<span class="cp"># 返回它的最大深度 3 。 </span>
<span class="cp"># Related Topics 树 深度优先搜索</span>
</pre></div>
</div>
<p>看到该题目，首先想到的是使用递归来实现，递归的基本条件是访问到根节点（左右子树为空）；递归条件是访问左子树或右子树；中间处理逻辑是将子树深度+1，即为最终深度。</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span># class TreeNode:
#     def __init__(self, x):
#         self.val = x
#         self.left = None
#         self.right = None

class Solution:
	# 简化的递归
	def maxDepth(self, root: TreeNode) -&gt; int:
        if not root:
            return 0
        return max(self.maxDepth(root.left), self.maxDepth(root.right))+1
	def maxDepth(self, root: TreeNode) -&gt; int:  
		if not root: return 0 
		# 分别得到左右子树的最大深度
		left = self.maxDepth(root.left)    
		right = self.maxDepth(root.right)    
		return max(left, right) +1
</pre></div>
</div>
</div>
<div class="section" id="leetcode-107-ii">
<h2>LeetCode 第 107题：二叉树的层次遍历 II<a class="headerlink" href="#leetcode-107-ii" title="永久链接至标题">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#给定一个二叉树，返回其节点值自底向上的层次遍历。 （即按从叶子节点所在层到根节点所在的层，逐层从左向右遍历） </span>
<span class="cp">#</span>
<span class="cp"># 例如： </span>
<span class="cp">#给定二叉树 [3,9,20,null,null,15,7], </span>
<span class="cp">#     3</span>
<span class="cp">#   / \</span>
<span class="cp">#  9  20</span>
<span class="cp">#    /  \</span>
<span class="cp">#   15   7</span>
<span class="cp"># 返回其自底向上的层次遍历为： </span>
<span class="cp"># [</span>
<span class="cp">#  [15,7],</span>
<span class="cp">#  [9,20],</span>
<span class="cp">#  [3]</span>
<span class="cp">#]</span>
<span class="cp"># Related Topics 树 广度优先搜索</span>
</pre></div>
</div>
<p>和LeetCode 第 102题：二叉树的层次遍历完全一样，就是最后的结果改为<code class="docutils literal notranslate"><span class="pre">return</span> <span class="pre">res[::-1]</span></code></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="o">:</span>
    <span class="n">def</span> <span class="n">levelOrderBottom</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="nl">root</span><span class="p">:</span> <span class="n">TreeNode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="kt">int</span><span class="p">]]</span><span class="o">:</span>
        <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">root</span> <span class="n">is</span> <span class="nl">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="n">q</span> <span class="o">=</span> <span class="n">deque</span><span class="p">([</span><span class="n">root</span><span class="p">])</span>
        <span class="n">res</span><span class="p">.</span><span class="n">append</span><span class="p">([</span><span class="n">root</span><span class="p">.</span><span class="n">val</span><span class="p">])</span>
        <span class="k">while</span> <span class="nl">q</span><span class="p">:</span>
            <span class="n">size</span> <span class="o">=</span> <span class="n">len</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
            <span class="n">level</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="n">in</span> <span class="n">range</span><span class="p">(</span><span class="n">size</span><span class="p">)</span><span class="o">:</span>
                <span class="n">node</span> <span class="o">=</span> <span class="n">q</span><span class="p">.</span><span class="n">popleft</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">node</span><span class="p">.</span><span class="n">left</span> <span class="o">!=</span> <span class="nl">None</span><span class="p">:</span>
                    <span class="n">q</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">left</span><span class="p">)</span>
                    <span class="n">level</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">left</span><span class="p">.</span><span class="n">val</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">node</span><span class="p">.</span><span class="n">right</span> <span class="o">!=</span> <span class="nl">None</span><span class="p">:</span>
                    <span class="n">q</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">right</span><span class="p">)</span>
                    <span class="n">level</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">right</span><span class="p">.</span><span class="n">val</span><span class="p">)</span>
            <span class="k">if</span> <span class="nl">level</span><span class="p">:</span>
                <span class="n">res</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span><span class="p">[</span><span class="o">::-</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="leetcode-110">
<h2>LeetCode 第 110题：平衡二叉树<a class="headerlink" href="#leetcode-110" title="永久链接至标题">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#给定一个二叉树，判断它是否是高度平衡的二叉树。 </span>
<span class="cp"># 本题中，一棵高度平衡二叉树定义为： </span>
<span class="cp"># 一个二叉树每个节点 的左右两个子树的高度差的绝对值不超过1。 </span>
<span class="cp"># 示例 1: </span>
<span class="cp"># 给定二叉树 [3,9,20,null,null,15,7] </span>
<span class="cp">#</span>
<span class="cp">#     3</span>
<span class="cp">#   / \</span>
<span class="cp">#  9  20</span>
<span class="cp">#    /  \</span>
<span class="cp">#   15   7 </span>
<span class="cp"># 返回 true 。 </span>
<span class="cp">#示例 2: </span>
<span class="cp"># 给定二叉树 [1,2,2,3,3,null,null,4,4] </span>
<span class="cp">#</span>
<span class="cp">#        1</span>
<span class="cp">#      / \</span>
<span class="cp">#     2   2</span>
<span class="cp">#    / \</span>
<span class="cp">#   3   3</span>
<span class="cp">#  / \</span>
<span class="cp"># 4   4</span>
<span class="cp"># 返回 false 。 </span>
<span class="cp"># Related Topics 树 深度优先搜索</span>
</pre></div>
</div>
<p>定义一个获取当前节点高度的方法, 可以参考上面：二叉树的最大深度</p>
<p>左右两个子树的高度差的绝对值超过1，则为false</p>
<p>如果当前节点的左右子树满足高度差的绝对值不超过1，则需要继续判断其左右子树分别是否是平衡二叉树。</p>
<p>对于每个节点，左子树和右子树都是平衡树，并且得到左子树和右子树的高度，只要高度差小于1，则为true。</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp"># Definition for a binary tree node.</span>
<span class="cp"># class TreeNode(object):</span>
<span class="cp">#     def __init__(self, x):</span>
<span class="cp">#         self.val = x</span>
<span class="cp">#         self.left = None</span>
<span class="cp">#         self.right = None</span>

<span class="k">class</span> <span class="nc">Solution</span><span class="o">:</span>
    <span class="n">def</span> <span class="n">isBalanced</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="nl">root</span><span class="p">:</span> <span class="n">TreeNode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">bool</span><span class="o">:</span>
        <span class="k">if</span> <span class="n">not</span> <span class="nl">root</span><span class="p">:</span> <span class="k">return</span> <span class="n">True</span>
        <span class="k">return</span> <span class="n">abs</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">depth</span><span class="p">(</span><span class="n">root</span><span class="p">.</span><span class="n">left</span><span class="p">)</span> <span class="o">-</span> <span class="n">self</span><span class="p">.</span><span class="n">depth</span><span class="p">(</span><span class="n">root</span><span class="p">.</span><span class="n">right</span><span class="p">))</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="n">and</span> \
            <span class="n">self</span><span class="p">.</span><span class="n">isBalanced</span><span class="p">(</span><span class="n">root</span><span class="p">.</span><span class="n">left</span><span class="p">)</span> <span class="n">and</span> <span class="n">self</span><span class="p">.</span><span class="n">isBalanced</span><span class="p">(</span><span class="n">root</span><span class="p">.</span><span class="n">right</span><span class="p">)</span>

    <span class="n">def</span> <span class="n">depth</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span><span class="o">:</span>
        <span class="k">if</span> <span class="n">not</span> <span class="nl">root</span><span class="p">:</span> <span class="k">return</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="n">max</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">depth</span><span class="p">(</span><span class="n">root</span><span class="p">.</span><span class="n">left</span><span class="p">),</span> <span class="n">self</span><span class="p">.</span><span class="n">depth</span><span class="p">(</span><span class="n">root</span><span class="p">.</span><span class="n">right</span><span class="p">))</span> <span class="o">+</span> 
</pre></div>
</div>
<p>但是时间复杂度却是$O(n^2)$，可以采用DFS（深度优先搜索）</p>
<ul class="simple">
<li>对二叉树做深度优先遍历DFS，递归过程中：</li>
<li>终止条件：当DFS越过叶子节点时，返回高度0；</li>
<li>返回值：从底至顶，返回以每个节点root为根节点的子树最大高度(左右子树中最大的高度值加1max(left,right) + 1)；</li>
<li>当我们发现有一例 左/右子树高度差 ＞ 1 的情况时，代表此树不是平衡树，返回-1；</li>
<li>当发现不是平衡树时，后面的高度计算都没有意义了，因此一路返回-1，避免后续多余计算。
最差情况是对树做一遍完整DFS，时间复杂度为 O(N)。</li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="o">:</span>
    <span class="n">def</span> <span class="n">isBalanced</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="nl">root</span><span class="p">:</span> <span class="n">TreeNode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">bool</span><span class="o">:</span>
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">depth</span><span class="p">(</span><span class="n">root</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span>

    <span class="n">def</span> <span class="n">depth</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span><span class="o">:</span>
        <span class="k">if</span> <span class="n">not</span> <span class="nl">root</span><span class="p">:</span> <span class="k">return</span> <span class="mi">0</span>
        <span class="n">left</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">depth</span><span class="p">(</span><span class="n">root</span><span class="p">.</span><span class="n">left</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">left</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="o">:</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
        <span class="n">right</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">depth</span><span class="p">(</span><span class="n">root</span><span class="p">.</span><span class="n">right</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">right</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="o">:</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">return</span> <span class="n">max</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">abs</span><span class="p">(</span><span class="n">left</span> <span class="o">-</span> <span class="n">right</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="k">else</span> <span class="o">-</span><span class="mi">1</span><span class="n">J</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id445">
<h1>81、Python | Leetcode 二叉树系列（下篇）<a class="headerlink" href="#id445" title="永久链接至标题">¶</a></h1>
<p>&#64;Author：Runsen</p>
<p>今日，我决定继续更新Python教程，今天就开始了八十一、Python | Leetcode 二叉树系列（下篇）。作为一名 Python 程序员，如果把基础的数据结构与算法都自己亲自实现一遍，那么你已经比 90% 的 Python 程序员更优秀了。</p>
<div class="section" id="leetcode-94">
<h2>LeetCode 第 94题：二叉树的中序遍历<a class="headerlink" href="#leetcode-94" title="永久链接至标题">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#给定一个二叉树，返回它的中序 遍历。 </span>
<span class="cp"># 示例: </span>
<span class="cp"># 输入: [1,null,2,3]</span>
<span class="cp">#   1</span>
<span class="cp">#    \</span>
<span class="cp">#     2</span>
<span class="cp">#    /</span>
<span class="cp">#   3</span>
<span class="cp">#输出: [1,3,2] </span>
<span class="cp"># 进阶: 递归算法很简单，你可以通过迭代算法完成吗？ </span>
<span class="cp"># Related Topics 栈 树 哈希表</span>
</pre></div>
</div>
<p>递归：中序遍历的顺序是左根右。使用递归解题，条件是：当前节点为空则返回；递归条件是遍历其左右子节点。先访问左子节点，接着将当前节点的值添加到结果数组，然后访问右子节点。</p>
<p>栈的题解：首先访问左子树，将左子树存入栈中，每次将栈顶元素存入结果，如果右子树为空，取出栈顶元素，如果当前元素为栈顶元素右子树，一直弹出至当前元素不为栈顶元素右子树(此处说明访问右子树，根节点已经被访问过，弹出即可)。如果节点右子树不为空，访问右子树，继续循环遍历左子树，存入栈中。</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span># Definition for a binary tree node.
# class TreeNode:
#     def __init__(self, x):
#         self.val = x
#         self.left = None
#         self.right = None

class Solution:
    def inorderTraversal(self, root: TreeNode) -&gt; List[int]:
        res = []
        def helper(root):
            if not root:
                return 
            helper(root.left)
            res.append(root.val)
            helper(root.right)
        helper(root)
        return res

class Solution:
    def preorderTraversal(self, root: TreeNode) -&gt; List[int]:
        res = []  #结果列表
        stack = []  #辅助栈
        cur = root  #当前节点
        while stack or cur:
            while cur:  #一直遍历到最后一层
                res.append(cur.val)  
                stack.append(cur)
                cur = cur.left
            top = stack.pop()  #此时该节点的左子树已经全部遍历完
            cur = top.right  #对右子树遍历
        return res
</pre></div>
</div>
</div>
<div class="section" id="leetcode-98">
<h2>LeetCode 第 98题：验证二叉搜索树<a class="headerlink" href="#leetcode-98" title="永久链接至标题">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#给定一个二叉树，判断其是否是一个有效的二叉搜索树。 </span>
<span class="cp"># 假设一个二叉搜索树具有如下特征： </span>
<span class="cp"># 节点的左子树只包含小于当前节点的数。 </span>
<span class="cp"># 节点的右子树只包含大于当前节点的数。 </span>
<span class="cp"># 所有左子树和右子树自身必须也是二叉搜索树。 </span>
<span class="cp"># 示例 1: </span>
<span class="cp"># 输入:</span>
<span class="cp">#    2</span>
<span class="cp">#   / \</span>
<span class="cp">#  1   3</span>
<span class="cp">#输出: true</span>
<span class="cp"># 示例 2: </span>
<span class="cp"># 输入:</span>
<span class="cp">#    5</span>
<span class="cp">#   / \</span>
<span class="cp">#  1   4</span>
<span class="cp">#     / \</span>
<span class="cp">#    3   6</span>
<span class="cp">#输出: false</span>
<span class="cp">#解释: 输入为: [5,1,4,null,null,3,6]。</span>
<span class="cp">#     根节点的值为 5 ，但是其右子节点值为 4 。</span>
<span class="cp"># Related Topics 树 深度优先搜索</span>
</pre></div>
</div>
<p>做这题，需要了解二叉搜索树的特点：</p>
<ul class="simple">
<li>当前节点的左子树的所有节点的值都应该小于当前节点的值；</li>
<li>当前节点的右子树的所有节点的值都应该大于当前节点的值</li>
</ul>
<p>为了简便，我们可以这么做：</p>
<p>在之前中介绍过二叉搜索树一个很重要的定义就是，对一棵二叉搜索树进行中序遍历(左-&gt;根-&gt;右)，遍历所得的节点序列是一个升序排列的序列。所以我们可以利用二叉搜索树的这个性质，来判断一个二叉搜索树是否合法，就是上面那题的变形。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200706125032900.png" src="https://img-blog.csdnimg.cn/20200706125032900.png" /></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>class Solution:
    def isValidBST(self, root: TreeNode) -&gt; bool:      
        #中序遍历，观察到中序遍历的顺序是左-&gt;中-&gt;右,也就是按照从小到大的顺序，因此这样思考题目就很好解了,按照中序遍历，将值依次存入列表中。最后判断
        if not root:
            return True
        result = []
        def middle_traversal(root):
            if root.left:
                middle_traversal(root.left)
            result.append(root.val)
            if root.right:
                middle_traversal(root.right)
        middle_traversal(root)
        return result == sorted(result) and len(set(result)) == len(result)

# 下面是栈的题解
class Solution:
    def isValidBST(self, root: TreeNode) -&gt; bool:
        stack, preNum = [], float(&quot;-inf&quot;)
        while len(stack) &gt; 0 or root:
            if root:
                stack.append(root)
                root = root.left
            else:
                root = stack.pop()
                if root.val &lt;= preNum:
                    return False
                preNum = root.val
                root = root.right
        return True
</pre></div>
</div>
</div>
<div class="section" id="leetcode-105">
<h2>LeetCode 第 105题：从前序与中序遍历序列构造二叉树<a class="headerlink" href="#leetcode-105" title="永久链接至标题">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#根据一棵树的前序遍历与中序遍历构造二叉树。 </span>
<span class="cp"># 注意: </span>
<span class="cp">#你可以假设树中没有重复的元素。 </span>
<span class="cp"># 例如，给出</span>
<span class="cp"># 前序遍历 preorder = [3,9,20,15,7]</span>
<span class="cp">#中序遍历 inorder = [9,3,15,20,7] </span>
<span class="cp"># 返回如下的二叉树： </span>
<span class="cp">#</span>
<span class="cp">#     3</span>
<span class="cp">#   / \</span>
<span class="cp">#  9  20</span>
<span class="cp">#    /  \</span>
<span class="cp">#   15   7 </span>
<span class="cp"># Related Topics 树 深度优先搜索 数组</span>
</pre></div>
</div>
<p>二叉树前序遍历：</p>
<ul class="simple">
<li>先遍历根节点</li>
<li>再递归遍历左子树</li>
<li>最后递归遍历右子树</li>
</ul>
<p>二叉树中序遍历：</p>
<ul class="simple">
<li>先递归遍历左子树</li>
<li>再遍历根节点</li>
<li>最后递归遍历右子树</li>
</ul>
<p>二叉树后序遍历：</p>
<ul class="simple">
<li>先递归遍历左子树</li>
<li>再递归遍历右子树</li>
<li>最后遍历根节点</li>
</ul>
<p>前序遍历和中序遍历二者之间的联系，二者相同的纽带为根节点，因此我们可以通过在前序遍历中定位到根节点，然后从中序遍历中根节点找到对应的index，从而可以知道左右子树分别的节点数目</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp"># Definition for a binary tree node.</span>
<span class="cp"># class TreeNode:</span>
<span class="cp">#     def __init__(self, x):</span>
<span class="cp">#         self.val = x</span>
<span class="cp">#         self.left = None</span>
<span class="cp">#         self.right = None</span>

<span class="k">class</span> <span class="nc">Solution</span><span class="o">:</span>
    <span class="n">def</span> <span class="n">buildTree</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="nl">preorder</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="kt">int</span><span class="p">],</span> <span class="nl">inorder</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="kt">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nl">TreeNode</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">not</span> <span class="n">preorder</span> <span class="n">or</span> <span class="n">not</span> <span class="nl">inorder</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">None</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">TreeNode</span><span class="p">(</span><span class="n">preorder</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">index</span> <span class="o">=</span> <span class="n">inorder</span><span class="p">.</span><span class="n">index</span><span class="p">(</span><span class="n">preorder</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">root</span><span class="p">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">buildTree</span><span class="p">(</span><span class="n">preorder</span><span class="p">[</span><span class="mi">1</span><span class="o">:</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span> <span class="n">inorder</span><span class="p">[</span><span class="o">:</span><span class="n">index</span><span class="p">])</span>
        <span class="n">root</span><span class="p">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">buildTree</span><span class="p">(</span><span class="n">preorder</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="o">:</span><span class="p">],</span> <span class="n">inorder</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="o">:</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">root</span>
</pre></div>
</div>
</div>
<div class="section" id="leetcode-106">
<h2>LeetCode 第 106题：从中序与后序遍历序列构造二叉树<a class="headerlink" href="#leetcode-106" title="永久链接至标题">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#根据一棵树的中序遍历与后序遍历构造二叉树。 </span>
<span class="cp"># 注意: </span>
<span class="cp">#你可以假设树中没有重复的元素。</span>
<span class="cp"># 例如，给出 </span>
<span class="cp"># 中序遍历 inorder = [9,3,15,20,7]</span>
<span class="cp">#后序遍历 postorder = [9,15,7,20,3] </span>
<span class="cp"># 返回如下的二叉树： </span>
<span class="cp">#     3</span>
<span class="cp">#   / \</span>
<span class="cp">#  9  20</span>
<span class="cp">#    /  \</span>
<span class="cp">#   15   7</span>
<span class="cp"># Related Topics 树 深度优先搜索 数组</span>
</pre></div>
</div>
<p>道理和上面的一样，从后序遍历中定位到根节点，然后从中序遍历中根节点找到对应的index，从而可以知道左右子树分别的节点数目。</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="o">:</span>
    <span class="n">def</span> <span class="n">buildTree</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="nl">inorder</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="kt">int</span><span class="p">],</span> <span class="nl">postorder</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="kt">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nl">TreeNode</span><span class="p">:</span>
        <span class="cp"># 实际上inorder 和 postorder一定是同时为空的，因此你无论判断哪个都行</span>
        <span class="k">if</span> <span class="n">not</span> <span class="nl">inorder</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">None</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">TreeNode</span><span class="p">(</span><span class="n">postorder</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">inorder</span><span class="p">.</span><span class="n">index</span><span class="p">(</span><span class="n">root</span><span class="p">.</span><span class="n">val</span><span class="p">)</span>
        <span class="n">root</span><span class="p">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">buildTree</span><span class="p">(</span><span class="n">inorder</span><span class="p">[</span><span class="o">:</span><span class="n">i</span><span class="p">],</span> <span class="n">postorder</span><span class="p">[</span><span class="o">:</span><span class="n">i</span><span class="p">])</span>
        <span class="n">root</span><span class="p">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">buildTree</span><span class="p">(</span><span class="n">inorder</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="o">:</span><span class="p">],</span> <span class="n">postorder</span><span class="p">[</span><span class="nl">i</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">root</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id446">
<h1>82、Python |  Leetcode贪心算法系列<a class="headerlink" href="#id446" title="永久链接至标题">¶</a></h1>
<p>&#64;Author：Runsen</p>
<p>今日，我决定继续更新Python教程，今天就开始了八十二、Python | Leetcode贪心算法系列。</p>
<div class="section" id="id447">
<h2>贪心算法<a class="headerlink" href="#id447" title="永久链接至标题">¶</a></h2>
<p>贪心算法（又称贪婪算法）是指，在对问题求解时，总是做出在当前看来是最好的选择。也就是说，不从整体最优上加以考虑，他所做出的是在某种意义上的局部最优解。</p>
<p>假设我们有一个100kg的背包，可以装飞中物品，如何将所装的物品总价值最大</p>
<p><img alt="https://img-blog.csdnimg.cn/20190530163620439.png" src="https://img-blog.csdnimg.cn/20190530163620439.png" /></p>
<p><strong>答案 ：20kg 黑豆 ，30kg 绿豆 ，50kg 红豆</strong></p>
<p>贪心算法的基本思路是从问题的某一个初始解出发一步一步地进行，根据某个优化测度，每一步都要确保能获得局部最优解。每一步只考虑一个数据，他的选取应该满足局部优化的条件。若下一个数据和部分最优解连在一起不再是可行解时，就不把该数据添加到部分解中，直到把所有数据枚举完，或者不能再添加算法停止</p>
<p>贪心算法的解题步骤</p>
<ul class="simple">
<li>建立数学模型来描述问题；</li>
<li>把求解的问题分成若干个子问题；</li>
<li>对每一子问题求解，得到子问题的局部最优解；</li>
<li>把子问题的解局部最优解合成原来解问题的一个解。</li>
</ul>
<p>在比如，有一个有权图，从顶点S开始，照样一条到顶点T的最短路径</p>
<p>贪心算法的解决思路</p>
<p>每次选择一条跟当前相连的权最小的边，直到找出顶点T。</p>
<p>求出的最短路径S -&gt;A-&gt;E-&gt;T，路径长度1+4+4 =9
<img alt="https://img-blog.csdnimg.cn/20190530163946940.png" src="https://img-blog.csdnimg.cn/20190530163946940.png" />
但是贪心选择的方法，求的路径并不是最短路径  S- &gt;B -&gt;D-&gt;T 才是最短路径</p>
<p>因为前面的选择会影响后面的选择，导致每一步的选择都很糟糕，最终无法得到全局最优解</p>
<p>生活中常见的贪心算法就是钱币付钱</p>
<p>肯定先用最大的100来付钱，如果不够，就用50，最后剩下的用1元来补齐</p>
<p>1.贪婪算法可以寻找局部最优解，并尝试与这种方式获得全局最优解</p>
<p>2.得到的可能是近似最优解，但也可能便是最优解(区间调度问题，最短路径问题(广度优先、狄克斯特拉))</p>
<p>3.对于完全NP问题，目前并没有快速得到最优解的解决方案</p>
<p>4.面临NP完全问题，最佳的做法就是使用近似算法</p>
<p>5.贪婪算法(近似算法)在大部分情况下易于实现，并且效率不错</p>
<p>举个简单的例子，比如给定某个数字的金额（如 250）与 100, 50, 10, 5, 1 这些纸币（不限量），怎么能用最少张的纸币来兑换这张金额呢，显然每次兑换应该先从大额的纸币兑换起，第一次选 100， 第二次还是选 100， 第三次选第二大的 50 元，每次都选小于剩余金额中的最大面额的纸币，这样得出的解一定是全局最优解！时间复杂度无疑是线性的。</p>
</div>
<div class="section" id="id448">
<h2>最大和的连续子数组<a class="headerlink" href="#id448" title="永久链接至标题">¶</a></h2>
<p>我不知道这题是不是Leetcode，但出现的频率很高。好像是牛课的，反正是一个面试题。</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>给定一个整数数组 nums ，找到一个具有最大和的连续子数组（子数组最少包含一个元素），返回其最大和。
示例:
输入: [-2,1,-3,4,-1,2,1,-5,4],
输出: 6
解释: 连续子数组[4,-1,2,1] 的和最大，为 6。
</pre></div>
</div>
<p>第一时间想到的当然是暴力解决，基本思路就是遍历一遍，用两个变量，一个记录最大的和，一个记录当前的和。后面发现可以用贪心算法来解比较简单其基本思路是正在访问的节点值+此节点之前的最大值如果大于当前节点，则更新最大值为和，否则更新最大值为当前节点。</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>nums=[-2,1,-3,4,-1,2,1,-5,4]
tmp = nums[0]
max_ = tmp
n = len(nums)
for i in range(1,n):
    # 当当前序列加上此时的元素的值大于tmp的值，说明最大序列和可能出现在后续序列中，记录此时的最大值
   if tmp + nums[i]&gt;nums[i]:
       max_ = max(max_, tmp+nums[i])
       tmp = tmp + nums[i]
   else:
       #当tmp(当前和)小于下一个元素时，当前最长序列到此为止。以该元素为起点继续找最大子序列,
        # 并记录此时的最大值
       max_ = max(max_, tmp, tmp+nums[i],  nums[i])
       tmp = nums[i]
print(max_)
</pre></div>
</div>
<p>贪心算法的代码</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">nums</span><span class="p">=[-</span><span class="m">2</span><span class="p">,</span><span class="m">1</span><span class="p">,-</span><span class="m">3</span><span class="p">,</span><span class="m">4</span><span class="p">,-</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">1</span><span class="p">,-</span><span class="m">5</span><span class="p">,</span><span class="m">4</span><span class="p">]</span>
<span class="n">lenth</span> <span class="p">=</span> <span class="n">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
<span class="n">cur_sum</span><span class="p">=</span><span class="n">max_sum</span> <span class="p">=</span> <span class="n">nums</span><span class="p">[</span><span class="m">0</span><span class="p">]</span>
<span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="nf">range</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="n">lenth</span><span class="p">):</span>
	<span class="n">cur_sum</span> <span class="p">=</span> <span class="n">max</span><span class="p">(</span><span class="n">cur_sum</span><span class="p">+</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>  <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
	<span class="n">max_sum</span> <span class="p">=</span> <span class="n">max</span><span class="p">(</span><span class="n">cur_sum</span><span class="p">,</span> <span class="n">max_sum</span><span class="p">)</span>
<span class="n">print</span><span class="p">(</span><span class="n">max_sum</span><span class="p">)</span>
</pre></div>
</div>
<p>我们再看一个场景，这是一个求得最优解的贪心算法例子。</p>
<p>场景：一名收银员，需要找零 88元。怎么找零，所需要的纸/硬币的数量最少。</p>
<p>思路：依次找最大的纸币， 例如：找零88元， ¥88 = ¥50 + ¥20 + ¥10 + ¥5 + ¥1 * 3</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span># arr的每一位：分别对应100块、50块、20块、10块、5块、1块纸币。
arr = [0,0,0,0,0,0]

def change(money):
    while money &gt;= 1:
        if money &gt;= 100:
            money -= 100
            arr[0] += 1
        elif money &gt;= 50:
            money -= 50
            arr[1] += 1
        elif money &gt;= 20:
            money -= 20
            arr[2] += 1
        elif money &gt;= 10:
            money -= 10
            arr[3] += 1
        elif money &gt;= 5:
            money -= 5
            arr[4] += 1
        elif money &gt;= 1:
            money -= 1
            arr[5] += 1

change(88)
print(arr)
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200706223658121.png" src="https://img-blog.csdnimg.cn/20200706223658121.png" /></p>
</div>
<div class="section" id="leetcode-55">
<h2>LeetCode 第 55题：跳跃游戏<a class="headerlink" href="#leetcode-55" title="永久链接至标题">¶</a></h2>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>#给定一个非负整数数组，你最初位于数组的第一个位置。 
# 数组中的每个元素代表你在该位置可以跳跃的最大长度。 
# 判断你是否能够到达最后一个位置。 
# 示例 1:
# 输入: [2,3,1,1,4]
#输出: true
#解释: 我们可以先跳 1 步，从位置 0 到达 位置 1, 然后再从位置 1 跳 3 步到达最后一个位置。
# 示例 2: 
# 输入: [3,2,1,0,4]
#输出: false
#解释: 无论怎样，你总会到达索引为 3 的位置。但该位置的最大跳跃长度是 0 ， 所以你永远不可能到达最后一个位置。
# Related Topics 贪心算法 数组
</pre></div>
</div>
<p>从第i个位置，最远可跳nums[i]步：nums=[2,3,1,1,4,…];我们假设从第i个位置，最远可跳至第index[i]个位置，则index[i] = i + nums[i];</p>
<p>若从第0个位置最远可跳至第i个位置；则从第0个位置也一定可以跳至：第1个位置、第2个位置、…、第i-1个位置。从第0个位置，应该跳至第1、第2、…、第i-1个位置中的哪一个呢？</p>
<p>应该调至第1、2、…、i-1、i位置中，又可向前跳至最远位置（即index[1]、index[2]、…、index[i-1] 和 index[i] 最大的那个）（贪心算法的思想）</p>
<p><strong>算法步骤：</strong></p>
<ul class="simple">
<li>求从第i个位置最远可跳至第index[i]位置；</li>
<li>根据从第i位置最远可跳nums[i]步：index[i] = nums[i] + i;</li>
<li>初始化：设置变量i代表当前所处的位置，初始化为0；设置变量max_index代表从第0位置至第i位置的这个过程中，最远可到达的位置，初始化为index[0]。</li>
<li>利用i扫描index数组，直到i到达index数组尾部或i超过max_index，扫描过程中，更新max_index.</li>
<li>若最终 i 为数组长度，则返回true，否则返回false。</li>
</ul>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="n">def</span> <span class="nf">canJump</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">nums</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="kt">int</span><span class="p">])</span> <span class="p">-&gt;</span> <span class="kt">bool</span><span class="p">:</span>
        <span class="n">farthest</span> <span class="p">=</span> <span class="n">nums</span><span class="p">[</span><span class="m">0</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">i</span> <span class="p">&lt;=</span> <span class="n">farthest</span><span class="p">:</span>
                <span class="n">farthest</span> <span class="p">=</span> <span class="n">max</span><span class="p">(</span><span class="n">i</span><span class="p">+</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">farthest</span><span class="p">)</span>
        <span class="k">return</span> <span class="nf">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)-</span><span class="m">1</span> <span class="p">&lt;=</span> <span class="n">farthest</span>
</pre></div>
</div>
</div>
<div class="section" id="leetcode-122-ii">
<h2>LeetCode 第 122题： 买卖股票的最佳时机 II<a class="headerlink" href="#leetcode-122-ii" title="永久链接至标题">¶</a></h2>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>#给定一个数组，它的第 i 个元素是一支给定股票第 i 天的价格。 
# 设计一个算法来计算你所能获取的最大利润。你可以尽可能地完成更多的交易（多次买卖一支股票）。 
# 注意：你不能同时参与多笔交易（你必须在再次购买前出售掉之前的股票）。 
# 示例 1: 
# 输入: [7,1,5,3,6,4]
#输出: 7
#解释: 在第 2 天（股票价格 = 1）的时候买入，在第 3 天（股票价格 = 5）的时候卖出, 这笔交易所能获得利润 = 5-1 = 4 。
#     随后，在第 4 天（股票价格 = 3）的时候买入，在第 5 天（股票价格 = 6）的时候卖出, 这笔交易所能获得利润 = 6-3 = 3 。
# 示例 2: 
# 输入: [1,2,3,4,5]
#输出: 4
#解释: 在第 1 天（股票价格 = 1）的时候买入，在第 5 天 （股票价格 = 5）的时候卖出, 这笔交易所能获得利润 = 5-1 = 4 。
#     注意你不能在第 1 天和第 2 天接连购买股票，之后再将它们卖出。
#     因为这样属于同时参与了多笔交易，你必须在再次购买前出售掉之前的股票。
# 示例 3: 
# 输入: [7,6,4,3,1]
#输出: 0
#解释: 在这种情况下, 没有交易完成, 所以最大利润为 0。 
# 提示： 
# 1 &lt;= prices.length &lt;= 3 * 10 ^ 4 
# 0 &lt;= prices[i] &lt;= 10 ^ 4 
# Related Topics 贪心算法 数组
</pre></div>
</div>
<p>虽然题目看似复杂, 但真正完成的时候你会发现这道题是纸老虎。于是题目的思路就是遍历整个数组, 预测 i+1 个交易日比 i 高即可卖出, 累加利润; 否则跳过这个交易日. 什么?你觉得不可能这么简单? 事实就是这么简单!</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>class Solution:
    def maxProfit(self, prices: List[int]) -&gt; int:
        # return sum([max(prices[i+1] - prices[i],0) for i in range(len(prices)-1)])
        return sum([prices[i+1]-prices[i] if prices[i+1]-prices[i] &gt; 0 else 0 for i in range(len(prices)-1)])
        # return sum([y - x for x, y in zip(prices[:-1], prices[1:]) if x &lt; y])
</pre></div>
</div>
</div>
</div>
<div class="section" id="id449">
<h1>83、Python _ Leetcode双指针系列<a class="headerlink" href="#id449" title="永久链接至标题">¶</a></h1>
<p>&#64;Author：Runsen</p>
<p>今天高考，当年我就是一个辣鸡，现在还是一个辣鸡，祝高考的个个清华北大。辣鸡的我决定继续更新Python教程，今天就开始了八十三、Python | Leetcode双指针系列。</p>
<div class="section" id="id450">
<h2>双指针<a class="headerlink" href="#id450" title="永久链接至标题">¶</a></h2>
<p>双指针是一种解决问题的技巧或者思维方式，指在访问一个序列中的数据时使用两个指针进行扫描，两个指针可以是同向的，也可以是反向的；我们的关注点可以是这两个指针指向的两个元素本身，也可以是两个指针中间的区域。二分法的思想基于这种左右指针的实现</p>
</div>
<div class="section" id="leetcode-15">
<h2>LeetCode 第 15题：三数之和<a class="headerlink" href="#leetcode-15" title="永久链接至标题">¶</a></h2>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>#给你一个包含 n 个整数的数组 nums，判断 nums 中是否存在三个元素 a，b，c ，使得 a + b + c = 0 ？请你找出所有满足条件且不重复的三元组。
# 注意：答案中不可以包含重复的三元组。 
# 示例： 
# 给定数组 nums = [-1, 0, 1, 2, -1, -4]，
#
#满足要求的三元组集合为：
#[
#  [-1, 0, 1],
#  [-1, -1, 2]
#]
# 
# Related Topics 数组 双指针
#leetcode submit region begin(Prohibit modification and deletion)
</pre></div>
</div>
<p>使用排序 + 双指针方法解决;</p>
<ul class="simple">
<li>首先进行数组排序，时间复杂度 O(nlogn)</li>
<li>对数组nums进行遍历，每遍历一个值利用其下标 i，形成一个固定值 nums[i]</li>
<li>如果 nums[i] 大于0， 则三数之和必然无法等于0，直接结束循环</li>
<li>如果 nums[i] == nums[i-1]，则说明该数字重复，会导致结果重复，所以应该跳过</li>
<li>再使用前指针指向 start = i + 1处，后指针指向end = nums.length - 1，也就是结尾处</li>
<li>根据 sum = nums[i] + nums[start] + nums[end]结果，判断 sum 与 0 的大小关系，满足则添加进入结果，此时 start++; end– 如果 sum &lt; 0，则start++, 如果 sum &gt; 0, 则 end–</li>
<li>sum === 0 的时候还要考虑结果重复的情况</li>
<li>nums[start] == nums[start+1] 则会导致结果重复，应该跳过，start++</li>
<li>nums[end] == nums[end-1] 则会导致结果重复，应该跳过，end–</li>
</ul>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>class Solution:
    def threeSum(nums):
    nums.sort()
    # [-4, -1, -1, 0, 1, 2]
    res_list = []
    # 头部循环查找
    for i in range(len(nums)):
        if i == 0 or nums[i] &gt; nums[i - 1]:
            # 最左端
            l = i + 1
            # 最右端
            r = len(nums) - 1
            while l &lt; r:  # 正在查找
                three_sum = nums[i] + nums[l] + nums[r]
                if three_sum == 0:
                    res_list.append([nums[i], nums[l], nums[r]])
                    l += 1  # 右移一位
                    r -= 1  # 左移一位
                    while l &lt; r and nums[l] == nums[l - 1]:
                        # 从左往右，相同数值直接跳过
                        l += 1
                    while r &gt; l and nums[r] == nums[r + 1]:
                        # 从右往左，相同数值直接跳过
                        r -= 1
                elif three_sum &gt; 0:
                    # 大于零，右边数值大，左移
                    r -= 1
                else:
                    # 小于零，左边数值小，右移
                    l += 1
    return res_list
</pre></div>
</div>
</div>
<div class="section" id="leetcode-16">
<h2>LeetCode 第 16题：三数最近相加<a class="headerlink" href="#leetcode-16" title="永久链接至标题">¶</a></h2>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>#给定一个包括 n 个整数的数组 nums 和 一个目标值 target。找出 nums 中的三个整数，使得它们的和与 target 最接近。返回这三个数的和。假定每组输入只存在唯一答案。 
# 示例： 
# 输入：nums = [-1,2,1,-4], target = 1
#输出：2
#解释：与 target 最接近的和是 2 (-1 + 2 + 1 = 2) 。
# 提示： 
# 3 &lt;= nums.length &lt;= 10^3 
# -10^3 &lt;= nums[i] &lt;= 10^3 
# -10^4 &lt;= target &lt;= 10^4 
# Related Topics 数组 双指针
</pre></div>
</div>
<p>本题目因为要计算三个数，如果靠暴力枚举的话时间复杂度会到O(n^3)，需要降低时间复杂度</p>
<ul class="simple">
<li>首先进行数组排序，时间复杂度O(nlogn)</li>
<li>在数组nums中，进行遍历，每遍历一个值利用其下标i，形成一个固定值nums[i]</li>
<li>再使用前指针指向<code class="docutils literal notranslate"><span class="pre">j=</span> <span class="pre">i</span> <span class="pre">+</span> <span class="pre">1</span></code>处，后指针指向<code class="docutils literal notranslate"><span class="pre">k=</span> <span class="pre">nums.length</span> <span class="pre">-</span> <span class="pre">1</span></code>处，也就是结尾处</li>
<li>根据 <code class="docutils literal notranslate"><span class="pre">sum</span> <span class="pre">=</span> <span class="pre">nums[i]</span> <span class="pre">+</span> <span class="pre">nums[start]</span> <span class="pre">+</span> <span class="pre">nums[end]</span> </code>的结果，判断sum与目标target的距离，如果更近则更新结果ans</li>
<li>同时判断sum与target的大小关系，因为数组有序，如果sum &gt; target 则<code class="docutils literal notranslate"> <span class="pre">k--</span></code>，如果sum &lt; target 则 <code class="docutils literal notranslate"><span class="pre">j++</span></code>，如果sum == target 则说明距离为0直接返回结果</li>
<li>整个遍历过程，固定值为n次，双指针为n次，时间复杂度为O(n^2)</li>
<li>总时间复杂度：$O(nlogn) + O(n^2) = O(n^2)$</li>
</ul>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>class Solution:
    def threeSumClosest(self, nums: List[int], target: int) -&gt; int:
        if not nums: return 0
        if len(nums) &lt; 3: return sum(nums)

        ans = float(&#39;inf&#39;)
        nums.sort()
        for i in range(len(nums)):
            # 优化点 1
            if i &gt; 0 and nums[i] == nums[i-1]: continue
            
            # 新的 t
            t = target - nums[i]
            j, k = i + 1, len(nums) - 1
            while j &lt; k:
                # 优化点 2
                if t == nums[j] + nums[k]: return target

                # 当前 j、k更接近target
                if abs(t - nums[j] - nums[k]) &lt; abs(target - ans):
                    ans = nums[i] + nums[j] + nums[k]
                # 移动j | k
                if t &gt; nums[j] + nums[k]:
                    j += 1
                else:
                    k -= 1
        return ans
</pre></div>
</div>
</div>
<div class="section" id="leetcode-27">
<h2>LeetCode 第 27题：移除元素<a class="headerlink" href="#leetcode-27" title="永久链接至标题">¶</a></h2>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>#给你一个数组 nums 和一个值 val，你需要 原地 移除所有数值等于 val 的元素，并返回移除后数组的新长度。
# 不要使用额外的数组空间，你必须仅使用 O(1) 额外空间并 原地 修改输入数组。
# 元素的顺序可以改变。你不需要考虑数组中超出新长度后面的元素。
# 示例 1:
# 给定 nums = [3,2,2,3], val = 3,
#函数应该返回新的长度 2, 并且 nums 中的前两个元素均为 2。
#你不需要考虑数组中超出新长度后面的元素。
# 示例 2:
# 给定 nums = [0,1,2,2,3,0,4,2], val = 2,
#函数应该返回新的长度 5, 并且 nums 中的前五个元素为 0, 1, 3, 0, 4。
#注意这五个元素可为任意顺序。
#你不需要考虑数组中超出新长度后面的元素。
# 说明:
# 为什么返回数值是整数，但输出的答案是数组呢?
# 请注意，输入数组是以「引用」方式传递的，这意味着在函数里修改输入数组对于调用者是可见的。
# 你可以想象内部操作如下:
# // nums 是以“引用”方式传递的。也就是说，不对实参作任何拷贝
#int len = removeElement(nums, val);
#// 在函数里修改输入数组对于调用者是可见的。
#// 根据你的函数返回的长度, 它会打印出数组中 该长度范围内 的所有元素。
#for (int i = 0; i &lt; len; i++) {
#    print(nums[i]);
#}
# 
# Related Topics 数组 双指针
</pre></div>
</div>
<p>首先讲讲自己做题的思路，用Python做比较简单，遍历数组，如果当前值不等于val，就赋值给数组的第i个位置，i+1。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">removeElement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nums</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">val</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">nums</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">num</span> <span class="o">!=</span> <span class="n">val</span><span class="p">:</span>
                <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">num</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">i</span>
</pre></div>
</div>
<p>官方的解法二就是双指针，在数组需要剔除的元素很少的情况下，上述方法显得有些没必要。比如数组为[1,2,3,5,4],要剔除的数是4时，没必要将前面4个数字遍历一遍。</p>
<ul class="simple">
<li>i, j 分别指向数组的首尾下标。</li>
<li>从 i 开始往后扫描，如果遇到 nums[i] == val 就把它跟 j 交换，j左移一位。直到 i &lt;= j 表示扫描完毕退出</li>
</ul>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="n">def</span> <span class="nf">removeElement</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">nums</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="kt">int</span><span class="p">],</span> <span class="n">val</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="kt">int</span><span class="p">:</span>
        <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="p">=</span> <span class="m">0</span><span class="p">,</span> <span class="n">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)-</span><span class="m">1</span>
        <span class="k">while</span> <span class="n">i</span> <span class="p">&lt;=</span> <span class="n">j</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">==</span> <span class="n">val</span><span class="p">:</span>
                <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="p">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">j</span> <span class="p">-=</span> <span class="m">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">i</span> <span class="p">+=</span> <span class="m">1</span>
        <span class="k">return</span> <span class="n">i</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id451">
<h1>84、Python | Leetcode回溯算法系列<a class="headerlink" href="#id451" title="永久链接至标题">¶</a></h1>
<p>&#64;Author：Runsen</p>
<p>&#64;Date：2020/7/7</p>
<p>今天高考，当年我就是一个辣鸡，现在还是一个辣鸡，祝高考的个个清华北大。辣鸡的我决定继续更新Python教程，今天就开始了八十四、Python | Leetcode回溯算法系列。</p>
<div class="section" id="id452">
<h2>回溯算法<a class="headerlink" href="#id452" title="永久链接至标题">¶</a></h2>
<p>回溯算法(Backtracking Algorithm)，实际上一个类似枚举的搜索尝试过程，主要是在搜索尝试过程中寻找问题的解，当发现已不满足求解条件时，就“回溯”返回，尝试别的路径。(上述定义来自百度百科)</p>
<p>基本思想是：从一条路往前走，能进则进，不能进则退回来，换一条路再试。</p>
<p>回溯算法实际上一个类似枚举的搜索尝试过程，主要是在搜索尝试过程中寻找问题的解，当发现已不满足求解条件时，就“回溯”返回，尝试别的路径。</p>
<p>回溯法是一种选优搜索法，按选优条件向前搜索，以达到目标。但当探索到某一步时，发现原先选择并不优或达不到目标，就退回一步重新选择，这种走不通就退回再走的技术为回溯法，而满足回溯条件的某个状态的点称为“回溯点”。许多复杂的，规模较大的问题都可以使用回溯法，有“通用解题方法”的美称。</p>
<p>回溯算法也叫试探法，它是一种系统地搜索问题的解的方法。</p>
<p>八皇后问题就是回溯算法的典型</p>
<p>假设有一个8X8的棋盘，要放8个棋子（皇后）每个棋子所在行，列，对角线不能有棋子
<img alt="https://img-blog.csdnimg.cn/20190530172548385.png" src="https://img-blog.csdnimg.cn/20190530172548385.png" /></p>
<p>第一步按照第一行放一个皇后，然后第二行符合要求放第2个皇后，如果没有位置符合要求，那么就要改变第一个皇后的位置，重新放第2个皇后的位置，直到找到符合条件的位置就可以了。</p>
<p>我们首先将问题简化为四皇后问题，并用回溯法来找到他们的解。目的是在4x4的棋盘上，使得4个皇后不能在同行同列以及同斜线上。</p>
<p>首先尝试将皇后放入第一个格子，被涂黑的地方是不能放皇后</p>
<p><img alt="https://img-blog.csdnimg.cn/20200707143146449.png" src="https://img-blog.csdnimg.cn/20200707143146449.png" /></p>
<p>第二行的皇后只能放在第三格或第四格，比方我们放第三格，则：</p>
<p><img alt="https://img-blog.csdnimg.cn/20200707143203747.png" src="https://img-blog.csdnimg.cn/20200707143203747.png" /></p>
<p>可以看到再难以放下第三个皇后，此时我们就要用到回溯算法了。我们把第二个皇后更改位置，此时我们能放下第三枚皇后了。</p>
<p><img alt="https://img-blog.csdnimg.cn/2020070714322287.png" src="https://img-blog.csdnimg.cn/2020070714322287.png" /></p>
<p>虽然是能放置第三个皇后，但是第四个皇后又无路可走了。返回上层调用（3号皇后），而3号也别无可去，继续回溯上层调用（2号），2号已然无路可去，继续回溯上层（1号），于是1号皇后改变位置如下，继续回溯。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200707143235395.png" src="https://img-blog.csdnimg.cn/20200707143235395.png" /></p>
<p>上述就是回溯算法的过程，根据这个算法，最终能够把四位皇后放在4x4的棋盘里。也能用同样的方法解决了八皇后问题甚至N皇后问题。</p>
</div>
<div class="section" id="leetcode51-08-12">
<h2>Leetcode第51题，面试题 08.12：八皇后<a class="headerlink" href="#leetcode51-08-12" title="永久链接至标题">¶</a></h2>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>#设计一种算法，打印 N 皇后在 N × N 棋盘上的各种摆法，其中每个皇后都不同行、不同列，也不在对角线上。这里的“对角线”指的是所有的对角线，不只是平分整个棋盘的那两条对角线。 
# 注意：本题相对原题做了扩展 
# 示例: 
#  输入：4
# 输出：[[&quot;.Q..&quot;,&quot;...Q&quot;,&quot;Q...&quot;,&quot;..Q.&quot;],[&quot;..Q.&quot;,&quot;Q...&quot;,&quot;...Q&quot;,&quot;.Q..&quot;]]
# 解释: 4 皇后问题存在如下两个不同的解法。
#[
# [&quot;.Q..&quot;,  // 解法 1
#  &quot;...Q&quot;,
#  &quot;Q...&quot;,
#  &quot;..Q.&quot;],
#
# [&quot;..Q.&quot;,  // 解法 2
#  &quot;Q...&quot;,
#  &quot;...Q&quot;,
#  &quot;.Q..&quot;]
#]
# 
# Related Topics 回溯算法
</pre></div>
</div>
<p>在此之前写过，因此不写题解，具体代码如下。</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="n">def</span> <span class="nf">solveNQueens</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">str</span><span class="p">]]:</span>
        <span class="n">res</span> <span class="p">=</span> <span class="p">[]</span>
        <span class="n">s</span> <span class="p">=</span> <span class="s">&quot;.&quot;</span> <span class="p">*</span> <span class="n">n</span>
        <span class="n">def</span> <span class="nf">backtrack</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">tmp</span><span class="p">,</span><span class="n">col</span><span class="p">,</span><span class="n">z_diagonal</span><span class="p">,</span><span class="n">f_diagonal</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">i</span> <span class="p">==</span> <span class="n">n</span><span class="p">:</span>
                <span class="n">res</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">tmp</span><span class="p">)</span>
                <span class="k">return</span> 
            <span class="k">for</span> <span class="n">j</span> <span class="k">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">j</span> <span class="n">not</span> <span class="k">in</span> <span class="n">col</span> <span class="n">and</span> <span class="n">i</span> <span class="p">+</span> <span class="n">j</span> <span class="n">not</span> <span class="k">in</span>  <span class="n">z_diagonal</span> <span class="n">and</span> <span class="n">i</span> <span class="p">-</span> <span class="n">j</span> <span class="n">not</span> <span class="k">in</span> <span class="n">f_diagonal</span><span class="p">:</span>
                    <span class="n">backtrack</span><span class="p">(</span><span class="n">i</span><span class="p">+</span><span class="m">1</span><span class="p">,</span><span class="n">tmp</span> <span class="p">+</span> <span class="p">[</span><span class="n">s</span><span class="p">[:</span><span class="n">j</span><span class="p">]</span> <span class="p">+</span> <span class="s">&quot;Q&quot;</span> <span class="p">+</span> <span class="n">s</span><span class="p">[</span><span class="n">j</span><span class="p">+</span><span class="m">1</span><span class="p">:]],</span> <span class="n">col</span> <span class="p">|</span> <span class="p">{</span><span class="n">j</span><span class="p">},</span> <span class="n">z_diagonal</span> <span class="p">|{</span><span class="n">i</span> <span class="p">+</span> <span class="n">j</span><span class="p">}</span> <span class="p">,</span> <span class="n">f_diagonal</span> <span class="p">|{</span><span class="n">i</span> <span class="p">-</span> <span class="n">j</span><span class="p">}</span>  <span class="p">)</span> 
            
        <span class="n">backtrack</span><span class="p">(</span><span class="m">0</span><span class="p">,[],</span><span class="k">set</span><span class="p">(),</span><span class="k">set</span><span class="p">(),</span><span class="k">set</span><span class="p">())</span>    
        <span class="k">return</span> <span class="n">res</span>
</pre></div>
</div>
</div>
<div class="section" id="leetcode46">
<h2>Leetcode第46题，全排列<a class="headerlink" href="#leetcode46" title="永久链接至标题">¶</a></h2>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>#给定一个 没有重复 数字的序列，返回其所有可能的全排列。 
# 示例: 
# 输入: [1,2,3]
#输出:
#[
#  [1,2,3],
#  [1,3,2],
#  [2,1,3],
#  [2,3,1],
#  [3,1,2],
#  [3,2,1]
#] 
# Related Topics 回溯算法
</pre></div>
</div>
<p>具体来说，假设我们已经填到第index个位置，那么nums[] 数组中[0, index - 1]是已填过的数的集合，[index - 1, length - 1] 是待填的数的集合。我们肯定是尝试用[0, index - 1]里的数去填第index个数，假设待填的数的下标为i，那么填完以后我们将第i个数和第index个数交换，即能使得在填第index + 1个数的时候nums[] 数组的[0, index]部分为已填过的数，[index + 1, n - 1]为待填的数，回溯的时候交换回来即能完成撤销操作。</p>
<p>具体来说，假设我们已经填到第index个位置，那么nums[] 数组中[0, index - 1]是已填过的数的集合，[index - 1, length - 1] 是待填的数的集合。我们肯定是尝试用[0, index - 1]里的数去填第index个数，假设待填的数的下标为i，那么填完以后我们将第i个数和第index个数交换，即能使得在填第index + 1个数的时候nums[] 数组的[0, index]部分为已填过的数，[index + 1, n - 1]为待填的数，回溯的时候交换回来即能完成撤销操作。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200707150459893.png" src="https://img-blog.csdnimg.cn/20200707150459893.png" /></p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>class Solution:
    def permute(self, nums: List[int]) -&gt; List[List[int]]:
        &quot;&quot;&quot;itertools库内置了这个函数&quot;&quot;&quot;
        return itertools.permutations(nums)
    
    def permute2(self, nums: List[int]) -&gt; List[List[int]]:
        &quot;&quot;&quot;自己写回溯法&quot;&quot;&quot;
        res = []
        def _backtrace(nums, pre_list):
            if len(nums) &lt;= 0:
                res.append(pre_list)
            else:
                for i in nums:
                    # 注意copy一份新的调用，否则无法正常循环
                    p_list = pre_list.copy()
                    p_list.append(i)
                    left_nums = nums.copy()
                    left_nums.remove(i)
                    _backtrace(left_nums, p_list)
        _backtrace(nums, [])
        return res

class Solution:
    def __init__(self):
        self.res = []

    def permute(self, nums: List[int]) -&gt; List[List[int]]:
        self.back_trace(nums, [])
        return self.res

    def back_trace(self, nums, tmp):
        if not nums:
            self.res.append(tmp)
        else:
            for i in range(len(nums)):
                self.back_trace(nums[:i] + nums[i + 1:], tmp + [nums[i]])

</pre></div>
</div>
</div>
<div class="section" id="leetcode39">
<h2>Leetcode第39题，组合总和<a class="headerlink" href="#leetcode39" title="永久链接至标题">¶</a></h2>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>#给定一个无重复元素的数组 candidates 和一个目标数 target ，找出 candidates 中所有可以使数字和为 target 的组合。 
# candidates 中的数字可以无限制重复被选取。 
# 说明： 
# 所有数字（包括 target）都是正整数。 
# 解集不能包含重复的组合。 
# 示例 1: 
# 输入: candidates = [2,3,6,7], target = 7,
#所求解集为:
#[
#  [7],
#  [2,2,3]
#]
# 示例 2: 
# 输入: candidates = [2,3,5], target = 8,
#所求解集为:
#[
#  [2,2,2,2],
#  [2,3,3],
#  [3,5]
#] 
# Related Topics 数组 回溯算法
</pre></div>
</div>
<p>首先对candidates排序</p>
<p>若candidates为空，则返回[]</p>
<p>回溯函数helper()，传入参数：下一加和索引i，当前已加和数组tmp，下一目标target</p>
<p>若target==0，说明当前和满足条件，将当前加和数组tmp加入res，并return。</p>
<p>因为已经将candidates排序，所以当下一目标小于下一待加和数时，return。</p>
<p>并且当下一待加和索引<code class="docutils literal notranslate"><span class="pre">i==n</span></code>时，return。为了防止数组越界，将条件i==n放在target&lt;candidates[i]之前，进行截断。</p>
<p>因为可重复调用元素，所以helper(i,tmp+[candidates[i],target-candidates[i]]继续重复调用自身。</p>
<p>调用数组中下一元素，寻找新答案。helper(i+1,tmp,target])。执行helper(0,[],target)并返回resres</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="n">def</span> <span class="nf">combinationSum</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">candidates</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="kt">int</span><span class="p">],</span> <span class="n">target</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="kt">int</span><span class="p">]]:</span>
        <span class="k">if</span><span class="p">(</span><span class="n">not</span> <span class="n">candidates</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[]</span>
        <span class="n">n</span><span class="p">=</span><span class="n">len</span><span class="p">(</span><span class="n">candidates</span><span class="p">)</span>
        <span class="n">res</span><span class="p">=[]</span>
        <span class="n">candidates</span><span class="p">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">def</span> <span class="nf">helper</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">tmp</span><span class="p">,</span><span class="n">target</span><span class="p">):</span>
            <span class="k">if</span><span class="p">(</span><span class="n">target</span><span class="p">==</span><span class="m">0</span><span class="p">):</span>
                <span class="n">res</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">tmp</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="nf">if</span><span class="p">(</span><span class="n">i</span><span class="p">==</span><span class="n">n</span> <span class="n">or</span> <span class="n">target</span><span class="p">&lt;</span><span class="n">candidates</span><span class="p">[</span><span class="n">i</span><span class="p">]):</span>
                <span class="k">return</span>
            <span class="nf">helper</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">tmp</span><span class="p">+[</span><span class="n">candidates</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span><span class="n">target</span><span class="p">-</span><span class="n">candidates</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">helper</span><span class="p">(</span><span class="n">i</span><span class="p">+</span><span class="m">1</span><span class="p">,</span><span class="n">tmp</span><span class="p">,</span><span class="n">target</span><span class="p">)</span>
        <span class="n">helper</span><span class="p">(</span><span class="m">0</span><span class="p">,[],</span><span class="n">target</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id453">
<h1>85、Python | Leetcode数据结构之图和动态规划算法系列<a class="headerlink" href="#id453" title="永久链接至标题">¶</a></h1>
<p>&#64;Author：Runsen</p>
<p>&#64;Date：2020/7/7</p>
<p>今天高考，当年我就是一个辣鸡，现在还是一个辣鸡，祝高考的个个清华北大。辣鸡的我决定继续更新Python教程，今天就开始了八十五、Python | Leetcode数据结构之图和动态规划算法系列。</p>
<p>如果把基础的数据结构与算法都自己亲自实现一遍，那么你已经比 90% 的 Python 程序员更优秀了。</p>
<div class="section" id="id454">
<h2>图<a class="headerlink" href="#id454" title="永久链接至标题">¶</a></h2>
<p>在计算机科学中，一个图就是一些顶点的集合，这些顶点通过一系列边结对（连接）。顶点用圆圈表示，边就是这些圆圈之间的连线。顶点之间通过边连接。
<img alt="https://img-blog.csdnimg.cn/20190529212733348.png" src="https://img-blog.csdnimg.cn/20190529212733348.png" /></p>
<p>一个图G = (V, E)由以下元素组成。</p>
<ul class="simple">
<li>V：一组顶点</li>
<li>E：一组边，连接V中的顶点</li>
</ul>
</div>
<div class="section" id="id455">
<h2>度<a class="headerlink" href="#id455" title="永久链接至标题">¶</a></h2>
<p>表示一个顶点又多少条边</p>
<ul class="simple">
<li>入度 表示又多少条变指向这个顶点</li>
<li>出度 表示这个顶点指出多少条边</li>
</ul>
</div>
<div class="section" id="id456">
<h2>邻接矩阵<a class="headerlink" href="#id456" title="永久链接至标题">¶</a></h2>
<p>在邻接矩阵实现中，由行和列都表示顶点，由两个顶点所决定的矩阵对应元素表示这里两个顶点是否相连、如果相连这个值表示的是相连边的权重。
<img alt="https://img-blog.csdnimg.cn/2019052921325674.png" src="https://img-blog.csdnimg.cn/2019052921325674.png" /></p>
<ul class="simple">
<li>无向图： 顶点 i 和顶点 j 之间有边，就将$A[i][j]$和$A[j][i]$ 标记为1</li>
<li>有向图 如果 顶点i和顶点 j之间 ，有一条箭头从i指向 j 将$A[i][j]$ 标记为1</li>
<li>有权图，数组存储相应的权重</li>
</ul>
<p>还有 稀疏图。 稀疏图就是顶点多，但是每个顶点边并不多</p>
<p>应用：微信号几亿的用户，对应到图上就好几亿的顶点，但是每个用户的好友并不会很多，最多5000，如果用邻接矩阵来存储，那么存储空间都被浪费了</p>
</div>
<div class="section" id="id457">
<h2>邻接表<a class="headerlink" href="#id457" title="永久链接至标题">¶</a></h2>
<p><img alt="https://img-blog.csdnimg.cn/20190529214855933.png" src="https://img-blog.csdnimg.cn/20190529214855933.png" /></p>
<p>邻接矩阵存储比较浪费时间，但是使用起来比较节省时间。相反邻接表存储起来比较节省空间，但是使用就比较浪费时间。</p>
<p>上图是否存在一条从顶点2到顶点4的边，就要遍历顶点2对应的链表</p>
</div>
<div class="section" id="dynamic-programming">
<h2>动态规划算法Dynamic Programming<a class="headerlink" href="#dynamic-programming" title="永久链接至标题">¶</a></h2>
<p>先来看看生活中经常遇到的事吧——假设您是个土豪，身上带了足够的1、5、10、20、50、100元面值的钞票。现在您的目标是凑出某个金额w，需要用到尽量少的钞票。</p>
<p>依据生活经验，我们显然可以采取这样的策略：能用100的就尽量用100的，否则尽量用50的……依次类推。在这种策略下，666=6×100+1×50+1×10+1×5+1×1，共使用了10张钞票。</p>
<p>这种策略称为“贪心”：假设我们面对的局面是“需要凑出w”，贪心策略会尽快让w变得更小。能让w少100就尽量让它少100，这样我们接下来面对的局面就是凑出w-100。长期的生活经验表明，贪心策略是正确的。</p>
<p>但是，如果我们换一组钞票的面值，贪心策略就也许不成立了。如果一个奇葩国家的钞票面额分别是1、5、11，那么我们在凑出15的时候，贪心策略会出错：</p>
<p>15=1×11+4×1    （贪心策略使用了5张钞票）
15=3×5               （正确的策略，只用3张钞票）</p>
<p>再从一个简单的例子分析：
有 5 个物品，重量分别是 w = [1, 2, 3, 4, 5]；
对应的价值是 v = [1, 2, 4, 2, 5]；
背包容量 C = 10。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200707155455779.png" src="https://img-blog.csdnimg.cn/20200707155455779.png" /></p>
<p>暴力法：对所有选择的组合，算出每一种情况的总价值，比较即可得出答案。</p>
<p>递归法：对于每个物品都有选与不选的决策，即原问题可以分解成两个子问题的比较。</p>
<p>假设有一个计算总价值的函数 F(n, c)，上述五个物品编号 i 为 1 ~ 5，c 是背包容量。
对于上例，第五个物品选择与否，通过比较两种子情况得到的价值大小来决定：</p>
<p>F(5, 10) = Max(F(4, 10) , F(4, 5) + 5)</p>
<p>故原问题有：</p>
<p>F(i, c) = Max( F(i-1, c), F(i-1, c - wi) + vi)</p>
<p>当然，如果背包剩余容量不足以容纳下一个物品，则再将 i-1。</p>
<p><img alt="https://img-blog.csdnimg.cn/2020070715560131.png" src="https://img-blog.csdnimg.cn/2020070715560131.png" /></p>
<p>动态规划：在递归的基础上储存已经求出的值。
当子问题重复出现时直接获取储存中的结果。
用一个 c*i 的二维数组储存——</p>
<p><img alt="https://img-blog.csdnimg.cn/20200707155644115.png" src="https://img-blog.csdnimg.cn/20200707155644115.png" /></p>
</div>
<div class="section" id="leetcode64">
<h2>Leetcode第64题：最小路径和<a class="headerlink" href="#leetcode64" title="永久链接至标题">¶</a></h2>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>#给定一个包含非负整数的 m x n 网格，请找出一条从左上角到右下角的路径，使得路径上的数字总和为最小。 
#
# 说明：每次只能向下或者向右移动一步。 
#
# 示例: 
#
# 输入:
#[
#  [1,3,1],
#  [1,5,1],
#  [4,2,1]
#]
#输出: 7
#解释: 因为路径 1→3→1→1→1 的总和最小。
# 
# Related Topics 数组 动态规划
</pre></div>
</div>
<p>本题dp实现采用数组实现，因为只能向右或者向下移动，要走到走到在第ｉ行第ｊ列的网格，必须是从第ｉ-1行第ｊ列的网格或者第ｉ行第ｊ-1列的网格移动过来，假设二维数组<code class="docutils literal notranslate"><span class="pre">dp[i][j]</span></code>表示在第ｉ行第ｊ列的网格上的最小数字总和</p>
<p>初始化dp所有的元素均为0，在网格的第一行和第一列的所有路径和应该都是固定的，因为都是向右或者向下移动</p>
<p>而当位置(i,j)处时，dp[i][j] = min(dp[i-1][j] +grid[i][j]，dp[i][j-1]++grid[i][j])，另外，二维数组是额外的辅助空间，如果将直接将原数组grid来存储dp数组的结果，边遍历边更新，对grid进行原地修改，可降低空间复杂度，如下．</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>from typing import List
class Solution:
    def minPathSum(self, grid: List[List[int]]) -&gt; int:
        m = len(grid)
        n =len(grid[0])        
        #在网格的第一行和第一列的所有路径和应该都是固定的，直接向右或者向下移动相加
        for i in range(1,m):
            grid[i][0] += grid[i-1][0]
        for j in range(1,n):
            grid[0][j] += grid[0][j-1]            
        #非第一行和非第一列：
        for i in range(1,m):
            for j in range(1,n):
                grid[i][j]= min(grid[i-1][j] + grid[i][j], grid[i][j-1] + grid[i][j] )
        return grid[-1][-1]


if __name__ == &quot;__main__&quot;:
    s=Solution()
    t=[[1,3,1],
      [1,5,1],
      [4,2,1]]
    print(s.minPathSum(t))
# result
7
</pre></div>
</div>
</div>
<div class="section" id="leetcode70">
<h2>Leetcode第70题：爬楼梯<a class="headerlink" href="#leetcode70" title="永久链接至标题">¶</a></h2>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>#假设你正在爬楼梯。需要 n 阶你才能到达楼顶。 
# 每次你可以爬 1 或 2 个台阶。你有多少种不同的方法可以爬到楼顶呢？ 
# 注意：给定 n 是一个正整数。 
# 示例 1： 
# 输入： 2
#输出： 2
#解释： 有两种方法可以爬到楼顶。
#1.  1 阶 + 1 阶
#2.  2 阶 
# 示例 2： 
# 输入： 3
#输出： 3
#解释： 有三种方法可以爬到楼顶。
#1.  1 阶 + 1 阶 + 1 阶
#2.  1 阶 + 2 阶
#3.  2 阶 + 1 阶
# Related Topics 动态规划
</pre></div>
</div>
<p>动态规划：第一个想法就是利用递推公式求解方法数。
分析这个题目：</p>
<ul class="simple">
<li>1 阶，f(1) = 1 种方案</li>
<li>2 阶，f(2) = 2 种方案</li>
<li>3 阶，f(3) = 3 种方案</li>
<li>4 阶，f(4) = 5 种方案</li>
<li>n 阶，f(n) = f(n-1) + f(n-2) 种方案</li>
</ul>
<p>即，该问题可以转换为斐波那契数列问题</p>
<p>优化空间复杂度：其实每次计算 f(i) 的值，都只用了离它最近的两个值，而没有用数组中其他的值。</p>
<p>也就是说我们根本不需要用一个数组来存放，只需要用两个变量来存放每次更新后最新得到的两个值即可。</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>class Solution:
    def climbStairs(self, n: int) -&gt; int:
        # 这里我们用prev curr分别存放离当前台阶数最近的两个台阶数对应的方法数。
        curr = prev = 1
        for _ in range(n-1):
            curr, prev = curr + prev, curr
        return curr


class Solution:
    def climbStairs(self, n, s1 = 0, s2 = 1):
        return n and self.climbStairs(n - 1, s2, s1 + s2) or s2
</pre></div>
</div>
</div>
<div class="section" id="leetcode322">
<h2>Leetcode第322题： 零钱兑换<a class="headerlink" href="#leetcode322" title="永久链接至标题">¶</a></h2>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>#给定不同面额的硬币 coins 和一个总金额 amount。编写一个函数来计算可以凑成总金额所需的最少的硬币个数。如果没有任何一种硬币组合能组成总金额，返回 -1。 
# 示例 1: 
# 输入: coins = [1, 2, 5], amount = 11
#输出: 3 
#解释: 11 = 5 + 5 + 1 
# 示例 2: 
# 输入: coins = [2], amount = 3
#输出: -1 
# 说明: 
#你可以认为每种硬币的数量是无限的。 
# Related Topics 动态规划
</pre></div>
</div>
<p>动态规划问题的一般形式就是求最值，求最值就是穷举所有的可能性。</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<p>假设输入不同面额的硬币 coins = [coin1, coin2, coin3] , 总金额 amount</p>
<p>采用贪心算法做法： 对于 [1,2,5] 组成 11 块，排序[5,2,1]</p>
<ul class="simple">
<li>取第一个5, 更新amout 为 11 - 5 = 6 继续更新 为 6 - 5 = 1 (退出</li>
<li>取第二个2   1 &lt; 2 退出</li>
<li>取最后一个元素，也就是1</li>
<li>amout 为 0 退出</li>
</ul>
<p>因此结果是 3，但是贪心算法也有可能出错。 就拿这道题目来说，
它也是不正确的！ 比如 coins = [1, 5, 11] amout = 15, 因此这种做法有时候不靠谱，我们还是采用靠谱的做法。</p>
<p>因此需要dp算法，
用dp[i] 来表示组成i块钱，需要最少的硬币数，那么第j个硬币我可以选择不拿 这个时候， 硬币数 = dp[i]</p>
<p>第j个硬币我可以选择拿 这个时候， 硬币数 = dp[i - coins[j]] + 1</p>
<p>和背包问题不同， 硬币是可以拿任意个</p>
<p>对于每一个 dp[i] 我们都选择遍历一遍 coin， 不断更新 dp[i]。</p>
<p>这算是一道比较经典的动态规划题目了吧。关键是确定状态转移方程，如果当前组合dp[i]的个数小于另一i-1个组合+某一硬币的组合，则需要更新该值，所以可以得到状态转移方程如下：</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">=</span> <span class="n">min</span><span class="p">(</span><span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">-</span><span class="n">coin</span><span class="p">]+</span><span class="m">1</span><span class="p">)</span>
</pre></div>
</div>
<p>那么就可以很容易地写出题解。</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="n">def</span> <span class="nf">coinChange</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">coins</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="kt">int</span><span class="p">],</span> <span class="n">amount</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="kt">int</span><span class="p">:</span>
        <span class="n">dp</span> <span class="p">=</span> <span class="p">[</span><span class="n">amount</span> <span class="p">+</span> <span class="m">1</span><span class="p">]</span> <span class="p">*</span> <span class="p">(</span><span class="n">amount</span> <span class="p">+</span> <span class="m">1</span><span class="p">)</span>
        <span class="n">dp</span><span class="p">[</span><span class="m">0</span><span class="p">]</span> <span class="p">=</span> <span class="m">0</span>

        <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="nf">range</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="n">amount</span> <span class="p">+</span> <span class="m">1</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">j</span> <span class="k">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">len</span><span class="p">(</span><span class="n">coins</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">i</span> <span class="p">&gt;=</span> <span class="n">coins</span><span class="p">[</span><span class="n">j</span><span class="p">]:</span>
                    <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">=</span> <span class="n">min</span><span class="p">(</span><span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span> <span class="p">-</span> <span class="n">coins</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span> <span class="p">+</span> <span class="m">1</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">-</span><span class="m">1</span> <span class="k">if</span> <span class="n">dp</span><span class="p">[-</span><span class="m">1</span><span class="p">]</span> <span class="p">==</span> <span class="n">amount</span> <span class="p">+</span> <span class="m">1</span> <span class="k">else</span> <span class="n">dp</span><span class="p">[-</span><span class="m">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id458">
<h1>86、Python | Leetcode深度和广度优先搜索算法系列<a class="headerlink" href="#id458" title="永久链接至标题">¶</a></h1>
<p>&#64;Author：Runsen</p>
<p>&#64;Date：2020/7/8</p>
<p>今天高考，当年我就是一个辣鸡，现在还是一个辣鸡，祝高考的个个清华北大。辣鸡的我决定继续更新Python教程，今天就开始了八十六、Python | Leetcode深度和广度优先搜索算法系列。</p>
<p>如果把基础的数据结构与算法都自己亲自实现一遍，那么你已经比 90% 的 Python 程序员更优秀了。</p>
<div class="section" id="dfs">
<h2>深度优先算法（DFS）<a class="headerlink" href="#dfs" title="永久链接至标题">¶</a></h2>
<p>不断地沿着顶点的深度方向进行遍历，该算法的空间复杂度与数据结构深度成正比。</p>
<p>深度优先算法：</p>
<p>（1）访问初始顶点v并标记顶点v已访问。
（2）查找顶点v的第一个邻接顶点w。
（3）若顶点v的邻接顶点w存在，则继续执行；否则回溯到v，再找v的另外一个未访问过的邻接点。
（4）若顶点w尚未被访问，则访问顶点w并标记顶点w为已访问。
（5）继续查找顶点w的下一个邻接顶点wi，如果v取值wi转到步骤（3）。直到连通图中所有顶点全部访问过为止。</p>
</div>
<div class="section" id="bfs">
<h2>广度优先算法（BFS）<a class="headerlink" href="#bfs" title="永久链接至标题">¶</a></h2>
<p>先访问完当前顶点的所有邻接点，然后再访问下一层的所有节点，该算法适用于解决最短、最小路径等问题，但是构建广度优先算法需要维护自己的队列。</p>
<p>（1）顶点v入队列。
（2）当队列非空时则继续执行，否则算法结束。
（3）出队列取得队头顶点v；访问顶点v并标记顶点v已被访问。
（4）查找顶点v的第一个邻接顶点col。
（5）若v的邻接顶点col未被访问过的，则col入队列。
（6）继续查找顶点v的另一个新的邻接顶点col，转到步骤（5）。直到顶点v的所有未被访问过的邻接点处理完。转到步骤（2）。</p>
</div>
<div class="section" id="leetcode111">
<h2>Leetcode第111题： 二叉树的最小深度<a class="headerlink" href="#leetcode111" title="永久链接至标题">¶</a></h2>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>#给定一个二叉树，找出其最小深度。 
# 最小深度是从根节点到最近叶子节点的最短路径上的节点数量。 
# 说明: 叶子节点是指没有子节点的节点。 
# 示例: 
# 给定二叉树 [3,9,20,null,null,15,7], 
#
#     3
#   / \
#  9  20
#    /  \
#   15   7 
#
# 返回它的最小深度 2. 
# Related Topics 树 深度优先搜索 广度优先搜索
</pre></div>
</div>
<p>最小深度的定义：它是从根节点到最近叶子节点的最短路径上的节点数量。这种情况下，由于节点 1 没有右子树，那么右子树的深度为 0，左子树的深度为 1，但是却不能说它的左右子树的最小深度为 0，因为右子树不存在，即节点 1 没有右叶子节点，不满足条件。</p>
<p>比如二叉树 [1, 2] 的最小深度为 2，而不是 1。</p>
<p><img alt="https://img-blog.csdnimg.cn/2020070822093271.png" src="https://img-blog.csdnimg.cn/2020070822093271.png" /></p>
<p>对于一个节点，如果是叶子节点，则返回其深度；如果只有左子树，则递归得到左子树的最小深度；如果只有右子树，则递归得到右子树的最小深度；如果左右孩子节点都有，则递归得到两个子树的深度，并且取最小值。</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span># Definition for a binary tree node.
# class TreeNode(object):
#     def __init__(self, x):
#         self.val = x
#         self.left = None
#         self.right = None

class Solution(object):
    def minDepth(self, root):
        &quot;&quot;&quot;
        :type root: TreeNode
        :rtype: int
        &quot;&quot;&quot;
        if not root:
            return 0
        return self.get_min_depth(root, 0)

    def get_min_depth(self, node, depth):
        # 分为四种情况：叶子节点，只有左孩子的节点，只有右孩子的节点，两个孩子都有的节点
        if not node.left and not node.right:
            return depth+1
        if node.left and node.right:
            return min(self.get_min_depth(node.left, depth+1), self.get_min_depth(node.right, depth+1))
        if node.left:
            return self.get_min_depth(node.left, depth+1)
        if node.right:
            return self.get_min_depth(node.right, depth+1)
</pre></div>
</div>
<p>上面的是递归的做法</p>
<p>BFS，当遇到第一个叶子节点的时候，该节点深度就是最小深度。</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="n">def</span> <span class="nf">minDepth</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">root</span><span class="p">:</span> <span class="n">TreeNode</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="kt">int</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">not</span> <span class="n">root</span><span class="p">:</span> <span class="k">return</span> <span class="m">0</span>
        <span class="n">queue</span> <span class="p">=</span> <span class="p">[(</span><span class="m">1</span><span class="p">,</span> <span class="n">root</span><span class="p">)]</span>
        <span class="k">while</span> <span class="n">queue</span><span class="p">:</span>
            <span class="n">depth</span><span class="p">,</span> <span class="n">node</span> <span class="p">=</span> <span class="n">queue</span><span class="p">.</span><span class="n">pop</span><span class="p">(</span><span class="m">0</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">not</span> <span class="n">node</span><span class="p">.</span><span class="n">left</span> <span class="n">and</span> <span class="n">not</span> <span class="n">node</span><span class="p">.</span><span class="n">right</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">depth</span>
            <span class="k">if</span> <span class="n">node</span><span class="p">.</span><span class="n">left</span><span class="p">:</span>
                <span class="n">queue</span><span class="p">.</span><span class="n">append</span><span class="p">((</span><span class="n">depth</span> <span class="p">+</span> <span class="m">1</span><span class="p">,</span> <span class="n">node</span><span class="p">.</span><span class="n">left</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">node</span><span class="p">.</span><span class="n">right</span><span class="p">:</span>
                <span class="n">queue</span><span class="p">.</span><span class="n">append</span><span class="p">((</span><span class="n">depth</span> <span class="p">+</span> <span class="m">1</span><span class="p">,</span> <span class="n">node</span><span class="p">.</span><span class="n">right</span><span class="p">))</span>
</pre></div>
</div>
<p>DFS，需要把所有的叶子节点的深度进行比较，才可以得到最终的最小深度。</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>class Solution:
    def minDepth(self, root: TreeNode) -&gt; int:
        if not root: return 0
        stack = [(1, root)]
        min_depth = float(&#39;inf&#39;)
        while stack:
            depth, node = stack.pop()
            if not node.left and not node.right:
                min_depth = min(min_depth, depth)
            if node.right:
                stack.append((depth + 1, node.right))
            if node.left:
                stack.append((depth + 1, node.left))       
        return min_depth 
</pre></div>
</div>
</div>
<div class="section" id="leetcode112">
<h2>Leetcode第112题： 路径总和<a class="headerlink" href="#leetcode112" title="永久链接至标题">¶</a></h2>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>#给定一个二叉树和一个目标和，判断该树中是否存在根节点到叶子节点的路径，这条路径上所有节点值相加等于目标和。
# 说明: 叶子节点是指没有子节点的节点。
# 示例: 
#给定如下二叉树，以及目标和 sum = 22， 
#
#               5
#             / \
#            4   8
#           /   / \
#          11  13  4
#         /  \      \
#        7    2      1
# 返回 true, 因为存在目标和为 22 的根节点到叶子节点的路径 5-&gt;4-&gt;11-&gt;2。 
# Related Topics 树 深度优先搜索
</pre></div>
</div>
<p>方法一：递归（DFS，深度优先搜索）</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>class Solution:
    def hasPathSum(self, root: TreeNode, sum: int) -&gt; bool:
        # 二叉树 root 为 null
        if not root:
            return False
        # 无左右子树
        if not root.left and not root.right:
            return sum == root.val
        return self.hasPathSum(root.left, sum - root.val) or self.hasPathSum(root.right, sum - root.val)
</pre></div>
</div>
<p>方法二：广度优先搜索（BFS）</p>
<p>collection 为 Python 的内建集合版块，collection.deque 为双端队列，可以从两端添加（append）和弹出（pop）元素，且时间复杂度为 O(1)，耗时小于 list 的 insert 和 pop 操作的 O(N)。</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>d = deque([1, 2, 3, 4, 5]
## 两端添加元素
d.append(6)                 # deque([1, 2, 3, 4, 5, 6])
d.appendleft(0)             # deque([0, 1, 2, 3, 4, 5, 6])
## 两端按序拓展元素
d.extend([7, 8])            # deque([0, 1, 2, 3, 4, 5, 6, 7, 8])
d.extendleft([-1, -2])      # deque([-2, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8])
## 指定位置插入元素
d.insert(0, -3)             # deque([-3, -2, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8])
## 两端弹出元素
d.pop()                     # deque([-3, -2, -1, 0, 1, 2, 3, 4, 5, 6, 7])
d.popleft()                 # deque([-2, -1, 0, 1, 2, 3, 4, 5, 6, 7])
## 删除从左到右找到的首个指定元素
d.remove(-1)                # deque([-2, 0, 1, 2, 3, 4, 5, 6, 7])
## 指定元素计数
d.count(3)                  # 1
## 返回从左到右找到的首个指定元素的索引
d.index(5)                  # 6
## 逆序排列
d.reverse()                 # deque([7, 6, 5, 4, 3, 2, 1, 0, -2])
## 元素双向循环指定步数
d.rotate(2)                 # deque([0, -2, 7, 6, 5, 4, 3, 2, 1])
d.rotate(-2)                # deque([7, 6, 5, 4, 3, 2, 1, 0, -2])
</pre></div>
</div>
<p>时间复杂度：O(N)
空间复杂度：O(H)，H 为树的高度，最坏情况下，树成链状，为 O(N)。</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>class Solution:
    import collections
    def hasPathSum(self, root: TreeNode, sum: int) -&gt; bool:
        if not root:
            return False
        que_node = collections.deque([root])        # 结点队列
        que_val = collections.deque([root.val])     # 结点值队列
        while que_node:
            now = que_node.popleft()                # 当前结点
            temp = que_val.popleft()                # 临时存储值
            if not now.left and not now.right:
                if temp == sum:
                    return True
                continue
            if now.left:
                que_node.append(now.left)
                que_val.append(now.left.val + temp)
            if now.right:
                que_node.append(now.right)
                que_val.append(now.right.val + temp)
        return False
</pre></div>
</div>
</div>
</div>
<div class="section" id="id459">
<h1>87、Python | 十大排序算法系列（上篇）<a class="headerlink" href="#id459" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen</p>
<p>辣鸡的我决定继续更新Python教程，今天就开始了八十七、Python | 十大排序算法系列（上篇）。还有不到区区的十三篇，我快完成了。</p>
<p>如果把基础的数据结构与算法都自己亲自实现一遍，那么你已经比 90% 的 Python 程序员更优秀了。</p>
<p>关于排序就是下面的十大排序算法</p>
<p><img alt="https://img-blog.csdnimg.cn/20200708224346201.png" src="https://img-blog.csdnimg.cn/20200708224346201.png" /></p>
<div class="section" id="id460">
<h2>冒泡排序<a class="headerlink" href="#id460" title="永久链接至标题">¶</a></h2>
<p>python实现冒泡排序的核心思想是通过从列表一端迭代循环元素，再通过一个循环让这个元素之后的元素相邻两个比较，从而依次将最大值移动到最末端，如下图示意。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200710225605314.png" src="https://img-blog.csdnimg.cn/20200710225605314.png" /></p>
<p>Python冒泡排序的代码实现。</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">def</span> <span class="nf">bubble_sort</span><span class="p">(</span><span class="n">nums</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span> <span class="p">-</span> <span class="m">1</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="k">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span> <span class="p">-</span> <span class="n">i</span> <span class="p">-</span> <span class="m">1</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="p">&gt;</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span> <span class="p">+</span> <span class="m">1</span><span class="p">]:</span>
                <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span> <span class="p">+</span> <span class="m">1</span><span class="p">]</span> <span class="p">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span> <span class="p">+</span> <span class="m">1</span><span class="p">],</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">nums</span>
</pre></div>
</div>
</div>
<div class="section" id="id461">
<h2>选择排序<a class="headerlink" href="#id461" title="永久链接至标题">¶</a></h2>
<p>排序算法：首先搜索整个列表，找到最小项的位置，如果该位置不是列表的第1项，就交换这两个位置的元素。然后从列表的第2个元素开始，重复上述过程，直到算法达到整个过程的最后一个位置，图形解释如下</p>
<p>下面使用55、23、87、62、16数列从小到大的排序过程来说明选择排序法的演算流程。原始数据如图：</p>
<p>1、首先找到此数列中最小值后，与数列中的第一个元素交换，如下图所示。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200710225916995.png" src="https://img-blog.csdnimg.cn/20200710225916995.png" /></p>
<p>从第二个值开始找，找到剩余数列中（不含第一个填充为绿色的数字）的最小值，再和第二个值交换，如下图所示。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200710230000474.png" src="https://img-blog.csdnimg.cn/20200710230000474.png" /></p>
<p>从第三个值开始找，找到此数列中（不含第一、二个的最小值），再和第三个值交换，如下图</p>
<p><img alt="https://img-blog.csdnimg.cn/20200710230017145.png" src="https://img-blog.csdnimg.cn/20200710230017145.png" /></p>
<p>从第四个值开始找，找到剩余数列的最小值，再和第四个值交换，排序完成，如下图。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200710230038146.png" src="https://img-blog.csdnimg.cn/20200710230038146.png" /></p>
<p>Python选择排序的代码实现。</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">def</span> <span class="nf">selectionSort</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
   <span class="n">i</span> <span class="p">=</span> <span class="m">0</span>
   <span class="k">while</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">-</span> <span class="m">1</span><span class="p">:</span>
       <span class="n">minindex</span> <span class="p">=</span> <span class="n">i</span>
       <span class="n">j</span> <span class="p">=</span> <span class="n">i</span> <span class="p">+</span> <span class="m">1</span>
       <span class="k">while</span> <span class="n">j</span> <span class="p">&lt;</span> <span class="n">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">:</span>        
           <span class="k">if</span> <span class="n">x</span><span class="p">[</span><span class="n">minindex</span><span class="p">]</span> <span class="p">&gt;</span> <span class="n">x</span><span class="p">[</span><span class="n">j</span><span class="p">]:</span>
               <span class="n">minindex</span> <span class="p">=</span> <span class="n">j</span>
           <span class="n">j</span><span class="p">+=</span> <span class="m">1</span>
       <span class="k">if</span> <span class="n">minindex</span> <span class="p">!=</span> <span class="n">i</span><span class="p">:</span>
           <span class="n">swap</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">minindex</span><span class="p">)</span>    
       <span class="n">i</span><span class="p">+=</span> <span class="m">1</span>
   <span class="k">return</span> <span class="n">x</span>
</pre></div>
</div>
</div>
<div class="section" id="id462">
<h2>插入排序<a class="headerlink" href="#id462" title="永久链接至标题">¶</a></h2>
<p>插入排序的实现思路顾名思义，就是不断地在一个已经是有序的数组中，寻找合适位置并插入新元素。</p>
<p>从后往前依次进行比较，如果待插入元素大于当前元素，则将待插入元素插入到当前元素的后一位，如果待插入元素小于当前元素，则将当前元素后移一位。不断重复该过程直至到数组的最后一位</p>
<p><img alt="https://img-blog.csdnimg.cn/20200710230139430.png" src="https://img-blog.csdnimg.cn/20200710230139430.png" /></p>
<p>Python插入排序的代码实现。</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">def</span> <span class="nf">insertion_sort</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="n">length</span> <span class="p">=</span> <span class="n">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">length</span> <span class="p">&lt;=</span><span class="m">1</span><span class="p">:</span>
        <span class="k">return</span> 
    <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="nf">range</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="n">length</span><span class="p">):</span>
        <span class="n">j</span> <span class="p">=</span> <span class="n">i</span><span class="p">-</span><span class="m">1</span>
        <span class="k">value</span> <span class="p">=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">while</span> <span class="n">j</span> <span class="p">&gt;=</span><span class="m">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]&lt;</span><span class="k">value</span><span class="p">:</span>
                <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">+</span><span class="m">1</span><span class="p">]</span> <span class="p">=</span> <span class="k">value</span>
                <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">+</span><span class="m">1</span><span class="p">]</span> <span class="p">=</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">j</span> <span class="p">==</span> <span class="m">0</span><span class="p">:</span>
                    <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="p">=</span> <span class="k">value</span> 
            <span class="n">j</span> <span class="p">-=</span><span class="m">1</span>
        <span class="n">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">a</span>
</pre></div>
</div>
</div>
<div class="section" id="id463">
<h2>希尔排序<a class="headerlink" href="#id463" title="永久链接至标题">¶</a></h2>
<p>希尔排序的基本思想是：把记录按步长 gap 分组，对每组记录采用直接插入排序方法进行排序。</p>
<p>随着步长逐渐减小，所分成的组包含的记录越来越多，当步长的值减小到 1 时，整个数据合成为一组，构成一组有序记录，则完成排序。</p>
<p>我们画个图来说明一下</p>
<p><img alt="https://img-blog.csdnimg.cn/20200710231113715.png" src="https://img-blog.csdnimg.cn/20200710231113715.png" />
上面的排序其实和冒泡排序很像，只不过冒泡排序是每次都是间隔为1相邻的两个之间进行比较，但希尔排序是间隔为step，还是有一定区别的。</p>
<p>Python 希尔排序的代码实现。</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>def shell_sort(list):
    n = len(list)
    gap = n // 2
    while gap &gt;= 1:
        for j in range(gap, n):
            i = j
            while( i - gap ) &gt;= 0:
                if list[i] &lt; list[ i - gap ]:
                    list[i], list[ i - gap ] = list[ i - gap ], list[i]
                    i -= gap
                else:
                    break
        gap //= 2
        
if __name__ == &#39;__main__&#39;:
    alist = [54, 26, 93, 17, 77, 31, 44, 55, 20]
    print(&quot;原列表为：%s&quot; % alist)
    shell_sort(alist)
    print(&quot;新列表为：%s&quot; % alist)
</pre></div>
</div>
</div>
<div class="section" id="id464">
<h2>归并排序<a class="headerlink" href="#id464" title="永久链接至标题">¶</a></h2>
<p>归并排序的基本思想：将待排序序列<code class="docutils literal notranslate"><span class="pre">R[0…n-1]</span></code>看成是<code class="docutils literal notranslate"><span class="pre">n</span></code>个长度为1的有序序列，将相邻的有序表成对归并，得到n/2个长度为2的有序表；将这些有序序列再次归并，得到<code class="docutils literal notranslate"><span class="pre">n/4</span></code>个长度为4的有序序列；如此反复进行下去，最后得到一个长度为n的有序序列。</p>
<p><img alt="https://img-blog.csdnimg.cn/2020071023152225.png" src="https://img-blog.csdnimg.cn/2020071023152225.png" /></p>
<p>归并排序其实要做两件事：</p>
<p>（1）“分解”——将序列每次折半划分。</p>
<p>（2）“合并”——将划分后的序列段两两合并后排序。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200710231610643.gif" src="https://img-blog.csdnimg.cn/20200710231610643.gif" /></p>
<p>Python 归并排序的代码实现。</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">def</span> <span class="nf">merge</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">):</span>
    <span class="n">i</span> <span class="p">=</span> <span class="m">0</span>
    <span class="n">j</span> <span class="p">=</span> <span class="m">0</span>
    <span class="n">temp</span> <span class="p">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="n">i</span> <span class="p">&lt;=</span> <span class="n">len</span><span class="p">(</span><span class="n">left</span><span class="p">)</span> <span class="p">-</span> <span class="m">1</span> <span class="n">and</span> <span class="n">j</span> <span class="p">&lt;=</span> <span class="n">len</span><span class="p">(</span><span class="n">right</span><span class="p">)</span> <span class="p">-</span> <span class="m">1</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">left</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">&lt;=</span> <span class="n">right</span><span class="p">[</span><span class="n">j</span><span class="p">]:</span>
            <span class="n">temp</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">left</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">i</span> <span class="p">+=</span> <span class="m">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">temp</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">right</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
            <span class="n">j</span> <span class="p">+=</span> <span class="m">1</span>
    <span class="n">temp</span> <span class="p">+=</span> <span class="n">left</span><span class="p">[</span><span class="n">i</span><span class="p">:]</span> <span class="p">+</span> <span class="n">right</span><span class="p">[</span><span class="n">j</span><span class="p">:]</span>
    <span class="k">return</span> <span class="n">temp</span>

<span class="nf">print</span><span class="p">(</span><span class="n">merge</span><span class="p">([</span><span class="m">1</span><span class="p">,</span><span class="m">3</span><span class="p">,</span><span class="m">4</span><span class="p">],[</span><span class="m">2</span><span class="p">,</span><span class="m">3</span><span class="p">,</span><span class="m">3</span><span class="p">]))</span> 
</pre></div>
</div>
</div>
</div>
<div class="section" id="id465">
<h1>88、Python | 十大排序算法系列（下篇）<a class="headerlink" href="#id465" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen</p>
<p>辣鸡的我决定继续更新Python教程，今天就开始了八十八、Python | 十大排序算法系列（下篇）。还有不到区区的十二篇，我就完成了。</p>
<p>如果把基础的数据结构与算法都自己亲自实现一遍，那么你已经比 90% 的 Python 程序员更优秀了。</p>
<p>关于排序就是下面的十大排序算法</p>
<p><img alt="https://img-blog.csdnimg.cn/20200708224346201.png" src="https://img-blog.csdnimg.cn/20200708224346201.png" /></p>
<div class="section" id="id466">
<h2>快速排序<a class="headerlink" href="#id466" title="永久链接至标题">¶</a></h2>
<p>快速排序的基本思想是：通过一趟排序将要排序的数据分割成独立的两部分：分割点左边都是比它小的数，右边都是比它大的数。</p>
<p>如果要排序数组中下标从 p 到 r 之间的一组数据，我们选择 p 到 r 之间的任意一个数据作为 pivot（分区点）。</p>
<p>我们遍历 p 到 r 之间的数据，将小于 pivot 的放到左边，将大于 pivot 的放到右边，将 pivot 放到中间。经过这一步骤之后，数组 p 到 r 之间的数据就被分成了三个部分，前面 p 到 q-1 之间都是小于 pivot 的，中间是 pivot，后面的 q+1 到 r 之间是大于 pivot 的。
<img alt="https://img-blog.csdnimg.cn/20200710234816330.png" src="https://img-blog.csdnimg.cn/20200710234816330.png" /></p>
<p>我们通过实例来具体讲解一下：</p>
<p><img alt="https://img-blog.csdnimg.cn/20200710235338355.png" src="https://img-blog.csdnimg.cn/20200710235338355.png" /></p>
<p>上图来自王争算法专栏。</p>
<p>Python快速排序的代码实现。</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>def quicksort(array):
  if len(array) &lt; 2:
    # 基本情况下，具有0或1个元素的数组是已经“排序”的
    return array
  else:
    # 递归情况
    pivot = array[0]
    # 小于基准值的所有元素的子数组
    less = [i for i in array[1:] if i &lt;= pivot]
    # 大于基准值的所有元素的子数组
    greater = [i for i in array[1:] if i &gt; pivot]
    return quicksort(less) + [pivot] + quicksort(greater)

print(quicksort([10, 5, 2, 3]))
</pre></div>
</div>
</div>
<div class="section" id="id467">
<h2>堆排序<a class="headerlink" href="#id467" title="永久链接至标题">¶</a></h2>
<p><strong>「堆」<strong>首先是一个完全二叉树，</strong>「堆」<strong>分为</strong>「大顶堆」<strong>和</strong>「小顶堆」</strong>。
<strong>「大顶堆」</strong> ：每个节点的值大于或等于其左右孩子节点的值，称为大顶堆。
<strong>「小顶堆」</strong>：同理就是每个节点的值小于或等于其左右孩子节点的值。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200710235739330.png" src="https://img-blog.csdnimg.cn/20200710235739330.png" /></p>
<p>下图就是堆排序的过程，来自五分钟学算法。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200710235932234.gif" src="https://img-blog.csdnimg.cn/20200710235932234.gif" /></p>
<p>排序动画过程解释</p>
<ul class="simple">
<li>首先，将所有的数字存储在堆中</li>
<li>按大顶堆构建堆，其中大顶堆的一个特性是数据将被从大到小取出，将取出的数字按照相反的顺序进行排列，数字就完成了排序</li>
<li>在这里数字 5 先入堆</li>
<li>数字 2 入堆</li>
<li>数字 7 入堆， 7 此时是最后一个节点，与最后一个非叶子节点（也就是数字 5 ）进行比较，由于 7 大于 5 ，所以 7 和 5 交互</li>
<li>按照上述的操作将所有数字入堆，然后从左到右，从上到下进行调整，构造出大顶堆</li>
<li>入堆完成之后，将堆顶元素取出，将末尾元素置于堆顶，重新调整结构，使其满足堆定义</li>
<li>堆顶元素数字 7 取出，末尾元素数字 4 置于堆顶，为了维护好大顶堆的定义，最后一个非叶子节点数字 5 与 4 比较，而后交换两个数字的位置</li>
<li>反复执行调整+交换步骤，直到整个序列有序</li>
</ul>
<p>Python提供了创建和使用堆的方法，所以我们不必自己单独为了实现它们去写代码了:</p>
<ul class="simple">
<li>heappush(list, item)：向堆中添加一个元素，然后对其重新排序，使其保持堆状态。可用于空列表。</li>
<li>heappop(list)：删除第一个（最小的）元素并返回该元素。此操作之后，堆仍然是一个堆，因此我们不必调用heapify()。</li>
<li>heapify(list)：将给定的列表变成一个堆。</li>
</ul>
<p>Python堆排序的代码实现。</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>from heapq import heappop, heappush

def heap_sort(array):
    heap = []
    for element in array:
        heappush(heap, element)

    ordered = []

    # While we have elements left in the heap
    while heap:
        ordered.append(heappop(heap))

    return ordered

array = [13, 21, 15, 5, 26, 4, 17, 18, 24, 2]
print(heap_sort(array))
</pre></div>
</div>
</div>
<div class="section" id="id468">
<h2>计数排序<a class="headerlink" href="#id468" title="永久链接至标题">¶</a></h2>
<p>计数排序使用一个辅助数组，遍历待排序的数据，待排序数据的值就是辅助数组的索引，辅助数组索引对应的位置保存这个待排序数据出现的次数。最后从辅助数组中取出待排序的数据，放到排序后的数组中。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200711104651596.gif" src="https://img-blog.csdnimg.cn/20200711104651596.gif" /></p>
<p>Python计数排序的代码实现。</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>def count_sort(s):
    &quot;&quot;&quot;计数排序&quot;&quot;&quot;
    # 找到最大最小值
    min_num = min(s)
    max_num = max(s)
    # 计数列表
    count_list = [0]*(max_num-min_num+1)
    # 计数
    for i in s:
        count_list[i-min_num] += 1
    s.clear()
    # 填回
    for ind,i in enumerate(count_list):
        while i != 0:
            s.append(ind+min_num)
            i -= 1

if __name__ == &#39;__main__&#39;:
    a = [3,6,8,4,2,6,7,3]
    count_sort(a)
    print(a)
</pre></div>
</div>
</div>
<div class="section" id="id469">
<h2>桶排序<a class="headerlink" href="#id469" title="永久链接至标题">¶</a></h2>
<p>桶排序就是把最大值和最小值之间的数进行瓜分，例如分成 10 个区间，10个区间对应10个桶，我们把各元素放到对应区间的桶中去，再对每个桶中的数进行排序，可以采用归并排序，也可以采用快速排序之类的。</p>
<p>下图就是桶排序的过程，来自五分钟学算法。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200711105628161.gif" src="https://img-blog.csdnimg.cn/20200711105628161.gif" /></p>
<p>Python桶排序的代码实现。</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>import random
def bucket_sort(arr):
    &quot;&quot;&quot;桶排序&quot;&quot;&quot;
    min_num = min(arr)
    max_num = max(arr)
    # 桶的大小
    bucket_range = (max_num-min_num) / len(arr)
    # 桶数组
    count_list = [ [] for i in range(len(arr) + 1)]
    # 向桶数组填数
    for i in arr:
        count_list[int((i-min_num)//bucket_range)].append(i)
    arr.clear()
    # 回填，这里桶内部排序直接调用了sorted 快速排序
    for i in count_list:
        for j in sorted(i):
            arr.append(j)
            
if __name__ == &#39;__main__&#39;:
    arr = [random.randint(0,100) for _ in range(10)]
    print(&quot;原始数据：&quot;, arr)
    bucket_sort(arr)
    print(&quot;桶排序结果：&quot;, arr)
            

原始数据： [73, 93, 48, 26, 92, 25, 7, 63, 70, 57]
桶排序结果： [7, 25, 26, 48, 57, 63, 70, 73, 92, 93]
</pre></div>
</div>
</div>
<div class="section" id="id470">
<h2>基数排序<a class="headerlink" href="#id470" title="永久链接至标题">¶</a></h2>
<p>基数排序：通过元素的部分要素，将要排序的元素分配至某些“桶”中，以此达到排序的作用。比如为整数排序，依次用整数的个位、十位…来排序（LSD低位优先）；或者高位到低位依次排序（MSD高位优先）。</p>
<p>下图就是桶排序的过程，来自基数排序。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200711111015314.gif" src="https://img-blog.csdnimg.cn/20200711111015314.gif" /></p>
<ul class="simple">
<li>首先创建编号 0 ， 1 ，2 ，3 ，4 ，5 ， 6 ，7 ，8 ，9  这 10 个桶</li>
<li>遍历整个数列，查看数字的个位数，按照先后顺序存放在对应编号的桶中</li>
<li>比如 321 个位数 为 1 ，存放在编号 1 桶中</li>
<li>数字 1 个位数 为  1 ，存放在编号  1  桶中，同时存放在 321 上面</li>
<li>遍历完整个数列的个位数，将数字存放在桶中后，按照编号顺序取出数字，先放入桶中的数字先取出</li>
<li>然后依次遍历整个数列的十位数，按照上述个位数的操作整理数列</li>
<li>依次遍历整个数列的百位数，按照上述个位数的操作整理数列</li>
<li>这样就完成了 基数排序</li>
</ul>
<p>Python 基数排序的代码实现。</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>def radix_sort(ls):
    i = 0             # 记录当前正在排哪一位，最低位为1
    max_num = max(ls)  # 最大值
    j = len(str(max_num))  # 记录最大值的位数
    while i &lt; j:
        bucket_list =[[] for q in range(10)] #初始化桶数组
        for x in ls:
            bucket_list[int(x / (10**i)) % 10].append(x) # 找到位置放入桶数组
        ls.clear()
        for x in bucket_list:   # 放回原序列
            for y in x:
                ls.append(y)
        i += 1
    return ls

if __name__ == &#39;__main__&#39;:
    list1 = [34, 231, 74, 5, 98, 34, 18, 88, 147, 51, 65, 75, 144, 89]
    sort_list = radix_sort(list1)
    print(sort_list)
    
# 第一次按个位排序放入桶中是：  
[[], [231, 51], [], [], [34, 74, 34, 144], [5, 65, 75], [], [147], [98, 18, 88], [89]]
# 第二次按十位排序：
[[5], [18], [], [231, 34, 34], [144, 147], [51], [65], [74, 75], [88, 89], [98]]
# 第三次按百位排序：
[[5, 18, 34, 34, 51, 65, 74, 75, 88, 89, 98], [144, 147], [231], [], [], [], [], [], [], []]
</pre></div>
</div>
</div>
</div>
<div class="section" id="pythongui-pyqt5-gui">
<h1>89、Python的GUI系列 _ 使用PyQt5 快速构建一个GUI 应用<a class="headerlink" href="#pythongui-pyqt5-gui" title="永久链接至标题">¶</a></h1>
<p>&#64;Author：Runsen</p>
<p>在很早之前就学过了PyQt5 ，我决定在更新了几篇PyQt5 。之前写的PyQt5 博客基本覆盖于此。这篇是第八十九篇、Python的GUI系列 | 使用PyQt5 快速构建一个GUI 应用。离收官还有十一篇。</p>
<div class="section" id="pyqt5">
<h2>Pyqt5的安装<a class="headerlink" href="#pyqt5" title="永久链接至标题">¶</a></h2>
<p>安装 pyqt5</p>
<p><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">pyqt5</span></code></p>
<p>如果出现了运行出现了 No module named ‘PyQt5.sip’</p>
<p>解决方法 ：</p>
<p><code class="docutils literal notranslate"> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">--user</span> <span class="pre">pyqt5==5.10.1</span></code></p>
<p>将pyqt5退了版本</p>
</div>
<div class="section" id="id471">
<h2>添加外部设置工具<a class="headerlink" href="#id471" title="永久链接至标题">¶</a></h2>
<p>安装成功后，这个时候，我们在pycharm中添加外部设置工具。</p>
</div>
<div class="section" id="qtdesigner">
<h2>配置QtDesigner<a class="headerlink" href="#qtdesigner" title="永久链接至标题">¶</a></h2>
<p>步骤如下：File -&gt; Settings -&gt; Tools -&gt; External Tools -&gt;</p>
<p><img alt="https://img-blog.csdnimg.cn/2020071115410494.png" src="https://img-blog.csdnimg.cn/2020071115410494.png" /></p>
<p>Name填入QtDesigner（方便后续使用，名称无所谓）。</p>
<p>program ：自己的designer的位置，如<code class="docutils literal notranslate"><span class="pre">F:\anaconda\Library\bin\designer.exe</span></code></p>
<p><img alt="https://img-blog.csdnimg.cn/20200711214134921.png" src="https://img-blog.csdnimg.cn/20200711214134921.png" /></p>
</div>
<div class="section" id="pyuic">
<h2>配置PyUIC<a class="headerlink" href="#pyuic" title="永久链接至标题">¶</a></h2>
<p>然后添加PyUIC（UI转换工具），PyUIC的Program为Python.exe，在Python的安装目录下面的Scripts目录下，Working directory同理设为我们的工作目录，Arguments则填入如下代码：</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>-m PyQt5.uic.pyuic $FileName$ -o $FileNameWithoutExtension$.py
</pre></div>
</div>
<p>至于工作目录填写<code class="docutils literal notranslate"><span class="pre">项目的路径</span></code>，也可以填<code class="docutils literal notranslate"> <span class="pre">$FileDir$</span></code>。
<img alt="https://img-blog.csdnimg.cn/20200711220533733.png" src="https://img-blog.csdnimg.cn/20200711220533733.png" /></p>
</div>
<div class="section" id="pyrcc">
<h2>配置pyrcc<a class="headerlink" href="#pyrcc" title="永久链接至标题">¶</a></h2>
<p>最后添加pyrcc用于PyQt5的资源文件转码。具体配置与上述内容相同，Arguments填入：</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>-mPyQt5.uic.pyuic  $FileName$ -o$FileNameWithoutExtension$.py
</pre></div>
</div>
<p>至于工作目录填写<code class="docutils literal notranslate"><span class="pre">项目的路径</span></code>，也可以填<code class="docutils literal notranslate"> <span class="pre">$FileDir$</span></code>。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200711220639251.png" src="https://img-blog.csdnimg.cn/20200711220639251.png" /></p>
<p>`</p>
<p>点击Apply保存配置。配置完成之后，PyCharm中会加入3个工具。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200711215316346.png" src="https://img-blog.csdnimg.cn/20200711215316346.png" /></p>
</div>
<div class="section" id="qtdesignerqt">
<h2>QtDesigner设计第一个QT应用<a class="headerlink" href="#qtdesignerqt" title="永久链接至标题">¶</a></h2>
<p>下面打开QtDesigner界面，点击QtDesigner则打开QtDesigner的界面。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200711215406810.png" src="https://img-blog.csdnimg.cn/20200711215406810.png" /></p>
<p>刚打开Qt Designer，则弹出如下图所示的窗口。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200711215455451.png" src="https://img-blog.csdnimg.cn/20200711215455451.png" /></p>
<p>创建新的Form给出了5个模板，其中Widget与Main Window最为常用。这里我们选择创建一个Main Window。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200711215603979.png" src="https://img-blog.csdnimg.cn/20200711215603979.png" /></p>
<p>我们什么也不干，直接保存就可以了。
<img alt="https://img-blog.csdnimg.cn/202007112159561.png" src="https://img-blog.csdnimg.cn/202007112159561.png" /></p>
</div>
<div class="section" id="ui-py">
<h2>将一个.ui 文件生成一个.py文件<a class="headerlink" href="#ui-py" title="永久链接至标题">¶</a></h2>
<p>将demo.ui 文件打开其实是一个xml网页代码</p>
<p><img alt="https://img-blog.csdnimg.cn/20190421142300673.png" src="https://img-blog.csdnimg.cn/20190421142300673.png" /></p>
<p>在命令行</p>
<p><img alt="https://img-blog.csdnimg.cn/20190421142826586.png" src="https://img-blog.csdnimg.cn/20190421142826586.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20190421142838791.png" src="https://img-blog.csdnimg.cn/20190421142838791.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20200711220210231.png" src="https://img-blog.csdnimg.cn/20200711220210231.png" /></p>
<p>这样就会生成一个py文件。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200711221046862.png" src="https://img-blog.csdnimg.cn/20200711221046862.png" /></p>
<p>但是直接运行是没有启动的，因为没有使用QApplication和QWidget两个类。这两个类都在PyQt5.QtWidgets。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PyQt5</span> <span class="kn">import</span> <span class="n">QtCore</span><span class="p">,</span> <span class="n">QtGui</span><span class="p">,</span> <span class="n">QtWidgets</span>
<span class="k">class</span> <span class="nc">Ui_MainWindow</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setupUi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">MainWindow</span><span class="p">):</span>
        <span class="n">MainWindow</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;MainWindow&quot;</span><span class="p">)</span>
        <span class="n">MainWindow</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">600</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">centralwidget</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QWidget</span><span class="p">(</span><span class="n">MainWindow</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">centralwidget</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;centralwidget&quot;</span><span class="p">)</span>
        <span class="n">MainWindow</span><span class="o">.</span><span class="n">setCentralWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">centralwidget</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">menubar</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QMenuBar</span><span class="p">(</span><span class="n">MainWindow</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">menubar</span><span class="o">.</span><span class="n">setGeometry</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">800</span><span class="p">,</span> <span class="mi">23</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">menubar</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;menubar&quot;</span><span class="p">)</span>
        <span class="n">MainWindow</span><span class="o">.</span><span class="n">setMenuBar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">menubar</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">statusbar</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QStatusBar</span><span class="p">(</span><span class="n">MainWindow</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">statusbar</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;statusbar&quot;</span><span class="p">)</span>
        <span class="n">MainWindow</span><span class="o">.</span><span class="n">setStatusBar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">statusbar</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">retranslateUi</span><span class="p">(</span><span class="n">MainWindow</span><span class="p">)</span>
        <span class="n">QtCore</span><span class="o">.</span><span class="n">QMetaObject</span><span class="o">.</span><span class="n">connectSlotsByName</span><span class="p">(</span><span class="n">MainWindow</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">retranslateUi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">MainWindow</span><span class="p">):</span>
        <span class="n">_translate</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QCoreApplication</span><span class="o">.</span><span class="n">translate</span>
        <span class="n">MainWindow</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s2">&quot;MainWindow&quot;</span><span class="p">,</span> <span class="s2">&quot;MainWindow&quot;</span><span class="p">))</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="n">QApplication</span><span class="p">,</span><span class="n">QMainWindow</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
    <span class="n">mainWindow</span> <span class="o">=</span> <span class="n">QMainWindow</span><span class="p">()</span>
    <span class="n">ui</span> <span class="o">=</span> <span class="n">Ui_MainWindow</span><span class="p">()</span>
    <span class="c1"># 向主窗口上添加控件</span>
    <span class="n">ui</span><span class="o">.</span><span class="n">setupUi</span><span class="p">(</span><span class="n">mainWindow</span><span class="p">)</span>
    <span class="n">mainWindow</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">exec_</span><span class="p">())</span>
</pre></div>
</div>
<p>运行上面的代码，效果如下所。这就是我们的第一个QT的GUI 应用</p>
<p><img alt="https://img-blog.csdnimg.cn/20200711221338872.png" src="https://img-blog.csdnimg.cn/20200711221338872.png" /></p>
</div>
</div>
<div class="section" id="pythongui-qtdesigner">
<h1>90、Python的GUI系列 _ QtDesigner进行界面设计<a class="headerlink" href="#pythongui-qtdesigner" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen</p>
<p>在很早之前就学过了PyQt5 ，我决定在更新了几篇PyQt5 。之前写的PyQt5 博客基本覆盖于此。这篇是九十篇、Python的GUI系列 | QtDesigner进行界面设计。离收官还有十篇。</p>
<div class="section" id="ui">
<h2>ui设计<a class="headerlink" href="#ui" title="永久链接至标题">¶</a></h2>
<p>如果只关注功能，做ui不难。难的是如何将ui做得漂亮，这不只是技术问题，还考验布局、配色、美工等一系列专业知识。在尝试了下美化控件的一些操作后，我果断放弃了，技术是个无底洞，还是关注最直接的需求吧
<img alt="https://img-blog.csdnimg.cn/20200711222633690.png" src="https://img-blog.csdnimg.cn/20200711222633690.png" /></p>
</div>
<div class="section" id="id472">
<h2>布局<a class="headerlink" href="#id472" title="永久链接至标题">¶</a></h2>
<p>PyQt5的界面布局主要有两种方法：绝对定位和局部类。在PyQt5中有四种布局方式：水平布局、垂直布局、网格布局、表单布局。还有两种布局方法：addLayout和addWidget，其中addLayout用于在布局中插入子布局，addWidget用于在布局中插入控件。</p>
<ul class="simple">
<li>垂直布局：控件默认按照从上到下的顺序进行纵向添加。</li>
<li>水平布局：控件默认按照从左到右的顺序进行横向添加。</li>
<li>栅格布局：将窗口分为若干行(row)和列(column)。</li>
<li>表单布局：控件以两列的形式布局在窗口中，左边为标签，右边为输入控件。</li>
</ul>
<div class="section" id="id473">
<h3>绝对布局<a class="headerlink" href="#id473" title="永久链接至标题">¶</a></h3>
<p><img alt="https://img-blog.csdnimg.cn/20200711222910671.png" src="https://img-blog.csdnimg.cn/20200711222910671.png" /></p>
<p>使用QWidget的move、setGeometry等方法，直接设置其在窗口中的位置。</p>
<p>下面就是一个绝对布局的代码</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>import sys
from PyQt5.QtWidgets import *
class AbsoluteLayout(QWidget) :
    def __init__(self):
        super(AbsoluteLayout,self).__init__()
        self.setWindowTitle(&quot;绝对布局&quot;)
        self.label1 = QLabel(&#39;欢迎&#39;,self)
        self.label1.move(15,20)
        self.label2 = QLabel(&#39;学习&#39;,self)
        self.label2.move(35,40)
        self.label3 = QLabel(&#39;PyQt5&#39;,self)
        self.label3.move(55,80)
if __name__ == &#39;__main__&#39;:
    app = QApplication(sys.argv)
    main = AbsoluteLayout()
    main.show()
    sys.exit(app.exec_())
</pre></div>
</div>
</div>
<div class="section" id="id474">
<h3>水平盒布局<a class="headerlink" href="#id474" title="永久链接至标题">¶</a></h3>
<p><img alt="https://img-blog.csdnimg.cn/20200711224644654.png" src="https://img-blog.csdnimg.cn/20200711224644654.png" />
下面就是一个  水平盒布局的代码</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>import sys
from PyQt5.QtWidgets import *
class HBoxLayout(QWidget) :
    def __init__(self):
        super(HBoxLayout,self).__init__()
        self.setWindowTitle(&quot;水平盒布局&quot;)
        hlayout = QHBoxLayout()
        hlayout.addWidget(QPushButton(&#39;按钮1&#39;))
        hlayout.addWidget(QPushButton(&#39;按钮2&#39;))
        hlayout.addWidget(QPushButton(&#39;按钮3&#39;))
        hlayout.setSpacing(40)
        self.setLayout(hlayout)
if __name__ == &#39;__main__&#39;:
    app = QApplication(sys.argv)
    main = HBoxLayout()
    main.show()
    sys.exit(app.exec_())
</pre></div>
</div>
</div>
<div class="section" id="id475">
<h3>垂直盒布局<a class="headerlink" href="#id475" title="永久链接至标题">¶</a></h3>
<p><img alt="https://img-blog.csdnimg.cn/20200711225018350.png" src="https://img-blog.csdnimg.cn/20200711225018350.png" /></p>
<p>下面就是一个垂直盒布局的代码</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>import sys
from PyQt5.QtWidgets import *
class VBoxLayout(QWidget) :
    def __init__(self):
        super(VBoxLayout,self).__init__()
        self.setWindowTitle(&quot;垂直盒布局&quot;)
        layout = QVBoxLayout()
        layout.addWidget(QPushButton(&#39;按钮1&#39;))
        layout.addWidget(QPushButton(&#39;按钮2&#39;))
        layout.addWidget(QPushButton(&#39;按钮3&#39;))
        self.setLayout(layout)
if __name__ == &#39;__main__&#39;:
    app = QApplication(sys.argv)
    main = VBoxLayout()
    main.show()
    sys.exit(app.exec_())
</pre></div>
</div>
<p>上面的QHBoxLayout 水平布局和QVBoxLayout 垂直布局都是盒子布局</p>
<p>代码方面</p>
<ul class="simple">
<li>stretch（伸缩量），只适用于QBoxLayout布局方式，控件和窗口会随着伸缩量的变大而增加</li>
<li>alignment，指定对齐方式</li>
<li>addLayout(self, QLayout, stretch=0)</li>
<li>在窗口的右边添加布局，使用stretch（伸缩量）进行伸缩，默认为0</li>
<li>addWidget(self, QWidget, stretch, Qt.Alignment) 在布局中添加控件。</li>
</ul>
</div>
<div class="section" id="id476">
<h3>栅格布局<a class="headerlink" href="#id476" title="永久链接至标题">¶</a></h3>
<p><img alt="https://img-blog.csdnimg.cn/20200712225433344.png" src="https://img-blog.csdnimg.cn/20200712225433344.png" /></p>
<p>下面就是一个栅格布局的代码</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>import sys
from PyQt5.QtWidgets import *
class Calc(QWidget) :
    def __init__(self):
        super(Calc,self).__init__()
        self.setWindowTitle(&quot;栅格布局&quot;)

        grid = QGridLayout()
        self.setLayout(grid)
        names = [&#39;Cls&#39;,&#39;Back&#39;,&#39;&#39;,&#39;Close&#39;,
                 &#39;7&#39;,&#39;8&#39;,&#39;9&#39;,&#39;/&#39;,
                 &#39;4&#39;,&#39;5&#39;,&#39;6&#39;,&#39;*&#39;,
                 &#39;1&#39;,&#39;2&#39;,&#39;3&#39;,&#39;-&#39;,
                 &#39;0&#39;,&#39;.&#39;,&#39;=&#39;,&#39;+&#39;]
        positions = [(i,j) for i in range(5) for j in range(4)]
        print(positions)
        for position,name in zip(positions,names):
            if name == &#39;&#39;:
                continue
            button = QPushButton(name)
            grid.addWidget(button,*position)
if __name__ == &#39;__main__&#39;:
    app = QApplication(sys.argv)
    main = Calc()
    main.show()
    sys.exit(app.exec_())
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/2020071222550552.png" src="https://img-blog.csdnimg.cn/2020071222550552.png" /></p>
<p>QGridLayout 栅格布局</p>
<p>代码方法：</p>
<ul class="simple">
<li>addLayout(QLayout, row, column, Qt.Alignment)，在栅格布局的行(row)、列(column)位置添加新的布局，并设置对齐方式</li>
<li>addLayout(QLayout, row, column, rowSpan, columnSpan, Qt.Alignment)，在栅格布局中新的布局，从行(row)、列(column)开始，占据rowSpan行、columnSpan列</li>
<li>addWidget(QWidget, row, column, Qt.Alignment)，在栅格布局的行(row)、列(column)中添加窗口控件，</li>
<li>addWidget(QWidget, fromRow, fromColumn, rowSpan, columnSpan, Qt.Alignment)，在栅格布局中添加窗口控件，从行(row)、列(column)开始，占据rowSpan行、columnSpan列</li>
<li>setRowStretch(row, stretch)，在行(row)处添加伸缩量</li>
<li>setColumnStretch(column, stretch)，在列(column)处添加伸缩量</li>
</ul>
</div>
<div class="section" id="id477">
<h3>表单布局<a class="headerlink" href="#id477" title="永久链接至标题">¶</a></h3>
<p><img alt="https://img-blog.csdnimg.cn/20200712230244485.png" src="https://img-blog.csdnimg.cn/20200712230244485.png" /></p>
<p>下面就是一个表单布局的代码</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>import sys
from PyQt5.QtWidgets import *
class GridForm(QWidget) :
    def __init__(self):
        super(GridForm,self).__init__()
        self.setWindowTitle(&quot;栅格布局：表单设计&quot;)
        titleLabel = QLabel(&#39;标题&#39;)
        authorLabel = QLabel(&#39;作者&#39;)
        contentLabel = QLabel(&#39;内容&#39;)
        titleEdit = QLineEdit()
        authorEdit = QLineEdit()
        contentEdit = QTextEdit()
        grid = QGridLayout()
        grid.setSpacing(10)
        grid.addWidget(titleLabel,1,0)
        grid.addWidget(titleEdit,1,1)
        grid.addWidget(authorLabel,2,0)
        grid.addWidget(authorEdit,2,1)
        grid.addWidget(contentLabel,3,0)
        grid.addWidget(contentEdit,3,1,5,1)
        self.setLayout(grid)
        self.resize(350,300)

if __name__ == &#39;__main__&#39;:
    app = QApplication(sys.argv)
    main = GridForm()
    main.show()
    sys.exit(app.exec_())
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200712225742858.png" src="https://img-blog.csdnimg.cn/20200712225742858.png" /></p>
<p>其他布局对齐方式：</p>
<p>| 参数                   | 描述             |
| ———————- | —————- |
| QtCore.Qt.AlignLeft    | 水平方向居左对齐 |
| QtCore.Qt.AlignRight   | 水平方向居右对齐 |
| QtCore.Qt.AlignCenter  | 水平方向居中对齐 |
| QtCore.Qt.AlignJustify | 水平方向两端对齐 |
| QtCore.Qt.AlignTop     | 垂直方向靠上对齐 |
| QtCore.Qt.AlignBottom  | 垂直方向靠下对齐 |
| QtCore.Qt.AlignVCenter | 垂直方向居中对齐 |</p>
</div>
<div class="section" id="menu">
<h3>菜单栏 Menu<a class="headerlink" href="#menu" title="永久链接至标题">¶</a></h3>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>import sys
from PyQt5.QtWidgets import *
from PyQt5.QtGui import *
from PyQt5.QtCore import *
class Menu(QMainWindow) :
    def __init__(self):
        super(Menu,self).__init__()
        bar = self.menuBar()  # 获取菜单栏
        file = bar.addMenu(&quot;文件&quot;)
        file.addAction(&quot;新建&quot;)
        save = QAction(&quot;保存&quot;,self)
        save.setShortcut(&quot;Ctrl + S&quot;)
        file.addAction(save)
        save.triggered.connect(self.process)
        edit = bar.addMenu(&quot;Edit&quot;)
        edit.addAction(&quot;copy&quot;)
        edit.addAction(&quot;paste&quot;)
        quit = QAction(&quot;退出&quot;,self)
        file.addAction(quit)
    def process(self):
        print(self.sender().text())
if __name__ == &#39;__main__&#39;:
    app = QApplication(sys.argv)
    main = Menu()
    main.show()
    sys.exit(app.exec_())
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20190511165209533.png" src="https://img-blog.csdnimg.cn/20190511165209533.png" /></p>
</div>
<div class="section" id="id478">
<h3>工具栏<a class="headerlink" href="#id478" title="永久链接至标题">¶</a></h3>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>import sys
from PyQt5.QtWidgets import *
from PyQt5.QtGui import *
from PyQt5.QtCore import *
class Toolbar(QMainWindow) :
    def __init__(self):
        super(Toolbar,self).__init__()
        self.initUI()
    def initUI(self):
        self.setWindowTitle(&quot;工具栏例子&quot;)
        self.resize(300,200)
        tb1 = self.addToolBar(&quot;File&quot;)
        new = QAction(QIcon(&#39;./images/new.png&#39;),&quot;new&quot;,self)
        tb1.addAction(new)
        open = QAction(QIcon(&#39;./images/open.png&#39;),&quot;open&quot;,self)
        tb1.addAction(open)
        save = QAction(QIcon(&#39;./images/save.png&#39;),&quot;save&quot;,self)
        tb1.addAction(save)
        tb2 = self.addToolBar(&quot;File1&quot;)
        new1 = QAction(QIcon(&#39;./images/new.png&#39;),&quot;新建&quot;,self)
        tb2.addAction(new1)
        tb2.setToolButtonStyle(Qt.ToolButtonTextUnderIcon)
        tb1.actionTriggered.connect(self.toolbtnpressed)
        tb2.actionTriggered.connect(self.toolbtnpressed)
    def toolbtnpressed(self,a):
        print(&quot;按下的工具栏按钮是&quot;,a.text())
if __name__ == &#39;__main__&#39;:
    app = QApplication(sys.argv)
    main = Toolbar()
    main.show()
    sys.exit(app.exec_())
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200712231738397.png" src="https://img-blog.csdnimg.cn/20200712231738397.png" /></p>
</div>
</div>
</div>
<div class="section" id="pythongui-qt">
<h1>91、Python的GUI系列 _ QT组件篇<a class="headerlink" href="#pythongui-qt" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen</p>
<p>在很早之前就学过了PyQt5 ，我决定在更新了几篇PyQt5 。之前写的PyQt5 博客基本覆盖于此。这篇九十一、Python的GUI系列 | QT组件篇。离收官还有九篇。</p>
<p>官方文档：https://riverbankcomputing.com/static/Docs/PyQt5/</p>
<div class="section" id="id479">
<h2>主窗口<a class="headerlink" href="#id479" title="永久链接至标题">¶</a></h2>
<p>主窗口：一共有3种窗口</p>
<ul class="simple">
<li>QMainWindow：可以包含菜单栏、工具栏、状态栏和标题栏，是最常见的窗口形式</li>
<li>QDialog：是对话窗口的基类。没有菜单栏、工具栏、状态栏。</li>
<li>QWidget：不确定窗口的用途，就使用QWidget。</li>
</ul>
</div>
<div class="section" id="id480">
<h2>文本控件<a class="headerlink" href="#id480" title="永久链接至标题">¶</a></h2>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>from PyQt5.QtWidgets import *
import sys
class QTextEditDemo(QWidget) :
    def __init__(self):
        super(QTextEditDemo,self).__init__()
        self.initUI()
    def initUI(self):
        self.setWindowTitle(&#39;QTextEdit控件演示&#39;)
        self.resize(300,320)
        self.textEdit = QTextEdit()
        self.buttonText = QPushButton(&#39;显示文本&#39;)
        self.buttonHTML = QPushButton(&#39;显示HTML&#39;)
        self.buttonToText = QPushButton(&#39;获取文本&#39;)
        self.buttonToHTML = QPushButton(&#39;获取HTML&#39;)
        layout = QVBoxLayout()
        layout.addWidget(self.textEdit)
        layout.addWidget(self.buttonText)
        layout.addWidget(self.buttonToText)
        layout.addWidget(self.buttonHTML)
        layout.addWidget(self.buttonToHTML)
        self.setLayout(layout)
        self.buttonText.clicked.connect(self.onClick_ButtonText)
        self.buttonHTML.clicked.connect(self.onClick_ButtonHTML)
        self.buttonToText.clicked.connect(self.onClick_ButtonToText)
        self.buttonToHTML.clicked.connect(self.onClick_ButtonToHTML)
    def onClick_ButtonText(self):
        self.textEdit.setPlainText(&#39;Hello World，世界你好吗？&#39;)
    def onClick_ButtonToText(self):
        print(self.textEdit.toPlainText())
    def onClick_ButtonHTML(self):
        self.textEdit.setHtml(&#39;&lt;font color=&quot;blue&quot; size=&quot;5&quot;&gt;Hello World&lt;/font&gt;&#39;)
    def onClick_ButtonToHTML(self):
        print(self.textEdit.toHtml())
if __name__ == &#39;__main__&#39;:
    app = QApplication(sys.argv)
    main = QTextEditDemo()
    main.show()
    sys.exit(app.exec_())
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200713113035579.png" src="https://img-blog.csdnimg.cn/20200713113035579.png" /></p>
</div>
<div class="section" id="id481">
<h2>文本输入框<a class="headerlink" href="#id481" title="永久链接至标题">¶</a></h2>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span># QLineEdit控件与回显模式
from PyQt5.QtWidgets import *
import sys
class QLineEditEchoMode(QWidget) :
    def __init__(self):
        super(QLineEditEchoMode,self).__init__()
        self.initUI()
    def initUI(self):
        self.setWindowTitle(&#39;文本输入框的回显模式&#39;)
        formLayout = QFormLayout()
        normalLineEdit = QLineEdit()
        noEchoLineEdit = QLineEdit()
        passwordLineEdit = QLineEdit()
        passwordEchoOnEditLineEdit = QLineEdit()
        formLayout.addRow(&quot;Normal&quot;,normalLineEdit)
        formLayout.addRow(&quot;NoEcho&quot;, noEchoLineEdit)
        formLayout.addRow(&quot;Password&quot;,passwordLineEdit)
        formLayout.addRow(&quot;PasswordEchoOnEdit&quot;,passwordEchoOnEditLineEdit)
        normalLineEdit.setPlaceholderText(&quot;Normal&quot;)
        noEchoLineEdit.setPlaceholderText(&quot;NoEcho&quot;)
        passwordLineEdit.setPlaceholderText(&quot;Password&quot;)
        passwordEchoOnEditLineEdit.setPlaceholderText(&quot;PasswordEchoOnEdit&quot;)
        normalLineEdit.setEchoMode(QLineEdit.Normal)
        noEchoLineEdit.setEchoMode(QLineEdit.NoEcho)
        passwordLineEdit.setEchoMode(QLineEdit.Password)
        passwordEchoOnEditLineEdit.setEchoMode(QLineEdit.PasswordEchoOnEdit)
        self.setLayout(formLayout)
if __name__ == &#39;__main__&#39;:
    app = QApplication(sys.argv)
    main = QLineEditEchoMode()
    main.show()
    sys.exit(app.exec_())

</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200713112725795.png" src="https://img-blog.csdnimg.cn/20200713112725795.png" /></p>
</div>
<div class="section" id="id482">
<h2>按钮控件<a class="headerlink" href="#id482" title="永久链接至标题">¶</a></h2>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>#按钮控件（QPushButton）
import sys
from PyQt5.QtCore import *
from PyQt5.QtGui import *
from PyQt5.QtWidgets import *
class QPushButtonDemo(QDialog) :
    def __init__(self):
        super(QPushButtonDemo,self).__init__()
        self.initUI()
    def initUI(self):
        self.setWindowTitle(&#39;QPushButton Demo&#39;)
        layout = QVBoxLayout()
        self.button1 = QPushButton(&#39;第1个按钮&#39;)
        self.button1.setText(&#39;First Button1&#39;)
        self.button1.setCheckable(True)
        self.button1.toggle()
        self.button1.clicked.connect(self.buttonState)
        self.button1.clicked.connect(lambda :self.whichButton(self.button1))
        layout.addWidget(self.button1)
        # 在文本前面显示图像
        self.button2 = QPushButton(&#39;图像按钮&#39;)
        self.button2.setIcon(QIcon(QPixmap(&#39;./images/python.png&#39;)))
        self.button2.clicked.connect(lambda:self.whichButton(self.button2))
        layout.addWidget(self.button2)
        self.button3 = QPushButton(&#39;不可用的按钮&#39;)
        self.button3.setEnabled(False)
        layout.addWidget(self.button3)
        self.button4 = QPushButton(&#39;&amp;MyButton&#39;)
        self.button4.setDefault(True)
        self.button4.clicked.connect(lambda:self.whichButton(self.button4))
        layout.addWidget(self.button4)
        self.setLayout(layout)
        self.resize(400,300)
    def buttonState(self):
        if self.button1.isChecked():
            print(&#39;按钮1已经被选中&#39;)
        else:
            print(&#39;按钮1未被选中&#39;)
    def whichButton(self,btn):
        print(&#39;被单击的按钮是&lt;&#39; + btn.text() + &#39;&gt;&#39;)
if __name__ == &#39;__main__&#39;:
    app = QApplication(sys.argv)
    main = QPushButtonDemo()
    main.show()
    sys.exit(app.exec_())

</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200713112843181.png" src="https://img-blog.csdnimg.cn/20200713112843181.png" /></p>
</div>
<div class="section" id="id483">
<h2>完成计算器Demo<a class="headerlink" href="#id483" title="永久链接至标题">¶</a></h2>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>&#39;&#39;&#39;
@Author： Runsen
@微信公众号： Python之王
@博客： https://blog.csdn.net/weixin_44510615
@Date： 2020/7/13
&#39;&#39;&#39;
import sys
from PyQt5.QtWidgets import QApplication, QWidget, QToolTip, QLineEdit, QMessageBox, QDesktopWidget, QTextEdit
from PyQt5.QtGui import  QFont
from PyQt5.QtCore import QCoreApplication
class Calculater(QWidget):
    def __init__(self):
        super().__init__()
        self.setUI()

    def setUI(self):
        QToolTip.setFont(QFont(&#39;SansSerif&#39;, 10))
        Font = QFont(&#39;SansSerif&#39;, 18)
        self.resize(500, 400)
        self.move(100, 100)
        self.setWindowTitle(&quot;Calculater&quot;)
        self.center()
        self.line = QLineEdit(self)
        self.line.resize(480, 80)
        self.line.move(10, 10)
        self.line.setFont(Font)

        self.Text = QTextEdit(self)
        self.Text.resize(480, 280)
        self.Text.move(10, 110)
        self.Text.setFont(Font)
        self.Text.setText(str(0))

        self.line.textChanged.connect(self.calculate)
        self.show()

    def calculate(self):
        s = self.line.text()
        if len(s) == 0:
            self.Text.setText(str(0))
            return False
        s = s.replace(&#39;^&#39;, &#39;**&#39;)  # 使得能够接受^这样的用法
        try:
            ans = eval(s)
        except:
            return False
        else:
            self.Text.setText(str(ans))

    def center(self):
        qr = self.frameGeometry()
        cp = QDesktopWidget().availableGeometry().center()
        qr.moveCenter(cp)
        self.move(qr.topLeft())

if __name__ == &#39;__main__&#39;:
    app = QApplication(sys.argv)
    ex = Calculater()
    sys.exit(app.exec_())
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200713112553900.gif" src="https://img-blog.csdnimg.cn/20200713112553900.gif" /></p>
</div>
</div>
<div class="section" id="id484">
<h1>92、Python爬取深圳租房信息小案例<a class="headerlink" href="#id484" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen</p>
<p>今天介绍的是Python中的爬虫小例子，离收官还有八篇。</p>
<div class="section" id="id485">
<h2>1、前言<a class="headerlink" href="#id485" title="永久链接至标题">¶</a></h2>
<p>在某日夏天的夜晚、突然有妹子加我微信，原来竟然叫我帮忙写作业。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200628124023811.png" src="https://img-blog.csdnimg.cn/20200628124023811.png" /></p>
<p>对于，我这个屌丝来说，还是花个半小时帮忙搞定下。爬取的网站又是链家网，你看我直接不是早已写成博客了吗？</p>
<p><img alt="https://img-blog.csdnimg.cn/20200628124340804.png" src="https://img-blog.csdnimg.cn/20200628124340804.png" /></p>
<p>我想对链家网说：链家网求你不要再害大家爬你的，真的让广大学生都是讨厌你。</p>
<p>爬取的链接是：https://sz.lianjia.com/zufang/</p>
<p><img alt="https://img-blog.csdnimg.cn/20200628124603502.png" src="https://img-blog.csdnimg.cn/20200628124603502.png" /></p>
<p>什么租房经纪人成交数据有吗？我看老师都是傻傻的不知道乱搞一通。难为是我啊？没有的东西爬了毛？</p>
</div>
<div class="section" id="id486">
<h2>2、明确爬取的信息<a class="headerlink" href="#id486" title="永久链接至标题">¶</a></h2>
<p>在链家网的租房信息中，有如下的信息，我都圈出来了。
<img alt="https://img-blog.csdnimg.cn/2020062812485470.png" src="https://img-blog.csdnimg.cn/2020062812485470.png" /></p>
<p>明确爬取的信息，分别有整租，我就叫类型算了。新城花园就叫名称， 面积就是101，朝向南，</p>
<p>3室1厅1卫就叫房间数，价格每个月1800，真贵。反正我这种穷人要不起。</p>
</div>
<div class="section" id="requests">
<h2>3、 Requests访问链接<a class="headerlink" href="#requests" title="永久链接至标题">¶</a></h2>
<p>Requests库就是发请求的库，需要加上请求头，这样就不用禁止了。</p>
<p>根据每个页面的网址发现就是换了一个pg参数。比如，第一页的网址是<code class="docutils literal notranslate"><span class="pre">https://sz.lianjia.com/zufang/pg0</span></code>，</p>
<p>那么第二页就是<code class="docutils literal notranslate"><span class="pre">https://sz.lianjia.com/zufang/pg1</span></code>，那么就是傻瓜式构造。我们爬它个100页，代码如下。</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>for i in range(1, 101):
     page_url = &#39;https://sz.lianjia.com/zufang/pg{}&#39;.format(i)
     res = requests.get(page_url, headers=headers)
</pre></div>
</div>
</div>
<div class="section" id="xpath">
<h2>4、 xpath解析内容<a class="headerlink" href="#xpath" title="永久链接至标题">¶</a></h2>
<p>返回的页面就需要解析，我经常用的说xpath，至于bs4赶紧忘记算了。</p>
<p>具体解析过程如下图所示。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200628183147843.png" src="https://img-blog.csdnimg.cn/20200628183147843.png" /></p>
</div>
<div class="section" id="id487">
<h2>5、保存数据<a class="headerlink" href="#id487" title="永久链接至标题">¶</a></h2>
<p>我们选择用csv来保存数据，通过<code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">open('demo.csv',</span> <span class="pre">'a+')</span> <span class="pre">as</span> <span class="pre">f</span></code>进行创建csv，然后通过<code class="docutils literal notranslate"><span class="pre">f.write</span></code>进行写入爬取的数据。</p>
<p>最终保存数据如下图所示。
<img alt="https://img-blog.csdnimg.cn/20200628183414740.png" src="https://img-blog.csdnimg.cn/20200628183414740.png" /></p>
</div>
<div class="section" id="id488">
<h2>6、全部代码<a class="headerlink" href="#id488" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">@Author： Runsen</span>
<span class="sd">@微信公众号： Python之王</span>
<span class="sd">@博客： https://blog.csdn.net/weixin_44510615</span>
<span class="sd">@Date： 2020/6/27</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">lxml</span> <span class="kn">import</span> <span class="n">etree</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="s1">&#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36&#39;</span>
<span class="p">}</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;demo.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;a+&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
        <span class="s1">&#39;类型&#39;</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="s1">&#39;名称&#39;</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="s1">&#39;地点&#39;</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="s1">&#39;面积&#39;</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="s1">&#39;朝向&#39;</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="s1">&#39;房间数&#39;</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="s1">&#39;价格&#39;</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">101</span><span class="p">):</span>
        <span class="n">page_url</span> <span class="o">=</span> <span class="s1">&#39;https://sz.lianjia.com/zufang/pg{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

        <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">page_url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
        <span class="c1"># 这里千万不要判断res的状态码200</span>
        <span class="n">page</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="n">content</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;//a[@class=&#39;content__list--item--aside&#39;]/@title&quot;</span><span class="p">)</span>

        <span class="n">where1</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;//p[@class=&#39;content__list--item--des&#39;]/a[1]/text()&quot;</span><span class="p">)</span>
        <span class="n">where2</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;//p[@class=&#39;content__list--item--des&#39;]/a[2]/text()&quot;</span><span class="p">)</span>
        <span class="n">where3</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;//p[@class=&#39;content__list--item--des&#39;]/a[3]/text()&quot;</span><span class="p">)</span>
        <span class="n">squares</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;//p[@class=&#39;content__list--item--des&#39;]/text()[5]&quot;</span><span class="p">)</span>
        <span class="n">decorates</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;//p[@class=&#39;content__list--item--des&#39;]/text()[6]&quot;</span><span class="p">)</span>
        <span class="n">nums</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;//p[@class=&#39;content__list--item--des&#39;]/text()[7]&quot;</span><span class="p">)</span>
        <span class="n">Prices</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;//span[@class=&#39;content__list--item-price&#39;]/em/text()&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">j</span><span class="p">,</span><span class="n">w1</span><span class="p">,</span><span class="n">w2</span> <span class="p">,</span> <span class="n">w3</span><span class="p">,</span><span class="n">s</span><span class="p">,</span><span class="n">d</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">Price</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">where1</span><span class="p">,</span> <span class="n">where2</span><span class="p">,</span><span class="n">where3</span><span class="p">,</span> <span class="n">squares</span><span class="p">,</span> <span class="n">decorates</span><span class="p">,</span><span class="n">nums</span><span class="p">,</span><span class="n">Prices</span><span class="p">):</span>
            <span class="nb">type</span> <span class="o">=</span> <span class="n">j</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;·&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">j</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;·&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">location</span> <span class="o">=</span> <span class="n">w1</span><span class="o">+</span> <span class="n">w2</span> <span class="o">+</span> <span class="n">w3</span>
            <span class="n">square</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">decorate</span> <span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">num</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">price</span> <span class="o">=</span> <span class="n">Price</span><span class="o">+</span> <span class="s2">&quot;元/月&quot;</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;正在写入 :&quot;</span> <span class="o">+</span> <span class="nb">type</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="n">location</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="n">square</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="n">decorate</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="n">num</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="n">price</span> <span class="o">+</span>  <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">type</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="n">location</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="n">square</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="n">decorate</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="n">num</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="n">price</span> <span class="o">+</span>  <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="pythonapi">
<h1>93、Python使用百度云接口API实现截图，文字识别和语音合成<a class="headerlink" href="#pythonapi" title="永久链接至标题">¶</a></h1>
<p>&#64;Author：Runsen</p>
<p>在实际的业务中，难免会跟第三方系统进行数据的交互与传递，其实就是写接口API的。今天就开始第九十三篇、Python使用百度云接口API实现截图，文字识别和语音合成</p>
<div class="section" id="restful-api">
<h2>接口RESTful API<a class="headerlink" href="#restful-api" title="永久链接至标题">¶</a></h2>
<p>随着微信以及各种数据平台的兴起，大家对跟这些平台对接的需求越来越多。目前，包括以上平台在内的一些主流公共平台都会以一种 REST 架构原则，向大众提供对接的接口。这种符合 REST 风格的接口，就称为 RESTful API。</p>
<p>比如注册百度云帐号，打开百度云平台：https://login.bce.baidu.com/reg.html?tpl=bceplat&amp;from=portal进行账号注册</p>
<p>记住:    AppID，API Key，Secret Key</p>
<p>上面三个就是用户的接口。</p>
</div>
<div class="section" id="keyboard">
<h2>安装keyboard<a class="headerlink" href="#keyboard" title="永久链接至标题">¶</a></h2>
<p>下面我们实现Python使用百度云接口API实现截图，文字识别的功能。需要安装keyboard。</p>
<p>keyboard是一个监控键盘输入的库</p>
<p>安装：<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">keyborad</span></code></p>
<p>执行下面的代码就是可以截图了。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">keyboard</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">ImageGrab</span>
<span class="k">def</span> <span class="nf">screen</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;开始截图&#39;</span><span class="p">)</span>
    <span class="c1"># 使用微信的截图热键</span>
    <span class="n">keyboard</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">hotkey</span><span class="o">=</span><span class="s1">&#39;alt+a&#39;</span><span class="p">)</span>
    <span class="c1"># 保存</span>
    <span class="n">keyboard</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">hotkey</span><span class="o">=</span><span class="s1">&#39;enter&#39;</span><span class="p">)</span>
    <span class="c1"># 图片保存需要时间</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="c1"># 读取剪切板的图片</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">ImageGrab</span><span class="o">.</span><span class="n">grabclipboard</span><span class="p">()</span>
    <span class="c1"># 保存图片</span>
    <span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;screen.jpg&#39;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;图片保存完成&#39;</span><span class="p">)</span>
<span class="n">screen</span><span class="p">()</span>
</pre></div>
</div>
<p>当在键盘敲ctrl+a来得到图片</p>
<p><img alt="https://img-blog.csdnimg.cn/20190502231944769.png" src="https://img-blog.csdnimg.cn/20190502231944769.png" /></p>
<p>截取的图片</p>
<p><img alt="https://img-blog.csdnimg.cn/20190502232009661.png" src="https://img-blog.csdnimg.cn/20190502232009661.png" /></p>
</div>
<div class="section" id="id489">
<h2>文字识别<a class="headerlink" href="#id489" title="永久链接至标题">¶</a></h2>
<p>下面我使用百度云来进行识别</p>
<p>为什么用百度云，因为百度的技术，阿里的运营，腾讯的产品。技术当然选百度云，而且识别效果比较高。</p>
<p><img alt="https://img-blog.csdnimg.cn/20190502232210590.png" src="https://img-blog.csdnimg.cn/20190502232210590.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20190502232100232.png" src="https://img-blog.csdnimg.cn/20190502232100232.png" /></p>
<p>要安装百度的接口：<a class="reference external" href="https://cloud.baidu.com/doc/OCR/OCR-Python-SDK.html#.E6.8E.A5.E5.8F.A3.E8.AF.B4.E6.98.8E">官方的教程</a>：https://cloud.baidu.com/doc/OCR/OCR-Python-SDK.html#.E6.8E.A5.E5.8F.A3.E8.AF.B4.E6.98.8E</p>
<p>下面就是教程的模板。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aip</span> <span class="kn">import</span> <span class="n">AipOcr</span>

<span class="sd">&quot;&quot;&quot; 你的 APPID AK SK &quot;&quot;&quot;</span>
<span class="n">APP_ID</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="n">API_KEY</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">AipOcr</span><span class="p">(</span><span class="n">APP_ID</span><span class="p">,</span> <span class="n">API_KEY</span><span class="p">,</span> <span class="n">SECRET_KEY</span><span class="p">)</span>



<span class="sd">&quot;&quot;&quot;读取图片&quot;&quot;&quot;</span>

<span class="k">def</span> <span class="nf">get_file_content</span><span class="p">(</span><span class="n">filepath</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>



<span class="k">def</span> <span class="nf">get_img_content</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>

    <span class="n">image_content</span><span class="o">=</span><span class="s1">&#39;&#39;</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">basicAccurate</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">img</span><span class="p">)</span>
    <span class="c1"># print(content)</span>
    <span class="k">for</span> <span class="n">words</span> <span class="ow">in</span> <span class="n">content</span><span class="p">[</span><span class="s1">&#39;words_result&#39;</span><span class="p">]:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>  <span class="c1"># 字典</span>
        <span class="n">image_content</span> <span class="o">+=</span> <span class="n">words</span><span class="p">[</span><span class="s1">&#39;words&#39;</span><span class="p">]</span>
    <span class="k">print</span><span class="p">(</span><span class="n">image_content</span><span class="p">)</span>
    
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20190502232738379.png" src="https://img-blog.csdnimg.cn/20190502232738379.png" /></p>
<p>下面就是将截图整合到其中，封装全代码。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># -*- coding：utf-8 -*-</span>
<span class="c1"># time ：2019/5/2 23:02</span>
<span class="c1"># author: 毛利</span>


<span class="kn">import</span> <span class="nn">keyboard</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">ImageGrab</span>
<span class="k">def</span> <span class="nf">screen</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;开始截图&#39;</span><span class="p">)</span>
    <span class="c1"># 使用微信的截图热键</span>
    <span class="n">keyboard</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">hotkey</span><span class="o">=</span><span class="s1">&#39;alt+a&#39;</span><span class="p">)</span>
    <span class="c1"># 保存</span>
    <span class="n">keyboard</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">hotkey</span><span class="o">=</span><span class="s1">&#39;enter&#39;</span><span class="p">)</span>
    <span class="c1"># 图片保存需要时间</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="c1"># 读取剪切板的图片</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">ImageGrab</span><span class="o">.</span><span class="n">grabclipboard</span><span class="p">()</span>
    <span class="c1"># 保存图片</span>
    <span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;screen.jpg&#39;</span><span class="p">)</span>

<span class="c1"># 使用百度云中的文字识别</span>
<span class="kn">from</span> <span class="nn">aip</span> <span class="kn">import</span> <span class="n">AipOcr</span>

<span class="sd">&quot;&quot;&quot; 你的 APPID AK SK &quot;&quot;&quot;</span>
<span class="n">APP_ID</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>   <span class="c1">#你的账号的id</span>
<span class="n">API_KEY</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">AipOcr</span><span class="p">(</span><span class="n">APP_ID</span><span class="p">,</span> <span class="n">API_KEY</span><span class="p">,</span> <span class="n">SECRET_KEY</span><span class="p">)</span>



<span class="sd">&quot;&quot;&quot;读取图片&quot;&quot;&quot;</span>

<span class="k">def</span> <span class="nf">get_file_content</span><span class="p">(</span><span class="n">filepath</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>



<span class="k">def</span> <span class="nf">get_img_content</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>

    <span class="n">image_content</span><span class="o">=</span><span class="s1">&#39;&#39;</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">basicAccurate</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">img</span><span class="p">)</span>
    <span class="c1"># print(content)</span>
    <span class="k">for</span> <span class="n">words</span> <span class="ow">in</span> <span class="n">content</span><span class="p">[</span><span class="s1">&#39;words_result&#39;</span><span class="p">]:</span>
        <span class="c1"># print(words)  # 字典</span>
        <span class="n">image_content</span> <span class="o">+=</span> <span class="n">words</span><span class="p">[</span><span class="s1">&#39;words&#39;</span><span class="p">]</span>
    <span class="k">print</span><span class="p">(</span><span class="n">image_content</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">screen</span><span class="p">()</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">get_file_content</span><span class="p">(</span><span class="s1">&#39;screen.jpg&#39;</span><span class="p">)</span>
    <span class="n">get_img_content</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</pre></div>
</div>
<p>下面就是具体的使用：
<img alt="https://img-blog.csdnimg.cn/20190502233844342.png" src="https://img-blog.csdnimg.cn/20190502233844342.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20190502233919839.png" src="https://img-blog.csdnimg.cn/20190502233919839.png" /></p>
</div>
<div class="section" id="id490">
<h2>语言合成<a class="headerlink" href="#id490" title="永久链接至标题">¶</a></h2>
<p>百度AP开发平台（ai.baidu.com）,注册成功之后，点击控制台，进入到百度云-管理中心。就可以创建应用了。
我这里创建了一个带有语音接口的应用：<a class="reference external" href="https://ai.baidu.com/docs#/ASR-Online-Python-SDK/top">官方教程</a></p>
<p>https://ai.baidu.com/docs#/ASR-Online-Python-SDK/top</p>
<p><img alt="https://img-blog.csdnimg.cn/20200713115655335.png" src="https://img-blog.csdnimg.cn/20200713115655335.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20200713115719836.png" src="https://img-blog.csdnimg.cn/20200713115719836.png" /></p>
<p>具体代码如下。</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">from</span> <span class="n">aip</span> <span class="n">import</span> <span class="n">AipSpeech</span>
<span class="n">app_id</span> <span class="p">=</span> <span class="s">&quot;&quot;</span>
<span class="n">api_key</span> <span class="p">=</span> <span class="s">&quot;&quot;</span>
<span class="n">secret_key</span> <span class="p">=</span> <span class="s">&quot;&quot;</span>
<span class="n">client</span> <span class="p">=</span> <span class="n">AipSpeech</span><span class="p">(</span><span class="n">app_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">secret_key</span><span class="p">)</span>
<span class="n">result</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="n">synthesis</span><span class="p">(</span><span class="s">&quot;好好学习，天天向上爱&quot;</span><span class="p">,</span> <span class="s">&quot;zh&quot;</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="p">{</span>
    <span class="s">&quot;vol&quot;</span><span class="p">:</span> <span class="m">9</span><span class="p">,</span>
    <span class="s">&quot;spd&quot;</span><span class="p">:</span> <span class="m">6</span><span class="p">,</span>
    <span class="s">&quot;pit&quot;</span><span class="p">:</span> <span class="m">7</span><span class="p">,</span>
    <span class="s">&quot;per&quot;</span><span class="p">:</span> <span class="m">4</span><span class="p">,</span>
<span class="p">})</span>
<span class="n">with</span> <span class="nf">open</span><span class="p">(</span><span class="s">&quot;audio.mp3&quot;</span><span class="p">,</span> <span class="s">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200713115750256.png" src="https://img-blog.csdnimg.cn/20200713115750256.png" /></p>
<p>音频的内容就是好好学习，天天向上</p>
<p>就是这么简单，不知道你学会了没有。</p>
</div>
</div>
<div class="section" id="flask">
<h1>94、一文带你玩转简单的flask<a class="headerlink" href="#flask" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen</p>
<div class="section" id="id491">
<h2>Flask介绍<a class="headerlink" href="#id491" title="永久链接至标题">¶</a></h2>
<p>Flask是一个基于Python开发并且依赖jinja2模板和Werkzeug WSGI服务的一个微型框架，对于Werkzeug本质是Socket服务端，其用于接收http请求并对请求进行预处理，然后触发Flask框架，开发人员基于Flask框架提供的功能对请求进行相应的处理，并返回给用户，如果要返回给用户复杂的内容时，需要借助jinja2模板来实现对模板的处理，即：将模板和数据进行渲染，将渲染后的字符串返回给用户浏览器。</p>
<p>优点：</p>
<ul class="simple">
<li>有非常齐全的官方文档，上手非常方便</li>
<li>有非常好的拓展机制和第三方的拓展环境，工作中常见的软件都有对应的拓展，自己动手实现拓展也很容易</li>
</ul>
<p>微型框架的形式给了开发者更大的选择空间</p>
</div>
<div class="section" id="id492">
<h2>Flask安装<a class="headerlink" href="#id492" title="永久链接至标题">¶</a></h2>
<p>虚拟环境搭建</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">virtualenv</span> <span class="p">--</span><span class="n">no</span><span class="p">-</span><span class="n">site</span><span class="p">-</span><span class="n">packages</span> <span class="n">flaskenv</span>
</pre></div>
</div>
<p>激活windows下虚拟环境</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">Scripts</span>
<span class="n">activate</span>
</pre></div>
</div>
<p>执行
<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">flask</span></code></p>
<p>快速入门</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>import flask # 导入flask

app = flask.Flask(__name__) # 实例化

@app.route(&#39;/&#39;)# 装饰器实现路由
def helo():
    return &#39;你好，我是Flask!&#39;

if __name__ == &#39;__main__&#39;:
    app.run()
</pre></div>
</div>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">Serving</span> <span class="n">Flask</span> <span class="n">app</span> <span class="s">&quot;main&quot;</span> <span class="p">(</span><span class="n">lazy</span> <span class="n">loading</span><span class="p">)</span>
<span class="n">Environment</span><span class="p">:</span> <span class="n">production</span>
<span class="n">WARNING</span><span class="p">:</span> <span class="n">Do</span> <span class="n">not</span> <span class="n">use</span> <span class="n">the</span> <span class="n">development</span> <span class="n">server</span> <span class="k">in</span> <span class="n">a</span> <span class="n">production</span> <span class="n">environment</span><span class="p">.</span>
<span class="n">Use</span> <span class="n">a</span> <span class="n">production</span> <span class="n">WSGI</span> <span class="n">server</span> <span class="n">instead</span><span class="p">.</span>
<span class="n">Debug</span> <span class="n">mode</span><span class="p">:</span> <span class="n">off</span>
<span class="n">Running</span> <span class="k">on</span> <span class="n">http</span><span class="p">:</span><span class="c1">//127.0.0.1:5000/ (Press CTRL+C to quit)</span>
</pre></div>
</div>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/20191017090936933.png" /></p>
<div class="section" id="url">
<h3>url参数快递<a class="headerlink" href="#url" title="永久链接至标题">¶</a></h3>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>import flask

app = flask.Flask(__name__)

@app.route(&#39;/&#39;)
@app.route(&#39;/hello&#39;) # 实现url地址
def helo():
    return &#39;你好，我是Flask!&#39;

if __name__ == &#39;__main__&#39;:
    app.run()
</pre></div>
</div>
<p>一个函数可以有多个url的装饰器来修饰</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>import flask

html_txt = &quot;&quot;&quot;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;body&gt;
        &lt;h2&gt;收到GET请求&lt;/h2&gt;
        &lt;form method=&#39;post&#39;&gt;
        &lt;input type=&#39;submit&#39; value=&#39;发送POST请求&#39; /&gt;
        &lt;/form&gt;
    &lt;/body&gt;
&lt;/html&gt;
&quot;&quot;&quot;

app = flask.Flask(__name__)

@app.route(&#39;/hello&#39;,methods=[&#39;GET&#39;,&#39;POST&#39;])
def helo():
    if flask.request.method == &#39;GET&#39;:
        return html_txt
    else:
        return &#39;收到POST请求，我是Flask!&#39;

if __name__ == &#39;__main__&#39;:
    app.run()
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20191017091055715.png" src="https://img-blog.csdnimg.cn/20191017091055715.png" /></p>
</div>
<div class="section" id="id493">
<h3>两种请求映射同一函数<a class="headerlink" href="#id493" title="永久链接至标题">¶</a></h3>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>import flask

html_txt = &quot;&quot;&quot;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;body&gt;
        &lt;h2&gt;收到GET请求&lt;/h2&gt;
        &lt;form method=&#39;post&#39;&gt;
        &lt;input type=&#39;submit&#39; value=&#39;发送POST请求&#39; /&gt;
        &lt;/form&gt;
    &lt;/body&gt;
&lt;/html&gt;
&quot;&quot;&quot;

app = flask.Flask(__name__)

@app.route(&#39;/hello&#39;,methods=[&#39;GET&#39;,&#39;POST&#39;])
def helo():
    if flask.request.method == &#39;GET&#39;:
        return html_txt
    else:
        return &#39;收到POST请求，我是Flask!&#39;

if __name__ == &#39;__main__&#39;:
    app.run()
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20191017091158155.png" src="https://img-blog.csdnimg.cn/20191017091158155.png" /></p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>请求url传递的参数

import flask

app = flask.Flask(__name__)

@app.route(&#39;/hello/&lt;name&gt;&#39;)
def helo(name):
    return &quot;你好,&quot; + name + &#39;!&#39;

if __name__ == &#39;__main__&#39;:
    app.run()
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20191017091248476.png" src="https://img-blog.csdnimg.cn/20191017091248476.png" /></p>
<p><strong>获取get请求参数的基本方式调用flask.request.args的get方法</strong></p>
<p>获得post请求使用flask.</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>import flask

html_txt = &quot;&quot;&quot;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;body&gt;
        &lt;h2&gt;收到GET请求&lt;/h2&gt;
        &lt;form method=&#39;post&#39;&gt;
        &lt;input type=&#39;text&#39; name=&#39;name&#39; placeholder=&#39;请输入你的姓名&#39; /&gt;
        &lt;input type=&#39;submit&#39; value=&#39;发送POST请求&#39; /&gt;
        &lt;/form&gt;
    &lt;/body&gt;
&lt;/html&gt;
&quot;&quot;&quot;

app = flask.Flask(__name__)

@app.route(&#39;/hello&#39;,methods=[&#39;GET&#39;,&#39;POST&#39;])
def helo():
    if flask.request.method == &#39;GET&#39;:
        return html_txt
    else:
        name = &#39;name&#39; in flask.request.form and flask.request.form[&#39;name&#39;]
        if name:
            return &#39;你是：&#39; + name + &#39;!&#39;
        else:
            return &#39;你没有输入姓名！&#39;

if __name__ == &#39;__main__&#39;:
    app.run(debug=True)
</pre></div>
</div>
</div>
</div>
<div class="section" id="cookiesession">
<h2>使用cookie和session<a class="headerlink" href="#cookiesession" title="永久链接至标题">¶</a></h2>
<div class="section" id="cookie">
<h3>使用cookie<a class="headerlink" href="#cookie" title="永久链接至标题">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">flask</span>

<span class="n">html_txt</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">&lt;!DOCTYPE html&gt;</span>
<span class="s2">&lt;html&gt;</span>
<span class="s2">    &lt;body&gt;</span>
<span class="s2">        &lt;h2&gt;收到GET请求&lt;/h2&gt;</span>
<span class="s2">        &lt;a href=&#39;/get_info&#39;&gt;获取cookie信息&lt;/a&gt;</span>
<span class="s2">    &lt;/body&gt;</span>
<span class="s2">&lt;/html&gt;</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">flask</span><span class="o">.</span><span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/set_info/&lt;name&gt;&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">set_cks</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">name</span> <span class="k">if</span> <span class="n">name</span> <span class="k">else</span> <span class="s1">&#39;anonymous&#39;</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">flask</span><span class="o">.</span><span class="n">make_response</span><span class="p">(</span><span class="n">html_txt</span><span class="p">)</span>
    <span class="n">resp</span><span class="o">.</span><span class="n">set_cookie</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="n">name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">resp</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/get_info&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get_cks</span><span class="p">():</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">flask</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">cookies</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;获取的cookie信息是:&#39;</span> <span class="o">+</span> <span class="n">name</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="session">
<h3>使用session<a class="headerlink" href="#session" title="永久链接至标题">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">flask</span>

<span class="n">html_txt</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">&lt;!DOCTYPE html&gt;</span>
<span class="s2">&lt;html&gt;</span>
<span class="s2">    &lt;body&gt;</span>
<span class="s2">        &lt;h2&gt;收到GET请求&lt;/h2&gt;</span>
<span class="s2">        &lt;a href=&#39;/get_info&#39;&gt;获取会话信息&lt;/a&gt;</span>
<span class="s2">    &lt;/body&gt;</span>
<span class="s2">&lt;/html&gt;</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">flask</span><span class="o">.</span><span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/set_info/&lt;name&gt;&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">set_cks</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">name</span> <span class="k">if</span> <span class="n">name</span> <span class="k">else</span> <span class="s1">&#39;anonymous&#39;</span>
    <span class="n">flask</span><span class="o">.</span><span class="n">session</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>
    <span class="k">return</span> <span class="n">html_txt</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/get_info&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get_cks</span><span class="p">():</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;name&#39;</span> <span class="ow">in</span> <span class="n">flask</span><span class="o">.</span><span class="n">session</span> <span class="ow">and</span> <span class="n">flask</span><span class="o">.</span><span class="n">session</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">name</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;获取的会话信息是:&#39;</span> <span class="o">+</span> <span class="n">name</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;没有相应会话信息。&#39;</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">secret_key</span> <span class="o">=</span> <span class="s1">&#39;dfadff#$#5dgfddgssgfgsfgr4$T^%^&#39;</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20191017091428178.png" src="https://img-blog.csdnimg.cn/20191017091428178.png" /></p>
</div>
</div>
<div class="section" id="id494">
<h2>渲染模板<a class="headerlink" href="#id494" title="永久链接至标题">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">flask</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">flask</span><span class="o">.</span><span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/hello&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">helo</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">flask</span><span class="o">.</span><span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;index.html&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20191017091452374.png" src="https://img-blog.csdnimg.cn/20191017091452374.png" />## 实战练习（实现文件上传）</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">flask</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">flask</span><span class="o">.</span><span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/upload&#39;</span><span class="p">,</span><span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">upload</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">flask</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;GET&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">flask</span><span class="o">.</span><span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;upload.html&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">file</span> <span class="o">=</span> <span class="n">flask</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">files</span><span class="p">[</span><span class="s1">&#39;file&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">file</span><span class="p">:</span>
            <span class="nb">file</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="nb">file</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>
            <span class="k">return</span> <span class="s1">&#39;上传成功！&#39;</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20191017091550412.png" src="https://img-blog.csdnimg.cn/20191017091550412.png" /></p>
<p>代码：https://github.com/MaoliRUNsen/maoli/tree/master/flask%E5%85%A5%E9%97%A8</p>
</div>
</div>
<div class="section" id="pythonexcel">
<h1>95、轻松搞定Python中的Excel办公自动化系列<a class="headerlink" href="#pythonexcel" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen</p>
<p>这篇是九十五篇、轻松搞定Python办公自动化系列。离收官还有五篇。</p>
<p>python针对excel有很多的第三方库可以用，比如openpyxl，xlwings、xlsxwriter、xlrd、xlwt、pandas、xlsxwriter、win32com、xlutils等等。</p>
<div class="section" id="openpyxl">
<h2>openpyxl<a class="headerlink" href="#openpyxl" title="永久链接至标题">¶</a></h2>
<p>我主要介绍openpyxl库的几类常见方法。</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>from openpyxl import load_workbook
wb = load_workbook(&quot;学生表.xlsx&quot;)
#打开工作表两种方式：
#方式一：通过工作表名称打开工作表
sheet=wb[&quot;sheet1&quot;]
#方式二：获取活跃的工作表
sheet=wb.active    #[&#39;sheet1&#39;]
#获取所有的工作表
wb.sheetnames    #[&#39;sheet1&#39;]
#修改工作表名称
sheet.title=&quot;students&quot;    
#获取工作表名称
sheet.title    #students
# 获取单元格（指定行，指定列）
sheet.cell(2,3)    #&lt;Cell &#39;students&#39;.C2&gt;
#方式一
sheet.cell(2,3).value    #60
#方式二
sheet[&quot;C2&quot;].value    #60
# 往单元格（指定行，指定列）中写入值
#方式一
sheet.cell(2,4).value=&quot;及格&quot;
#方式二
sheet[&quot;D3&quot;]=&quot;及格&quot;
#方式三
sheet.cell(4,4,&quot;良好&quot;)
#保存工作簿
wb.save(&quot;学生表.xlsx&quot;)
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200714113548360.png" src="https://img-blog.csdnimg.cn/20200714113548360.png" /></p>
</div>
<div class="section" id="xlrd-xlwt-xlutils">
<h2>xlrd&amp;xlwt&amp;xlutils<a class="headerlink" href="#xlrd-xlwt-xlutils" title="永久链接至标题">¶</a></h2>
<p>xlrd&amp;xlwt&amp;xlutils 顾明思意是由以下三个库组成：</p>
<ul class="simple">
<li>xlrd：用于读取 Excel 文件；</li>
<li>xlwt：用于写入 Excel 文件；</li>
<li>xlutils：用于操作 Excel 文件的实用工具，比如复制、分割、筛选等；</li>
</ul>
<p>接下来我们就从写入 Excel 开始，话不多说直接看代码如下：</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span># 导入 xlwt 库
import xlwt

# 创建 xls 文件对象
wb = xlwt.Workbook()

# 新增两个表单页
sh1 = wb.add_sheet(&#39;成绩&#39;)
sh2 = wb.add_sheet(&#39;汇总&#39;)

# 然后按照位置来添加数据,第一个参数是行，第二个参数是列
# 写入第一个sheet
sh1.write(0, 0, &#39;姓名&#39;)
sh1.write(0, 1, &#39;成绩&#39;)
sh1.write(1, 0, &#39;张三&#39;)
sh1.write(1, 1, 88)
sh1.write(2, 0, &#39;李四&#39;)
sh1.write(2, 1, 99.5)

# 写入第二个sheet
sh2.write(0, 0, &#39;总分&#39;)
sh2.write(1, 0, 187.5)

# 最后保存文件即可
wb.save(&#39;test.xls&#39;)
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200714114209451.png" src="https://img-blog.csdnimg.cn/20200714114209451.png" /></p>
<p><img alt="https://img-blog.csdnimg.cn/20200714114230563.png" src="https://img-blog.csdnimg.cn/20200714114230563.png" /></p>
<p>读取 Excel 其实也不难，请看如下代码：</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span># 导入 xlrd 库
import xlrd

# 打开刚才我们写入的 test_w.xls 文件
wb = xlrd.open_workbook(&quot;test.xls&quot;)

# 获取并打印 sheet 数量
print( &quot;sheet 数量:&quot;, wb.nsheets)

# 获取并打印 sheet 名称
print( &quot;sheet 名称:&quot;, wb.sheet_names())

# 根据 sheet 索引获取内容
sh1 = wb.sheet_by_index(0)
# 或者
# 也可根据 sheet 名称获取内容
# sh = wb.sheet_by_name(&#39;成绩&#39;)

# 获取并打印该 sheet 行数和列数
print( u&quot;sheet %s 共 %d 行 %d 列&quot; % (sh1.name, sh1.nrows, sh1.ncols))

# 获取并打印某个单元格的值
print( &quot;第一行第二列的值为:&quot;, sh1.cell_value(0, 1))

# 获取整行或整列的值
rows = sh1.row_values(0) # 获取第一行内容
cols = sh1.col_values(1) # 获取第二列内容

# 打印获取的行列值
print( &quot;第一行的值为:&quot;, rows)
print( &quot;第二列的值为:&quot;, cols)

# 获取单元格内容的数据类型
print( &quot;第二行第一列的值类型为:&quot;, sh1.cell(1, 0).ctype)

# 遍历所有表单内容
for sh in wb.sheets():
    for r in range(sh.nrows):
        # 输出指定行
        print( sh.row(r))
</pre></div>
</div>
<p>修改时就需要用到 xlutils 中的方法了。直接上代码，来看下最简单的修改操作：</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span># 导入相应模块
import xlrd
from xlutils.copy import copy

# 打开 excel 文件
readbook = xlrd.open_workbook(&quot;test.xls&quot;)

# 复制一份
wb = copy(readbook)

# 选取第一个表单
sh1 = wb.get_sheet(0)

# 在第四行新增写入数据
sh1.write(3, 0, &#39;王亮&#39;)
sh1.write(3, 1, 59)


# 保存
wb.save(&#39;test.xls&#39;)
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200714114349468.png" src="https://img-blog.csdnimg.cn/20200714114349468.png" /></p>
</div>
<div class="section" id="excel">
<h2>合并文件夹中的多个Excel文件<a class="headerlink" href="#excel" title="永久链接至标题">¶</a></h2>
<p>一两个直接用excel不合并表的功能简单的要死！上百个用代码。数据涉及到隐私，这里不说了。就是很多个excel。</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>import os
import xlwt
import xlrd
import xlutils.copy
import time
&quot;&quot;&quot;
需求：
    1. 将上千个Excel表合并成一个表里
    2. 不管你用什么方法，实现效果就行
思路分析：
    1. 创建一个空表名叫&quot;总表&quot;，表格形式须和合并表的一样
    2. 获取需要合并文件夹中的所有excel表的名字（文件名)
    3. 开始遍历excel表
    4. 先读取数据，然后写入事先创建好总表中
    5. 当读取完下一个待合并表的数据，然后准备写入到总表时，必须先获取到总表的行数，不然之前的数据将会被覆盖掉。
    6. 遍历结束，保存总表的数据
项目运行：
    1. 将所有需要合并的表放到一个文件夹中，名叫excels
    2. autoMerge.py文件和excels文件夹同级
    3. 运行该.py文件，会在把合并表放到destDir夹中
&quot;&quot;&quot;

# 1.总表初始化(不友好，还需要自行写好表头列表，对非程序员不友好)
def initExcel(path,excelTitle,excel_sheet_Name):
    &quot;&quot;&quot;
    :param path: 合并总表的路径
    :param excelTitle: 总表的表头
    :param excel_sheet_Name: 合并总表的sheet名称
    :return: 返回总表是否初始化成功
    &quot;&quot;&quot;
    try:
        # 创建一个工作簿
        book = xlwt.Workbook(encoding=&quot;utf-8&quot;)
        # 创建表单
        sheet = book.add_sheet(excel_sheet_Name)
        # 写入表头
        for i in range(0,len(excelTitle)):
            sheet.write(0, i, excelTitle[i])
        book.save(path)
        return True
    except Exception as e:
        return False

# 1.1 总表初始化(用来解决上面的问题)
def initExcel2(destExcel_path, sourceExcel_path,total_sheet_name):
    &quot;&quot;&quot;
    :param destExcel_path: 合并总表excel的路径
    :param sourceExcel_path: 需要合并excel的路径
    :param total_sheet_name: 合并总表后sheet的名字
    :return: 返回False or True
    &quot;&quot;&quot;
    try:
        # 创建一个工作簿
        book = xlwt.Workbook(encoding=&quot;utf-8&quot;)
        # 创建表单,并给表单起个名字
        sheet = book.add_sheet(total_sheet_name)
        # 获取待需合并excel的所有文件
        excel_name_list = get_All_Excelname(sourceExcel_path)
        # 一个待合并execl的路径
        excel_path = sourceExcel_path + &quot;/&quot; + excel_name_list[0]
        # 获取excel的sheet
        excel_sheet = get_excel_sheet(excel_path)
        # 获取excel的表头数据
        excel_title_list = excel_sheet.row_values(0)
        # 写入表头
        for i in range(0,len(excel_title_list)):
            sheet.write(0, i, excel_title_list[i])
        book.save(destExcel_path)
        return True
    except Exception as e:
        return False

# 2.获取需要合并的所有的excel文件名
def get_All_Excelname(path):
    &quot;&quot;&quot;

    :param path: 待合并excel文件的路径
    :return:
    &quot;&quot;&quot;
    excelName_list = os.listdir(path)
    # print(excelName_list)
    return excelName_list


# 返回excel表的sheet对象
def get_excel_sheet(path):
    # 打开指定路径的excle表
    book = xlrd.open_workbook(path)
    # 获取excle中的表单
    sheet = book.sheet_by_index(0)
    # 返回sheet对象
    return sheet

# 返回总表的wtbook,sheet对象
def get_total_excel_sheet(path):
    &quot;&quot;&quot;

    :param path: 存放总表的path
    :return:
    &quot;&quot;&quot;
    book = xlrd.open_workbook(path, formatting_info=True)
    wtbook = xlutils.copy.copy(book)
    wtsheet = wtbook.get_sheet(0)
    return wtbook,wtsheet



# 4. 开始遍历(合并excel表)
def writeExcel(destExcel_path,source_path,excelName_list):
    &quot;&quot;&quot;

    :param destExcel_path: 合并总表存放的路径
    :param source_path: 需要合并excel的路径
    :param excelName_list: 需要合并excel表的文件名称
    :return:
    &quot;&quot;&quot;
    # 用来记录总表中的行数
    total_excel_row = 1
    # 获取总表的book,sheet
    total_book,total_sheet = get_total_excel_sheet(destExcel_path)
    for excelName in excelName_list:
        # 文件路径
        excelPath = source_path + excelName
        # 获取表的sheet对象
        sheet = get_excel_sheet(excelPath)
        # 获取行数
        n_rows = sheet.nrows
        # 开始遍历读取数据，并写入数据
        for row_index in range(1,n_rows):
            # 获取一行的数据，列表形式
            row_data_list = sheet.row_values(row_index)
            # 将数据写入到总表中
            for j in range(0,len(row_data_list)):
                total_sheet.write(total_excel_row,j,str(row_data_list[j]))
            # 每写一行，总表行数加1
            total_excel_row = total_excel_row + 1
    total_book.save(destExcel_path)
    print(&quot;数据合并已完成&quot;)
    print(&quot;合并后的数据共有%d条&quot; % (total_excel_row - 1))

# 创建文件夹
def makeDir(path):
    &quot;&quot;&quot;
    :param path: 传入需要创建文件夹的路径
    :return:
    &quot;&quot;&quot;
    if not os.path.exists(path):
        os.mkdir(path)

def main():
    # 待需合并的excel文件夹路径
    source_excel_path = &quot;./excels/&quot;
    # 存放合并后的excel表文件夹路径
    dest_dir = &quot;./destDir&quot;
    # 创建文件夹
    makeDir(dest_dir)
    # 合并excel表名
    total_excel_name = &quot;总表.xls&quot;
    # 合并表存放路径
    total_excel_path = dest_dir + &quot;/&quot; + total_excel_name
    # 合并总表中的sheet的名字
    total_excel_sheet_name = &quot;汇总表&quot;
    # 初始化表
    flag = initExcel2(total_excel_path,source_excel_path,total_excel_sheet_name)
    if flag:
        excelName_list = get_All_Excelname(&quot;./excels&quot;)
        # 打印有多少个excel表
        print(&quot;总共有%d个excel表需要合并&quot; %len(excelName_list))
        # 写数据
        writeExcel(total_excel_path,source_excel_path, excelName_list)
    else:
        print(&quot;初始化表失败&quot;)


if __name__ == &#39;__main__&#39;:
    main()
    time.sleep(3)
</pre></div>
</div>
</div>
</div>
<div class="section" id="pythonppt">
<h1>96、轻松搞定Python中的PPT办公自动化系列<a class="headerlink" href="#pythonppt" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen</p>
<p>这篇是九十六、轻松搞定Python中的PPT办公自动化系列。离收官还有四篇。</p>
<div class="section" id="python-pptx">
<h2>安装python-pptx<a class="headerlink" href="#python-pptx" title="永久链接至标题">¶</a></h2>
<p>python-pptx就是为了进行PPT的操作而生，下面大致介绍一下这个python库。安装就是<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">python-pptx</span></code>。下面以两个例子大致了解一下这个库中某些函数的用法。第一个例子用来讲述向幻灯片中增加基本内容；</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>from pptx import Presentation # 导入库

prs = Presentation() # 创建PPT文档

# 对幻灯片进行布局
title_slide_layout = prs.slide_layouts[0] 
slide = prs.slides.add_slide(title_slide_layout)
title = slide.shapes.title
subtitle = slide.placeholders[1]

# 各各部分添加内容
title.text = &quot;Hello, World!&quot;
subtitle.text = &quot;我是python-pptx!&quot;

prs.save(&#39;增加内容.pptx&#39;) # 保存PPT文档
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200714121431696.png" src="https://img-blog.csdnimg.cn/20200714121431696.png" /></p>
<p>第二个例子用来介绍向幻灯片中增加一个表格，代码如下。</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>from pptx import Presentation
from pptx.util import Inches

prs = Presentation()
title_only_slide_layout = prs.slide_layouts[5]
slide = prs.slides.add_slide(title_only_slide_layout)
shapes = slide.shapes

shapes.title.text = &#39;增加一个表格&#39;

rows = cols = 3
left = top = Inches(2.0)
width = Inches(6.0)
height = Inches(0.8)

table = shapes.add_table(rows, cols, left, top, width, height).table

# 设置表格列宽
table.columns[0].width = Inches(2.0)
table.columns[1].width = Inches(2.0)
table.columns[2].width = Inches(2.0)

# 表格头
table.cell(0, 0).text = &#39;姓名&#39;
table.cell(0, 1).text = &#39;年龄&#39;

# 添加表格内容
table.cell(1, 0).text = &#39;张三&#39;
table.cell(1, 1).text = &#39;42&#39;

table.cell(2,0).text = &#39;李四&#39;
table.cell(2,1).text = &#39;24&#39;

prs.save(&#39;增加表格.pptx&#39;) # 保存PPT
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200714121544672.png" src="https://img-blog.csdnimg.cn/20200714121544672.png" /></p>
<p>python-pptx学习网站：https://python-pptx.readthedocs.io/en/latest/</p>
</div>
<div class="section" id="ppt">
<h2>将一个PPT文件中的所有文字批量导出<a class="headerlink" href="#ppt" title="永久链接至标题">¶</a></h2>
<p>有时，我们需要将一个PPT文件中的所有文字批量导出，以便查看，或者复制什么的。一页一页PPT去复制粘贴，会很不方便。下面我们就来试试用Python搞定这个吧。</p>
<p>使用的文件是我化工专业的设备材料选择的东西。
<img alt="https://img-blog.csdnimg.cn/20200714122326305.png" src="https://img-blog.csdnimg.cn/20200714122326305.png" /></p>
<p>下面的代码已经将名字改为<code class="docutils literal notranslate"><span class="pre">测试.pptx</span></code></p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>#提取所有文本字符
from pptx import Presentation
data = []
prs = Presentation(&#39;测试.pptx&#39;)
for slide in prs.slides: #遍历每页PPT
    for shape in slide.shapes: #遍历PPT中的每个形状
        if shape.has_text_frame: #判断该是否包含文本，保证有文本才提取
            for paragraph in shape.text_frame.paragraphs: #按文本框中的段落提取
                data.append(paragraph.text) #提取一个段落的文本，就存到列表data中

#写入文本文件
TxtFile = open(&#39;测试.txt&#39;, &#39;w&#39;,encoding=&#39;utf-8&#39;)
for i in data:
    TxtFile.write(i+&#39;\n&#39;) #写入并换行，以保证正确分段
TxtFile.close() #保存

#写入word文件
import docx
doc=docx.Document()#创建一个word文件对象
for i in data:
    doc.add_paragraph(i) #增加一个段落，并将列表中的一个字符串写入word文件
doc.save(&#39;测试.docx&#39;)#保存
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200714125031419.png" src="https://img-blog.csdnimg.cn/20200714125031419.png" /></p>
</div>
</div>
<div class="section" id="pythonpdf">
<h1>97、轻松搞定Python中的PDF办公自动化系列<a class="headerlink" href="#pythonpdf" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen</p>
<p>这篇是九十七、轻松搞定Python中的PDF办公自动化系列。离收官还有三篇。</p>
<div class="section" id="pdfminer3k">
<h2>pdfminer3k<a class="headerlink" href="#pdfminer3k" title="永久链接至标题">¶</a></h2>
<p>PDF的基本操作主要是读取、创建，合并等操作。使用Python的第三方包pdfminer3k读写合并PDF文件变得非常简单。这里不推荐使用PyPDF2，因为现在完全不维护的样子。</p>
<p>安装 pdfminer3k</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">pdfminer3k</span>
</pre></div>
</div>
</div>
<div class="section" id="pdf">
<h2>读取PDF<a class="headerlink" href="#pdf" title="永久链接至标题">¶</a></h2>
<p>我是使用的是我的专业课程设计 <code class="docutils literal notranslate"><span class="pre">化工原理课程换热器设计.pdf</span> </code>，具体内容如下。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200715100841782.png" src="https://img-blog.csdnimg.cn/20200715100841782.png" /></p>
<p>还有的是PyPDF2 是不能读取中文的，只能提取英文字符串。因此我建议使用pdfminer来读取中文。下面代码就是提取PDF的文字到txt文件中。</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>from pdfminer.pdfinterp import PDFResourceManager, process_pdf
from pdfminer.converter import TextConverter
from pdfminer.layout import LAParams
from io import StringIO


def convert_pdf(path):
    rsrcmgr = PDFResourceManager()
    retstr = StringIO()
    laparams = LAParams()
    device = TextConverter(rsrcmgr, retstr, laparams=laparams)
    fp = open(path, &#39;rb&#39;)
    process_pdf(rsrcmgr, device, fp)

    fp.close()
    device.close()
    out = retstr.getvalue()
    retstr.close()
    return out


a = convert_pdf(&#39;化工原理课程换热器设计.pdf&#39;)
with open(&quot;a.txt&quot; ,&#39;w&#39;,encoding=&#39;utf-8&#39;) as f:
    f.write(a)
</pre></div>
</div>
<p><img alt="https://img-blog.csdnimg.cn/20200715102714360.png" src="https://img-blog.csdnimg.cn/20200715102714360.png" /></p>
</div>
</div>
<div class="section" id="pythonmarkdown">
<h1>98、轻松搞定Python中的Markdown系列<a class="headerlink" href="#pythonmarkdown" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen</p>
<p>这篇是九十八、轻松搞定Python中的Markdown系列。离收官还有二篇。</p>
<div class="section" id="tomd">
<h2>tomd<a class="headerlink" href="#tomd" title="永久链接至标题">¶</a></h2>
<p>本文是介绍tomd工具，大家可以去看<a class="reference external" href="https://github.com/gaojiuli/tomd/">其</a>README的中文翻译。</p>
<p>安装</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">tomd</span>
</pre></div>
</div>
<p>这个tomd应该是一个人开发的。直接看官方的示例，这里不罗嗦了，其实很简单的。</p>
</div>
<div class="section" id="mddocx">
<h2>将md批量转为docx<a class="headerlink" href="#mddocx" title="永久链接至标题">¶</a></h2>
<p>将markdown快速转为word格式，可以使用小工具pandoc, 非常好用, 这个是我在文本编辑器Typora导出功能发现的。</p>
<p>比如我有一个名为Python资料.md的文件, 我只需在命令行运行</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>pandoc Python资料.md -o Python资料.docx
</pre></div>
</div>
<p>pandoc支持相互转换的格式, 多的惊人!</p>
<p>但是如果用命令，那么一个一个的就是傻逼式行为，我就拿之前的文章做一个小示例。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200715190539619.png" src="https://img-blog.csdnimg.cn/20200715190539619.png" /></p>
<p>下面就是简化的操作的代码。</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span>import os

# 当前目录下所有文件的名字
all_files_name = os.listdir()

# 保存所有md文件的名字
all_md_files = []

# 获取目录下的md文件, 并保存
for file_name in all_files_name:
    try:
        if file_name[-3:] == &quot;.md&quot;:
            all_md_files.append(file_name)
    except Exception as e:
        print(e)
# 将md文件批量装换为docx
for md_file in all_md_files:
    try:
        tmp_doc_name = md_file[0: -3] + &quot;.docx&quot;
        new_command = &quot;pandoc &quot;+ md_file + &quot; -o &quot; + tmp_doc_name
        result = os.popen(new_command).readlines()
        if len(result) == 0:
            print(md_file, &quot;转换成功&quot;)
    except Exception as e:
        print(e)
</pre></div>
</div>
<p>运行结果
<img alt="https://img-blog.csdnimg.cn/20200715191111381.png" src="https://img-blog.csdnimg.cn/20200715191111381.png" /></p>
<p>下面就是结果图</p>
<p><img alt="https://img-blog.csdnimg.cn/20200715191122461.png" src="https://img-blog.csdnimg.cn/20200715191122461.png" /></p>
<p>最后补充下关于Markdown的操作</p>
<ul class="simple">
<li>#：此为Markdown中的标题语法，但是只支持到四级标题。</li>
<li>-：此为Markdown中的无须项目符号语法，笔者在此保留并进行拓展，和标题类似，可以键入多个减号来实现多级项目符号，最多三级。</li>
<li>**：此为Markdown中的粗体语法，笔者在此保留并简化，规定此语法只能在正文段落中使用。</li>
<li>$：此为Markdown中的Latex公式语法，笔者在此保留，为了便于添加到Word中，此处将公式转化为图片。</li>
<li>!:此为Markdown中的图片语法的简化写法</li>
</ul>
<p>在此也向读者安利一个Markdown文本编辑器Typora，非常好用！不是打广告。</p>
</div>
</div>
<div class="section" id="id495">
<h1>99、Python所学经验分享<a class="headerlink" href="#id495" title="永久链接至标题">¶</a></h1>
<p>﻿&#64;Author：Runsen</p>
<p>这是倒数第二篇，Python所学经验分享。</p>
<div class="section" id="id496">
<h2>关于我<a class="headerlink" href="#id496" title="永久链接至标题">¶</a></h2>
<p>某不知名 辣鸡大学的大三学生，读的是化工专业。目前学分绩点可是2.08。我基本是专业排名中靠后的。作为一个曾经高考落榜的人，我并不是什么大神。</p>
<p>python 那极为简洁与优美的语法给了当时的我极大的震撼，时至今日，写 py 代码对我而言依然是一种带有艺术意味的享受。</p>
<p>大一的时候，学习过一个学期的c语言，我相信大部分人都学过，期末考试过后就基本没有再用过。</p>
<p>我最初学python是应该是大一下，python特别容易入门，而且应用广泛，然后就培训机构迷惑了，大二傻傻的去培训了，其实经过培训，掌握了方法。于是我当机立断，打开百度就去搜索python和Java基础教程了，在自学中感觉很快乐。</p>
<p>我在整个学习Python的过程中，会看别人的博客和书，书面上出的Python相关的书我基本都看过。还有就是去看python标准库的代码，剩下的就是有勇气给开源社区提一些issue和pr。</p>
</div>
<div class="section" id="id497">
<h2>书籍推荐<a class="headerlink" href="#id497" title="永久链接至标题">¶</a></h2>
<p>给大家推荐的只有两本书</p>
<p>一本是《Python3基础教程》，大一下就是看这本东西。这本书浅显易懂，很全面，目前很多东西我还是不懂，这本书的作者实力很强。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200716095234479.png" src="https://img-blog.csdnimg.cn/20200716095234479.png" /></p>
<p>第二本是《Python3标准库》，Python就是导包侠，那些Python大佬基本就比你会导包而已。你比他们会更多的库，然后开发自己库，让别人学你的库，那么你就是大佬了。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200716095520902.png" src="https://img-blog.csdnimg.cn/20200716095520902.png" /></p>
<p><strong>下面分享所学经验</strong></p>
</div>
<div class="section" id="id498">
<h2>经验一：有个小目标<a class="headerlink" href="#id498" title="永久链接至标题">¶</a></h2>
<p>让我们定一个小目标：怎么学习Py了，先定个小目标吧：在Pycharm上运行python，点亮一个灯。</p>
<p>记得在2018年暑假的时候，我在自己电脑对面的墙上贴了四个大字“暑假计划”。每一次抬头都能看到这四个字。我知道这四个字背后代表着什么，那是我给自己定的一个小目标。</p>
<p>暑假要求搞PR，思维导图，日语水平提高。从坚持到有效坚持的意识转变，能力就会有很大的提高。</p>
<p>我相信成长率的存在。每一个小事，每个步的计划都能体现出从小白到菜鸟的变化。</p>
</div>
<div class="section" id="id499">
<h2>经验二：一个教程多看几遍，多看几个教程<a class="headerlink" href="#id499" title="永久链接至标题">¶</a></h2>
<p>我第一个看的就是菜鸟教程，的确很符合它的名字，难度确实很符合菜鸟的标准，但是风格和教科书别无二致，毕竟那是我就是一个菜鸟。</p>
<p>下面给大家推荐一个Python资源。有位名叫骆昊 (jackfrued) 的资深程序员，为大家规划了一条从“从新手到大师”的百天之路。</p>
<p>从全方位熟悉语言，到Python的进阶用法，再到天南地北的实战攻略：只要沿着这条路走下去，就都会遇到的。</p>
<p><img alt="https://img-blog.csdnimg.cn/20200716103901755.png" src="https://img-blog.csdnimg.cn/20200716103901755.png" /></p>
<p>学Python善用搜索引擎获得自己想要的答案，学会看报错信息;一开始学习的时候，往往会忽视这一点。</p>
</div>
<div class="section" id="id500">
<h2>经验三：学Python就是导包侠<a class="headerlink" href="#id500" title="永久链接至标题">¶</a></h2>
<p>python目前很火，因为它确实是目前上面上最适合做机器学习，大数据分析，人工智能的语言，毕竟库多。</p>
<p>Python这玩意脚本语言入门的确不难，现成的包也一堆基本就是拿来就用，但只是入个门，自学真的绰绰有余</p>
<p>众所周知我等写python的人都是调包侠，怎么可能比得上无敌的c和cpp呢。</p>
<p>python又慢语法又low，不配称为编程语言，可长期以来被开发者们吹的漫天飞，同时饱受其他语言开发者的调侃和诟病以及鄙视。</p>
<p>cpp语法高深莫测，自己的代码别人想读懂是难上加难，在大大增加安全性的同时，还显示出编程这项工作的高技术性，难度性，故深受程序员们的喜爱。</p>
<p>本人误入歧途学习python，最近正在努力转cpp和Java，希望能早日走上正轨。</p>
</div>
<div class="section" id="id501">
<h2>经验四：持续写博客记录<a class="headerlink" href="#id501" title="永久链接至标题">¶</a></h2>
<p>决定开始写博客之前，我也看到过一些技术大牛在文章里面建议大家现在就开始写博客，说这是一个很好的总结学到的东西的方式，以及博客写多了就会越写越顺手，难的是开始的过程。</p>
<p>我觉得很有道理，加上我在大二培训的时候，也被师傅逼着写博客，也学了很多知识，其实这100篇教程很多是那是开始的。</p>
<p>开始写博客之后，就会发现这是一件很快乐的事情。能够把学到的知识总结下来，让别人看懂，会带来一种成就感。看着自己的文章数越来越多，能够感受到自己的进步，能让自己学习时更有动力。</p>
</div>
<div class="section" id="it-python">
<h2>经验五：混IT，只会Python未来没戏<a class="headerlink" href="#it-python" title="永久链接至标题">¶</a></h2>
<p>现在铺天盖地宣传python，我觉得是因为教Python比较容易。一看这广告把python吹得天花乱坠的，不学python都要变成21世纪的文盲了，别人学了python工作效率蹭蹭的往上提。</p>
<p>在我看来这就是在贩卖焦虑，你仔细想想，培训班几个月出来的是国家要的人工智能人才吗？会python的人，工作效率就能提高了么？</p>
<p>理想的确很美好，但现实也是真的现实，你敲代码改bug补充所需编程知识的时间可能比你手动去完成这些工作还要费心费力，更别提以后使用场景变更，还得重写代码。</p>
<p>这些广告说辞里面最靠谱的可能就是“初次编程选Python,零基础易上手”，但是学完python就可以找到一份月薪20k、30k的工作了么？</p>
<p>“你要悄悄学Python，然后惊艳全世界”</p>
<p>广告铺天盖地的来，从来没听过“你要悄悄学c＃，惊艳全世界”的吧，至少可以分析出来。</p>
<p>派森简单易学，用处广，卖课很挣钱。</p>
<p>因此，Python只能做第二编程语言来搞，第一我选用Java。</p>
</div>
</div>
<div class="section" id="id502">
<h1>100、完结篇<a class="headerlink" href="#id502" title="永久链接至标题">¶</a></h1>
<p>不知不觉，Runsen已经完成100篇，应该是从大二算起，已经一年多。</p>
<p>微信：RunsenLiu</p>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; 版权所有 2020, Runsen

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>